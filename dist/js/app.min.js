/**
 * inperspectiverecords - Inperspective Records WordPress Theme
 * @author         Simon van Stipriaan <simon@svsdesign.co.uk>
 * @build          Wed, Jun 17, 2020 3:54 PM ET
 * @release        ac775178490fa216f330f1678833117d4e08d5ab [master]
 * @copyright      Copyright (c) 2020, svsdesign
 * @version        v1.0.0
 * @link           https://www.inperspectiverecords.com
 */
function domReady(e){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",e):e()}function detectTouch(){if("ontouchstart"in window){$("body").removeClass("is-not-touch"),$("body").addClass("is-touch");try{for(var e in document.styleSheets){var a=document.styleSheets[e];if(a.rules)for(var t=a.rules.length-1;0<=t;t--)a.rules[t].selectorText&&a.rules[t].selectorText.match(":hover")&&a.deleteRule(t)}}catch(e){}}else $("body").removeClass("is-touch"),$("body").addClass("is-not-touch")}function SetAppHeight(){function e(){document.documentElement.style.setProperty("--site-height","".concat(window.innerHeight,"px"))}window.addEventListener("resize",e),e()}function navigation(){function e(){i.animate({d:c},100,mina.easin)}function a(){i.animate({d:r},100,mina.easin)}var t,o,s=document.getElementById("itoggle"),i=(Snap(s),Snap.select("#idot")),l=Snap.select("#idot-path"),n=Snap.select("#minus"),c=(i.node.getAttribute("d"),n.node.getAttribute("d")),r=l.node.getAttribute("d"),d=document.body,g=document.getElementById("head-nav");g&&(t=g.getElementsByClassName("navigation-toggle")[0],bgclose=g.getElementsByClassName("inp-bg-close")[0],o=g.getElementsByTagName("ul")[0],t&&(o&&o.childNodes.length?(bgclose.onclick=function(){-1==o.className.indexOf("navigation-item")&&(o.className="navigation-item"),-1!=t.className.indexOf(" toggled-on")?(d.className=d.className.replace(" toggled-on",""),t.className=t.className.replace(" toggled-on",""),o.className=o.className.replace(" toggled-on",""),a()):(d.className+=" toggled-on",t.className+=" toggled-on",o.className+=" toggled-on",e())},t.onclick=function(){-1==o.className.indexOf("navigation-item")&&(o.className="navigation-item"),-1!=t.className.indexOf(" toggled-on")?(d.className=d.className.replace(" toggled-on",""),t.className=t.className.replace(" toggled-on",""),o.className=o.className.replace(" toggled-on",""),a()):(d.className+=" toggled-on",t.className+=" toggled-on",o.className+=" toggled-on",e(),document.addEventListener("touchmove",function(e){e.preventDefault()},!1))},$(".navigation-toggle").hasClass("toggled-on")&&(d.className=d.className.replace(" toggled-on",""),t.className=t.className.replace(" toggled-on",""),o.className=o.className.replace(" toggled-on",""),i.animate({d:r},100,mina.easin))):t.style.display="none"))}function orientation(){var e=$(window).width();$(window).height()<e?($("body").addClass("horizontal"),$("body").removeClass("vertical")):($("body").removeClass("horizontal"),$("body").addClass("vertical"))}function opacity(){$("body").imagesLoaded(function(){setTimeout(function(){$("body").addClass("loaded")},200)})}function devGrid(){var e,a=$(".dev-toggle"),t=$("body");a.click(function(){t.hasClass("dev-on")?t.removeClass("dev-on"):t.addClass("dev-on")});var o=!1,s=200;function i(){new Date-e<s?setTimeout(i,s):(o=!1,$(window).height(),orientation())}$(window).resize(function(){e=new Date,!1===o&&(o=!0,setTimeout(i,s))})}function menuClasses(e,a){$(".menu-item."+a).each(function(){$(this).removeClass(a)}),$('.menu-item > a[href$="'.concat(e.next.url.path,'"]')).closest(".menu-item").each(function(){$(this).addClass(a)})}function recordanimation(){console.log("each record animation"),$(".record-circle-container").each(function(){var e=$(this),a=$(this).find(".record-circle");e.removeClass("active","rotating","rotated"),a.removeClass("rotating"),e.css("pointer-events","initial"),a.hover(function(){a.hasClass("rotating")?(console.log("has class rotatting"),a.removeClass("rotating"),a.removeClass("rotate"),e.removeClass("active")):(console.log("DOES NOT have class rotatting"),a.addClass("rotating"),a.addClass("rotate"),e.addClass("active"))})}),$(".record-square-container").each(function(){console.log("each square container");var e=$(this),a=$(this).find(".flip-card");e.removeClass("active","flipping","flipped"),a.removeClass("flipping"),e.css("pointer-events","initial"),a.hover(function(){console.log("this square hover"),a.hasClass("flipping")?(console.log("has class flipping"),a.removeClass("flipping"),a.removeClass("flip"),e.removeClass("active")):(console.log("DOES NOT have class flipping"),a.addClass("flipping"),a.addClass("flip"),e.addClass("active"))})})}function homegallery(){$("body").find(".featured-home-carousel").flickity({imagesLoaded:!0,setGallerySize:!1,percentPosition:!1,fade:!0,autoPlay:6e3,pauseAutoPlayOnHover:!1,draggable:!1,freeScroll:!1,wrapAround:!0,arrowShape:{x0:15,x1:65,y1:50,x2:75,y2:40,x3:35}})}function homereleasegallery(){$("body").find(".release-home-carousel").flickity({imagesLoaded:!0,setGallerySize:!1,percentPosition:!1,autoPlay:6e3,pauseAutoPlayOnHover:!0,draggable:!1,freeScroll:!1,wrapAround:!0,arrowShape:{x0:15,x1:65,y1:50,x2:75,y2:40,x3:35}})}function eventsview(){var e=$(".release-view"),a=$("body");e.click(function(){var e;a.hasClass("release-list-view")?(e=$(".height-item.active"),a.removeClass("release-list-view"),$("html, body").animate({scrollTop:e.offset().top+1})):(e=$(".height-item.active"),a.addClass("release-list-view"),$("html, body").animate({scrollTop:e.offset().top}))})}function gallery(e){console.log("gallery function"),Flickity.createMethods.push("_createPrevNextCells"),Flickity.prototype._createPrevNextCells=function(){this.on("select",this.setPrevNextCells)},Flickity.prototype.setPrevNextCells=function(){changeSlideClasses(this.previousSlide,"remove","is-previous"),changeSlideClasses(this.nextSlide,"remove","is-next"),this.previousSlide=this.slides[this.selectedIndex-1],this.nextSlide=this.slides[this.selectedIndex+1],changeSlideClasses(this.previousSlide,"add","is-previous"),changeSlideClasses(this.nextSlide,"add","is-next")},e.find(".gallery-carousel").flickity({imagesLoaded:!0,setGallerySize:!1,percentPosition:!1,freeScroll:!0,wrapAround:!0,arrowShape:{x0:15,x1:65,y1:50,x2:75,y2:40,x3:35}})}function changeSlideClasses(e,a,t){e&&e.getCellElements().forEach(function(e){e.classList[a](t)})}function init$1(){eventsview(),function(){var o,s,i,l,n,e,c=document.querySelector(".carousel"),r=c.querySelectorAll(".carousel__cell"),a=$(".carousel").find(".carousel__cell"),d=c.offsetWidth,g=c.offsetHeight,m=(i=!!$("body").hasClass("horizontal"))?"rotateY":"rotateX",t=$(".scene-height"),h=$(".height-item"),p=t.outerHeight(),u=h.length,f=h.outerHeight(),y=360/u,v=(t.find(".height-item"),$(".height-item").height()/2),C=(p=$(".scene-height").height())-2*v;function b(){var e;e=!!$("body").hasClass("horizontal"),m=e?"rotateY":"rotateX",function(){c=document.querySelector(".carousel"),d=c.offsetWidth,g=c.offsetHeight,n=360/(s=u);var e=i?d:g;l=Math.round(e/2/Math.tan(Math.PI/s));for(var a=0;a<r.length;a++){var t,o=r[a];a<s?(o.style.opacity=1,t=n*a,o.style.transform=m+"("+t+"deg) translateZ("+l+"px)"):(o.style.opacity=0,o.style.transform="none")}}()}scrollItems=a.map(function(){var e=$(this).attr("id"),a=$(".height-item").filter("[data-active-item='"+e+"']");if(a.length)return a}),c.style.transform="translateZ(-720px)"+m+"(0deg)",setTimeout(function(){var e=$(window).scrollTop();$(window).scrollTop(e+1),$(".scene").addClass("loaded")},750),$(window).scroll(function(){$(window).scrollTop()>C?$(".height-item:last-child").addClass("last-end"):$(".height-item:last-child").removeClass("last-end"),fromTop=$(this).scrollTop(),halffromBottomitem=$(".height-item:last-child").scrollTop(),ratio=p/360,wS=fromTop/ratio;var e=-wS;-1*(360-y)<e&&(c.style.transform="translateZ("+-l+"px) "+m+"("+e+"deg)");var a=scrollItems.map(function(){if($(this).offset().top<fromTop+f/2)return this}),t=(a=a[a.length-1])&&a.length?a[0].id:"";o!==t&&(o=t,$(".height-item").removeClass("active").filter("[id='"+t+"']").addClass("active"),thisattr=$(".height-item").filter("[id='"+t+"']").attr("data-active-item"),$(".carousel__cell").removeClass("active").filter("[id='"+thisattr+"']").addClass("active"),$(".height-item").removeClass("prev-active"),$(".height-item.active").prevAll().addClass("prev-active"))}),b();var w=!1,k=200;function x(){new Date-e<k?setTimeout(x,k):(w=!1,$(window).height(),b())}$(window).resize(function(){e=new Date,!1===w&&(w=!0,setTimeout(x,k))})}()}function init$2(){console.log("body.post-type-artist");var t=$(".container");$(".list-item").hover(function(){var e=$(this).attr("data-imgid");$(this).toggleClass("active"),$('.image-item[data-image="'+e+'"]').toggleClass("active")}),$(".list-item").click(function(){var e=$(this).attr("data-imgid"),a=$(this).text();console.log(a),t.addClass("activated"),$(this).addClass("activated"),$('.image-item[data-image="'+e+'"]').toggleClass("activated"),$(".page-title").animate({opacity:0},800,function(){$(".page-title").text(a).animate({opacity:1},400,function(){})})})}function init$3(){0<$(".featured-home-carousel").length&&homegallery(),0<$(".release-home-carousel").length&&homereleasegallery()}function blocks(){console.log("export function blocks.js"),0<$("#artist-releases, .release-block, .featured-home-item-releases").length&&(console.log("recordanimation"),recordanimation()),0<$(".gallery-block").length&&(console.log("if gallery-block"),$(".gallery-block").each(function(){var e=$(this);console.log(e),gallery(e)})),0<$(".sound-block").length&&(hasradioblock=!0,console.log("we have a sound-block on the page - add class to body - for the radio loader to discover"),$("body").addClass("has-sound-block"))}function init(){var s=!1,i=!1,l=!1,n=!1;barba.init({views:[{namespace:"single-releases",afterEnter:function(){console.log("afterEnter: namespace = single-releases"),opacity()}},{namespace:"page",afterEnter:function(){console.log("afterEnter: namespace = page"),opacity()}},{namespace:"single-post",afterEnter:function(){console.log("afterEnter: namespace = single-post"),opacity(),domReady(blocks)}},{namespace:"front-page",afterEnter:function(){console.log("afterEnter: namespace = front-page"),domReady(init$3),domReady(blocks),opacity()}},{namespace:"archive-releases",afterEnter:function(){domReady(init$1),opacity()}},{namespace:"archive-events",afterEnter:function(){opacity()}},{namespace:"archive-radio",afterEnter:function(){opacity()}},{namespace:"archive-artists",afterEnter:function(){domReady(init$2),opacity()}},{namespace:"archive-news",afterEnter:function(){opacity()}}]}),barba.hooks.beforeLeave(function(e){console.log("beforeleave"),loadedradio=!!$("body").hasClass("sc-loaded")&&(console.log("player loaded"),!0),s=$("body").hasClass("sc-player-playing")?(console.log("player is playing - apply class sc-player-playing"),!0):(console.log("player is not playing"),!1),i=$("body").hasClass("sc-player-paused")?(console.log("player is paused - apply class sc-player-paused"),!0):(console.log("player is paused"),!1),l=$("body").hasClass("sticky-radio-player")?(console.log("sticky-radio-player = true"),!0):(console.log("sticky-radio-player = false"),!1),n=$("body").hasClass("sc-minimised")?(console.log("sc-minimised = true"),!0):(console.log("sc-minimised  = false"),!1)}),barba.hooks.afterLeave(function(e){console.log("afterleave"),$("html, body").animate({scrollTop:$("body").offset().top},10);var a=e.next.html,t=a.replace(/(<\/?)body( .+?)?>/gi,"$1notbody$2>",a),o=$(t).filter("notbody").attr("class");$("body").attr("class",o),e.next.url.path&&(menuClasses(e,"current-menu-item"),menuClasses(e,"current_page_item"),menuClasses(e,"current-menu-ancestor"),menuClasses(e,"current-menu-parent"),menuClasses(e,"current_page_ancestor")),1==loadedradio&&$("body").addClass("sc-loaded"),1==s&&(console.log("player is playing - apply class sc-player-playing"),$("body").addClass("sc-player-playing")),1==i&&(console.log("player is paused - apply class sc-player-paused"),$("body").addClass("sc-player-paused")),1==l&&(console.log("apply sticky radio classes"),$("body").addClass("sticky-radio-player")),1==n&&(console.log("apply minmised radio classes"),$("body").addClass("sc-minimised")),navigation(),orientation()}),barba.hooks.afterEnter(function(e){var a,t;console.log("afterenter"),$("body").attr("data-activescurl")&&(console.log("we have a data-activescurl"),a=$("body").attr("data-activescurl"),t=$(".ajax-container").find('[data-tracklink="'+a+'"]'),console.log(" active"+a),t.find(".play-toggle").addClass("active-pause"),console.log("$activeli = "+t))})}function init$4(){var s,i=theme_directory;function l(){var e,o,a,t;void 0===s?0<$(".radio-container").length&&void 0===o&&(e=function(e){$("<script>").attr("src",e).appendTo("head"),console.log("reload_js(src)"),setTimeout(function(){SC.resolve(a).then(t)},2e3)},$("body").hasClass("single-radio")?(s=!0,a=o=$("#show-details").data("radio-link"),e(i+"/dist/js/inp-radio_v4.js")):$("body").hasClass("post-type-archive-radio")?(s=!0,o=$("body").hasClass("paged")?(console.log("paged"),$(".container.radio-items li:first").data("tracklink")):$(".top-container li:first").data("tracklink"),console.log("itemurl = "+o),a=o,e(i+"/dist/js/inp-radio_v4.js")):$("body").hasClass("home")?(console.log("body.home"),s=!0,o=$(".radio-item li:first").data("tracklink"),console.log("itemurl = "+o),a=o,e(i+"/dist/js/inp-radio_v4.js")):0<$(".sound-block").length?(console.log("we have a soundblock"),console.log("$this"+$(this)),o=$("body .radio-item:first").data("tracklink"),s=!0,console.log("radio block item itemurl = "+o),a=o,console.log("track_url "+a),e(i+"/dist/js/inp-radio_v4.js")):(console.log("body - but we wont have a radio item yet - so keep look for attrchange to the body class?"),$("body").attrchange({trackValues:!0,callback:function(e){"class"==e.attributeName&&(-1==e.newValue.search(/has-sound-block/i)||l(),-1==e.newValue.search(/post-type-archive-radio/i)||l(),-1==e.newValue.search(/home/i)||l())}})),SC.initialize({client_id:"853fdb79a14a9ed748ec9fe482e859dd"}),console.log("SC"+SC),t=function(e){var a=e.id,t=$('.sc-trackslist li a[href="'+o+'"]').closest("li");console.log("$activeitem url"+o),$("body").attr("data-scjson",a),$("body").attr("data-activescurl",o),$(".sc-trackslist li").removeClass("active"),t.addClass("active"),console.log("$activeitem"+t)}):(console.log("radio script defined"),$("body").hasClass("post-type-archive-radio")&&console.log("Radio script defined - post-type-archive-radio"))}!function e(){"undefined"==typeof SC?setTimeout(e,500):l()}()}console.log("release archive index.js"),console.log("front page index.js"),console.log("blocks.js");var inpapp={init:function(){console.log("init"),devGrid(),SetAppHeight(),orientation(),detectTouch(),init(),navigation(),init$4()}};domReady(inpapp.init);
//# sourceMappingURL=app.min.js.map
