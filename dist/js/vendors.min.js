!function(a){var o=window.MutationObserver||window.WebKitMutationObserver;a.fn.attrchange=function(e,t){if("object"!=typeof e)return"string"==typeof e&&a.fn.attrchange.hasOwnProperty("extensions")&&a.fn.attrchange.extensions.hasOwnProperty(e)?a.fn.attrchange.extensions[e].call(this,t):void 0;var r={trackValues:!1,callback:a.noop};if("function"==typeof e?r.callback=e:a.extend(r,e),r.trackValues&&this.each(function(e,t){for(var r,n={},e=0,i=t.attributes,o=i.length;e<o;e++)n[(r=i.item(e)).nodeName]=r.value;a(this).data("attr-old-value",n)}),o){var n={subtree:!1,attributes:!0,attributeOldValue:r.trackValues},i=new o(function(e){e.forEach(function(e){var t=e.target;r.trackValues&&(e.newValue=a(t).attr(e.attributeName)),void 0===a(this).data("attrchange-tdisconnect")&&r.callback.call(t,e)})});return this.data("attrchange-method","Mutation Observer").data("attrchange-obs",i).each(function(){i.observe(this,n)})}return function(){var e=document.createElement("p"),t=!1;if(e.addEventListener)e.addEventListener("DOMAttrModified",function(){t=!0},!1);else{if(!e.attachEvent)return;e.attachEvent("onDOMAttrModified",function(){t=!0})}return e.setAttribute("id","target"),t}()?this.data("attrchange-method","DOMAttrModified").on("DOMAttrModified",function(e){e.originalEvent&&(e=e.originalEvent),e.attributeName=e.attrName,e.oldValue=e.prevValue,void 0===a(this).data("attrchange-tdisconnect")&&r.callback.call(this,e)}):"onpropertychange"in document.body?this.data("attrchange-method","propertychange").on("propertychange",function(e){e.attributeName=window.event.propertyName,function(e,t){var r,n;e&&(r=this.data("attr-old-value"),0<=t.attributeName.indexOf("style")?(r.style||(r.style={}),n=t.attributeName.split("."),t.attributeName=n[0],t.oldValue=r.style[n[1]],t.newValue=n[1]+":"+this.prop("style")[a.camelCase(n[1])],r.style[n[1]]=t.newValue):(t.oldValue=r[t.attributeName],t.newValue=this.attr(t.attributeName),r[t.attributeName]=t.newValue),this.data("attr-old-value",r))}.call(a(this),r.trackValues,e),void 0===a(this).data("attrchange-tdisconnect")&&r.callback.call(this,e)}):this}}(jQuery),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).barba=t()}(this,function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function e(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function i(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t,r){return(s=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),1}catch(e){return}}}()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&a(i,r.prototype),i}).apply(null,arguments)}function t(e){var r="function"==typeof Map?new Map:void 0;return(t=function(e){if(null===e||-1===Function.toString.call(e).indexOf("[native code]"))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return s(e,arguments,o(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),a(t,e)})(e)}function d(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var u,r;(r=u=u||{})[r.off=0]="off",r[r.error=1]="error",r[r.warning=2]="warning",r[r.info=3]="info",r[r.debug=4]="debug";var l=u.off,P=function(){function n(e){this.t=e}n.getLevel=function(){return l},n.setLevel=function(e){return l=u[e]};var e=n.prototype;return e.error=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.i(console.error,u.error,t)},e.warn=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.i(console.warn,u.warning,t)},e.info=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.i(console.info,u.info,t)},e.debug=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.i(console.log,u.debug,t)},e.i=function(e,t,r){t<=n.getLevel()&&e.apply(console,["["+this.t+"] "].concat(r))},n}(),c=E,h=y,f=_,p=v,g=b,w="/",x=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function _(e,t){for(var r,n=[],i=0,o=0,a="",s=t&&t.delimiter||w,u=t&&t.whitelist||void 0,l=!1;null!==(r=x.exec(e));){var c,d,h,f,p,g,_,y,v,m=r[0],b=r[1],E=r.index;a+=e.slice(o,E),o=E+m.length,b?(a+=b[1],l=!0):(c="",d=r[2],h=r[3],f=r[4],p=r[5],!l&&a.length&&(_=a[g=a.length-1],(!u||-1<u.indexOf(_))&&(c=_,a=a.slice(0,g))),a&&(n.push(a),a="",l=!1),y=h||f,v=c||s,n.push({name:d||i++,prefix:c,delimiter:v,optional:"?"===p||"*"===p,repeat:"+"===p||"*"===p,pattern:y?y.replace(/([=!:$/()])/g,"\\$1"):"[^"+A(v===s?v:v+s)+"]+?"}))}return(a||o<e.length)&&n.push(a+e.substr(o)),n}function y(l,c){return function(e,t){var r=l.exec(e);if(!r)return!1;for(var n,i=r[0],o=r.index,a={},s=t&&t.decode||decodeURIComponent,u=1;u<r.length;u++){void 0!==r[u]&&(a[(n=c[u-1]).name]=n.repeat?r[u].split(n.delimiter).map(function(e){return s(e,n)}):s(r[u],n))}return{path:i,index:o,params:a}}}function v(c,e){for(var d=new Array(c.length),t=0;t<c.length;t++)"object"==typeof c[t]&&(d[t]=new RegExp("^(?:"+c[t].pattern+")$",m(e)));return function(e,t){for(var r="",n=t&&t.encode||encodeURIComponent,i=!t||!1!==t.validate,o=0;o<c.length;o++){var a=c[o];if("string"!=typeof a){var s,u=e?e[a.name]:void 0;if(Array.isArray(u)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but got array');if(0===u.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var l=0;l<u.length;l++){if(s=n(u[l],a),i&&!d[o].test(s))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'"');r+=(0===l?a.prefix:a.delimiter)+s}}else if("string"!=typeof u&&"number"!=typeof u&&"boolean"!=typeof u){if(!a.optional)throw new TypeError('Expected "'+a.name+'" to be '+(a.repeat?"an array":"a string"))}else{if(s=n(String(u),a),i&&!d[o].test(s))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but got "'+s+'"');r+=a.prefix+s}}else r+=a}return r}}function A(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function m(e){return e&&e.sensitive?"":"i"}function b(e,t,r){for(var n,i,o=(r=r||{}).strict,a=!1!==r.start,s=!1!==r.end,u=r.delimiter||w,l=[].concat(r.endsWith||[]).map(A).concat("$").join("|"),c=a?"^":"",d=0;d<e.length;d++){var h,f=e[d];"string"==typeof f?c+=A(f):(h=f.repeat?"(?:"+f.pattern+")(?:"+A(f.delimiter)+"(?:"+f.pattern+"))*":f.pattern,t&&t.push(f),c+=f.optional?f.prefix?"(?:"+A(f.prefix)+"("+h+"))?":"("+h+")?":A(f.prefix)+"("+h+")")}return s?(o||(c+="(?:"+A(u)+")?"),c+="$"===l?"$":"(?="+l+")"):(i="string"==typeof(n=e[e.length-1])?n[n.length-1]===u:void 0===n,o||(c+="(?:"+A(u)+"(?="+l+"))?"),i||(c+="(?="+A(u)+"|"+l+")")),new RegExp(c,m(r))}function E(e,t,r){return e instanceof RegExp?function(e,t){if(!t)return e;var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}(e,t):Array.isArray(e)?function(e,t,r){for(var n=[],i=0;i<e.length;i++)n.push(E(e[i],t,r).source);return new RegExp("(?:"+n.join("|")+")",m(r))}(e,t,r):(n=t,b(_(e,i=r),n,i));var n,i}c.match=function(e,t){var r=[];return y(E(e,r,t),r)},c.regexpToFunction=h,c.parse=f,c.compile=function(e,t){return v(_(e,t),t)},c.tokensToFunction=p,c.tokensToRegExp=g;function R(e,i){try{var t=function(){if(!i.next.html)return Promise.resolve(e).then(function(e){var t,r,n=i.next;e&&(t=I.toElement(e),n.namespace=I.getNamespace(t),n.container=I.getContainer(t),n.html=e,F.update({ns:n.namespace}),r=I.toDocument(e),document.title=r.title)})}();return Promise.resolve(t&&t.then?t.then(function(){}):void 0)}catch(e){return Promise.reject(e)}}function T(){return window.location.origin}function C(e){return void 0===e&&(e=window.location.href),j(e).port}function O(e){return void 0===e&&(e=window.location.href),e.replace(/(\/#.*|\/|#.*)$/,"")}var k,D,M={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},I=((D=z.prototype).toString=function(e){return e.outerHTML},D.toDocument=function(e){return this.u.parseFromString(e,"text/html")},D.toElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t},D.getHtml=function(e){return void 0===e&&(e=document),this.toString(e.documentElement)},D.getWrapper=function(e){return void 0===e&&(e=document),e.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},D.getContainer=function(e){return void 0===e&&(e=document),e.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},D.removeContainer=function(e){document.body.contains(e)&&e.parentNode.removeChild(e)},D.addContainer=function(e,t){var r=this.getContainer();r?this.s(e,r):t.appendChild(e)},D.getNamespace=function(e){void 0===e&&(e=document);var t=e.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return t?t.getAttribute(this.o.prefix+"-"+this.o.namespace):null},D.getHref=function(e){if(e.tagName&&"a"===e.tagName.toLowerCase()){if("string"==typeof e.href)return e.href;var t=e.getAttribute("href")||e.getAttribute("xlink:href");if(t)return this.resolveUrl(t.baseVal||t)}return null},D.resolveUrl=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.length;if(0===n)throw new Error("resolveUrl requires at least one argument; got none.");var i=document.createElement("base");if(i.href=arguments[0],1===n)return i.href;var o=document.getElementsByTagName("head")[0];o.insertBefore(i,o.firstChild);for(var a,s=document.createElement("a"),u=1;u<n;u++)s.href=arguments[u],i.href=a=s.href;return o.removeChild(i),a},D.s=function(e,t){t.parentNode.insertBefore(e,t.nextSibling)},new z),F=((k=q.prototype).init=function(e,t){this.l="barba";var r={ns:t,scroll:{x:window.scrollX,y:window.scrollY},url:e};this.h.push(r),this.v=0;var n={from:this.l,index:0,states:[].concat(this.h)};window.history&&window.history.replaceState(n,"",e)},k.change=function(e,t,r){var n,i;return r&&r.state?(i=(n=r.state).index,t=this.m(this.v-i),this.replace(n.states),this.v=i):this.add(e,t),t},k.add=function(e,t){var r=this.size,n=this.p(t),i={ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:e};this.h.push(i),this.v=r;var o={from:this.l,index:r,states:[].concat(this.h)};switch(n){case"push":window.history&&window.history.pushState(o,"",e);break;case"replace":window.history&&window.history.replaceState(o,"",e)}},k.update=function(e,t){var r=t||this.v,n=S({},this.get(r),{},e);this.set(r,n)},k.remove=function(e){e?this.h.splice(e,1):this.h.pop(),this.v--},k.clear=function(){this.h=[],this.v=-1},k.replace=function(e){this.h=e},k.get=function(e){return this.h[e]},k.set=function(e,t){return this.h[e]=t},k.p=function(e){var t="push",r=e,n=M.prefix+"-"+M.history;return r.hasAttribute&&r.hasAttribute(n)&&(t=r.getAttribute(n)),t},k.m=function(e){return 1<Math.abs(e)?0<e?"forward":"back":0===e?"popstate":0<e?"back":"forward"},e(q,[{key:"current",get:function(){return this.h[this.v]}},{key:"state",get:function(){return this.h[this.h.length-1]}},{key:"previous",get:function(){return this.v<1?null:this.h[this.v-1]}},{key:"size",get:function(){return this.h.length}}]),new q),L=c,N={__proto__:null,update:R,nextTick:function(){return new Promise(function(e){window.requestAnimationFrame(e)})},pathToRegexp:L},j=function(e){var t,r,n=e.match(/:\d+/);null===n?(/^http/.test(e)&&(r=80),/^https/.test(e)&&(r=443)):(t=n[0].substring(1),r=parseInt(t,10));var i,o=e.replace(T(),""),a={},s=o.indexOf("#");0<=s&&(i=o.slice(s+1),o=o.slice(0,s));var u=o.indexOf("?");return 0<=u&&(a=U(o.slice(u+1)),o=o.slice(0,u)),{hash:i,path:o,port:r,query:a}},U=function(e){return e.split("&").reduce(function(e,t){var r=t.split("=");return e[r[0]]=r[1],e},{})},B={__proto__:null,getHref:function(){return window.location.href},getOrigin:T,getPort:C,getPath:function(e){return void 0===e&&(e=window.location.href),j(e).path},parse:j,parseQuery:U,clean:O};function q(){this.h=[],this.v=-1}function z(){this.o=M,this.u=new DOMParser}function H(i,o,a){return void 0===o&&(o=2e3),new Promise(function(t,r){var n=new XMLHttpRequest;n.onreadystatechange=function(){var e;n.readyState===XMLHttpRequest.DONE&&(200===n.status?t(n.responseText):n.status&&(e={status:n.status,statusText:n.statusText},a(i,e),r(e)))},n.ontimeout=function(){var e=new Error("Timeout error ["+o+"]");a(i,e),r(e)},n.onerror=function(){var e=new Error("Fetch error");a(i,e),r(e)},n.open("GET",i),n.timeout=o,n.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),n.setRequestHeader("x-barba","yes"),n.send()})}function G(a,s){return void 0===s&&(s={}),function(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];var o=!1;return new Promise(function(r,n){s.async=function(){return o=!0,function(e,t){e?n(e):r(t)}};var e,t=a.apply(s,i);o||(!(e=t)||"object"!=typeof e&&"function"!=typeof e||"function"!=typeof e.then?r(t):t.then(r,n))})}}function V(){return!window.history.pushState}function W(e){return!e.el||!e.href}function J(e){var t=e.event;return 1<t.which||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey}function Q(e){var t=e.el;return t.hasAttribute("target")&&"_blank"===t.target}function K(e){var t=e.el;return void 0!==t.protocol&&window.location.protocol!==t.protocol||void 0!==t.hostname&&window.location.hostname!==t.hostname}function X(e){var t=e.el;return void 0!==t.port&&C()!==C(t.href)}function Y(e){var t=e.el;return t.getAttribute&&"string"==typeof t.getAttribute("download")}function $(e){return e.el.hasAttribute(M.prefix+"-"+M.prevent)}function Z(e){return Boolean(e.el.closest("["+M.prefix+"-"+M.prevent+'="all"]'))}function ee(e){var t=e.href;return O(t)===O()&&C(t)===C()}var te,re,ne,ie=new(function(t){function e(){var e;return(e=t.call(this)||this).logger=new P("@barba/core"),e.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],e.registered=new Map,e.init(),e}i(e,t);var r=e.prototype;return r.init=function(){var n=this;this.registered.clear(),this.all.forEach(function(r){n[r]||(n[r]=function(e,t){n.registered.has(r)||n.registered.set(r,new Set),n.registered.get(r).add({ctx:t||{},fn:e})})})},r.do=function(t){for(var r=this,e=arguments.length,n=new Array(1<e?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];if(this.registered.has(t)){var o=Promise.resolve();return this.registered.get(t).forEach(function(e){o=o.then(function(){return G(e.fn,e.ctx).apply(void 0,n)})}),o.catch(function(e){r.logger.debug("Hook error ["+t+"]"),r.logger.error(e)})}return Promise.resolve()},r.clear=function(){var t=this;this.all.forEach(function(e){delete t[e]}),this.init()},r.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var r=[];this.registered.forEach(function(e,t){return r.push(t)}),this.logger.info("Registered hooks: "+r.join(","))},e}(function(){})),oe=(_e.prototype.checkHref=function(e){if("boolean"==typeof this.g)return this.g;var t=j(e).path;return this.P.some(function(e){return null!==e.exec(t)})},_e),ae=function(r){function e(e){var t;return(t=r.call(this,e)||this).k=new Map,t}i(e,r);var t=e.prototype;return t.set=function(e,t,r){return this.k.set(e,{action:r,request:t}),{action:r,request:t}},t.get=function(e){return this.k.get(e)},t.getRequest=function(e){return this.k.get(e).request},t.getAction=function(e){return this.k.get(e).action},t.has=function(e){return!this.checkHref(e)&&this.k.has(e)},t.delete=function(e){return this.k.delete(e)},t.update=function(e,t){var r=S({},this.k.get(e),{},t);return this.k.set(e,r),r},e}(oe),se=function(r){function e(e){var t;return(t=r.call(this,e)||this).suite=[],t.tests=new Map,t.init(),t}i(e,r);var t=e.prototype;return t.init=function(){this.add("pushState",V),this.add("exists",W),this.add("newTab",J),this.add("blank",Q),this.add("corsDomain",K),this.add("corsPort",X),this.add("download",Y),this.add("preventSelf",$),this.add("preventAll",Z),this.add("sameUrl",ee,!1)},t.add=function(e,t,r){void 0===r&&(r=!0),this.tests.set(e,t),r&&this.suite.push(e)},t.run=function(e,t,r,n){return this.tests.get(e)({el:t,event:r,href:n})},t.checkLink=function(t,r,n){var i=this;return this.suite.some(function(e){return i.run(e,t,r,n)})},e}(oe),ue=(i(ge,ne=t(Error)),ge),le=((re=pe.prototype).add=function(e,t){switch(e){case"rule":this.A.splice(t.position||0,0,t.value);break;case"transition":default:this.all.push(t)}this.update()},re.resolve=function(i,e){var o=this;void 0===e&&(e={});var t,r,n=(n=e.once?this.once:this.page).filter(e.self?function(e){return e.name&&"self"===e.name}:function(e){return!e.name||"self"!==e.name}),a=new Map,s=n.find(function(t){var r=!0,n={};return!(!e.self||"self"!==t.name)||(o.A.reverse().forEach(function(e){r&&(r=o.R(t,e,i,n),t.from&&t.to&&(r=o.R(t,e,i,n,"from")&&o.R(t,e,i,n,"to")),t.from&&!t.to&&(r=o.R(t,e,i,n,"from")),!t.from&&t.to&&(r=o.R(t,e,i,n,"to")))}),a.set(t,n),r)}),u=a.get(s),l=[];return l.push(e.once?"once":"page"),e.self&&l.push("self"),u?(r=[s],0<Object.keys(u).length&&r.push(u),(t=this.logger).info.apply(t,["Transition found ["+l.join(",")+"]"].concat(r))):this.logger.info("No transition found ["+l.join(",")+"]"),s},re.update=function(){var t=this;this.all=this.all.map(function(e){return t.T(e)}).sort(function(e,t){return e.priority-t.priority}).reverse().map(function(e){return delete e.priority,e}),this.page=this.all.filter(function(e){return void 0!==e.leave||void 0!==e.enter}),this.once=this.all.filter(function(e){return void 0!==e.once})},re.R=function(e,t,r,n,i){var o=!0,a=!1,s=e,u=t.name,l=u,c=u,d=u,h=i?s[i]:s,f="to"===i?r.next:r.current;if((!i||h)&&h[u]){switch(t.type){case"strings":default:var p=Array.isArray(h[l])?h[l]:[h[l]];f[l]&&-1!==p.indexOf(f[l])&&(a=!0),-1===p.indexOf(f[l])&&(o=!1);break;case"object":var g=Array.isArray(h[c])?h[c]:[h[c]];f[c]?(f[c].name&&-1!==g.indexOf(f[c].name)&&(a=!0),-1===g.indexOf(f[c].name)&&(o=!1)):o=!1;break;case"function":h[d](r)?a=!0:o=!1}a&&(i?(n[i]=n[i]||{},n[i][u]=s[i][u]):n[u]=s[u])}return o},re.O=function(e,t,r){var n=0;return(e[t]||e.from&&e.from[t]||e.to&&e.to[t])&&(n+=Math.pow(10,r),e.from&&e.from[t]&&(n+=1),e.to&&e.to[t]&&(n+=2)),n},re.T=function(r){var n=this,i=r.priority=0;return this.A.forEach(function(e,t){i+=n.O(r,e.name,t+1)}),r.priority=i,r},pe),ce=((te=fe.prototype).get=function(e,t){return this.store.resolve(e,t)},te.doOnce=function(e){var t=e.data,r=e.transition;try{function n(){i.S=!1}var i=this,o=r||{};i.S=!0;var a=d(function(){return Promise.resolve(i.j("beforeOnce",t,o)).then(function(){return Promise.resolve(i.once(t,o)).then(function(){return Promise.resolve(i.j("afterOnce",t,o)).then(function(){})})})},function(e){i.S=!1,i.logger.debug("Transition error [before/after/once]"),i.logger.error(e)});return Promise.resolve(a&&a.then?a.then(n):n())}catch(e){return Promise.reject(e)}},te.doPage=function(e){var n=e.data,t=e.transition,i=e.page,o=e.wrapper;try{function r(e){if(a)return e;s.S=!1}var a=!1,s=this,u=t||{},l=!0===u.sync||!1;s.S=!0;var c=d(function(){function e(){return Promise.resolve(s.j("before",n,u)).then(function(){function e(e){return Promise.resolve(s.remove(n)).then(function(){return Promise.resolve(s.j("after",n,u)).then(function(){})})}var t=function(){if(l)return d(function(){return Promise.resolve(s.add(n,o)).then(function(){return Promise.resolve(s.j("beforeLeave",n,u)).then(function(){return Promise.resolve(s.j("beforeEnter",n,u)).then(function(){return Promise.resolve(Promise.all([s.leave(n,u),s.enter(n,u)])).then(function(){return Promise.resolve(s.j("afterLeave",n,u)).then(function(){return Promise.resolve(s.j("afterEnter",n,u)).then(function(){})})})})})})},function(e){if(s.M(e))throw new ue(e,"Transition error [sync]")});function e(e){return d(function(){var e=function(){if(!1!==t)return Promise.resolve(s.add(n,o)).then(function(){return Promise.resolve(s.j("beforeEnter",n,u)).then(function(){return Promise.resolve(s.enter(n,u,t)).then(function(){return Promise.resolve(s.j("afterEnter",n,u)).then(function(){})})})})}();if(e&&e.then)return e.then(function(){})},function(e){if(s.M(e))throw new ue(e,"Transition error [before/after/enter]")})}var t=!1,r=d(function(){return Promise.resolve(s.j("beforeLeave",n,u)).then(function(){return Promise.resolve(Promise.all([s.leave(n,u),R(i,n)]).then(function(e){return e[0]})).then(function(e){return t=e,Promise.resolve(s.j("afterLeave",n,u)).then(function(){})})})},function(e){if(s.M(e))throw new ue(e,"Transition error [before/after/leave]")});return r&&r.then?r.then(e):e()}();return t&&t.then?t.then(e):e()})}var t=function(){if(l)return Promise.resolve(R(i,n)).then(function(){})}();return t&&t.then?t.then(e):e()},function(e){if(s.S=!1,e.name&&"BarbaError"===e.name)throw s.logger.debug(e.label),s.logger.error(e.error),e;throw s.logger.debug("Transition error [page]"),s.logger.error(e),e});return Promise.resolve(c&&c.then?c.then(r):r(c))}catch(e){return Promise.reject(e)}},te.once=function(e,t){try{return Promise.resolve(ie.do("once",e,t)).then(function(){return t.once?G(t.once,t)(e):Promise.resolve()})}catch(e){return Promise.reject(e)}},te.leave=function(e,t){try{return Promise.resolve(ie.do("leave",e,t)).then(function(){return t.leave?G(t.leave,t)(e):Promise.resolve()})}catch(e){return Promise.reject(e)}},te.enter=function(e,t,r){try{return Promise.resolve(ie.do("enter",e,t)).then(function(){return t.enter?G(t.enter,t)(e,r):Promise.resolve()})}catch(e){return Promise.reject(e)}},te.add=function(e,t){try{return I.addContainer(e.next.container,t),ie.do("nextAdded",e),Promise.resolve()}catch(e){return Promise.reject(e)}},te.remove=function(e){try{return I.removeContainer(e.current.container),ie.do("currentRemoved",e),Promise.resolve()}catch(e){return Promise.reject(e)}},te.M=function(e){return e.message?!/Timeout error|Fetch error/.test(e.message):!e.status},te.j=function(e,t,r){try{return Promise.resolve(ie.do(e,t,r)).then(function(){return r[e]?G(r[e],r)(t):Promise.resolve()})}catch(e){return Promise.reject(e)}},e(fe,[{key:"isRunning",get:function(){return this.S},set:function(e){this.S=e}},{key:"hasOnce",get:function(){return 0<this.store.once.length}},{key:"hasSelf",get:function(){return this.store.all.some(function(e){return"self"===e.name})}},{key:"shouldWait",get:function(){return this.store.all.some(function(e){return e.to&&!e.to.route||e.sync})}}]),fe),de=(he.prototype.L=function(n){var i=this;return function(e){var t=n.match(/enter/i)?e.next:e.current,r=i.byNamespace.get(t.namespace);return r&&r[n]?G(r[n],r)(e):Promise.resolve()}},he);function he(e){var t=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,0!==e.length&&(e.forEach(function(e){t.byNamespace.set(e.namespace,e)}),this.names.forEach(function(e){ie[e](t.L(e))}))}function fe(e){void 0===e&&(e=[]),this.logger=new P("@barba/core"),this.S=!1,this.store=new le(e)}function pe(e){void 0===e&&(e=[]),this.logger=new P("@barba/core"),this.all=[],this.page=[],this.once=[],this.A=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],e&&(this.all=this.all.concat(e)),this.update()}function ge(e,t){var r;void 0===t&&(t="Barba error");for(var n=arguments.length,i=new Array(2<n?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return(r=ne.call.apply(ne,[this].concat(i))||this).error=e,r.label=t,Error.captureStackTrace&&Error.captureStackTrace(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r),ge),r.name="BarbaError",r}function _e(e){var t;this.P=[],"boolean"==typeof e?this.g=e:(t=Array.isArray(e)?e:[e],this.P=t.map(function(e){return L(e)}))}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var ye,ve={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}};return(ye=me.prototype).use=function(e,t){var r=this.plugins;-1<r.indexOf(e)?this.logger.warn("Plugin ["+e.name+"] already installed."):"function"==typeof e.install?(e.install(this,t),r.push(e)):this.logger.warn("Plugin ["+e.name+'] has no "install" method.')},ye.init=function(e){var t=void 0===e?{}:e,r=t.transitions,n=void 0===r?[]:r,i=t.views,o=void 0===i?[]:i,a=t.schema,s=void 0===a?M:a,u=t.requestError,l=t.timeout,c=void 0===l?2e3:l,d=t.cacheIgnore,h=void 0!==d&&d,f=t.prefetchIgnore,p=void 0!==f&&f,g=t.preventRunning,_=void 0!==g&&g,y=t.prevent,v=void 0===y?null:y,m=t.debug,b=t.logLevel;if(P.setLevel(!0===(void 0!==m&&m)?"debug":void 0===b?"off":b),this.logger.info(this.version),Object.keys(s).forEach(function(e){M[e]&&(M[e]=s[e])}),this.$=u,this.timeout=c,this.cacheIgnore=h,this.prefetchIgnore=p,this.preventRunning=_,this._=this.dom.getWrapper(),!this._)throw new Error("[@barba/core] No Barba wrapper found");this._.setAttribute("aria-live","polite"),this.q();var E=this.data.current;if(!E.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new ae(h),this.prevent=new se(p),this.transitions=new ce(n),this.views=new de(o),null!==v){if("function"!=typeof v)throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",v)}this.history.init(E.url.href,E.namespace),this.B=this.B.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.F(),this.plugins.forEach(function(e){return e.init()});var w=this.data;w.trigger="barba",w.next=w.current,w.current=S({},this.schemaPage),this.hooks.do("ready",w),this.once(w),this.q()},ye.destroy=function(){this.q(),this.H(),this.history.clear(),this.hooks.clear(),this.plugins=[]},ye.force=function(e){window.location.assign(e)},ye.go=function(e,t,r){var n;if(void 0===t&&(t="barba"),this.transitions.isRunning)this.force(e);else if(!(n="popstate"===t?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(e):this.prevent.run("sameUrl",null,null,e))||this.transitions.hasSelf)return t=this.history.change(e,t,r),r&&(r.stopPropagation(),r.preventDefault()),this.page(e,t,n)},ye.once=function(r){try{var n=this;return Promise.resolve(n.hooks.do("beforeEnter",r)).then(function(){function e(){return Promise.resolve(n.hooks.do("afterEnter",r)).then(function(){})}var t=function(){if(n.transitions.hasOnce){var e=n.transitions.get(r,{once:!0});return Promise.resolve(n.transitions.doOnce({transition:e,data:r})).then(function(){})}}();return t&&t.then?t.then(e):e()})}catch(r){return Promise.reject(r)}},ye.page=function(e,t,r){try{function n(){var t=i.data;return Promise.resolve(i.hooks.do("page",t)).then(function(){var e=d(function(){var e=i.transitions.get(t,{once:!1,self:r});return Promise.resolve(i.transitions.doPage({data:t,page:o,transition:e,wrapper:i._})).then(function(){i.q()})},function(){0===P.getLevel()&&i.force(t.current.url.href)});if(e&&e.then)return e.then(function(){})})}var i=this;i.data.next.url=S({href:e},i.url.parse(e)),i.data.trigger=t;var o=i.cache.has(e)?i.cache.update(e,{action:"click"}).request:i.cache.set(e,i.request(e,i.timeout,i.onRequestError.bind(i,t)),"click").request,a=function(){if(i.transitions.shouldWait)return Promise.resolve(R(o,i.data)).then(function(){})}();return Promise.resolve(a&&a.then?a.then(n):n())}catch(e){return Promise.reject(e)}},ye.onRequestError=function(e){this.transitions.isRunning=!1;for(var t=arguments.length,r=new Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=r[0],o=r[1],a=this.cache.getAction(i);return this.cache.delete(i),!(this.$&&!1===this.$(e,a,i,o)||("click"===a&&this.force(i),1))},ye.prefetch=function(e){var t=this;this.cache.has(e)||this.cache.set(e,this.request(e,this.timeout,this.onRequestError.bind(this,"barba")).catch(function(e){t.logger.error(e)}),"prefetch")},ye.F=function(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.B),document.addEventListener("touchstart",this.B)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},ye.H=function(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.B),document.removeEventListener("touchstart",this.B)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},ye.B=function(e){var t,r=this,n=this.I(e);n&&(t=this.dom.getHref(n),this.prevent.checkHref(t)||this.cache.has(t)||this.cache.set(t,this.request(t,this.timeout,this.onRequestError.bind(this,n)).catch(function(e){r.logger.error(e)}),"enter"))},ye.U=function(e){var t=this.I(e);if(t)return this.transitions.isRunning&&this.preventRunning?(e.preventDefault(),void e.stopPropagation()):void this.go(this.dom.getHref(t),t,e)},ye.D=function(e){this.go(this.url.getHref(),"popstate",e)},ye.I=function(e){for(var t=e.target;t&&!this.dom.getHref(t);)t=t.parentNode;if(t&&!this.prevent.checkLink(t,e,this.dom.getHref(t)))return t},ye.q=function(){var e=this.url.getHref(),t={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:S({href:e},this.url.parse(e))};this.C={current:t,next:S({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},e(me,[{key:"data",get:function(){return this.C}},{key:"wrapper",get:function(){return this._}}]),new me;function me(){this.version="2.9.7",this.schemaPage=ve,this.Logger=P,this.logger=new P("@barba/core"),this.plugins=[],this.hooks=ie,this.dom=I,this.helpers=N,this.history=F,this.request=H,this.url=B}}),function(e,t,r){var n=window.matchMedia;"undefined"!=typeof module&&module.exports?module.exports=r(n):"function"==typeof define&&define.amd?define(function(){return t[e]=r(n)}):t[e]=r(n)}("enquire",this,function(n){"use strict";function a(e,t){for(var r=0,n=e.length;r<n&&!1!==t(e[r],r);r++);}function s(e){return"function"==typeof e}function r(e){(this.options=e).deferSetup||this.setup()}function u(e,t){this.query=e,this.isUnconditional=t,this.handlers=[],this.mql=n(e);var r=this;this.listener=function(e){r.mql=e,r.assess()},this.mql.addListener(this.listener)}function e(){if(!n)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!n("only all").matches}return r.prototype={setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){this.initialised||this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(e){return this.options===e||this.options.match===e}},u.prototype={addHandler:function(e){var t=new r(e);this.handlers.push(t),this.matches()&&t.on()},removeHandler:function(r){var n=this.handlers;a(n,function(e,t){return e.equals(r)?(e.destroy(),!n.splice(t,1)):void 0})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){a(this.handlers,function(e){e.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var t=this.matches()?"on":"off";a(this.handlers,function(e){e[t]()})}},e.prototype={register:function(t,e,r){var n,i=this.queries,o=r&&this.browserIsIncapable;return i[t]||(i[t]=new u(t,o)),s(e)&&(e={match:e}),n=e,"[object Array]"===Object.prototype.toString.apply(n)||(e=[e]),a(e,function(e){s(e)&&(e={match:e}),i[t].addHandler(e)}),this},unregister:function(e,t){var r=this.queries[e];return r&&(t?r.removeHandler(t):(r.clear(),delete this.queries[e])),this}},new e}),function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var r=this._events=this._events||{},n=r[e]=r[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var r=this._onceEvents=this._onceEvents||{};return(r[e]=r[e]||{})[t]=!0,this}},t.off=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){var n=r.indexOf(t);return-1!=n&&r.splice(n,1),this}},t.emitEvent=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){r=r.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],i=0;i<r.length;i++){var o=r[i];n&&n[o]&&(this.off(e,o),delete n[o]),o.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(t,r){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("ev-emitter")):t.imagesLoaded=r(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){var o=t.jQuery,a=t.console;function s(e,t){for(var r in t)e[r]=t[r];return e}var u=Array.prototype.slice;function l(e,t,r){if(!(this instanceof l))return new l(e,t,r);var n,i=e;"string"==typeof e&&(i=document.querySelectorAll(e)),i?(this.elements=(n=i,Array.isArray(n)?n:"object"==typeof n&&"number"==typeof n.length?u.call(n):[n]),this.options=s({},this.options),"function"==typeof t?r=t:s(this.options,t),r&&this.on("always",r),this.getImages(),o&&(this.jqDeferred=new o.Deferred),setTimeout(this.check.bind(this))):a.error("Bad element for imagesLoaded "+(i||e))}(l.prototype=Object.create(e.prototype)).options={},l.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},l.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&c[t]){for(var r=e.querySelectorAll("img"),n=0;n<r.length;n++){var i=r[n];this.addImage(i)}if("string"==typeof this.options.background)for(var o=e.querySelectorAll(this.options.background),n=0;n<o.length;n++){var a=o[n];this.addElementBackgroundImages(a)}}};var c={1:!0,9:!0,11:!0};function r(e){this.img=e}function n(e,t){this.url=e,this.element=t,this.img=new Image}return l.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var r=/url\((['"])?(.*?)\1\)/gi,n=r.exec(t.backgroundImage);null!==n;){var i=n&&n[2];i&&this.addBackground(i,e),n=r.exec(t.backgroundImage)}},l.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},l.prototype.addBackground=function(e,t){var r=new n(e,t);this.images.push(r)},l.prototype.check=function(){var n=this;function t(e,t,r){setTimeout(function(){n.progress(e,t,r)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(e){e.once("progress",t),e.check()}):this.complete()},l.prototype.progress=function(e,t,r){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+r,e,t)},l.prototype.complete=function(){var e,t=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(e=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[e](this))},(r.prototype=Object.create(e.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(r.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},(l.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((o=e).fn.imagesLoaded=function(e,t){return new l(this,e,t).jqDeferred.promise(o(this))})})(),l}),function(e){function f(e,t){return e-t}function p(){for(var e=0,t=this.length;e<t;e++)if(void 0!==this[e])return this[e]}function g(){for(var e=this.length;--e;)if(void 0!==this[e])return this[e]}var _,y,v="hasOwnProperty",m=/[\.\/]/,b=/\s*,\s*/,E={n:{}},t=Object.prototype.toString,w=String,S=Array.isArray||function(e){return e instanceof Array||"[object Array]"==t.call(e)};eve=function(e,t){var r,n=y,i=Array.prototype.slice.call(arguments,2),o=eve.listeners(e),a=0,s=[],u={},l=[],c=_;l.firstDefined=p,l.lastDefined=g,_=e;for(var d=y=0,h=o.length;d<h;d++)"zIndex"in o[d]&&(s.push(o[d].zIndex),o[d].zIndex<0&&(u[o[d].zIndex]=o[d]));for(s.sort(f);s[a]<0;)if(r=u[s[a++]],l.push(r.apply(t,i)),y)return y=n,l;for(d=0;d<h;d++)if("zIndex"in(r=o[d]))if(r.zIndex==s[a]){if(l.push(r.apply(t,i)),y)break;do{if((r=u[s[++a]])&&l.push(r.apply(t,i)),y)break}while(r)}else u[r.zIndex]=r;else if(l.push(r.apply(t,i)),y)break;return y=n,_=c,l},eve._events=E,eve.listeners=function(e){for(var t,r,n,i,o,a,s=S(e)?e:e.split(m),u=E,l=[u],c=[],d=0,h=s.length;d<h;d++){for(a=[],i=0,o=l.length;i<o;i++)for(r=[(u=l[i].n)[s[d]],u["*"]],n=2;n--;)(t=r[n])&&(a.push(t),c=c.concat(t.f||[]));l=a}return c},eve.separator=function(e){m=e?(e="["+(e=w(e).replace(/(?=[\.\^\]\[\-])/g,"\\"))+"]",new RegExp(e)):/[\.\/]/},eve.on=function(e,a){if("function"!=typeof a)return function(){};for(var t=S(e)?S(e[0])?e:[e]:w(e).split(b),r=0,n=t.length;r<n;r++)!function(e){for(var t,r=S(e)?e:w(e).split(m),n=E,i=0,o=r.length;i<o;i++)n=(n=n.n).hasOwnProperty(r[i])&&n[r[i]]||(n[r[i]]={n:{}});for(n.f=n.f||[],i=0,o=n.f.length;i<o;i++)if(n.f[i]==a){t=!0;break}t||n.f.push(a)}(t[r]);return function(e){+e==+e&&(a.zIndex=+e)}},eve.f=function(e){var t=[].slice.call(arguments,1);return function(){eve.apply(null,[e,null].concat(t).concat([].slice.call(arguments,0)))}},eve.stop=function(){y=1},eve.nt=function(e){var t=S(_)?_.join("."):_;return e?new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)").test(t):t},eve.nts=function(){return S(_)?_:_.split(m)},eve.off=eve.unbind=function(e,t){if(e){var r=S(e)?S(e[0])?e:[e]:w(e).split(b);if(1<r.length)for(var n=0,i=r.length;n<i;n++)eve.off(r[n],t);else{r=S(e)?e:w(e).split(m);var o,a,s,u=[E],l=[];for(n=0,i=r.length;n<i;n++)for(d=0;d<u.length;d+=s.length-2){if(s=[d,1],o=u[d].n,"*"!=r[n])o[r[n]]&&(s.push(o[r[n]]),l.unshift({n:o,name:r[n]}));else for(a in o)o[v](a)&&(s.push(o[a]),l.unshift({n:o,name:a}));u.splice.apply(u,s)}for(n=0,i=u.length;n<i;n++)for(o=u[n];o.n;){if(t){if(o.f){for(d=0,h=o.f.length;d<h;d++)if(o.f[d]==t){o.f.splice(d,1);break}o.f.length||delete o.f}for(a in o.n)if(o.n[v](a)&&o.n[a].f){for(var c=o.n[a].f,d=0,h=c.length;d<h;d++)if(c[d]==t){c.splice(d,1);break}c.length||delete o.n[a].f}}else for(a in delete o.f,o.n)o.n[v](a)&&o.n[a].f&&delete o.n[a].f;o=o.n}e:for(n=0,i=l.length;n<i;n++){for(a in(o=l[n]).n[o.name].f)continue e;for(a in o.n[o.name].n)continue e;delete o.n[o.name]}}}else eve._events=E={n:{}}},eve.once=function(e,t){var r=function(){return eve.off(e,r),t.apply(this,arguments)};return eve.on(e,r)},eve.version="0.5.0",eve.toString=function(){return"You are running Eve 0.5.0"},"undefined"!=typeof module&&module.exports?module.exports=eve:"function"==typeof define&&define.amd?define("eve",[],function(){return eve}):e.eve=eve}(this),function(t,r){var e;"function"==typeof define&&define.amd?define(["eve"],function(e){return r(t,e)}):"undefined"!=typeof exports?(e=require("eve"),module.exports=r(t,e)):r(t,t.eve)}(window||this,function(v,J){var o,a,c,s,i,d,h,e,f,p,b=(o=void 0===J?function(){}:J,c={},s=v.requestAnimationFrame||v.webkitRequestAnimationFrame||v.mozRequestAnimationFrame||v.oRequestAnimationFrame||v.msRequestAnimationFrame||function(e){return setTimeout(e,16,(new Date).getTime()),!0},i=Array.isArray||function(e){return e instanceof Array||"[object Array]"==Object.prototype.toString.call(e)},d=0,h="M"+(+new Date).toString(36),e=Date.now||function(){return+new Date},f=function(e){if(e){var t,r,n=0;for(var i in c){c.hasOwnProperty(i)&&(r=(t=c[i]).get(),n++,t.s=(r-t.b)/(t.dur/t.spd),1<=t.s&&(delete c[i],t.s=1,n--,function(e){setTimeout(function(){o("mina.finish."+e.id,e)})}(t)),t.update())}a=!!n&&s(f)}else a=a||s(f)},(p=function(e,t,r,n,i,o,a){var s={id:h+(d++).toString(36),start:e,end:t,b:r,s:0,dur:n-r,spd:1,get:i,set:o,easing:a||p.linear,status:_,speed:y,duration:m,stop:E,pause:w,resume:S,update:P};c[s.id]=s;var u,l=0;for(u in c)if(c.hasOwnProperty(u)&&2==++l)break;return 1==l&&f(),s}).time=e,p.getById=function(e){return c[e]||null},p.linear=function(e){return e},p.easeout=function(e){return Math.pow(e,1.7)},p.easein=function(e){return Math.pow(e,.48)},p.easeinout=function(e){if(1==e)return 1;if(0==e)return 0;var t=.48-e/1.04,r=Math.sqrt(.1734+t*t),n=r-t,i=-r-t,o=Math.pow(Math.abs(n),1/3)*(n<0?-1:1)+Math.pow(Math.abs(i),1/3)*(i<0?-1:1)+.5;return 3*(1-o)*o*o+o*o*o},p.backin=function(e){return 1==e?1:e*e*(2.70158*e-1.70158)},p.backout=function(e){return 0==e?0:--e*e*(2.70158*e+1.70158)+1},p.elastic=function(e){return e==!!e?e:Math.pow(2,-10*e)*Math.sin((e-.075)*(2*Math.PI)/.3)+1},p.bounce=function(e){var t=7.5625,r=2.75,n=e<1/r?t*e*e:e<2/r?t*(e-=1.5/r)*e+.75:e<2.5/r?t*(e-=2.25/r)*e+.9375:t*(e-=2.625/r)*e+.984375;return n},v.mina=p),t=function(e){function _(e,t){if(e){if(e.nodeType)return p(e);if(c(e,"array")&&_.set)return _.set.apply(_,e);if(e instanceof u)return e;if(null==t)return p(e=y.doc.querySelector(String(e)))}return new f(e=null==e?"100%":e,t=null==t?"100%":t)}function l(e,t){if(t){if("#text"==e&&(e=y.doc.createTextNode(t.text||t["#text"]||"")),"#comment"==e&&(e=y.doc.createComment(t.text||t["#text"]||"")),"string"==typeof e&&(e=l(e)),"string"==typeof t)return 1==e.nodeType?"xlink:"==t.substring(0,6)?e.getAttributeNS(L,t.substring(6)):"xml:"==t.substring(0,4)?e.getAttributeNS(N,t.substring(4)):e.getAttribute(t):"text"==t?e.nodeValue:null;if(1==e.nodeType)for(var r in t){var n;t[v](r)&&((n=m(t[r]))?"xlink:"==r.substring(0,6)?e.setAttributeNS(L,r.substring(6),n):"xml:"==r.substring(0,4)?e.setAttributeNS(N,r.substring(4),n):e.setAttribute(r,n):e.removeAttribute(r))}else"text"in t&&(e.nodeValue=t.text)}else e=y.doc.createElementNS(N,e);return e}function c(e,t){return"finite"==(t=m.prototype.toLowerCase.call(t))?isFinite(e):!("array"!=t||!(e instanceof Array||Array.isArray&&Array.isArray(e)))||("null"==t&&null===e||t==typeof e&&null!==e||"object"==t&&e===Object(e)||n.call(e).slice(8,-1).toLowerCase()==t)}function t(i,o,a){function s(){var e=Array.prototype.slice.call(arguments,0),t=e.join("␀"),r=s.cache=s.cache||{},n=s.count=s.count||[];return r[v](t)?function(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return e.push(e.splice(r,1)[0])}(n,t):(1e3<=n.length&&delete r[n.shift()],n.push(t),r[t]=i.apply(o,e)),a?a(r[t]):r[t]}return s}function i(e){return e%360*A/180}function d(e){return e.node.ownerSVGElement&&p(e.node.ownerSVGElement)||_.select("svg")}function o(e){c(e,"array")||(e=Array.prototype.slice.call(arguments,0));for(var t=0,r=0,n=this.node;this[t];)delete this[t++];for(t=0;t<e.length;t++)"set"==e[t].type?e[t].forEach(function(e){n.appendChild(e.node)}):n.appendChild(e[t].node);for(var i=n.childNodes,t=0;t<i.length;t++)this[r++]=p(i[t]);return this}function u(e){if(e.snap in j)return j[e.snap];var t;try{t=e.ownerSVGElement}catch(e){}this.node=e,t&&(this.paper=new f(t)),this.type=e.tagName||e.nodeName;var r=this.id=F(this);if(this.anims={},this._={transform:[]},e.snap=r,"g"==(j[r]=this).type&&(this.add=o),this.type in{g:1,mask:1,pattern:1,symbol:1})for(var n in f.prototype)f.prototype[v](n)&&(this[n]=f.prototype[n])}function a(e){this.node=e}function h(e,t){var r=l(e);return t.appendChild(r),p(r)}function f(e,t){var r=f.prototype;if(e&&e.tagName&&"svg"==e.tagName.toLowerCase()){if(e.snap in j)return j[e.snap];var n=e.ownerDocument,i=new u(e),o=e.getElementsByTagName("desc")[0],a=e.getElementsByTagName("defs")[0];for(var s in o||((o=l("desc")).appendChild(n.createTextNode("Created with Snap")),i.node.appendChild(o)),a||(a=l("defs"),i.node.appendChild(a)),i.defs=a,r)r[v](s)&&(i[s]=r[s]);i.paper=i.root=i}else l((i=h("svg",y.doc.body)).node,{height:t,version:1.1,width:e,xmlns:N});return i}function p(e){return!e||e instanceof u||e instanceof a?e:e.tagName&&"svg"==e.tagName.toLowerCase()?new f(e):e.tagName&&"object"==e.tagName.toLowerCase()&&"image/svg+xml"==e.type?new f(e.contentDocument.getElementsByTagName("svg")[0]):new u(e)}_.version="0.5.1",_.toString=function(){return"Snap v"+this.version},_._={};var y={win:e.window,doc:e.window.document};_._.glob=y;var r,s,v="hasOwnProperty",m=String,b=parseFloat,E=parseInt,w=Math,S=w.max,P=w.min,x=w.abs,A=(w.pow,w.PI),n=(w.round,Object.prototype.toString),R=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,T=(_._.separator=/[,\s]+/,/[\s]*,[\s]*/),C={hs:1,rg:1},O=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,k=/([rstm])[\s,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\s]*,?[\s]*)+)/gi,D=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\s]*,?[\s]*/gi,M=0,I="S"+(+new Date).toString(36),F=function(e){return(e&&e.type?e.type:"")+I+(M++).toString(36)},L="http://www.w3.org/1999/xlink",N="http://www.w3.org/2000/svg",j={};_.url=function(e){return"url('#"+e+"')"},_._.$=l,_._.id=F,_.format=(r=/\{([^\}]+)\}/g,s=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,function(e,i){return m(e).replace(r,function(e,t){return r=e,o=n=i,t.replace(s,function(e,t,r,n,i){t=t||n,o&&(t in o&&(o=o[t]),"function"==typeof o&&i&&(o=o()))}),o=(null==o||o==n?r:o)+"";var r,n,o})}),_._.clone=function e(t){if("function"==typeof t||Object(t)!==t)return t;var r=new t.constructor;for(var n in t)t[v](n)&&(r[n]=e(t[n]));return r},_._.cacher=t,_.rad=i,_.deg=function(e){return 180*e/A%360},_.sin=function(e){return w.sin(_.rad(e))},_.tan=function(e){return w.tan(_.rad(e))},_.cos=function(e){return w.cos(_.rad(e))},_.asin=function(e){return _.deg(w.asin(e))},_.acos=function(e){return _.deg(w.acos(e))},_.atan=function(e){return _.deg(w.atan(e))},_.atan2=function(e){return _.deg(w.atan2(e))},_.angle=function e(t,r,n,i,o,a){if(null!=o)return e(t,r,o,a)-e(n,i,o,a);var s=t-n,u=r-i;return s||u?(180+180*w.atan2(-u,-s)/A+360)%360:0},_.len=function(e,t,r,n){return Math.sqrt(_.len2(e,t,r,n))},_.len2=function(e,t,r,n){return(e-r)*(e-r)+(t-n)*(t-n)},_.closestPoint=function(e,n,i){function t(e){var t=e.x-n,r=e.y-i;return t*t+r*r}for(var r,o,a,s,u,l,c,d,h,f,p=e.node,g=p.getTotalLength(),_=g/p.pathSegList.numberOfItems*.125,y=1/0,v=0;v<=g;v+=_)(s=t(a=p.getPointAtLength(v)))<y&&(r=a,o=v,y=s);for(_*=.5;.5<_;){0<=(c=o-_)&&(h=t(u=p.getPointAtLength(c)))<y?(r=u,o=c,y=h):(d=o+_)<=g&&(f=t(l=p.getPointAtLength(d)))<y?(r=l,o=d,y=f):_*=.5}return{x:r.x,y:r.y,length:o,distance:Math.sqrt(y)}},_.is=c,_.snapTo=function(e,t,r){if(r=c(r,"finite")?r:10,c(e,"array")){for(var n=e.length;n--;)if(x(e[n]-t)<=r)return e[n]}else{var i=t%(e=+e);if(i<r)return t-i;if(e-r<i)return t-i+e}return t},_.getRGB=t(function(e){if(!e||(e=m(e)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:G};if("none"==e)return{r:-1,g:-1,b:-1,hex:"none",toString:G};if(C[v](e.toLowerCase().substring(0,2))||"#"==e.charAt()||(e=H(e)),!e)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:G};var t,r,n,i,o,a,s=e.match(R);return s?(s[2]&&(n=E(s[2].substring(5),16),r=E(s[2].substring(3,5),16),t=E(s[2].substring(1,3),16)),s[3]&&(n=E((o=s[3].charAt(3))+o,16),r=E((o=s[3].charAt(2))+o,16),t=E((o=s[3].charAt(1))+o,16)),s[4]&&(a=s[4].split(T),t=b(a[0]),"%"==a[0].slice(-1)&&(t*=2.55),r=b(a[1]),"%"==a[1].slice(-1)&&(r*=2.55),n=b(a[2]),"%"==a[2].slice(-1)&&(n*=2.55),"rgba"==s[1].toLowerCase().slice(0,4)&&(i=b(a[3])),a[3]&&"%"==a[3].slice(-1)&&(i/=100)),s[5]?(a=s[5].split(T),t=b(a[0]),"%"==a[0].slice(-1)&&(t/=100),r=b(a[1]),"%"==a[1].slice(-1)&&(r/=100),n=b(a[2]),"%"==a[2].slice(-1)&&(n/=100),"deg"!=a[0].slice(-3)&&"°"!=a[0].slice(-1)||(t/=360),"hsba"==s[1].toLowerCase().slice(0,4)&&(i=b(a[3])),a[3]&&"%"==a[3].slice(-1)&&(i/=100),_.hsb2rgb(t,r,n,i)):s[6]?(a=s[6].split(T),t=b(a[0]),"%"==a[0].slice(-1)&&(t/=100),r=b(a[1]),"%"==a[1].slice(-1)&&(r/=100),n=b(a[2]),"%"==a[2].slice(-1)&&(n/=100),"deg"!=a[0].slice(-3)&&"°"!=a[0].slice(-1)||(t/=360),"hsla"==s[1].toLowerCase().slice(0,4)&&(i=b(a[3])),a[3]&&"%"==a[3].slice(-1)&&(i/=100),_.hsl2rgb(t,r,n,i)):(t=P(w.round(t),255),r=P(w.round(r),255),n=P(w.round(n),255),i=P(S(i,0),1),(s={r:t,g:r,b:n,toString:G}).hex="#"+(16777216|n|r<<8|t<<16).toString(16).slice(1),s.opacity=c(i,"finite")?i:1,s)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:G}},_),_.hsb=t(function(e,t,r){return _.hsb2rgb(e,t,r).hex}),_.hsl=t(function(e,t,r){return _.hsl2rgb(e,t,r).hex}),_.rgb=t(function(e,t,r,n){if(c(n,"finite")){var i=w.round;return"rgba("+[i(e),i(t),i(r),+n.toFixed(2)]+")"}return"#"+(16777216|r|t<<8|e<<16).toString(16).slice(1)});function U(){return"hsb("+[this.h,this.s,this.b]+")"}function B(){return"hsl("+[this.h,this.s,this.l]+")"}function q(e,t,r){var n;return null==t&&c(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(r=e.b,t=e.g,e=e.r),null==t&&c(e,string)&&(e=(n=_.getRGB(e)).r,t=n.g,r=n.b),(1<e||1<t||1<r)&&(e/=255,t/=255,r/=255),[e,t,r]}function z(e,t,r,n){var i={r:e=w.round(255*e),g:t=w.round(255*t),b:r=w.round(255*r),opacity:c(n,"finite")?n:1,hex:_.rgb(e,t,r),toString:G};return c(n,"finite")&&(i.opacity=n),i}var H=function(e){var r=y.doc.getElementsByTagName("head")[0]||y.doc.getElementsByTagName("svg")[0],n="rgb(255, 0, 0)";return(H=t(function(e){if("red"==e.toLowerCase())return n;r.style.color=n,r.style.color=e;var t=y.doc.defaultView.getComputedStyle(r,"").getPropertyValue("color");return t==n?null:t}))(e)},G=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"};_.color=function(e){var t;return c(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=_.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):c(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=_.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.opacity=1,e.hex=t.hex):(c(e,"string")&&(e=_.getRGB(e)),c(e,"object")&&"r"in e&&"g"in e&&"b"in e&&!("error"in e)?(t=_.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=_.rgb2hsb(e),e.v=t.b):((e={hex:"none"}).r=e.g=e.b=e.h=e.s=e.v=e.l=-1,e.error=1)),e.toString=G,e},_.hsb2rgb=function(e,t,r,n){var i,o,a,s,u;return c(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(r=e.b,t=e.s,n=e.o,e=e.h),s=(u=r*t)*(1-x((e=(e*=360)%360/60)%2-1)),i=o=a=r-u,z(i+=[u,s,0,0,s,u][e=~~e],o+=[s,u,u,s,0,0][e],a+=[0,0,s,u,u,s][e],n)},_.hsl2rgb=function(e,t,r,n){var i,o,a,s,u;return c(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(r=e.l,t=e.s,e=e.h),(1<e||1<t||1<r)&&(e/=360,t/=100,r/=100),s=(u=2*t*(r<.5?r:1-r))*(1-x((e=(e*=360)%360/60)%2-1)),i=o=a=r-u/2,z(i+=[u,s,0,0,s,u][e=~~e],o+=[s,u,u,s,0,0][e],a+=[0,0,s,u,u,s][e],n)},_.rgb2hsb=function(e,t,r){var n,i;return e=(r=q(e,t,r))[0],t=r[1],r=r[2],{h:((0==(i=(n=S(e,t,r))-P(e,t,r))?null:n==e?(t-r)/i:n==t?(r-e)/i+2:(e-t)/i+4)+360)%6*60/360,s:0==i?0:i/n,b:n,toString:U}},_.rgb2hsl=function(e,t,r){var n,i,o,a;return e=(r=q(e,t,r))[0],t=r[1],r=r[2],n=((i=S(e,t,r))+(o=P(e,t,r)))/2,{h:((0==(a=i-o)?null:i==e?(t-r)/a:i==t?(r-e)/a+2:(e-t)/a+4)+360)%6*60/360,s:0==a?0:n<.5?a/(2*n):a/(2-2*n),l:n,toString:B}},_.parsePathString=function(e){if(!e)return null;var t=_.path(e);if(t.arr)return _.path.clone(t.arr);var o={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},a=[];return c(e,"array")&&c(e[0],"array")&&(a=_.path.clone(e)),a.length||m(e).replace(O,function(e,t,r){var n=[],i=t.toLowerCase();if(r.replace(D,function(e,t){t&&n.push(+t)}),"m"==i&&2<n.length&&(a.push([t].concat(n.splice(0,2))),i="l",t="m"==t?"l":"L"),"o"==i&&1==n.length&&a.push([t,n[0]]),"r"==i)a.push([t].concat(n));else for(;n.length>=o[i]&&(a.push([t].concat(n.splice(0,o[i]))),o[i]););}),a.toString=_.path.toString,t.arr=_.path.clone(a),a};var V=_.parseTransformString=function(e){if(!e)return null;var i=[];return c(e,"array")&&c(e[0],"array")&&(i=_.path.clone(e)),i.length||m(e).replace(k,function(e,t,r){var n=[];t.toLowerCase(),r.replace(D,function(e,t){t&&n.push(+t)}),i.push([t].concat(n))}),i.toString=_.path.toString,i};_._.svgTransform2string=function(e){var n=[];return e=e.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(e,t,r){return r=r.split(/\s*,\s*|\s+/),"rotate"==t&&1==r.length&&r.push(0,0),"scale"==t&&(2<r.length?r=r.slice(0,2):2==r.length&&r.push(0,0),1==r.length&&r.push(r[0],0,0)),"skewX"==t?n.push(["m",1,0,w.tan(i(r[0])),1,0,0]):"skewY"==t?n.push(["m",1,w.tan(i(r[0])),0,1,0,0]):n.push([t.charAt(0)].concat(r)),e}),n},_._.rgTransform=/^[a-z][\s]*-?\.?\d/i,_._.transform2matrix=function(e,t){var r=V(e),n=new _.Matrix;if(r)for(var i=0,o=r.length;i<o;i++){var a,s,u,l,c,d=r[i],h=d.length,f=m(d[0]).toLowerCase(),p=d[0]!=f,g=p?n.invert():0;"t"==f&&2==h?n.translate(d[1],0):"t"==f&&3==h?p?(a=g.x(0,0),s=g.y(0,0),u=g.x(d[1],d[2]),l=g.y(d[1],d[2]),n.translate(u-a,l-s)):n.translate(d[1],d[2]):"r"==f?2==h?(c=c||t,n.rotate(d[1],c.x+c.width/2,c.y+c.height/2)):4==h&&(p?(u=g.x(d[2],d[3]),l=g.y(d[2],d[3]),n.rotate(d[1],u,l)):n.rotate(d[1],d[2],d[3])):"s"==f?2==h||3==h?(c=c||t,n.scale(d[1],d[h-1],c.x+c.width/2,c.y+c.height/2)):4==h?p?(u=g.x(d[2],d[3]),l=g.y(d[2],d[3]),n.scale(d[1],d[1],u,l)):n.scale(d[1],d[1],d[2],d[3]):5==h&&(p?(u=g.x(d[3],d[4]),l=g.y(d[3],d[4]),n.scale(d[1],d[2],u,l)):n.scale(d[1],d[2],d[3],d[4])):"m"==f&&7==h&&n.add(d[1],d[2],d[3],d[4],d[5],d[6])}return n},_._unit2px=function(r,n,i){function e(e){if(null==e)return"";if(e==+e)return e;l(u,{width:e});try{return u.getBBox().width}catch(e){return 0}}function t(e){if(null==e)return"";if(e==+e)return e;l(u,{height:e});try{return u.getBBox().height}catch(e){return 0}}function o(e,t){null==n?s[e]=t(r.attr(e)||0):e==n&&(s=t(null==i?r.attr(e)||0:i))}var a=d(r).node,s={},u=a.querySelector(".svg---mgr");switch(u||(u=l("rect"),l(u,{x:-9e9,y:-9e9,width:10,height:10,class:"svg---mgr",fill:"none"}),a.appendChild(u)),r.type){case"rect":o("rx",e),o("ry",t);case"image":o("width",e),o("height",t);case"text":o("x",e),o("y",t);break;case"circle":o("cx",e),o("cy",t),o("r",e);break;case"ellipse":o("cx",e),o("cy",t),o("rx",e),o("ry",t);break;case"line":o("x1",e),o("x2",e),o("y1",t),o("y2",t);break;case"marker":o("refX",e),o("markerWidth",e),o("refY",t),o("markerHeight",t);break;case"radialGradient":o("fx",e),o("fy",t);break;case"tspan":o("dx",e),o("dy",t);break;default:o(n,e)}return a.removeChild(u),s},y.doc.contains||y.doc.compareDocumentPosition,_._.getSomeDefs=function(e){var t=e.node.ownerSVGElement&&p(e.node.ownerSVGElement)||e.node.parentNode&&p(e.node.parentNode)||_.select("svg")||_(0,0),r=t.select("defs");return null!=r&&r.node||h("defs",t.node).node},_._.getSomeSVG=d,_.select=function(e){return e=m(e).replace(/([^\\]):/g,"$1\\:"),p(y.doc.querySelector(e))},_.selectAll=function(e){for(var t=y.doc.querySelectorAll(e),r=(_.set||Array)(),n=0;n<t.length;n++)r.push(p(t[n]));return r},setInterval(function(){for(var e in j){var t,r;j[v](e)&&(r=(t=j[e]).node,("svg"!=t.type&&!r.ownerSVGElement||"svg"==t.type&&(!r.parentNode||"ownerSVGElement"in r.parentNode&&!r.ownerSVGElement))&&delete j[e])}},1e4),u.prototype.attr=function(e,t){var r=this.node;if(!e){if(1!=r.nodeType)return{text:r.nodeValue};for(var n=r.attributes,i={},o=0,a=n.length;o<a;o++)i[n[o].nodeName]=n[o].nodeValue;return i}if(c(e,"string")){if(!(1<arguments.length))return J("snap.util.getattr."+e,this).firstDefined();var s={};s[e]=t,e=s}for(var u in e)e[v](u)&&J("snap.util.attr."+u,this,e[u]);return this},_.parse=function(e){var t=y.doc.createDocumentFragment(),r=!0,n=y.doc.createElement("div");if((e=m(e)).match(/^\s*<\s*svg(?:\s|>)/)||(e="<svg>"+e+"</svg>",r=!1),n.innerHTML=e,e=n.getElementsByTagName("svg")[0])if(r)t=e;else for(;e.firstChild;)t.appendChild(e.firstChild);return new a(t)},_.fragment=function(){for(var e=Array.prototype.slice.call(arguments,0),t=y.doc.createDocumentFragment(),r=0,n=e.length;r<n;r++){var i=e[r];i.node&&i.node.nodeType&&t.appendChild(i.node),i.nodeType&&t.appendChild(i),"string"==typeof i&&t.appendChild(_.parse(i).node)}return new a(t)},_._.make=h,_._.wrap=p,f.prototype.el=function(e,t){var r=h(e,this.node);return t&&r.attr(t),r},u.prototype.children=function(){for(var e=[],t=this.node.childNodes,r=0,n=t.length;r<n;r++)e[r]=_(t[r]);return e},u.prototype.toJSON=function(){var e=[];return function e(t,r){for(var n=0,i=t.length;n<i;n++){var o={type:t[n].type,attr:t[n].attr()},a=t[n].children();r.push(o),a.length&&e(a,o.childNodes=[])}}([this],e),e[0]},J.on("snap.util.getattr",function(){var e=J.nt(),t=(e=e.substring(e.lastIndexOf(".")+1)).replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});return W[v](t)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(t):l(this.node,e)});var W={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};J.on("snap.util.attr",function(e){var t=J.nt(),r={};r[t=t.substring(t.lastIndexOf(".")+1)]=e;var n=t.replace(/-(\w)/gi,function(e,t){return t.toUpperCase()}),i=t.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});W[v](i)?this.node.style[n]=null==e?"":e:l(this.node,r)}),_.ajax=function(e,t,r,n){var i=new XMLHttpRequest,o=F();if(i){if(c(t,"function"))n=r,r=t,t=null;else if(c(t,"object")){var a=[];for(var s in t)t.hasOwnProperty(s)&&a.push(encodeURIComponent(s)+"="+encodeURIComponent(t[s]));t=a.join("&")}return i.open(t?"POST":"GET",e,!0),t&&(i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-type","application/x-www-form-urlencoded")),r&&(J.once("snap.ajax."+o+".0",r),J.once("snap.ajax."+o+".200",r),J.once("snap.ajax."+o+".304",r)),i.onreadystatechange=function(){4==i.readyState&&J("snap.ajax."+o+"."+i.status,n,i)},4==i.readyState||i.send(t),i}},_.load=function(e,r,n){_.ajax(e,function(e){var t=_.parse(e.responseText);n?r.call(n,t):r(t)})};return _.getElementByPoint=function(e,t){var r,n,i,o,a,s,u,l,c,d,h=(this.canvas,y.doc.elementFromPoint(e,t));return y.win.opera&&"svg"==h.tagName&&(a=(o=h).getBoundingClientRect(),s=o.ownerDocument,u=s.body,l=s.documentElement,c=l.clientTop||u.clientTop||0,d=l.clientLeft||u.clientLeft||0,r={y:a.top+(g.win.pageYOffset||l.scrollTop||u.scrollTop)-c,x:a.left+(g.win.pageXOffset||l.scrollLeft||u.scrollLeft)-d},(n=h.createSVGRect()).x=e-r.x,n.y=t-r.y,n.width=n.height=1,(i=h.getIntersectionList(n,null)).length&&(h=i[i.length-1])),h?p(h):null},_.plugin=function(e){e(_,u,f,y,a)},y.win.Snap=_}(v||this);function _(e){var t=this;if(null==e)return t.s;var r=t.s-e;t.b+=t.dur*r,t.B+=t.dur*r,t.s=e}function y(e){return null==e?this.spd:void(this.spd=e)}function m(e){var t=this;return null==e?t.dur:(t.s=t.s*e/t.dur,void(t.dur=e))}function E(){delete c[this.id],this.update(),o("mina.stop."+this.id,this)}function w(){var e=this;e.pdif||(delete c[e.id],e.update(),e.pdif=e.get()-e.b)}function S(){var e=this;e.pdif&&(e.b=e.get()-e.pdif,delete e.pdif,c[e.id]=e,f())}function P(){var e,t=this;if(i(t.start)){e=[];for(var r=0,n=t.start.length;r<n;r++)e[r]=+t.start[r]+(t.end[r]-t.start[r])*t.easing(t.s)}else e=+t.start+(t.end-t.start)*t.easing(t.s);t.set(e)}return t.plugin(function(f,e,t,r,n){function c(e,t){if(null==t){var r=!0;if(!(t="linearGradient"==e.type||"radialGradient"==e.type?e.node.getAttribute("gradientTransform"):"pattern"==e.type?e.node.getAttribute("patternTransform"):e.node.getAttribute("transform")))return new f.Matrix;t=f._.svgTransform2string(t)}else t=f._.rgTransform.test(t)?d(t).replace(/\.{3}|\u2026/g,e._.transform||""):f._.svgTransform2string(t),s(t,"array")&&(t=f.path?f.path.toString.call(t):d(t)),e._.transform=t;var n=f._.transform2matrix(t,e.getBBox(1));return r?n:void(e.matrix=n)}function i(e){function t(r,n){var e=p(r.node,n);!(e=(e=e&&e.match(i))&&e[2])||"#"!=e.charAt()||(e=e.substring(1))&&(a[e]=(a[e]||[]).concat(function(e){var t={};t[n]=f.url(e),p(r.node,t)}))}for(var r,n=e.selectAll("*"),i=/^\s*url\(("|'|)(.*)\1\)\s*$/,o=[],a={},s=0,u=n.length;s<u;s++){t(r=n[s],"fill"),t(r,"stroke"),t(r,"filter"),t(r,"mask"),t(r,"clip-path"),function(t){var e=p(t.node,"xlink:href");!e||"#"!=e.charAt()||(e=e.substring(1))&&(a[e]=(a[e]||[]).concat(function(e){t.attr("xlink:href","#"+e)}))}(r);var l=p(r.node,"id");l&&(p(r.node,{id:r.id}),o.push({old:l,id:r.id}))}for(s=0,u=o.length;s<u;s++){var c=a[o[s].old];if(c)for(var d=0,h=c.length;d<h;d++)c[d](o[s].id)}}function o(o){return function(){var e=o?"<"+this.type:"",t=this.node.attributes,r=this.node.childNodes;if(o)for(var n=0,i=t.length;n<i;n++)e+=" "+t[n].name+'="'+t[n].value.replace(/"/g,'\\"')+'"';if(r.length){for(o&&(e+=">"),n=0,i=r.length;n<i;n++)3==r[n].nodeType?e+=r[n].nodeValue:1==r[n].nodeType&&(e+=g(r[n]).toString());o&&(e+="</"+this.type+">")}else o&&(e+="/>");return e}}var a=e.prototype,s=f.is,d=String,u=f._unit2px,p=f._.$,l=f._.make,h=f._.getSomeDefs,g=f._.wrap;a.getBBox=function(e){if("tspan"==this.type)return f._.box(this.node.getClientRects().item(0));if(!f.Matrix||!f.path)return this.node.getBBox();var t,r=this,n=new f.Matrix;if(r.removed)return f._.box();for(;"use"==r.type;){e||(n=n.add(r.transform().localMatrix.translate(r.attr("x")||0,r.attr("y")||0))),r=r.original?r.original:(t=r.attr("xlink:href"),r.original=r.node.ownerDocument.getElementById(t.substring(t.indexOf("#")+1)))}var i=r._,o=f.path.get[r.type]||f.path.get.deflt;try{return e?(i.bboxwt=o?f.path.getBBox(r.realPath=o(r)):f._.box(r.node.getBBox()),f._.box(i.bboxwt)):(r.realPath=o(r),r.matrix=r.transform().localMatrix,i.bbox=f.path.getBBox(f.path.map(r.realPath,n.add(r.matrix))),f._.box(i.bbox))}catch(e){return f._.box()}};function _(){return this.string}a.transform=function(e){var t=this._;if(null!=e)return e instanceof f.Matrix?(this.matrix=e,this._.transform=e.toTransformString()):c(this,e),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?p(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?p(this.node,{patternTransform:this.matrix}):p(this.node,{transform:this.matrix})),this;for(var r,n=this,i=new f.Matrix(this.node.getCTM()),o=c(this),a=[o],s=new f.Matrix,u=o.toTransformString(),l=d(o)==d(this.matrix)?d(t.transform):u;"svg"!=n.type&&(n=n.parent());)a.push(c(n));for(r=a.length;r--;)s.add(a[r]);return{string:l,globalMatrix:i,totalMatrix:s,localMatrix:o,diffMatrix:i.clone().add(o.invert()),global:i.toTransformString(),total:s.toTransformString(),local:u,toString:_}},a.parent=function(){return g(this.node.parentNode)},a.append=a.add=function(e){if(e){if("set"==e.type){var t=this;return e.forEach(function(e){t.add(e)}),this}e=g(e),this.node.appendChild(e.node),e.paper=this.paper}return this},a.appendTo=function(e){return e&&(e=g(e)).append(this),this},a.prepend=function(e){if(e){if("set"==e.type){var t,r=this;return e.forEach(function(e){t?t.after(e):r.prepend(e),t=e}),this}var n=(e=g(e)).parent();this.node.insertBefore(e.node,this.node.firstChild),this.add&&this.add(),e.paper=this.paper,this.parent()&&this.parent().add(),n&&n.add()}return this},a.prependTo=function(e){return(e=g(e)).prepend(this),this},a.before=function(e){if("set"==e.type){var r=this;return e.forEach(function(e){var t=e.parent();r.node.parentNode.insertBefore(e.node,r.node),t&&t.add()}),this.parent().add(),this}var t=(e=g(e)).parent();return this.node.parentNode.insertBefore(e.node,this.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},a.after=function(e){var t=(e=g(e)).parent();return this.node.nextSibling?this.node.parentNode.insertBefore(e.node,this.node.nextSibling):this.node.parentNode.appendChild(e.node),this.parent()&&this.parent().add(),t&&t.add(),e.paper=this.paper,this},a.insertBefore=function(e){e=g(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},a.insertAfter=function(e){e=g(e);var t=this.parent();return e.node.parentNode.insertBefore(this.node,e.node.nextSibling),this.paper=e.paper,t&&t.add(),e.parent()&&e.parent().add(),this},a.remove=function(){var e=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,e&&e.add(),this},a.select=function(e){return g(this.node.querySelector(e))},a.selectAll=function(e){for(var t=this.node.querySelectorAll(e),r=(f.set||Array)(),n=0;n<t.length;n++)r.push(g(t[n]));return r},a.asPX=function(e,t){return null==t&&(t=this.attr(e)),+u(this,e,t)},a.use=function(){var e,t=this.node.id;return t||(t=this.id,p(this.node,{id:t})),e="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?l(this.type,this.node.parentNode):l("use",this.node.parentNode),p(e.node,{"xlink:href":"#"+t}),e.original=this,e},a.clone=function(){var e=g(this.node.cloneNode(!0));return p(e.node,"id")&&p(e.node,{id:e.id}),i(e),e.insertAfter(this),e},a.toDefs=function(){return h(this).appendChild(this.node),this},a.pattern=a.toPattern=function(e,t,r,n){var i=l("pattern",h(this));return null==e&&(e=this.getBBox()),s(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,e=e.x),p(i.node,{x:e,y:t,width:r,height:n,patternUnits:"userSpaceOnUse",id:i.id,viewBox:[e,t,r,n].join(" ")}),i.node.appendChild(this.node),i},a.marker=function(e,t,r,n,i,o){var a=l("marker",h(this));return null==e&&(e=this.getBBox()),s(e,"object")&&"x"in e&&(t=e.y,r=e.width,n=e.height,i=e.refX||e.cx,o=e.refY||e.cy,e=e.x),p(a.node,{viewBox:[e,t,r,n].join(" "),markerWidth:r,markerHeight:n,orient:"auto",refX:i||0,refY:o||0,id:a.id}),a.node.appendChild(this.node),a};var y={};a.data=function(e,t){var r=y[this.id]=y[this.id]||{};if(0==arguments.length)return J("snap.data.get."+this.id,this,r,null),r;if(1!=arguments.length)return r[e]=t,J("snap.data.set."+this.id,this,t,e),this;if(f.is(e,"object")){for(var n in e)e.hasOwnProperty(n)&&this.data(n,e[n]);return this}return J("snap.data.get."+this.id,this,r[e],e),r[e]},a.removeData=function(e){return null==e?y[this.id]={}:y[this.id]&&delete y[this.id][e],this},a.outerSVG=a.toString=o(1),a.innerSVG=o(),a.toDataURL=function(){if(v&&v.btoa){var e=this.getBBox(),t=f.format('<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="{width}" height="{height}" viewBox="{x} {y} {width} {height}">{contents}</svg>',{x:+e.x.toFixed(3),y:+e.y.toFixed(3),width:+e.width.toFixed(3),height:+e.height.toFixed(3),contents:this.outerSVG()});return"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(t)))}},n.prototype.select=a.select,n.prototype.selectAll=a.selectAll}),t.plugin(function(e,t,r,n,i){function _(e,t,r,n){"function"!=typeof r||r.length||(n=r,r=b.linear),this.attr=e,this.dur=t,r&&(this.easing=r),n&&(this.callback=n)}var o=t.prototype,y=e.is,v=String,m="hasOwnProperty";e._.Animation=_,e.animation=function(e,t,r,n){return new _(e,t,r,n)},o.inAnim=function(){var e=[];for(var t in this.anims)this.anims[m](t)&&function(t){e.push({anim:new _(t._attrs,t.dur,t.easing,t._callback),mina:t,curStatus:t.status(),status:function(e){return t.status(e)},stop:function(){t.stop()}})}(this.anims[t]);return e},e.animate=function(e,t,r,n,i,o){"function"!=typeof i||i.length||(o=i,i=b.linear);var a=b.time(),s=b(e,t,a,a+n,b.time,r,i);return o&&J.once("mina.finish."+s.id,o),s},o.stop=function(){for(var e=this.inAnim(),t=0,r=e.length;t<r;t++)e[t].stop();return this},o.animate=function(e,t,r,n){"function"!=typeof r||r.length||(n=r,r=b.linear),e instanceof _&&(n=e.callback,r=e.easing,t=e.dur,e=e.attr);var i,o,a,s,u,l=[],c=[],d={},h=this;for(var f in e){e[m](f)&&(h.equal?(i=(s=h.equal(f,v(e[f]))).from,o=s.to,a=s.f):(i=+h.attr(f),o=+e[f]),u=y(i,"array")?i.length:1,d[f]=function(r,n,i){return function(e){var t=e.slice(r,n);return 1==t.length&&(t=t[0]),i?i(t):t}}(l.length,l.length+u,a),l=l.concat(i),c=c.concat(o))}var p=b.time(),g=b(l,c,p,p+t,b.time,function(e){var t={};for(var r in d)d[m](r)&&(t[r]=d[r](e));h.attr(t)},r);return(h.anims[g.id]=g)._attrs=e,g._callback=n,J("snap.animcreated."+h.id,g),J.once("mina.finish."+g.id,function(){J.off("mina.*."+g.id),delete h.anims[g.id],n&&n.call(h)}),J.once("mina.stop."+g.id,function(){J.off("mina.*."+g.id),delete h.anims[g.id]}),h}}),t.plugin(function(o,e,t,r,n){function l(e,t,r,n,i,o){return null==t&&"[object SVGMatrix]"==a.call(e)?(this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.e=e.e,void(this.f=e.f)):void(null!=e?(this.a=+e,this.b=+t,this.c=+r,this.d=+n,this.e=+i,this.f=+o):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var i,a=Object.prototype.toString,s=String,u=Math;function c(e){return e[0]*e[0]+e[1]*e[1]}function d(e){var t=u.sqrt(c(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}(i=l.prototype).add=function(e,t,r,n,i,o){if(e&&e instanceof l)return this.add(e.a,e.b,e.c,e.d,e.e,e.f);var a=e*this.a+t*this.c,s=e*this.b+t*this.d;return this.e+=i*this.a+o*this.c,this.f+=i*this.b+o*this.d,this.c=r*this.a+n*this.c,this.d=r*this.b+n*this.d,this.a=a,this.b=s,this},l.prototype.multLeft=function(e,t,r,n,i,o){if(e&&e instanceof l)return this.multLeft(e.a,e.b,e.c,e.d,e.e,e.f);var a=e*this.a+r*this.b,s=e*this.c+r*this.d,u=e*this.e+r*this.f+i;return this.b=t*this.a+n*this.b,this.d=t*this.c+n*this.d,this.f=t*this.e+n*this.f+o,this.a=a,this.c=s,this.e=u,this},i.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new l(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},i.clone=function(){return new l(this.a,this.b,this.c,this.d,this.e,this.f)},i.translate=function(e,t){return this.e+=e*this.a+t*this.c,this.f+=e*this.b+t*this.d,this},i.scale=function(e,t,r,n){return null==t&&(t=e),(r||n)&&this.translate(r,n),this.a*=e,this.b*=e,this.c*=t,this.d*=t,(r||n)&&this.translate(-r,-n),this},i.rotate=function(e,t,r){e=o.rad(e),t=t||0,r=r||0;var n=+u.cos(e).toFixed(9),i=+u.sin(e).toFixed(9);return this.add(n,i,-i,n,t,r),this.add(1,0,0,1,-t,-r)},i.skewX=function(e){return this.skew(e,0)},i.skewY=function(e){return this.skew(0,e)},i.skew=function(e,t){e=e||0,t=t||0,e=o.rad(e),t=o.rad(t);var r=u.tan(e).toFixed(9),n=u.tan(t).toFixed(9);return this.add(1,n,r,1,0,0)},i.x=function(e,t){return e*this.a+t*this.c+this.e},i.y=function(e,t){return e*this.b+t*this.d+this.f},i.get=function(e){return+this[s.fromCharCode(97+e)].toFixed(4)},i.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},i.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},i.determinant=function(){return this.a*this.d-this.b*this.c},i.split=function(){var e={};e.dx=this.e,e.dy=this.f;var t=[[this.a,this.b],[this.c,this.d]];e.scalex=u.sqrt(c(t[0])),d(t[0]),e.shear=t[0][0]*t[1][0]+t[0][1]*t[1][1],t[1]=[t[1][0]-t[0][0]*e.shear,t[1][1]-t[0][1]*e.shear],e.scaley=u.sqrt(c(t[1])),d(t[1]),e.shear/=e.scaley,this.determinant()<0&&(e.scalex=-e.scalex);var r=t[0][1],n=t[1][1];return n<0?(e.rotate=o.deg(u.acos(n)),r<0&&(e.rotate=360-e.rotate)):e.rotate=o.deg(u.asin(r)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},i.toTransformString=function(e){var t=e||this.split();return+t.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[+t.dx.toFixed(4),+t.dy.toFixed(4)]:"")+(t.rotate?"r"+[+t.rotate.toFixed(4),0,0]:"")+(1!=t.scalex||1!=t.scaley?"s"+[t.scalex,t.scaley,0,0]:""))},o.Matrix=l,o.matrix=function(e,t,r,n,i,o){return new l(e,t,r,n,i,o)}}),t.plugin(function(o,a,e,i,s){function t(i){return function(e){var t,r;J.stop(),e instanceof s&&1==e.node.childNodes.length&&("radialGradient"==e.node.firstChild.tagName||"linearGradient"==e.node.firstChild.tagName||"pattern"==e.node.firstChild.tagName)&&(e=e.node.firstChild,h(this).appendChild(e),e=c(e)),r=e instanceof a?"radialGradient"==e.type||"linearGradient"==e.type||"pattern"==e.type?(e.node.id||p(e.node,{id:e.id}),g(e.node.id)):e.attr(i):(r=o.color(e)).error?(t=o(h(this).ownerSVGElement).gradient(e))?(t.node.id||p(t.node,{id:t.id}),g(t.node.id)):e:_(r);var n={};n[i]=r,p(this.node,n),this.node.style[i]=""}}function r(e){J.stop(),e==+e&&(e+="px"),this.node.style.fontSize=e}function n(){return J.stop(),this.node.style.fontSize}var u,l=o._.make,c=o._.wrap,d=o.is,h=o._.getSomeDefs,f=/^url\((['"]?)([^)]+)\1\)$/,p=o._.$,g=o.url,_=String,y=o._.separator;o.deurl=function(e){var t=String(e).match(f);return t?t[2]:e},J.on("snap.util.attr.mask",function(e){var t;(e instanceof a||e instanceof s)&&(J.stop(),e instanceof s&&1==e.node.childNodes.length&&(e=e.node.firstChild,h(this).appendChild(e),e=c(e)),"mask"==e.type?t=e:(t=l("mask",h(this))).node.appendChild(e.node),t.node.id||p(t.node,{id:t.id}),p(this.node,{mask:g(t.id)}))}),u=function(e){if(e instanceof a||e instanceof s){J.stop();for(var t,r=e.node;r;){if("clipPath"===r.nodeName){t=new a(r);break}if("svg"===r.nodeName){t=void 0;break}r=r.parentNode}t||((t=l("clipPath",h(this))).node.appendChild(e.node),t.node.id||p(t.node,{id:t.id})),p(this.node,{"clip-path":g(t.node.id||t.id)})}},J.on("snap.util.attr.clip",u),J.on("snap.util.attr.clip-path",u),J.on("snap.util.attr.clipPath",u),J.on("snap.util.attr.fill",t("fill")),J.on("snap.util.attr.stroke",t("stroke"));var v=/^([lr])(?:\(([^)]*)\))?(.*)$/i;function m(t){return function(){J.stop();var e=i.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+t);return"none"==e?e:o(i.doc.getElementById(e.match(f)[1]))}}function b(n){return function(e){J.stop();var t="marker"+n.charAt(0).toUpperCase()+n.substring(1);if(""!=e&&e){if("marker"==e.type){var r=e.node.id;return r||p(e.node,{id:e.id}),void(this.node.style[t]=g(r))}}else this.node.style[t]="none"}}J.on("snap.util.grad.parse",function(e){function t(e,t){for(var r=(t-s)/(e-u),n=u;n<e;n++)o[n].offset=+(+s+r*(n-u)).toFixed(2);u=e,s=t}var r=(e=_(e)).match(v);if(!r)return null;var n=r[1],i=r[2],o=r[3];1==(i=i.split(/\s*,\s*/).map(function(e){return+e==e?+e:e})).length&&0==i[0]&&(i=[]);var a=(o=(o=o.split("-")).map(function(e){var t={color:(e=e.split(":"))[0]};return e[1]&&(t.offset=parseFloat(e[1])),t})).length,s=0,u=0;a--;for(var l=0;l<a;l++)"offset"in o[l]&&t(l,o[l].offset);return o[a].offset=o[a].offset||100,t(a,o[a].offset),{type:n,params:i,stops:o}}),J.on("snap.util.attr.d",function(e){J.stop(),d(e,"array")&&d(e[0],"array")&&(e=o.path.toString.call(e)),(e=_(e)).match(/[ruo]/i)&&(e=o.path.toAbsolute(e)),p(this.node,{d:e})})(-1),J.on("snap.util.attr.#text",function(e){J.stop(),e=_(e);for(var t=i.doc.createTextNode(e);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(t)})(-1),J.on("snap.util.attr.path",function(e){J.stop(),this.attr({d:e})})(-1),J.on("snap.util.attr.class",function(e){J.stop(),this.node.className.baseVal=e})(-1),J.on("snap.util.attr.viewBox",function(e){var t=d(e,"object")&&"x"in e?[e.x,e.y,e.width,e.height].join(" "):d(e,"array")?e.join(" "):e;p(this.node,{viewBox:t}),J.stop()})(-1),J.on("snap.util.attr.transform",function(e){this.transform(e),J.stop()})(-1),J.on("snap.util.attr.r",function(e){"rect"==this.type&&(J.stop(),p(this.node,{rx:e,ry:e}))})(-1),J.on("snap.util.attr.textpath",function(e){if(J.stop(),"text"==this.type){var t,r,n,i,o;if(!e&&this.textPath){for(r=this.textPath;r.node.firstChild;)this.node.appendChild(r.node.firstChild);return r.remove(),void delete this.textPath}if(d(e,"string")?(i=h(this),o=c(i.parentNode).path(e),i.appendChild(o.node),t=o.id,o.attr({id:t})):(e=c(e))instanceof a&&((t=e.attr("id"))||(t=e.id,e.attr({id:t}))),t)if(r=this.textPath,n=this.node,r)r.attr({"xlink:href":"#"+t});else{for(r=p("textPath",{"xlink:href":"#"+t});n.firstChild;)r.appendChild(n.firstChild);n.appendChild(r),this.textPath=c(r)}}})(-1),J.on("snap.util.attr.text",function(e){if("text"==this.type){for(var t=this.node,n=function(e){var t=p("tspan");if(d(e,"array"))for(var r=0;r<e.length;r++)t.appendChild(n(e[r]));else t.appendChild(i.doc.createTextNode(e));return t.normalize&&t.normalize(),t};t.firstChild;)t.removeChild(t.firstChild);for(var r=n(e);r.firstChild;)t.appendChild(r.firstChild)}J.stop()})(-1),J.on("snap.util.attr.fontSize",r)(-1),J.on("snap.util.attr.font-size",r)(-1),J.on("snap.util.getattr.transform",function(){return J.stop(),this.transform()})(-1),J.on("snap.util.getattr.textpath",function(){return J.stop(),this.textPath})(-1),J.on("snap.util.getattr.marker-end",m("end"))(-1),J.on("snap.util.getattr.markerEnd",m("end"))(-1),J.on("snap.util.getattr.marker-start",m("start"))(-1),J.on("snap.util.getattr.markerStart",m("start"))(-1),J.on("snap.util.getattr.marker-mid",m("mid"))(-1),J.on("snap.util.getattr.markerMid",m("mid"))(-1),J.on("snap.util.attr.marker-end",b("end"))(-1),J.on("snap.util.attr.markerEnd",b("end"))(-1),J.on("snap.util.attr.marker-start",b("start"))(-1),J.on("snap.util.attr.markerStart",b("start"))(-1),J.on("snap.util.attr.marker-mid",b("mid"))(-1),J.on("snap.util.attr.markerMid",b("mid"))(-1),J.on("snap.util.getattr.r",function(){return"rect"==this.type&&p(this.node,"rx")==p(this.node,"ry")?(J.stop(),p(this.node,"rx")):void 0})(-1),J.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){J.stop();var e=function e(t){for(var r=[],n=t.childNodes,i=0,o=n.length;i<o;i++){var a=n[i];3==a.nodeType&&r.push(a.nodeValue),"tspan"==a.tagName&&(1==a.childNodes.length&&3==a.firstChild.nodeType?r.push(a.firstChild.nodeValue):r.push(e(a)))}return r}(this.node);return 1==e.length?e[0]:e}})(-1),J.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),J.on("snap.util.getattr.fill",function(e){if(!e){J.stop();var t=J("snap.util.getattr.fill",this,!0).firstDefined();return o(o.deurl(t))||t}})(-1),J.on("snap.util.getattr.stroke",function(e){if(!e){J.stop();var t=J("snap.util.getattr.stroke",this,!0).firstDefined();return o(o.deurl(t))||t}})(-1),J.on("snap.util.getattr.viewBox",function(){J.stop();var e=p(this.node,"viewBox");return e?(e=e.split(y),o._.box(+e[0],+e[1],+e[2],+e[3])):void 0})(-1),J.on("snap.util.getattr.points",function(){var e=p(this.node,"points");return J.stop(),e?e.split(y):void 0})(-1),J.on("snap.util.getattr.path",function(){var e=p(this.node,"d");return J.stop(),e})(-1),J.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),J.on("snap.util.getattr.fontSize",n)(-1),J.on("snap.util.getattr.font-size",n)(-1)}),t.plugin(function(e,t,r,n,i){var c=/\S+/g,l=String,o=t.prototype;o.addClass=function(e){var t,r,n,i=l(e||"").match(c)||[],o=this.node,a=o.className.baseVal,s=a.match(c)||[];if(i.length){for(t=0;r=i[t++];)~s.indexOf(r)||s.push(r);a!=(n=s.join(" "))&&(o.className.baseVal=n)}return this},o.removeClass=function(e){var t,r,n,i,o=l(e||"").match(c)||[],a=this.node,s=a.className.baseVal,u=s.match(c)||[];if(u.length){for(t=0;n=o[t++];)~(r=u.indexOf(n))&&u.splice(r,1);s!=(i=u.join(" "))&&(a.className.baseVal=i)}return this},o.hasClass=function(e){return!!~(this.node.className.baseVal.match(c)||[]).indexOf(e)},o.toggleClass=function(e,t){if(null!=t)return t?this.addClass(e):this.removeClass(e);for(var r,n,i,o=(e||"").match(c)||[],a=this.node,s=a.className.baseVal,u=s.match(c)||[],l=0;n=o[l++];)~(r=u.indexOf(n))?u.splice(r,1):u.push(n);return s!=(i=u.join(" "))&&(a.className.baseVal=i),this}}),t.plugin(function(e,t,r,n,i){function u(e){return e}var l={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"/":function(e,t){return e/t},"*":function(e,t){return e*t}},c=String,d=/[a-z]+$/i,h=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;J.on("snap.util.attr",function(e){var t=c(e).match(h);if(t){var r=J.nt(),n=r.substring(r.lastIndexOf(".")+1),i=this.attr(n),o={};J.stop();var a=t[3]||"",s=i.match(d),u=l[t[1]];if(e=s&&s==a?u(parseFloat(i),+t[2]):(i=this.asPX(n),u(this.asPX(n),this.asPX(n,t[2]+a))),isNaN(i)||isNaN(e))return;o[n]=e,this.attr(o)}})(-10),J.on("snap.util.equal",function(e,t){var r,n=c(this.attr(e)||""),i=c(t).match(h);if(i){J.stop();var o=i[3]||"",a=n.match(d),s=l[i[1]];return a&&a==o?{from:parseFloat(n),to:s(parseFloat(n),+i[2]),f:(r=a,function(e){return+e.toFixed(3)+r})}:{from:n=this.asPX(e),to:s(n,this.asPX(e,i[2]+o)),f:u}}})(-10)}),t.plugin(function(s,t,e,i,r){var n=e.prototype,l=s.is;n.rect=function(e,t,r,n,i,o){var a;return null==o&&(o=i),l(e,"object")&&"[object Object]"==e?a=e:null!=e&&(a={x:e,y:t,width:r,height:n},null!=i&&(a.rx=i,a.ry=o)),this.el("rect",a)},n.circle=function(e,t,r){var n;return l(e,"object")&&"[object Object]"==e?n=e:null!=e&&(n={cx:e,cy:t,r:r}),this.el("circle",n)};var u,c=function(e,t){var r=i.doc.createElement("img"),n=i.doc.body;r.style.cssText="position:absolute;left:-9999em;top:-9999em",r.onload=function(){t.call(r),r.onload=r.onerror=null,n.removeChild(r)},r.onerror=o,n.appendChild(r),r.src=e};function o(){this.parentNode.removeChild(this)}function d(){return this.selectAll("stop")}function h(e,t){var r=u("stop"),n={offset:+t+"%"};e=s.color(e),n["stop-color"]=e.hex,e.opacity<1&&(n["stop-opacity"]=e.opacity),u(r,n);for(var i,o=this.stops(),a=0;a<o.length;a++){if(t<parseFloat(o[a].attr("offset"))){this.node.insertBefore(r,o[a].node),i=!0;break}}return i||this.node.appendChild(r),this}function f(){if("linearGradient"==this.type){var e=u(this.node,"x1")||0,t=u(this.node,"x2")||1,r=u(this.node,"y1")||0,n=u(this.node,"y2")||0;return s._.box(e,r,math.abs(t-e),math.abs(n-r))}var i=this.node.cx||.5,o=this.node.cy||.5,a=this.node.r||0;return s._.box(i-a,o-a,2*a,2*a)}function a(e){var t=e,r=this.stops();if("string"==typeof e&&(t=J("snap.util.grad.parse",null,"l(0,0,0,1)"+e).firstDefined().stops),s.is(t,"array")){for(var n,i,o=0;o<r.length;o++){t[o]?(n=s.color(t[o].color),(i={offset:t[o].offset+"%"})["stop-color"]=n.hex,n.opacity<1&&(i["stop-opacity"]=n.opacity),r[o].attr(i)):r[o].remove()}for(o=r.length;o<t.length;o++)this.addStop(t[o].color,t[o].offset);return this}}function p(e,t,r,n,i){var o=s._.make("linearGradient",e);return o.stops=d,o.addStop=h,o.getBBox=f,o.setStops=a,null!=t&&u(o.node,{x1:t,y1:r,x2:n,y2:i}),o}function g(e,t,r,n,i,o){var a=s._.make("radialGradient",e);return a.stops=d,a.addStop=h,a.getBBox=f,null!=t&&u(a.node,{cx:t,cy:r,r:n}),null!=i&&null!=o&&u(a.node,{fx:i,fy:o}),a}n.image=function(e,t,r,n,i){var o,a=this.el("image");return l(e,"object")&&"src"in e?a.attr(e):null!=e&&(o={"xlink:href":e,preserveAspectRatio:"none"},null!=t&&null!=r&&(o.x=t,o.y=r),null!=n&&null!=i?(o.width=n,o.height=i):c(e,function(){s._.$(a.node,{width:this.offsetWidth,height:this.offsetHeight})}),s._.$(a.node,o)),a},n.ellipse=function(e,t,r,n){var i;return l(e,"object")&&"[object Object]"==e?i=e:null!=e&&(i={cx:e,cy:t,rx:r,ry:n}),this.el("ellipse",i)},n.path=function(e){var t;return l(e,"object")&&!l(e,"array")?t=e:e&&(t={d:e}),this.el("path",t)},n.group=n.g=function(e){var t=this.el("g");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},n.svg=function(e,t,r,n,i,o,a,s){var u={};return l(e,"object")&&null==t?u=e:(null!=e&&(u.x=e),null!=t&&(u.y=t),null!=r&&(u.width=r),null!=n&&(u.height=n),null!=i&&null!=o&&null!=a&&null!=s&&(u.viewBox=[i,o,a,s])),this.el("svg",u)},n.mask=function(e){var t=this.el("mask");return 1==arguments.length&&e&&!e.type?t.attr(e):arguments.length&&t.add(Array.prototype.slice.call(arguments,0)),t},n.ptrn=function(e,t,r,n,i,o,a,s){var u;return l(e,"object")?u=e:(u={patternUnits:"userSpaceOnUse"},e&&(u.x=e),t&&(u.y=t),null!=r&&(u.width=r),null!=n&&(u.height=n),u.viewBox=null!=i&&null!=o&&null!=a&&null!=s?[i,o,a,s]:[e||0,t||0,r||0,n||0]),this.el("pattern",u)},n.use=function(e){return null!=e?(e instanceof t&&(e.attr("id")||e.attr({id:s._.id(e)}),e=e.attr("id")),"#"==String(e).charAt()&&(e=e.substring(1)),this.el("use",{"xlink:href":"#"+e})):t.prototype.use.call(this)},n.symbol=function(e,t,r,n){var i={};return null!=e&&null!=t&&null!=r&&null!=n&&(i.viewBox=[e,t,r,n]),this.el("symbol",i)},n.text=function(e,t,r){var n={};return l(e,"object")?n=e:null!=e&&(n={x:e,y:t,text:r||""}),this.el("text",n)},n.line=function(e,t,r,n){var i={};return l(e,"object")?i=e:null!=e&&(i={x1:e,x2:r,y1:t,y2:n}),this.el("line",i)},n.polyline=function(e){1<arguments.length&&(e=Array.prototype.slice.call(arguments,0));var t={};return l(e,"object")&&!l(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polyline",t)},n.polygon=function(e){1<arguments.length&&(e=Array.prototype.slice.call(arguments,0));var t={};return l(e,"object")&&!l(e,"array")?t=e:null!=e&&(t={points:e}),this.el("polygon",t)},u=s._.$,n.gradient=function(e){return function(e,t){var r,n=J("snap.util.grad.parse",null,t).firstDefined();if(!n)return null;n.params.unshift(e),r="l"==n.type.toLowerCase()?p.apply(0,n.params):g.apply(0,n.params),n.type!=n.type.toLowerCase()&&u(r.node,{gradientUnits:"userSpaceOnUse"});for(var i=n.stops,o=i.length,a=0;a<o;a++){var s=i[a];r.addStop(s.color,s.offset)}return r}(this.defs,e)},n.gradientLinear=function(e,t,r,n){return p(this.defs,e,t,r,n)},n.gradientRadial=function(e,t,r,n,i){return g(this.defs,e,t,r,n,i)},n.toString=function(){var e,t=this.node.ownerDocument,r=t.createDocumentFragment(),n=t.createElement("div"),i=this.node.cloneNode(!0);return r.appendChild(n),n.appendChild(i),s._.$(i,{xmlns:"http://www.w3.org/2000/svg"}),e=n.innerHTML,r.removeChild(r.firstChild),e},n.toDataURL=function(){return v&&v.btoa?"data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(this))):void 0},n.clear=function(){for(var e,t=this.node.firstChild;t;)e=t.nextSibling,"defs"!=t.tagName?t.parentNode.removeChild(t):n.clear.call({node:t}),t=e}}),t.plugin(function(G,_,e,t){function b(t){var r=b.ps=b.ps||{};return r[t]?r[t].sleep=100:r[t]={sleep:100},setTimeout(function(){for(var e in r)r[s](e)&&e!=t&&(r[e].sleep--,r[e].sleep||delete r[e])}),r[t]}function g(e,t,r,n){return null==e&&(e=t=r=n=0),null==t&&(t=e.y,r=e.width,n=e.height,e=e.x),{x:e,y:t,width:r,w:r,height:n,h:n,x2:e+r,y2:t+n,cx:e+r/2,cy:t+n/2,r1:V.min(r,n)/2,r2:V.max(r,n)/2,r0:V.sqrt(r*r+n*n)/2,path:a(e,t,r,n),vb:[e,t,r,n].join(" ")}}function m(){return this.join(",").replace(u,"$1")}function E(e){var t=p(e);return t.toString=m,t}function y(e,t,r,n,i,o,a,s,u){return null==u?A(e,t,r,n,i,o,a,s):w(e,t,r,n,i,o,a,s,function(e,t,r,n,i,o,a,s,u){if(!(u<0||A(e,t,r,n,i,o,a,s)<u)){var l,c=.5,d=1-c;for(l=A(e,t,r,n,i,o,a,s,d);.01<J(l-u);)l=A(e,t,r,n,i,o,a,s,d+=(l<u?1:-1)*(c/=2));return d}}(e,t,r,n,i,o,a,s,u))}function r(f,p){function g(e){return+(+e).toFixed(3)}return G._.cacher(function(e,t,r){e instanceof _&&(e=e.attr("d"));for(var n,i,o,a,s,u="",l={},c=0,d=0,h=(e=D(e)).length;d<h;d++){if("M"==(o=e[d])[0])n=+o[1],i=+o[2];else{if(t<c+(a=y(n,i,o[1],o[2],o[3],o[4],o[5],o[6]))){if(p&&!l.start){if(u+=["C"+g((s=y(n,i,o[1],o[2],o[3],o[4],o[5],o[6],t-c)).start.x),g(s.start.y),g(s.m.x),g(s.m.y),g(s.x),g(s.y)],r)return u;l.start=u,u=["M"+g(s.x),g(s.y)+"C"+g(s.n.x),g(s.n.y),g(s.end.x),g(s.end.y),g(o[5]),g(o[6])].join(),c+=a,n=+o[5],i=+o[6];continue}if(!f&&!p)return y(n,i,o[1],o[2],o[3],o[4],o[5],o[6],t-c)}c+=a,n=+o[5],i=+o[6]}u+=o.shift()+o}return l.end=u,f?c:p?l:w(n,i,o[0],o[1],o[2],o[3],o[4],o[5],1)},null,G._.clone)}function w(e,t,r,n,i,o,a,s,u){var l=1-u,c=j(l,3),d=j(l,2),h=u*u,f=h*u,p=e+2*u*(r-e)+h*(i-2*r+e),g=t+2*u*(n-t)+h*(o-2*n+t),_=r+2*u*(i-r)+h*(a-2*i+r),y=n+2*u*(o-n)+h*(s-2*o+n);return{x:c*e+3*d*u*r+3*l*u*u*i+f*a,y:c*t+3*d*u*n+3*l*u*u*o+f*s,m:{x:p,y:g},n:{x:_,y:y},start:{x:l*e+u*r,y:l*t+u*n},end:{x:l*i+u*a,y:l*o+u*s},alpha:90-180*V.atan2(p-_,g-y)/W}}function S(e,t,r,n,i,o,a,s){G.is(e,"array")||(e=[e,t,r,n,i,o,a,s]);var u=f.apply(null,e);return g(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)}function v(e,t,r){return t>=e.x&&t<=e.x+e.width&&r>=e.y&&r<=e.y+e.height}function P(e,t){return e=g(e),v(t=g(t),e.x,e.y)||v(t,e.x2,e.y)||v(t,e.x,e.y2)||v(t,e.x2,e.y2)||v(e,t.x,t.y)||v(e,t.x2,t.y)||v(e,t.x,t.y2)||v(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function x(e,t,r,n,i){return e*(e*(-3*t+9*r-9*n+3*i)+6*t-12*r+6*n)-3*t+3*r}function A(e,t,r,n,i,o,a,s,u){null==u&&(u=1);for(var l=(u=1<u?1:u<0?0:u)/2,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],h=0,f=0;f<12;f++){var p=l*c[f]+l,g=x(p,e,r,i,a),_=x(p,t,n,o,s),y=g*g+_*_;h+=d[f]*V.sqrt(y)}return l*h}function R(e,t,r){if(!P(S(e),S(t)))return r?0:[];for(var n=~~(A.apply(0,e)/8),i=~~(A.apply(0,t)/8),o=[],a=[],s={},u=r?0:[],l=0;l<1+n;l++){var c=w.apply(0,e.concat(l/n));o.push({x:c.x,y:c.y,t:l/n})}for(l=0;l<1+i;l++)c=w.apply(0,t.concat(l/i)),a.push({x:c.x,y:c.y,t:l/i});for(l=0;l<n;l++)for(var d=0;d<i;d++){var h=o[l],f=o[l+1],p=a[d],g=a[d+1],_=J(f.x-h.x)<.001?"y":"x",y=J(g.x-p.x)<.001?"y":"x",v=function(e,t,r,n,i,o,a,s){if(!(N(e,r)<L(i,a)||L(e,r)>N(i,a)||N(t,n)<L(o,s)||L(t,n)>N(o,s))){var u=(e-r)*(o-s)-(t-n)*(i-a);if(u){var l=((e*n-t*r)*(i-a)-(e-r)*(i*s-o*a))/u,c=((e*n-t*r)*(o-s)-(t-n)*(i*s-o*a))/u,d=+l.toFixed(2),h=+c.toFixed(2);if(!(d<+L(e,r).toFixed(2)||d>+N(e,r).toFixed(2)||d<+L(i,a).toFixed(2)||d>+N(i,a).toFixed(2)||h<+L(t,n).toFixed(2)||h>+N(t,n).toFixed(2)||h<+L(o,s).toFixed(2)||h>+N(o,s).toFixed(2)))return{x:l,y:c}}}}(h.x,h.y,f.x,f.y,p.x,p.y,g.x,g.y);if(v){if(s[v.x.toFixed(4)]==v.y.toFixed(4))continue;s[v.x.toFixed(4)]=v.y.toFixed(4);var m=h.t+J((v[_]-h[_])/(f[_]-h[_]))*(f.t-h.t),b=p.t+J((v[y]-p[y])/(g[y]-p[y]))*(g.t-p.t);0<=m&&m<=1&&0<=b&&b<=1&&(r?u++:u.push({x:v.x,y:v.y,t1:m,t2:b}))}}return u}function i(e,t,r){e=D(e),t=D(t);for(var n,i,o,a,s,u,l,c,d,h,f=r?0:[],p=0,g=e.length;p<g;p++){var _=e[p];if("M"==_[0])n=s=_[1],i=u=_[2];else{i="C"==_[0]?(n=(d=[n,i].concat(_.slice(1)))[6],d[7]):(d=[n,i,n,i,s,u,s,u],n=s,u);for(var y=0,v=t.length;y<v;y++){var m=t[y];if("M"==m[0])o=l=m[1],a=c=m[2];else{a="C"==m[0]?(o=(h=[o,a].concat(m.slice(1)))[6],h[7]):(h=[o,a,o,a,l,c,l,c],o=l,c);var b=R(d,h,r);if(r)f+=b;else{for(var E=0,w=b.length;E<w;E++)b[E].segment1=p,b[E].segment2=y,b[E].bez1=d,b[E].bez2=h;f=f.concat(b)}}}}}return f}function o(e){var t=b(e);if(t.bbox)return p(t.bbox);if(!e)return g();for(var r,n,i=0,o=0,a=[],s=[],u=0,l=(e=D(e)).length;u<l;u++){"M"==(r=e[u])[0]?(i=r[1],o=r[2],a.push(i),s.push(o)):(n=f(i,o,r[1],r[2],r[3],r[4],r[5],r[6]),a=a.concat(n.min.x,n.max.x),s=s.concat(n.min.y,n.max.y),i=r[5],o=r[6])}var c=L.apply(0,a),d=L.apply(0,s),h=g(c,d,N.apply(0,a)-c,N.apply(0,s)-d);return t.bbox=p(h),h}function a(e,t,r,n,i){if(i)return[["M",+e+ +i,t],["l",r-2*i,0],["a",i,i,0,0,1,i,i],["l",0,n-2*i],["a",i,i,0,0,1,-i,i],["l",2*i-r,0],["a",i,i,0,0,1,-i,-i],["l",0,2*i-n],["a",i,i,0,0,1,i,-i],["z"]];var o=[["M",e,t],["l",r,0],["l",0,n],["l",-r,0],["z"]];return o.toString=m,o}function T(e,t,r,n,i){var o,a,s,u;return null==i&&null==n&&(n=r),e=+e,t=+t,r=+r,n=+n,(u=null!=i?(o=Math.PI/180,a=e+r*Math.cos(-n*o),s=e+r*Math.cos(-i*o),[["M",a,t+r*Math.sin(-n*o)],["A",r,r,0,+(180<i-n),0,s,t+r*Math.sin(-i*o)]]):[["M",e,t],["m",0,-n],["a",r,n,0,1,1,0,2*n],["a",r,n,0,1,1,0,-2*n],["z"]]).toString=m,u}function C(e){var t=b(e);if(t.abs)return E(t.abs);if(I(e,"array")&&I(e&&e[0],"array")||(e=G.parsePathString(e)),!e||!e.length)return[["M",0,0]];var r,n=[],i=0,o=0,a=0,s=0,u=0;"M"==e[0][0]&&(a=i=+e[0][1],s=o=+e[0][2],u++,n[0]=["M",i,o]);for(var l,c,d=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),h=u,f=e.length;h<f;h++){if(n.push(l=[]),(r=(c=e[h])[0])!=r.toUpperCase())switch(l[0]=r.toUpperCase(),l[0]){case"A":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=+c[6]+i,l[7]=+c[7]+o;break;case"V":l[1]=+c[1]+o;break;case"H":l[1]=+c[1]+i;break;case"R":for(var p=[i,o].concat(c.slice(1)),g=2,_=p.length;g<_;g++)p[g]=+p[g]+i,p[++g]=+p[g]+o;n.pop(),n=n.concat(M(p,d));break;case"O":n.pop(),(p=T(i,o,c[1],c[2])).push(p[0]),n=n.concat(p);break;case"U":n.pop(),n=n.concat(T(i,o,c[1],c[2],c[3])),l=["U"].concat(n[n.length-1].slice(-2));break;case"M":a=+c[1]+i,s=+c[2]+o;default:for(g=1,_=c.length;g<_;g++)l[g]=+c[g]+(g%2?i:o)}else if("R"==r)p=[i,o].concat(c.slice(1)),n.pop(),n=n.concat(M(p,d)),l=["R"].concat(c.slice(-2));else if("O"==r)n.pop(),(p=T(i,o,c[1],c[2])).push(p[0]),n=n.concat(p);else if("U"==r)n.pop(),n=n.concat(T(i,o,c[1],c[2],c[3])),l=["U"].concat(n[n.length-1].slice(-2));else for(var y=0,v=c.length;y<v;y++)l[y]=c[y];if("O"!=(r=r.toUpperCase()))switch(l[0]){case"Z":i=+a,o=+s;break;case"H":i=l[1];break;case"V":o=l[1];break;case"M":a=l[l.length-2],s=l[l.length-1];default:i=l[l.length-2],o=l[l.length-1]}}return n.toString=m,t.abs=E(n),n}function O(e,t,r,n){return[e,t,r,n,r,n]}function k(e,t,r,n,i,o){return[1/3*e+2/3*r,1/3*t+2/3*n,1/3*i+2/3*r,1/3*o+2/3*n,i,o]}function f(e,t,r,n,i,o,a,s){for(var u,l,c,d,h,f,p,g,_=[],y=[[],[]],v=0;v<2;++v)if(c=0==v?(l=6*e-12*r+6*i,u=-3*e+9*r-9*i+3*a,3*r-3*e):(l=6*t-12*n+6*o,u=-3*t+9*n-9*o+3*s,3*n-3*t),J(u)<1e-12){if(J(l)<1e-12)continue;0<(d=-c/l)&&d<1&&_.push(d)}else p=l*l-4*c*u,g=V.sqrt(p),p<0||(0<(h=(-l+g)/(2*u))&&h<1&&_.push(h),0<(f=(-l-g)/(2*u))&&f<1&&_.push(f));for(var m,b=_.length,E=b;b--;)m=1-(d=_[b]),y[0][b]=m*m*m*e+3*m*m*d*r+3*m*d*d*i+d*d*d*a,y[1][b]=m*m*m*t+3*m*m*d*n+3*m*d*d*o+d*d*d*s;return y[0][E]=e,y[1][E]=t,y[0][E+1]=a,y[1][E+1]=s,y[0].length=y[1].length=E+2,{min:{x:L.apply(0,y[0]),y:L.apply(0,y[1])},max:{x:N.apply(0,y[0]),y:N.apply(0,y[1])}}}function D(e,t){var r=!t&&b(e);if(!t&&r.curve)return E(r.curve);function n(e,t,r){var n,i;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];switch(e[0]in{T:1,Q:1}||(t.qx=t.qy=null),e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"].concat(function e(t,r,n,i,o,a,s,u,l,c){var d,h,f,p,g,_,y,v,m,b,E,w=120*W/180,S=W/180*(+o||0),P=[],x=G._.cacher(function(e,t,r){return{x:e*V.cos(r)-t*V.sin(r),y:e*V.sin(r)+t*V.cos(r)}});if(!n||!i)return[t,r,u,l,u,l];c?(b=c[0],E=c[1],v=c[2],m=c[3]):(t=(d=x(t,r,-S)).x,r=d.y,u=(d=x(u,l,-S)).x,l=d.y,1<(V.cos(W/180*o),V.sin(W/180*o),p=(h=(t-u)/2)*h/(n*n)+(f=(r-l)/2)*f/(i*i))&&(n*=p=V.sqrt(p),i*=p),g=n*n,_=i*i,v=(y=(a==s?-1:1)*V.sqrt(J((g*_-g*f*f-_*h*h)/(g*f*f+_*h*h))))*n*f/i+(t+u)/2,m=y*-i*h/n+(r+l)/2,b=V.asin(((r-m)/i).toFixed(9)),E=V.asin(((l-m)/i).toFixed(9)),(b=t<v?W-b:b)<0&&(b=2*W+b),(E=u<v?W-E:E)<0&&(E=2*W+E),s&&E<b&&(b-=2*W),!s&&b<E&&(E-=2*W));var A,R,T,C=E-b;J(C)>w&&(A=E,R=u,T=l,E=b+w*(s&&b<E?1:-1),P=e(u=v+n*V.cos(E),l=m+i*V.sin(E),n,i,o,0,s,R,T,[E,A,v,m])),C=E-b;var O=V.cos(b),k=V.sin(b),D=V.cos(E),M=V.sin(E),I=V.tan(C/4),F=4/3*n*I,L=4/3*i*I,N=[t,r],j=[t+F*k,r-L*O],U=[u+F*M,l-L*D],B=[u,l];if(j[0]=2*N[0]-j[0],j[1]=2*N[1]-j[1],c)return[j,U,B].concat(P);for(var q=[],z=0,H=(P=[j,U,B].concat(P).join().split(",")).length;z<H;z++)q[z]=z%2?x(P[z-1],P[z],S).y:x(P[z],P[z+1],S).x;return q}.apply(0,[t.x,t.y].concat(e.slice(1))));break;case"S":i="C"==r||"S"==r?(n=2*t.x-t.bx,2*t.y-t.by):(n=t.x,t.y),e=["C",n,i].concat(e.slice(1));break;case"T":"Q"==r||"T"==r?(t.qx=2*t.x-t.qx,t.qy=2*t.y-t.qy):(t.qx=t.x,t.qy=t.y),e=["C"].concat(k(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"].concat(k(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"].concat(O(t.x,t.y,e[1],e[2]));break;case"H":e=["C"].concat(O(t.x,t.y,e[1],t.y));break;case"V":e=["C"].concat(O(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"].concat(O(t.x,t.y,t.X,t.Y))}return e}function i(e,t){if(7<e[t].length){e[t].shift();for(var r=e[t];r.length;)c[t]="A",s&&(d[t]="A"),e.splice(t++,0,["C"].concat(r.splice(0,6)));e.splice(t,1),g=N(a.length,s&&s.length||0)}}function o(e,t,r,n,i){e&&t&&"M"==e[i][0]&&"M"!=t[i][0]&&(t.splice(i,0,["M",n.x,n.y]),r.bx=0,r.by=0,r.x=e[i][1],r.y=e[i][2],g=N(a.length,s&&s.length||0))}for(var a=C(e),s=t&&C(t),u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},c=[],d=[],h="",f="",p=0,g=N(a.length,s&&s.length||0);p<g;p++){a[p]&&(h=a[p][0]),"C"!=h&&(c[p]=h,p&&(f=c[p-1])),a[p]=n(a[p],u,f),"A"!=c[p]&&"C"==h&&(c[p]="C"),i(a,p),s&&(s[p]&&(h=s[p][0]),"C"!=h&&(d[p]=h,p&&(f=d[p-1])),s[p]=n(s[p],l,f),"A"!=d[p]&&"C"==h&&(d[p]="C"),i(s,p)),o(a,s,u,l,p),o(s,a,l,u,p);var _=a[p],y=s&&s[p],v=_.length,m=s&&y.length;u.x=_[v-2],u.y=_[v-1],u.bx=F(_[v-4])||u.x,u.by=F(_[v-3])||u.y,l.bx=s&&(F(y[m-4])||l.x),l.by=s&&(F(y[m-3])||l.y),l.x=s&&y[m-2],l.y=s&&y[m-1]}return s||(r.curve=E(a)),s?[a,s]:a}function M(e,t){for(var r=[],n=0,i=e.length;n<i-2*!t;n+=2){var o=[{x:+e[n-2],y:+e[n-1]},{x:+e[n],y:+e[n+1]},{x:+e[n+2],y:+e[n+3]},{x:+e[n+4],y:+e[n+5]}];t?n?i-4==n?o[3]={x:+e[0],y:+e[1]}:i-2==n&&(o[2]={x:+e[0],y:+e[1]},o[3]={x:+e[2],y:+e[3]}):o[0]={x:+e[i-2],y:+e[i-1]}:i-4==n?o[3]=o[2]:n||(o[0]={x:+e[n],y:+e[n+1]}),r.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return r}var n=_.prototype,I=G.is,p=G._.clone,s="hasOwnProperty",u=/,?([a-z]),?/gi,F=parseFloat,V=Math,W=V.PI,L=V.min,N=V.max,j=V.pow,J=V.abs,l=r(1),c=r(),d=r(0,1),h=G._unit2px,U={path:function(e){return e.attr("path")},circle:function(e){var t=h(e);return T(t.cx,t.cy,t.r)},ellipse:function(e){var t=h(e);return T(t.cx||0,t.cy||0,t.rx,t.ry)},rect:function(e){var t=h(e);return a(t.x||0,t.y||0,t.width,t.height,t.rx,t.ry)},image:function(e){var t=h(e);return a(t.x||0,t.y||0,t.width,t.height)},line:function(e){return"M"+[e.attr("x1")||0,e.attr("y1")||0,e.attr("x2"),e.attr("y2")]},polyline:function(e){return"M"+e.attr("points")},polygon:function(e){return"M"+e.attr("points")+"z"},deflt:function(e){var t=e.node.getBBox();return a(t.x,t.y,t.width,t.height)}};G.path=b,G.path.getTotalLength=l,G.path.getPointAtLength=c,G.path.getSubpath=function(e,t,r){if(this.getTotalLength(e)-r<1e-6)return d(e,t).end;var n=d(e,r,1);return t?d(n,t).end:n},n.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},n.getPointAtLength=function(e){return c(this.attr("d"),e)},n.getSubpath=function(e,t){return G.path.getSubpath(this.attr("d"),e,t)},G._.box=g,G.path.findDotsAtSegment=w,G.path.bezierBBox=S,G.path.isPointInsideBBox=v,G.closest=function(e,t,r,n){for(var i=100,o=g(e-i/2,t-i/2,i,i),a=[],s=r[0].hasOwnProperty("x")?function(e){return{x:r[e].x,y:r[e].y}}:function(e){return{x:r[e],y:n[e]}},u=0;i<=1e6&&!u;){for(var l=0,c=r.length;l<c;l++){var d=s(l);if(v(o,d.x,d.y)){u++,a.push(d);break}}u||(o=g(e-(i*=2)/2,t-i/2,i,i))}if(1e6!=i){for(var h,f=1/0,l=0,c=a.length;l<c;l++){var p=G.len(e,t,a[l].x,a[l].y);p<f&&(f=p,a[l].len=p,h=a[l])}return h}},G.path.isBBoxIntersect=P,G.path.intersection=function(e,t){return i(e,t)},G.path.intersectionNumber=function(e,t){return i(e,t,1)},G.path.isPointInside=function(e,t,r){var n=o(e);return v(n,t,r)&&i(e,[["M",t,r],["H",n.x2+10]],1)%2==1},G.path.getBBox=o,G.path.get=U,G.path.toRelative=function(e){var t=b(e),r=String.prototype.toLowerCase;if(t.rel)return E(t.rel);G.is(e,"array")&&G.is(e&&e[0],"array")||(e=G.parsePathString(e));var n=[],i=0,o=0,a=0,s=0,u=0;"M"==e[0][0]&&(a=i=e[0][1],s=o=e[0][2],u++,n.push(["M",i,o]));for(var l=u,c=e.length;l<c;l++){var d=n[l]=[],h=e[l];if(h[0]!=r.call(h[0]))switch(d[0]=r.call(h[0]),d[0]){case"a":d[1]=h[1],d[2]=h[2],d[3]=h[3],d[4]=h[4],d[5]=h[5],d[6]=+(h[6]-i).toFixed(3),d[7]=+(h[7]-o).toFixed(3);break;case"v":d[1]=+(h[1]-o).toFixed(3);break;case"m":a=h[1],s=h[2];default:for(var f=1,p=h.length;f<p;f++)d[f]=+(h[f]-(f%2?i:o)).toFixed(3)}else{d=n[l]=[],"m"==h[0]&&(a=h[1]+i,s=h[2]+o);for(var g=0,_=h.length;g<_;g++)n[l][g]=h[g]}var y=n[l].length;switch(n[l][0]){case"z":i=a,o=s;break;case"h":i+=+n[l][y-1];break;case"v":o+=+n[l][y-1];break;default:i+=+n[l][y-2],o+=+n[l][y-1]}}return n.toString=m,t.rel=E(n),n},G.path.toAbsolute=C,G.path.toCubic=D,G.path.map=function(e,t){if(!t)return e;for(var r,n,i,o,a,s=0,u=(e=D(e)).length;s<u;s++)for(i=1,o=(a=e[s]).length;i<o;i+=2)r=t.x(a[i],a[i+1]),n=t.y(a[i],a[i+1]),a[i]=r,a[i+1]=n;return e},G.path.toString=m,G.path.clone=E}),t.plugin(function(d,e,t,r){function u(e){if(this.items=[],this.bindings={},this.length=0,this.type="set",e)for(var t=0,r=e.length;t<r;t++)e[t]&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)}var l=Math.max,c=Math.min,n=u.prototype;n.push=function(){for(var e,t,r=0,n=arguments.length;r<n;r++)(e=arguments[r])&&(this[t=this.items.length]=this.items[t]=e,this.length++);return this},n.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},n.forEach=function(e,t){for(var r=0,n=this.items.length;r<n;r++)if(!1===e.call(t,this.items[r],r))return this;return this},n.animate=function(r,n,i,e){"function"!=typeof i||i.length||(e=i,i=b.linear),r instanceof d._.Animation&&(e=r.callback,i=r.easing,n=i.dur,r=r.attr);var o,a=arguments;d.is(r,"array")&&d.is(a[a.length-1],"array")&&(o=!0);function s(){t?this.b=t:t=this.b}var t,u=0,l=this,c=e&&function(){++u==l.length&&e.call(this)};return this.forEach(function(e,t){J.once("snap.animcreated."+e.id,s),o?a[t]&&e.animate.apply(e,a[t]):e.animate(r,n,i,c)})},n.remove=function(){for(;this.length;)this.pop().remove();return this},n.bind=function(e,t,r){var n,i={};return"function"==typeof t?this.bindings[e]=t:(n=r||e,this.bindings[e]=function(e){i[n]=e,t.attr(i)}),this},n.attr=function(e){var t={};for(var r in e)this.bindings[r]?this.bindings[r](e[r]):t[r]=e[r];for(var n=0,i=this.items.length;n<i;n++)this.items[n].attr(t);return this},n.clear=function(){for(;this.length;)this.pop()},n.splice=function(e,t,r){e=e<0?l(this.length+e,0):e,t=l(0,c(this.length-e,t));for(var n=[],i=[],o=[],a=2;a<arguments.length;a++)o.push(arguments[a]);for(a=0;a<t;a++)i.push(this[e+a]);for(;a<this.length-e;a++)n.push(this[e+a]);var s=o.length;for(a=0;a<s+n.length;a++)this.items[e+a]=this[e+a]=a<s?o[a]:n[a-s];for(a=this.items.length=this.length-=t-s;this[a];)delete this[a++];return new u(i)},n.exclude=function(e){for(var t=0,r=this.length;t<r;t++)if(this[t]==e)return this.splice(t,1),!0;return!1},n.insertAfter=function(e){for(var t=this.items.length;t--;)this.items[t].insertAfter(e);return this},n.getBBox=function(){for(var e,t=[],r=[],n=[],i=[],o=this.items.length;o--;){this.items[o].removed||(e=this.items[o].getBBox(),t.push(e.x),r.push(e.y),n.push(e.x+e.width),i.push(e.y+e.height))}return{x:t=c.apply(0,t),y:r=c.apply(0,r),x2:n=l.apply(0,n),y2:i=l.apply(0,i),width:n-t,height:i-r,cx:t+(n-t)/2,cy:r+(i-r)/2}},n.clone=function(e){e=new u;for(var t=0,r=this.items.length;t<r;t++)e.push(this.items[t].clone());return e},n.toString=function(){return"Snap‘s set"},n.type="set",d.Set=u,d.set=function(){var e=new u;return arguments.length&&e.push.apply(e,Array.prototype.slice.call(arguments,0)),e}}),t.plugin(function(d,e,t,r){function h(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return 4==e.length?[t,0,e[2],e[3]]:[t,0];case"s":return 5==e.length?[t,1,1,e[3],e[4]]:3==e.length?[t,1,1]:[t,1]}}function f(e){return e}function p(e){return e.join(" ")}function g(e){return d.rgb(e[0],e[1],e[2],e[3])}function _(e){for(var t,r,n,i,o=0,a=[],s=0,u=e.length;s<u;s++){for(n="[",i=['"'+e[s][0]+'"'],t=1,r=e[s].length;t<r;t++)i[t]="val["+o+++"]";n+=i+"]",a[s]=n}return Function("val","return Snap.path.toString.call(["+a+"])")}function y(e){for(var t=[],r=0,n=e.length;r<n;r++)for(var i=1,o=e[r].length;i<o;i++)t.push(e[r][i]);return t}function v(e){return isFinite(e)}var m={},b=/[%a-z]+$/i,E=String;m.stroke=m.fill="colour",e.prototype.equal=function(e,t){return J("snap.util.equal",this,e,t).firstDefined()},J.on("snap.util.equal",function(e,t){var r,n,i=E(this.attr(e)||""),o=this;if("colour"==m[e])return r=d.color(i),n=d.color(t),{from:[r.r,r.g,r.b,r.opacity],to:[n.r,n.g,n.b,n.opacity],f:g};if("viewBox"==e)return{from:r=this.attr(e).vb.split(" ").map(Number),to:n=t.split(" ").map(Number),f:p};if("transform"==e||"gradientTransform"==e||"patternTransform"==e)return"string"==typeof t&&(t=E(t).replace(/\.{3}|\u2026/g,i)),function(e,t,r){e=e||new d.Matrix,t=t||new d.Matrix,e=d.parseTransformString(e.toTransformString())||[],t=d.parseTransformString(t.toTransformString())||[];for(var n,i,o,a,s=Math.max(e.length,t.length),u=[],l=[],c=0;c<s;c++){if(o=e[c]||h(t[c]),a=t[c]||h(o),o[0]!=a[0]||"r"==o[0].toLowerCase()&&(o[2]!=a[2]||o[3]!=a[3])||"s"==o[0].toLowerCase()&&(o[3]!=a[3]||o[4]!=a[4])){e=d._.transform2matrix(e,r()),t=d._.transform2matrix(t,r()),u=[["m",e.a,e.b,e.c,e.d,e.e,e.f]],l=[["m",t.a,t.b,t.c,t.d,t.e,t.f]];break}for(u[c]=[],l[c]=[],n=0,i=Math.max(o.length,a.length);n<i;n++)n in o&&(u[c][n]=o[n]),n in a&&(l[c][n]=a[n])}return{from:y(u),to:y(l),f:_(u)}}(i=this.matrix,t=d._.rgTransform.test(t)?d._.transform2matrix(t,this.getBBox()):d._.transform2matrix(d._.svgTransform2string(t),this.getBBox()),function(){return o.getBBox(1)});if("d"==e||"path"==e)return{from:y((r=d.path.toCubic(i,t))[0]),to:y(r[1]),f:_(r[0])};if("points"==e)return{from:r=E(i).split(d._.separator),to:n=E(t).split(d._.separator),f:function(e){return e}};if(v(i)&&v(t))return{from:parseFloat(i),to:parseFloat(t),f:f};var a,s,u,l=i.match(b),c=E(t).match(b);return l&&(s=l,u=c,d.is(s,"array")&&d.is(u,"array")&&s.toString()==u.toString())?{from:parseFloat(i),to:parseFloat(t),f:(a=l,function(e){return+e.toFixed(3)+a})}:{from:this.asPX(e),to:this.asPX(e,t),f:f}})}),t.plugin(function(c,e,t,i){function h(e,t){var r="y"==e?"scrollTop":"scrollLeft",n=t&&t.node?t.node.ownerDocument:i.doc;return n[r in n.documentElement?"documentElement":"body"][r]}function f(){return this.originalEvent.preventDefault()}function p(){return this.originalEvent.stopPropagation()}function o(u,l,c,d){function e(e){var t=h("y",d),r=h("x",d);if(g&&_.hasOwnProperty(l))for(var n=0,i=e.targetTouches&&e.targetTouches.length;n<i;n++)if(e.targetTouches[n].target==u||u.contains(e.targetTouches[n].target)){var o=e;(e=e.targetTouches[n]).originalEvent=o,e.preventDefault=f,e.stopPropagation=p;break}var a=e.clientX+r,s=e.clientY+t;return c.call(d,e,a,s)}var t=g&&_[l]?_[l]:l;return l!==t&&u.addEventListener(l,e,!1),u.addEventListener(t,e,!1),function(){return l!==t&&u.removeEventListener(l,e,!1),u.removeEventListener(t,e,!1),!0}}function d(e){for(var t,r=e.clientX,n=e.clientY,i=h("y"),o=h("x"),a=y.length;a--;){if(t=y[a],g){for(var s,u=e.touches&&e.touches.length;u--;)if((s=e.touches[u]).identifier==t.el._drag.id||t.el.node.contains(s.target)){r=s.clientX,n=s.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var l=t.el.node;l.nextSibling,l.parentNode,l.style.display,r+=o,n+=i,J("snap.drag.move."+t.el.id,t.move_scope||t.el,r-t.el._drag.x,n-t.el._drag.y,r,n,e)}}for(var r=e.prototype,g=("createTouch"in i.doc),n=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],_={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},y=[],v=function(e){c.unmousemove(d).unmouseup(v);for(var t,r=y.length;r--;)(t=y[r]).el._drag={},J("snap.drag.end."+t.el.id,t.end_scope||t.start_scope||t.move_scope||t.el,e),J.off("snap.drag.*."+t.el.id);y=[]},a=n.length;a--;)!function(i){c[i]=r[i]=function(e,t){if(c.is(e,"function"))this.events=this.events||[],this.events.push({name:i,f:e,unbind:o(this.node||document,i,e,t||this)});else for(var r=0,n=this.events.length;r<n;r++)if(this.events[r].name==i)try{this.events[r].f.call(this)}catch(e){}return this},c["un"+i]=r["un"+i]=function(e){for(var t=this.events||[],r=t.length;r--;)if(t[r].name==i&&(t[r].f==e||!e))return t[r].unbind(),t.splice(r,1),t.length||delete this.events,this;return this}}(n[a]);r.hover=function(e,t,r,n){return this.mouseover(e,r).mouseout(t,n||r)},r.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var m=[];r.drag=function(n,i,o,a,s,u){function e(e,t,r){(e.originalEvent||e).preventDefault(),l._drag.x=t,l._drag.y=r,l._drag.id=e.identifier,y.length||c.mousemove(d).mouseup(v),y.push({el:l,move_scope:a,start_scope:s,end_scope:u}),i&&J.on("snap.drag.start."+l.id,i),n&&J.on("snap.drag.move."+l.id,n),o&&J.on("snap.drag.end."+l.id,o),J("snap.drag.start."+l.id,s||a||l,t,r,e)}function t(e,t,r){J("snap.draginit."+l.id,l,e,t,r)}var r,l=this;return arguments.length?(J.on("snap.draginit."+l.id,e),l._drag={},m.push({el:l,start:e,init:t}),l.mousedown(t),l):l.drag(function(e,t){this.attr({transform:r+(r?"T":"t")+[e,t]})},function(){r=this.transform().local})},r.undrag=function(){for(var e=m.length;e--;)m[e].el==this&&(this.unmousedown(m[e].init),m.splice(e,1),J.unbind("snap.drag.*."+this.id),J.unbind("snap.draginit."+this.id));return m.length||c.unmousemove(d).unmouseup(v),this}}),t.plugin(function(o,a,e,t){var r=(a.prototype,e.prototype),n=/^\s*url\((.+)\)/,s=String,u=o._.$;o.filter={},r.filter=function(e){var t=this;"svg"!=t.type&&(t=t.paper);var r=o.parse(s(e)),n=o._.id(),i=(t.node.offsetWidth,t.node.offsetHeight,u("filter"));return u(i,{id:n,filterUnits:"userSpaceOnUse"}),i.appendChild(r.node),t.defs.appendChild(i),new a(i)},J.on("snap.util.getattr.filter",function(){J.stop();var e=u(this.node,"filter");if(e){var t=s(e).match(n);return t&&o.select(t[1])}}),J.on("snap.util.attr.filter",function(e){var t;e instanceof a&&"filter"==e.type&&(J.stop(),(t=e.node.id)||(u(e.node,{id:e.id}),t=e.id),u(this.node,{filter:o.url(t)})),e&&"none"!=e||(J.stop(),this.node.removeAttribute("filter"))}),o.filter.blur=function(e,t){null==e&&(e=2);var r=null==t?e:[e,t];return o.format('<feGaussianBlur stdDeviation="{def}"/>',{def:r})},o.filter.blur.toString=function(){return this()},o.filter.shadow=function(e,t,r,n,i){return null==i&&(null==n?(i=r,r=4,n="#000"):(i=n,n=r,r=4)),null==r&&(r=4),null==i&&(i=1),null==e&&(e=0,t=2),null==t&&(t=e),n=o.color(n),o.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:n,dx:e,dy:t,blur:r,opacity:i})},o.filter.shadow.toString=function(){return this()},o.filter.grayscale=function(e){return null==e&&(e=1),o.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},o.filter.grayscale.toString=function(){return this()},o.filter.sepia=function(e){return null==e&&(e=1),o.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},o.filter.sepia.toString=function(){return this()},o.filter.saturate=function(e){return null==e&&(e=1),o.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-e})},o.filter.saturate.toString=function(){return this()},o.filter.hueRotate=function(e){return e=e||0,o.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:e})},o.filter.hueRotate.toString=function(){return this()},o.filter.invert=function(e){return null==e&&(e=1),o.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:e,amount2:1-e})},o.filter.invert.toString=function(){return this()},o.filter.brightness=function(e){return null==e&&(e=1),o.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:e})},o.filter.brightness.toString=function(){return this()},o.filter.contrast=function(e){return null==e&&(e=1),o.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:e,amount2:.5-e/2})},o.filter.contrast.toString=function(){return this()}}),t.plugin(function(e,t,r,n,i){function o(){return"T"+this.dx+","+this.dy}var a=e._.box,s=e.is,u=/^[^a-z]*([tbmlrc])/i;t.prototype.getAlign=function(e,t){null==t&&s(e,"string")&&(t=e,e=null);var r=(e=e||this.paper).getBBox?e.getBBox():a(e),n=this.getBBox(),i={};switch(t=(t=t&&t.match(u))?t[1].toLowerCase():"c"){case"t":i.dx=0,i.dy=r.y-n.y;break;case"b":i.dx=0,i.dy=r.y2-n.y2;break;case"m":i.dx=0,i.dy=r.cy-n.cy;break;case"l":i.dx=r.x-n.x,i.dy=0;break;case"r":i.dx=r.x2-n.x2,i.dy=0;break;default:i.dx=r.cx-n.cx,i.dy=0}return i.toString=o,i},t.prototype.align=function(e,t){return this.transform("..."+this.getAlign(e,t))}}),t.plugin(function(t,e,r,n){function i(e){e=e.split(/(?=#)/);var t=new String(e[5]);return t[50]=e[0],t[100]=e[1],t[200]=e[2],t[300]=e[3],t[400]=e[4],t[500]=e[5],t[600]=e[6],t[700]=e[7],t[800]=e[8],t[900]=e[9],e[10]&&(t.A100=e[10],t.A200=e[11],t.A400=e[12],t.A700=e[13]),t}t.mui={},t.flat={},t.mui.red=i("#ffebee#ffcdd2#ef9a9a#e57373#ef5350#f44336#e53935#d32f2f#c62828#b71c1c#ff8a80#ff5252#ff1744#d50000"),t.mui.pink=i("#FCE4EC#F8BBD0#F48FB1#F06292#EC407A#E91E63#D81B60#C2185B#AD1457#880E4F#FF80AB#FF4081#F50057#C51162"),t.mui.purple=i("#F3E5F5#E1BEE7#CE93D8#BA68C8#AB47BC#9C27B0#8E24AA#7B1FA2#6A1B9A#4A148C#EA80FC#E040FB#D500F9#AA00FF"),t.mui.deeppurple=i("#EDE7F6#D1C4E9#B39DDB#9575CD#7E57C2#673AB7#5E35B1#512DA8#4527A0#311B92#B388FF#7C4DFF#651FFF#6200EA"),t.mui.indigo=i("#E8EAF6#C5CAE9#9FA8DA#7986CB#5C6BC0#3F51B5#3949AB#303F9F#283593#1A237E#8C9EFF#536DFE#3D5AFE#304FFE"),t.mui.blue=i("#E3F2FD#BBDEFB#90CAF9#64B5F6#64B5F6#2196F3#1E88E5#1976D2#1565C0#0D47A1#82B1FF#448AFF#2979FF#2962FF"),t.mui.lightblue=i("#E1F5FE#B3E5FC#81D4FA#4FC3F7#29B6F6#03A9F4#039BE5#0288D1#0277BD#01579B#80D8FF#40C4FF#00B0FF#0091EA"),t.mui.cyan=i("#E0F7FA#B2EBF2#80DEEA#4DD0E1#26C6DA#00BCD4#00ACC1#0097A7#00838F#006064#84FFFF#18FFFF#00E5FF#00B8D4"),t.mui.teal=i("#E0F2F1#B2DFDB#80CBC4#4DB6AC#26A69A#009688#00897B#00796B#00695C#004D40#A7FFEB#64FFDA#1DE9B6#00BFA5"),t.mui.green=i("#E8F5E9#C8E6C9#A5D6A7#81C784#66BB6A#4CAF50#43A047#388E3C#2E7D32#1B5E20#B9F6CA#69F0AE#00E676#00C853"),t.mui.lightgreen=i("#F1F8E9#DCEDC8#C5E1A5#AED581#9CCC65#8BC34A#7CB342#689F38#558B2F#33691E#CCFF90#B2FF59#76FF03#64DD17"),t.mui.lime=i("#F9FBE7#F0F4C3#E6EE9C#DCE775#D4E157#CDDC39#C0CA33#AFB42B#9E9D24#827717#F4FF81#EEFF41#C6FF00#AEEA00"),t.mui.yellow=i("#FFFDE7#FFF9C4#FFF59D#FFF176#FFEE58#FFEB3B#FDD835#FBC02D#F9A825#F57F17#FFFF8D#FFFF00#FFEA00#FFD600"),t.mui.amber=i("#FFF8E1#FFECB3#FFE082#FFD54F#FFCA28#FFC107#FFB300#FFA000#FF8F00#FF6F00#FFE57F#FFD740#FFC400#FFAB00"),t.mui.orange=i("#FFF3E0#FFE0B2#FFCC80#FFB74D#FFA726#FF9800#FB8C00#F57C00#EF6C00#E65100#FFD180#FFAB40#FF9100#FF6D00"),t.mui.deeporange=i("#FBE9E7#FFCCBC#FFAB91#FF8A65#FF7043#FF5722#F4511E#E64A19#D84315#BF360C#FF9E80#FF6E40#FF3D00#DD2C00"),t.mui.brown=i("#EFEBE9#D7CCC8#BCAAA4#A1887F#8D6E63#795548#6D4C41#5D4037#4E342E#3E2723"),t.mui.grey=i("#FAFAFA#F5F5F5#EEEEEE#E0E0E0#BDBDBD#9E9E9E#757575#616161#424242#212121"),t.mui.bluegrey=i("#ECEFF1#CFD8DC#B0BEC5#90A4AE#78909C#607D8B#546E7A#455A64#37474F#263238"),t.flat.turquoise="#1abc9c",t.flat.greensea="#16a085",t.flat.sunflower="#f1c40f",t.flat.orange="#f39c12",t.flat.emerland="#2ecc71",t.flat.nephritis="#27ae60",t.flat.carrot="#e67e22",t.flat.pumpkin="#d35400",t.flat.peterriver="#3498db",t.flat.belizehole="#2980b9",t.flat.alizarin="#e74c3c",t.flat.pomegranate="#c0392b",t.flat.amethyst="#9b59b6",t.flat.wisteria="#8e44ad",t.flat.clouds="#ecf0f1",t.flat.silver="#bdc3c7",t.flat.wetasphalt="#34495e",t.flat.midnightblue="#2c3e50",t.flat.concrete="#95a5a6",t.flat.asbestos="#7f8c8d",t.importMUIColors=function(){for(var e in t.mui)t.mui.hasOwnProperty(e)&&(v[e]=t.mui[e])}}),t}),function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(){return i={},r.m=n=[function(u,e,l){(function(e){"use strict";var r=l(4),t=l(8),n=l(3),i=l(9),o=l(2).Promise,a=l(16),s=l(17);u.exports=e.SC={initialize:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];n.set("oauth_token",e.oauth_token),n.set("client_id",e.client_id),n.set("redirect_uri",e.redirect_uri),n.set("baseURL",e.baseURL),n.set("connectURL",e.connectURL)},get:function(e,t){return r.request("GET",e,t)},post:function(e,t){return r.request("POST",e,t)},put:function(e,t){return r.request("PUT",e,t)},delete:function(e){return r.request("DELETE",e)},upload:function(e){return r.upload(e)},connect:function(e){return i(e)},isConnected:function(){return void 0!==n.get("oauth_token")},oEmbed:function(e,t){return r.oEmbed(e,t)},resolve:function(e){return r.resolve(e)},Recorder:a,Promise:o,stream:function(e,t){return s(e,t)},connectCallback:function(){t.notifyDialog(this.location)}}}).call(e,function(){return this}())},function(e,t){function r(e){if(i[e])return i[e].exports;var t=i[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var n,i;e.exports=(i={},r.m=n=[function(e,t,r){e.exports={SCAudio:r(1),SCAudioControllerHTML5Player:r(3),SCAudioControllerHLSMSEPlayer:r(5),SCAudioPublicApiStreamURLRetriever:r(12),MaestroCore:r(2),MaestroLoaders:r(11)}},function(e,t,r){var n;window,e.exports=(n=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=99)}([function(e,t){e.exports=n},function(e,t,r){"use strict";var n=r(5);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,r){"use strict";e.exports=r(55)()?Symbol:r(54)},function(e,t,r){"use strict";var s=r(11),u=r(18),l=r(59),c=r(17);(e.exports=function(e,t){var r,n,i,o,a;return arguments.length<2||"string"!=typeof e?(o=t,t=e,e=null):o=arguments[2],null==e?(r=i=!0,n=!1):(r=c.call(e,"c"),n=c.call(e,"e"),i=c.call(e,"w")),a={value:t,configurable:r,enumerable:n,writable:i},o?s(u(o),a):a}).gs=function(e,t,r){var n,i,o,a;return"string"!=typeof e?(o=r,r=t,t=e,e=null):o=arguments[3],null==t?t=void 0:l(t)?null==r?r=void 0:l(r)||(o=r,r=void 0):(o=t,t=r=void 0),i=null==e?!(n=!0):(n=c.call(e,"c"),c.call(e,"e")),a={get:t,set:r,configurable:n,enumerable:i},o?s(u(o),a):a}},function(e,t,r){"use strict";var n=r(22)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(t){function e(e){return t.call(this,e||"There was no format available that a player was able to play.")||this}return n(e,t),e.prototype.getCode=function(){return"SCAUDIO.NOT_SUPPORTED_ERROR"},e}(i.errors.PlayerFatalError);t.NotSupportedError=o},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===i)||!1}},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call(function(){return arguments}());e.exports=function(e){return n.call(e)===i}},function(e,t,r){"use strict";e.exports=r(20)()?Object.setPrototypeOf:r(19)},function(e,t,r){"use strict";var n,i=r(23),o=r(11),a=r(2),s=r(1),u=r(4),l=r(47),c=r(3),d=Object.defineProperty,h=Object.defineProperties;e.exports=n=function(e,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");h(this,{__list__:u("w",s(e)),__context__:u("w",t),__nextIndex__:u("w",0)}),t&&(a(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete n.prototype.constructor,h(n.prototype,o({_next:u(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:u(function(){return this._createResult(this._next())}),_createResult:u(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:u(function(e){return this.__list__[e]}),_unBind:u(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:u(function(){return"[object "+(this[c.toStringTag]||"Object")+"]"})},l({_onAdd:u(function(r){if(!(r>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void d(this,"__redo__",u("c",[r]));this.__redo__.forEach(function(e,t){r<=e&&(this.__redo__[t]=++e)},this),this.__redo__.push(r)}}),_onDelete:u(function(r){var e;r>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(r))&&this.__redo__.splice(e,1),this.__redo__.forEach(function(e,t){r<e&&(this.__redo__[t]=--e)},this)))}),_onClear:u(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),d(n.prototype,c.iterator,u(function(){return this}))},function(e,t,r){"use strict";e.exports=r(64)()?Object.assign:r(63)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAppState=function(){switch(window.document.hidden){case!0:return"background";case!1:return"foreground";default:return}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(97),i=r(96),o=r(95),a=r(94),s=r(93),u=r(92),l=r(91),c=r(90),d=r(89),h=r(88);t.renditions={httpMp3:n.httpMp3,httpAACHQ:h.httpAACHQ,hlsMp3:i.hlsMp3,encryptedHlsMp3:o.encryptedHlsMp3,hlsOpus:c.hlsOpus,encryptedHlsOpus:d.encryptedHlsOpus,hlsAACHQ:a.hlsAACHQ,encryptedHlsAACHQ:s.encryptedHlsAACHQ,apiMobile:u.apiMobile,maestroChromecast:l.maestroChromecast},t.allRenditions=Object.keys(t.renditions).map(function(e){return t.renditions[e]})},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),o=function(e){function t(){return e.call(this,"Failed to retrieve stream url.")||this}return n(t,e),t.prototype.getCode=function(){return"SCAUDIO.FAILED_RETRIEVING_URL"},t}(i.NotSupportedError);t.FailedRetrievingUrlError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),o=function(e){function t(){return e.call(this,"There were no stream URLs.")||this}return n(t,e),t.prototype.getCode=function(){return"SCAUDIO.NO_STREAMS"},t}(i.NotSupportedError);t.NoStreamsError=o},function(e,t,r){"use strict";var n=r(51);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not iterable");return e}},function(e,t,r){"use strict";e.exports=r(58)()?String.prototype.contains:r(57)},function(e,t,r){"use strict";var n=r(5),i=Array.prototype.forEach,o=Object.create;e.exports=function(e){var t=o(null);return i.call(arguments,function(e){n(e)&&function(e,t){var r;for(r in e)t[r]=e[r]}(Object(e),t)}),t}},function(e,t,r){"use strict";var i,n=r(66),o=r(1),a=Object.prototype.isPrototypeOf,s=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0};i=function(e,t){if(o(e),null===t||n(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=function(e){var t,r;return e?(t=2===e.level?e.set?(r=e.set,function(e,t){return r.call(i(e,t),t),e}):function(e,t){return i(e,t).__proto__=t,e}:function e(t,r){var n;return i(t,r),(n=a.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===r&&(r=e.nullPolyfill),t.__proto__=r,n&&s(e.nullPolyfill,"__proto__",u),t},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{(e=n.set).call(t,r)}catch(e){}if(Object.getPrototypeOf(t)===r)return{set:e,level:2}}return t.__proto__=r,Object.getPrototypeOf(t)===r?{level:2}:((t={}).__proto__=r,Object.getPrototypeOf(t)===r&&{level:1})}()),r(65)},function(e,t,r){"use strict";var n=Object.create,i=Object.getPrototypeOf,o={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||n;return"function"==typeof e&&i(e(t(null),o))===o}},function(e,t,r){"use strict";var n=r(70),i=Math.max;e.exports=function(e){return i(0,n(e))}},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n=r(1);e.exports=function(){return n(this).length=0,this}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notSupportedError=new Error("Not supported.");var n=function(){this.supportsVolumeAutomation=!0,this.syncConfig={}};t.BaseController=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.BaseStreamUrlRetriever=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildFadeIn=function(e){return new n({startPos:0,endPos:e,startLevel:0,endLevel:1,fromEnd:!1})},t.buildFadeOut=function(e){return new n({startPos:e,endPos:0,startLevel:1,endLevel:0,fromEnd:!0})};var n=function(){function e(e){var t=e.startPos,r=e.endPos,n=e.startLevel,i=e.endLevel,o=e.fromEnd,a=void 0!==o&&o;if(t<0)throw new Error("startPos invalid.");if(r<0||!a&&r<t||a&&t<r)throw new Error("endPos invalid.");if(n<0||1<n)throw new Error("startLevel invalid.");if(i<0||1<i)throw new Error("endLevel invalid.");this._startPos=t,this._endPos=r,this._startLevel=n,this._endLevel=i,this._fromEnd=a}return e.prototype.calculate=function(e,t){var r=this._fromEnd?t-500-this._startPos:this._startPos,n=this._fromEnd?t-500-this._endPos:this._endPos;if(e<r)return{level:this._startLevel,nextCalculatePosition:r-e};if(e<=n){var i=(e-r)/(n-r),o=Math.cos(i*Math.PI)/-2+.5,a=this._startLevel+(this._endLevel-this._startLevel)*o;return{level:a,nextCalculatePosition:e}}return{level:this._endLevel,nextCalculatePosition:1/0}},e}();t.Fade=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(15),o=r(14);!function(e){e.NotSupportedError=n.NotSupportedError,e.NoStreamsError=i.NoStreamsError,e.FailedRetrievingUrlError=o.FailedRetrievingUrlError}(t.errors||(t.errors={}))},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SQ="sq",e.HQ="hq"}(n=t.Quality||(t.Quality={})),t.resolveQuality=function(e){switch(e){case n.SQ:return n.SQ;case n.HQ:return n.HQ}return null}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),n=function(){function e(n){var i=this;this._player=n,this._onConnectionRequired=new a.eventDispatcher.EventDispatcher,this._onConnectionRecovered=new a.eventDispatcher.EventDispatcher,this._connectionRequired=!1,this._connectionLossTimer=null,this.onConnectionRequired=this._onConnectionRequired.getHandle(),this.onConnectionRecovered=this._onConnectionRecovered.getHandle();var o=function(){return i._calculateIfConnectionRequired()};window.addEventListener("online",o),window.addEventListener("offline",o),this._calculateIfConnectionRequired(),n.onChange.subscribe(function(e){var t=e.loading,r=e.dead;r&&null!==i._connectionLossTimer&&(window.clearTimeout(i._connectionLossTimer),window.removeEventListener("online",o),window.removeEventListener("offline",o)),n.isDead()||void 0===t||i._calculateIfConnectionRequired()})}return e.prototype.isConnectionRequired=function(){return this._connectionRequired},e.prototype._calculateIfConnectionRequired=function(){var e=this,t=this._player.isLoading()&&"navigator"in window&&!window.navigator.onLine;t?null===this._connectionLossTimer&&(this._connectionLossTimer=window.setTimeout(function(){e._connectionLossTimer=null,e._connectionRequired=!0,e._onConnectionRequired.dispatch(void 0)},1500)):this._connectionRequired?(this._connectionRequired=!1,this._onConnectionRecovered.dispatch(void 0)):null!==this._connectionLossTimer&&(window.clearTimeout(this._connectionLossTimer),this._connectionLossTimer=null)},e}();t.ConnectionRequiredHelper=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateLogId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",r=0;r<20;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}},function(e,t,r){"use strict";function n(e,t){return void 0!==e?e:t}Object.defineProperty(t,"__esModule",{value:!0});var i=r(25),o=r(0);t.validatePlayerDependencies=function(e){if(!(e.streamUrlRetriever instanceof i.BaseStreamUrlRetriever))throw new Error("StreamUrlRetriever invalid.");if(void 0!==e.duration&&("number"!=typeof e.duration||e.duration<0))throw new Error("duration invalid.");if(void 0!==e.getURLOpts&&"object"!=typeof e.getURLOpts)throw new Error("getURLOpts invalid.");if(void 0!==e.preloadingEnabled&&"boolean"!=typeof e.preloadingEnabled)throw new Error("preloadingEnabled invalid.");if(void 0!==e.fadeOnPauseAndPlay&&"boolean"!=typeof e.fadeOnPauseAndPlay)throw new Error("fadeOnPauseAndPlay invalid.");if(void 0!==e.fadeOnSeek&&"boolean"!=typeof e.fadeOnSeek)throw new Error("fadeOnSeek invalid.");if(void 0!==e.mediaSessionEnabled&&"boolean"!=typeof e.mediaSessionEnabled)throw new Error("mediaSessionEnabled invalid.");if(void 0!==e.pausedMaxBufferLength&&("number"!=typeof e.pausedMaxBufferLength||e.pausedMaxBufferLength<0))throw new Error("pausedMaxBufferLength invalid.");if(void 0!==e.playingMaxBufferLength&&("number"!=typeof e.playingMaxBufferLength||e.playingMaxBufferLength<0))throw new Error("playingMaxBufferLength invalid.");if(void 0!==e.logger&&"function"!=typeof e.logger&&"object"!=typeof e.logger)throw new Error("logger invalid.");if(void 0!==e.audioReporter&&"function"!=typeof e.audioReporter)throw new Error("audioReporter invalid.");if(void 0!==e.audioCheckpointInterval&&("number"!=typeof e.audioCheckpointInterval||e.audioCheckpointInterval<0))throw new Error("audioCheckpointInterval invalid.");if(void 0!==e.audioPerformanceReporter&&"function"!=typeof e.audioPerformanceReporter)throw new Error("audioPerformanceReporter invalid.");if(void 0!==e.errorReporter&&"function"!=typeof e.errorReporter)throw new Error("errorReporter invalid.");if(void 0!==e.urlProviderRetryDelayCalculator&&"function"!=typeof e.urlProviderRetryDelayCalculator)throw new Error("urlProviderRetryDelayCalculator invalid.");return{controllers:e.controllers,streamUrlRetriever:e.streamUrlRetriever,getURLOpts:n(e.getURLOpts,{}),preloadingEnabled:n(e.preloadingEnabled,!1),pausedMaxBufferLength:n(e.pausedMaxBufferLength,2e3),playingMaxBufferLength:n(e.playingMaxBufferLength,9e4),fadeOnPauseAndPlay:n(e.fadeOnPauseAndPlay,!1),fadeOnSeek:n(e.fadeOnSeek,!1),audioCheckpointInterval:n(e.audioCheckpointInterval,3e4),urlProviderRetryDelayCalculator:n(e.urlProviderRetryDelayCalculator,o.helpers.retry.buildExponentialDelayCalculator()),streamUrlsExpire:n(e.streamUrlsExpire,!0),fetchEnabled:n(e.fetchEnabled,!0),duration:e.duration,audioReporter:e.audioReporter,audioPerformanceReporter:e.audioPerformanceReporter,errorReporter:e.errorReporter}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=t(0),u=t(13);r.NoMoreAttemptsError=new Error("No more attempts to retrieve URL."),r.retrieveUrl=function(e){var i=e.streamUrlRetriever,o=e.getURLOpts,a=e.logger,t=e.urlProviderRetryDelayCalculator;return new s.helpers.abortableJob.AbortableJob(function(){var n=s.helpers.deferred.buildDeferred(),e=s.helpers.retry.retry(t,function(e){var t=e.scheduleRetry,r=i.getUrl(o);return a.debug("Retrieving a URL..."),r.onCompletion(function(e){e?e.rendition&&u.allRenditions.indexOf(e.rendition)<0?(a.warn("Unknown rendition. Skipping...",e.rendition),i.excludeRendition(e.rendition),t()):!e.success&&e.error.isTransient()?(a.warn("Transient error retrieving url.",e.error),t()):n.resolve(e):(a.debug("No URL provided."),n.resolve(null))}),r.onError(function(e){e!==s.helpers.abortableJob.abortedError&&a.error("Error retrieving URL.",e),n.reject(e)}),{onCancel:function(){return r.abort()}}},{onNoMoreRetries:function(){return n.reject(r.NoMoreAttemptsError)}}).cancel;return{result:n.promise,abort:function(){return e()}}}).run()}},function(e,t,r){"use strict";function s(e,t){var r=e.getMemoryCacheController();r&&r.setMaxCacheSize(t)}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=function(){function e(e,t){this._maxCacheSize=e,this._players=[],this._updateTimer=null,this._logger=n.logger.prefixLogger(t,"CacheManager"),this._logger.debug("Initialized with cache size "+e+" bytes.")}return e.prototype.setCacheSize=function(e){this._maxCacheSize!==e&&(this._logger.debug("Updating cache size to "+e+" bytes."),this._maxCacheSize=e,this._update())},e.prototype.addPlayer=function(n){var i,o=this;this._logger.debug("Adding player to cache manager."),n.isDead()?this._logger.debug("Player was dead."):(i=this._players,n.onChange.subscribe(function(e){var t=e.playing,r=e.dead;!0===r?(o._logger.debug("Removing player that became dead."),i.splice(i.indexOf(n),1),o._update()):!0===t?(o._logger.debug("Updating because player started playing."),i.splice(i.indexOf(n),1),i.unshift(n),o._update()):!1===t&&(o._logger.debug("Updating because player became paused."),o._update())}),n.isPlaying()?i.unshift(n):i.push(n),this._update())},e.prototype._update=function(){var e,t,r,n,i,o,a=this;this._updateTimer&&(window.clearTimeout(this._updateTimer),this._updateTimer=null),0!==this._players.length?(e=this._players.reduce(function(e,t){return t.isPlaying()?e.playingPlayers.push(t):e.pausedPlayers.push(t),e},{playingPlayers:[],pausedPlayers:[]}),t=e.playingPlayers,r=e.pausedPlayers,n=t.reduce(function(e,t){return e+(t.getMemoryCacheUsage()||0)},0),i=r.reduce(function(e,t){return e+(t.getMemoryCacheUsage()||0)},0),n>this._maxCacheSize?(this._logger.debug("All playing players are using more than the max cache size. Cleaning...",n,this._maxCacheSize),o=this._maxCacheSize/t.length,t.forEach(function(e){return s(e,o)}),r.forEach(function(e){return s(e,0)})):(this._logger.debug("Recalculating cache sizes...",n+i,this._maxCacheSize),t.concat(r).reduce(function(e,t){return s(t,Math.max(0,a._maxCacheSize-e)),e+(t.getMemoryCacheUsage()||0)},0)),this._updateTimer=window.setTimeout(function(){return a._update()},2e4)):this._logger.debug("There are no longer any players to manage.")},e}();t.CacheManager=i},function(e,t,r){"use strict";e.exports="undefined"!=typeof Map&&"[object Map]"===Object.prototype.toString.call(new Map)},function(e,t,r){"use strict";var n=Array.prototype.forEach,i=Object.create;e.exports=function(e){var t=i(null);return n.call(arguments,function(e){t[e]=!0}),t}},function(e,t,r){"use strict";e.exports=r(35)("key","value","key+value")},function(e,t,r){"use strict";var n,i=r(9),o=r(4),a=r(10),s=r(3).toStringTag,u=r(36),l=Object.defineProperties,c=a.prototype._unBind;n=e.exports=function(e,t){return this instanceof n?(a.call(this,e.__mapKeysData__,e),t&&u[t]||(t="key+value"),void l(this,{__kind__:o("",t),__values__:o("w",e.__mapValuesData__)})):new n(e,t)},i&&i(n,a),n.prototype=Object.create(a.prototype,{constructor:o(n),_resolve:o(function(e){return"value"===this.__kind__?this.__values__[e]:"key"===this.__kind__?this.__list__[e]:[this.__list__[e],this.__values__[e]]}),_unBind:o(function(){this.__values__=null,c.call(this)}),toString:o(function(){return"[object Map Iterator]"})}),Object.defineProperty(n.prototype,s,o("c","Map Iterator"))},function(e,t,r){"use strict";var n,i=r(9),o=r(4),a=r(3),s=r(10),u=Object.defineProperty;n=e.exports=function(e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");e=String(e),s.call(this,e),u(this,"__length__",o("",e.length))},i&&i(n,s),delete n.prototype.constructor,n.prototype=Object.create(s.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(e){var t,r=this.__list__[e];return this.__nextIndex__===this.__length__?r:55296<=(t=r.charCodeAt(0))&&t<=56319?r+this.__list__[this.__nextIndex__++]:r})}),u(n.prototype,a.toStringTag,o("c","String Iterator"))},function(e,t,r){"use strict";var s=r(2),u=r(1),l=Function.prototype.bind,c=Function.prototype.call,d=Object.keys,h=Object.prototype.propertyIsEnumerable;e.exports=function(o,a){return function(r,n){var e,i=arguments[2],t=arguments[3];return r=Object(u(r)),s(n),e=d(r),t&&e.sort("function"==typeof t?l.call(t,r):void 0),"function"!=typeof o&&(o=e[o]),c.call(o,e,function(e,t){return h.call(r,e)?c.call(n,i,r[e],e,r,t):a})}}},function(e,t,r){"use strict";e.exports=r(39)("forEach")},function(e,t,r){"use strict";var n=r(2),s=r(40),u=Function.prototype.call;e.exports=function(e,i){var o={},a=arguments[2];return n(i),s(e,function(e,t,r,n){o[t]=u.call(i,a,e,t,r,n)}),o}},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call(r(22));e.exports=function(e){return"function"==typeof e&&n.call(e)===i}},function(e,t,r){"use strict";var f=r(3).iterator,p=r(8),g=r(42),_=r(21),y=r(2),v=r(1),m=r(5),b=r(7),E=Array.isArray,w=Function.prototype.call,S={configurable:!0,enumerable:!0,writable:!0,value:null},P=Object.defineProperty;e.exports=function(e){var t,r,n,i,o,a,s,u,l,c,d=arguments[1],h=arguments[2];if(e=Object(v(e)),m(d)&&y(d),this&&this!==Array&&g(this))t=this;else{if(!d){if(p(e))return 1!==(o=e.length)?Array.apply(null,e):((i=new Array(1))[0]=e[0],i);if(E(e)){for(i=new Array(o=e.length),r=0;r<o;++r)i[r]=e[r];return i}}i=[]}if(!E(e))if(void 0!==(l=e[f])){for(s=y(l).call(e),t&&(i=new t),u=s.next(),r=0;!u.done;)c=d?w.call(d,h,u.value,r):u.value,t?(S.value=c,P(i,r,S)):i[r]=c,u=s.next(),++r;o=r}else if(b(e)){for(o=e.length,t&&(i=new t),n=r=0;r<o;++r)c=e[r],r+1<o&&(55296<=(a=c.charCodeAt(0))&&a<=56319&&(c+=e[++r])),c=d?w.call(d,h,c,n):c,t?(S.value=c,P(i,n,S)):i[n]=c,++n;o=n}if(void 0===o)for(o=_(e.length),t&&(i=new t(o)),r=0;r<o;++r)c=d?w.call(d,h,e[r],r):e[r],t?(S.value=c,P(i,r,S)):i[r]=c;return t&&(S.value=null,i.length=o),i}},function(e,t,r){"use strict";e.exports=function(){var e,t,r=Array.from;return"function"==typeof r&&(t=r(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},function(e,t,r){"use strict";e.exports=r(44)()?Array.from:r(43)},function(e,t,r){"use strict";var o=r(45),a=r(11),s=r(1);e.exports=function(t){var e=Object(s(t)),r=arguments[1],n=Object(arguments[2]);if(e!==t&&!r)return e;var i={};return r?o(r,function(e){(n.ensure||e in t)&&(i[e]=t[e])}):a(i,t),i}},function(e,t,r){"use strict";var n,o=r(46),i=r(18),a=r(2),s=r(41),u=r(2),l=r(1),c=Function.prototype.bind,d=Object.defineProperty,h=Object.prototype.hasOwnProperty;n=function(e,t,r){var n,i=l(t)&&u(t.value);return delete(n=o(t)).writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&h.call(this,e)?i:(t.value=c.call(i,r.resolveContext?r.resolveContext(this):this),d(this,e,t),this[e])},n},e.exports=function(e){var r=i(arguments[1]);return null!=r.resolveContext&&a(r.resolveContext),s(e,function(e,t){return n(t,e,r)})}},function(e,t,r){"use strict";var n,i=r(9),o=r(17),a=r(4),s=r(3),u=r(10),l=Object.defineProperty;n=e.exports=function(e,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");u.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",l(this,"__kind__",a("",t))},i&&i(n,u),delete n.prototype.constructor,n.prototype=Object.create(u.prototype,{_resolve:a(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),l(n.prototype,s.toStringTag,a("c","Array Iterator"))},function(e,t,r){"use strict";var n=r(8),i=r(7),o=r(48),a=r(38),s=r(16),u=r(3).iterator;e.exports=function(e){return"function"==typeof s(e)[u]?e[u]():new(!n(e)&&i(e)?a:o)(e)}},function(e,t,r){"use strict";var d=r(8),h=r(2),f=r(7),p=r(49),g=Array.isArray,_=Function.prototype.call,y=Array.prototype.some;e.exports=function(e,t){var r,n,i,o,a,s,u,l,c=arguments[2];if(g(e)||d(e)?r="array":f(e)?r="string":e=p(e),h(t),i=function(){o=!0},"array"!==r)if("string"!==r)for(n=e.next();!n.done;){if(_.call(t,c,n.value,i),o)return;n=e.next()}else for(s=e.length,a=0;a<s&&(u=e[a],a+1<s&&(55296<=(l=u.charCodeAt(0))&&l<=56319&&(u+=e[++a])),_.call(t,c,u,i),!o);++a);else y.call(e,function(e){return _.call(t,c,e,i),o})}},function(e,t,r){"use strict";var n=r(8),i=r(5),o=r(7),a=r(3).iterator,s=Array.isArray;e.exports=function(e){return!(!i(e)||!s(e)&&!o(e)&&!n(e)&&"function"!=typeof e[a])}},function(e,t,r){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},function(e,t,r){"use strict";var n=r(52);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},function(e,t,r){"use strict";var n,i,o,a,s=r(4),u=r(53),l=Object.create,c=Object.defineProperties,d=Object.defineProperty,h=Object.prototype,f=l(null);if("function"==typeof Symbol){n=Symbol;try{String(n()),a=!0}catch(e){}}var p=function(){var i=l(null);return function(e){for(var t,r,n=0;i[e+(n||"")];)++n;return i[e+=n||""]=!0,d(h,t="@@"+e,s.gs(null,function(e){r||(r=!0,d(this,t,s(e)),r=!1)})),t}}();o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(e)},e.exports=i=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return a?n(t):(r=l(o.prototype),t=void 0===t?"":String(t),c(r,{__description__:s("",t),__name__:s("",p(t))}))},c(i,{for:s(function(e){return f[e]?f[e]:f[e]=i(String(e))}),keyFor:s(function(e){var t;for(t in u(e),f)if(f[t]===e)return t}),hasInstance:s("",n&&n.hasInstance||i("hasInstance")),isConcatSpreadable:s("",n&&n.isConcatSpreadable||i("isConcatSpreadable")),iterator:s("",n&&n.iterator||i("iterator")),match:s("",n&&n.match||i("match")),replace:s("",n&&n.replace||i("replace")),search:s("",n&&n.search||i("search")),species:s("",n&&n.species||i("species")),split:s("",n&&n.split||i("split")),toPrimitive:s("",n&&n.toPrimitive||i("toPrimitive")),toStringTag:s("",n&&n.toStringTag||i("toStringTag")),unscopables:s("",n&&n.unscopables||i("unscopables"))}),c(o.prototype,{constructor:s(i),toString:s("",function(){return this.__name__})}),c(i.prototype,{toString:s(function(){return"Symbol ("+u(this).__description__+")"}),valueOf:s(function(){return u(this)})}),d(i.prototype,i.toPrimitive,s("",function(){var e=u(this);return"symbol"==typeof e?e:e.toString()})),d(i.prototype,i.toStringTag,s("c","Symbol")),d(o.prototype,i.toStringTag,s("c",i.prototype[i.toStringTag])),d(o.prototype,i.toPrimitive,s("c",i.prototype[i.toPrimitive]))},function(e,t,r){"use strict";var n={object:!0,symbol:!0};e.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!n[typeof Symbol.iterator]&&!!n[typeof Symbol.toPrimitive]&&!!n[typeof Symbol.toStringTag]}},function(e,t,r){"use strict";var i,n,o,a,s,u,l,c=r(4),d=r(2),h=Function.prototype.apply,f=Function.prototype.call,p=Object.create,g=Object.defineProperty,_=Object.defineProperties,y=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};n=function(e,t){var r,n;return d(t),i.call(n=this,e,r=function(){o.call(n,e,r),h.call(t,this,arguments)}),r.__eeOnceListener__=t,this},s={on:i=function(e,t){var r;return d(t),y.call(this,"__ee__")?r=this.__ee__:(r=v.value=p(null),g(this,"__ee__",v),v.value=null),r[e]?"object"==typeof r[e]?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:n,off:o=function(e,t){var r,n,i,o;if(d(t),!y.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"==typeof(n=r[e]))for(o=0;i=n[o];++o)i!==t&&i.__eeOnceListener__!==t||(2===n.length?r[e]=n[o?0:1]:n.splice(o,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},emit:a=function(e){var t,r,n,i,o;if(y.call(this,"__ee__")&&(i=this.__ee__[e]))if("object"==typeof i){for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];for(i=i.slice(),t=0;n=i[t];++t)h.call(n,this,o)}else switch(arguments.length){case 1:f.call(i,this);break;case 2:f.call(i,this,arguments[1]);break;case 3:f.call(i,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];h.call(i,this,o)}}},u={on:c(i),once:c(n),off:c(o),emit:c(a)},l=_({},u),e.exports=t=function(e){return null==e?p(l):_(Object(e),u)},t.methods=s},function(e,t,r){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return-1<n.call(this,e,arguments[1])}},function(e,t,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&!0===n.contains("dwa")&&!1===n.contains("foo")}},function(e,t,r){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,r){"use strict";var n=r(5),i=Object.keys;e.exports=function(e){return i(n(e)?Object(e):e)}},function(e,t,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,r){"use strict";e.exports=r(61)()?Object.keys:r(60)},function(e,t,r){"use strict";var a=r(62),s=r(1),u=Math.max;e.exports=function(t,r){var n,e,i,o=u(arguments.length,2);for(t=Object(s(t)),i=function(e){try{t[e]=r[e]}catch(e){n=n||e}},e=1;e<o;++e)a(r=arguments[e]).forEach(i);if(void 0!==n)throw n;return t}},function(e,t,r){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,r){"use strict";var i,o=Object.create;r(20)()||(i=r(19)),e.exports=function(){var r,t,n;return!i||1!==i.level?o:(n={configurable:!(t={}),enumerable:!(r={}),writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){return"__proto__"===e?void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(t[e]=n)}),Object.defineProperties(r,t),Object.defineProperty(i,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:r}),function(e,t){return o(null===e?r:e,t)})}()},function(e,t,r){"use strict";var n=r(5),i={function:!0,object:!0};e.exports=function(e){return n(e)&&i[typeof e]||!1}},function(e,t,r){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:0<e?1:-1}},function(e,t,r){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&1===e(10)&&-1===e(-20)}},function(e,t,r){"use strict";e.exports=r(68)()?Math.sign:r(67)},function(e,t,r){"use strict";var n=r(69),i=Math.abs,o=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?n(e)*o(i(e)):e}},function(e,t,r){"use strict";e.exports=function(e){return e!=e}},function(e,t,r){"use strict";e.exports=function(){var e=Number.isNaN;return"function"==typeof e&&!e({})&&e(NaN)&&!e(34)}},function(e,t,r){"use strict";e.exports=r(72)()?Number.isNaN:r(71)},function(e,t,r){"use strict";var o=r(73),a=r(21),s=r(1),u=Array.prototype.indexOf,l=Object.prototype.hasOwnProperty,c=Math.abs,d=Math.floor;e.exports=function(e){var t,r,n,i;if(!o(e))return u.apply(this,arguments);for(r=a(s(this).length),n=arguments[1],n=isNaN(n)?0:0<=n?d(n):a(this.length)-d(c(n)),t=n;t<r;++t)if(l.call(this,t)&&(i=this[t],o(i)))return t;return-1}},function(e,t,r){"use strict";var i,n=r(23),o=r(74),a=r(9),s=r(2),u=r(1),l=r(4),c=r(56),d=r(3),h=r(16),f=r(50),p=r(37),g=r(34),_=Function.prototype.call,y=Object.defineProperties,v=Object.getPrototypeOf;e.exports=i=function(){var r,n,e,t=arguments[0];if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");return e=g&&a&&Map!==i?a(new Map,v(this)):this,null!=t&&h(t),y(e,{__mapKeysData__:l("c",r=[]),__mapValuesData__:l("c",n=[])}),t&&f(t,function(e){var t=u(e)[0];e=e[1],-1===o.call(r,t)&&(r.push(t),n.push(e))},e),e},g&&(a&&a(i,Map),i.prototype=Object.create(Map.prototype,{constructor:l(i)})),c(y(i.prototype,{clear:l(function(){this.__mapKeysData__.length&&(n.call(this.__mapKeysData__),n.call(this.__mapValuesData__),this.emit("_clear"))}),delete:l(function(e){var t=o.call(this.__mapKeysData__,e);return-1!==t&&(this.__mapKeysData__.splice(t,1),this.__mapValuesData__.splice(t,1),this.emit("_delete",t,e),!0)}),entries:l(function(){return new p(this,"key+value")}),forEach:l(function(e){var t,r,n=arguments[1];for(s(e),t=this.entries(),r=t._next();void 0!==r;)_.call(e,n,this.__mapValuesData__[r],this.__mapKeysData__[r],this),r=t._next()}),get:l(function(e){var t=o.call(this.__mapKeysData__,e);if(-1!==t)return this.__mapValuesData__[t]}),has:l(function(e){return-1!==o.call(this.__mapKeysData__,e)}),keys:l(function(){return new p(this,"key")}),set:l(function(e,t){var r,n=o.call(this.__mapKeysData__,e);return-1===n&&(n=this.__mapKeysData__.push(e)-1,r=!0),this.__mapValuesData__[n]=t,r&&this.emit("_add",n,e),this}),size:l.gs(function(){return this.__mapKeysData__.length}),values:l(function(){return new p(this,"value")}),toString:l(function(){return"[object Map]"})})),Object.defineProperty(i.prototype,d.iterator,l(function(){return this.entries()})),Object.defineProperty(i.prototype,d.toStringTag,l("c","Map"))},function(e,t,r){"use strict";e.exports=function(){var e,t,r;if("function"!=typeof Map)return!1;try{e=new Map([["raz","one"],["dwa","two"],["trzy","three"]])}catch(e){return!1}return"[object Map]"===String(e)&&3===e.size&&"function"==typeof e.clear&&"function"==typeof e.delete&&"function"==typeof e.entries&&"function"==typeof e.forEach&&"function"==typeof e.get&&"function"==typeof e.has&&"function"==typeof e.keys&&"function"==typeof e.set&&"function"==typeof e.values&&(t=e.entries(),!1===(r=t.next()).done&&!!r.value&&"raz"===r.value[0]&&"one"===r.value[1])}},function(e,t,r){"use strict";e.exports=r(76)()?Map:r(75)},function(e,t,r){"use strict";function d(e,t,r){return{name:t.name,preset:e.preset,bitrate:e.bitrate,protocol:e.rendition.scProtocol,host:function(e){var t=e.split("//",2);return 1===t.length?t[0].split("/",1)[0]:t[1]?t[1].split("/",1)[0]:""}(r),url:function(e){var t=n.exec(e);return t&&t[0]||""}(r),format:e.rendition.scFormat,quality:e.quality}}Object.defineProperty(t,"__esModule",{value:!0});var g=r(77),_=r(0),h=r(24),n=/^[^?#]*/,i=function(){function e(e){var t=e.logger,r=e.controllers,n=e.playerId,i=e.streamUrlsExpire,o=e.fetchEnabled,a=e.fadeOnPauseAndPlay,s=e.fadeOnSeek,u=e.cacheManager,l=e.providePlayer,c=e.removePlayer,d=e.streamUrlRetriever,h=e.getURLOpts,f=e.errorEventGenerator,p=e.audioPerformanceEventGenerator;this._quality=null,this._onQualityChanged=new _.eventDispatcher.EventDispatcher,this._controllerIndexByRendition=new g,this._controlledPlayerWithRendition=null,this.onQualityChanged=this._onQualityChanged.getHandle(),this._logger=_.logger.prefixLogger(t,"ControllerManager"),this._controllers=r,this._playerId=n,this._streamUrlsExpire=i,this._fetchEnabled=o,this._fadeOnPauseAndPlay=a,this._fadeOnSeek=s,this._cacheManager=u,this._providePlayer=l,this._removePlayer=c,this._streamUrlRetriever=d,this._getURLOpts=h,this._errorEventGenerator=f||null,this._audioPerformanceEventGenerator=p||null}return e.prototype.buildNextController=function(t,r){var n=this;if(this._controlledPlayerWithRendition)throw new Error("A player is already being controlled.");this._logger.debug("Building next controller.");var i,o=this._controllerIndexByRendition.get(t.rendition)||0;o>=this._controllers.length?(this._logger.debug("No more controllers for this rendition."),r({excludeRendition:!0,immediateRetry:!0})):(i=!1,this._manageController(t,this._controllers[o],function(e){if(i)throw new Error("performNextAction() already called");i=!0,"MOVE_ON"!==e&&"MOVE_ON_SAME_RENDITION"!==e||(n._logger.debug("Controller will not be used again."),n._controllerIndexByRendition.set(t.rendition,o+1)),"MOVE_ON_SAME_RENDITION"===e?n.buildNextController(t,r):r({excludeRendition:!1,immediateRetry:"MOVE_ON"===e})}))},e.prototype.releaseCurrentController=function(e){var t=e.retry;if(!this._controlledPlayerWithRendition)throw new Error("There is no player being controlled.");this._controlledPlayerWithRendition.releaseControl({retry:t})},e.prototype.getQuality=function(){return this._quality},e.prototype.getPlayerDetails=function(){if(!this._controlledPlayerWithRendition)throw new Error("There is no player being controlled.");var e=this._controlledPlayerWithRendition,t=e.initialUrlAndRendition,r=e.controller,n=e.controlledPlayer;return d(t,r,n.getUrl())},e.prototype._manageController=function(t,r,n){var i=this,o=function(){i._removePlayer(),i._controlledPlayerWithRendition=null,e&&e.kill()};if(this._logger.debug("Preparing controller.",r.name),!r.isRenditionSupported(t.rendition,{streamUrlExpires:this._streamUrlsExpire}))return this._logger.debug("Skipping controller because rendition not supported."),void n("MOVE_ON_SAME_RENDITION");var e,a=!1,s=function(e){var t=e.retry;a||(a=!0,i._logger.debug("Releasing control."),o(),n(t?"RETRY":"MOVE_ON"))};try{this._logger.debug("Building player.");var u,l,c=r.buildPlayer({logger:_.logger.prefixLogger(this._logger,r.name+"-Controller"),playerId:this._playerId,urlAndRendition:t,streamUrlExpires:this._streamUrlsExpire,fetchEnabled:this._fetchEnabled,releaseControl:s,fadeOnPauseAndPlay:this._fadeOnPauseAndPlay,fadeOnSeek:this._fadeOnSeek,getNewUrl:function(){return i._getNewUrlWithSameRendition(t.rendition)},reportError:function(e){i._errorEventGenerator&&i._errorEventGenerator.reportManualEvent(e,d(t,r,c?c.getUrl():t.url))},reportPerformance:function(e){!a&&i._audioPerformanceEventGenerator&&i._audioPerformanceEventGenerator.reportManualEvent(e)}});e=c.getPlayer(),a?(this._logger.warn("Player released during constrution."),e.kill()):e.isDead()?((u=e.getFatalError())instanceof _.errors.NotSupportedError?this._logger.debug("Player not supported (during construction)."):this._logger.error("Error during construction.",u),n("MOVE_ON_SAME_RENDITION")):(this._logger.debug("Player built."),e.onChange.subscribe(function(e){var t=e.dead,r=e.fatalError;t&&(r&&i._logger.error("Fatal player error occurred.",r),s({retry:!1}))}),this._cacheManager.addPlayer(e),this._controlledPlayerWithRendition={controller:r,controlledPlayer:c,initialUrlAndRendition:t,releaseControl:s},this._providePlayer(c.getPlayer(),r.syncConfig,r.supportsVolumeAutomation),this._logger.debug("Player provided to proxy."),l=t.quality||null,this._quality!==l&&(this._logger.debug("Quality changed.",l),this._quality=l,this._onQualityChanged.dispatch(l)))}catch(t){t===h.notSupportedError?this._logger.debug("Player not supported. Not constructed."):this._logger.error("Error during construction.",t),o(),n("MOVE_ON_SAME_RENDITION")}},e.prototype._getNewUrlWithSameRendition=function(r){var n=this,e=new _.helpers.abortableJob.AbortableJob(function(){var e=n._streamUrlRetriever.getUrl(n._getURLOpts),t=e.whenComplete().then(function(e){var t=null;return e&&e.success&&e.rendition===r&&(t=e.url),t});return{result:t,abort:function(){return e.abort()}}});return e.run()},e}();t.ControllerManager=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),i=r(12),n=function(){function e(e,t,r,n,i){this._checkpointTimer=null,this._logger=o.logger.prefixLogger(n,"AudioEventGenerator"),this._player=e,this._eventReporter=t,this._checkpointInterval=Math.max(1e3,r),this._getPlayerDetails=i,this._startReporting()}return e.prototype._startReporting=function(){var n=this,i=this._player;i.onChange.subscribe(function(e){var t=e.actuallyPlaying,r=e.ended;!0===t&&!i.isEnded()||!1===r&&i.isActuallyPlaying()?(n._checkpointTimer||(n._checkpointTimer=window.setInterval(function(){n._reportEvent("checkpoint")},n._checkpointInterval)),n._reportEvent("play")):(!1===t&&!i.isEnded()||!0===r&&i.isActuallyPlaying())&&(n._checkpointTimer&&(window.clearInterval(n._checkpointTimer),n._checkpointTimer=null),n._reportEvent("pause"))})},e.prototype._reportEvent=function(e){var t=this._getPlayerDetails();if(t){var r=this._player.getDuration();if(null===r)throw new Error("Duration should exist now.");var n={type:e,position:this._player.getPosition(),duration:r,preset:t.preset,quality:t.quality,playerType:t.name,appState:i.getAppState()};this._logger.debug("Generated audio event.",n),this._eventReporter(n)}else this._logger.warn("Cannot report event because there is no player.",e)},e}();t.AudioEventGenerator=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._delayFactor=0,this._lastRequestTime=0}return e.prototype.getDelay=function(e){var t=void 0===e?{}:e,r=t.maxDelay,n=void 0===r?3e4:r,i=t.numInstantRuns,o=void 0===i?5:i,a=Date.now()-this._lastRequestTime;this._lastRequestTime=Date.now(),this._delayFactor=Math.max(0,this._delayFactor-a/n),this._delayFactor++;var s=this._delayFactor-o;return 0<s?Math.pow(2,s):0},e}();t.DecayingExponentialDelayCalculator=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),n=r(12),i=function(){function e(e,t,r,n,i,o){this._logger=a.logger.prefixLogger(o,"ErrorGenerator"),this._player=e,this._logCollector=t,this._logId=r,this._trackId=n,this._eventReporter=i,this._listenForProxyFatalError()}return e.prototype.reportManualEvent=function(e,t){"NOT_SUPPORTED_ERROR"!==e&&"HLS_MSE_PLAYER.NO_TRANSMUXER_ERROR"!==e&&(this._logger.debug("Reporting manual error event.",e),this._reportEvent(e,t))},e.prototype._listenForProxyFatalError=function(){var t=this;this._player.onError.subscribe(function(e){e instanceof a.errors.PlayerFatalError&&t._reportEvent(e.getCode())})},e.prototype._reportEvent=function(e,t){var r={errorCode:e,log:this._logCollector.getLog(),logId:this._logId,trackId:this._trackId,protocol:t&&t.protocol,playerType:t&&t.name?t.name:"MaestroUnknown",host:t&&t.host,bitrate:t&&t.bitrate,format:t&&t.format,preset:t&&t.preset,quality:t&&t.quality,url:t&&t.url,appState:n.getAppState()};this._logger.debug("Generated audio error event.",r),this._eventReporter(r)},e}();t.ErrorEventGenerator=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),s=a.helpers.find,n=function(){function e(e){var t=e.proxy,r=e.getPlayer;this._getPlayer=r;var n,i=this._position=t.getPosition(),o=this._initialActualPlayer=r();o?(n=function(e,t){var r=e.getBufferedTimeRanges();return r?s(r,function(e){return e.containsTime(t)})||new a.TimeRange(t,0):null}(o,i),this._initialBuffered=n?n.end-i:null):this._initialBuffered=null}return e.prototype.getPreloaded=function(){var e=this._initialBuffered;return null!==e&&this._initialActualPlayer&&this._getPlayer()===this._initialActualPlayer?0===e?"no":2e3<=e?"yes":"partial":null},e}();t.PreloadingCalculator=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=n.helpers.time.now,o=function(){function e(){this._start=null,this._end=null}return e.prototype.start=function(){if(this.isComplete())throw new Error("Timer completed.");this._start=i()},e.prototype.isComplete=function(){return null!==this._end},e.prototype.stop=function(){if(null===this._start)throw new Error("Not started.");this._end=i()},e.prototype.getTime=function(){if(null===this._end)throw new Error("Not completed.");return this._end-this._start},e}();t.Timer=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),m=r(83),b=r(82),a=r(12),n=function(){function e(e,t,r,n,i){this._logger=o.logger.prefixLogger(n,"AudioPerformanceEventGenerator"),this._proxy=e,this._getPlayer=t,this._eventReporter=r,this._getPlayerDetails=i,this._measureGeneralEvents()}return e.prototype.reportManualEvent=function(e){this._logger.debug("Reporting manual audio performance event.",e),this._eventReporter(e)},e.prototype._measureGeneralEvents=function(){var l=this,c=this._proxy,d=null,h=null,f=null,p=null,g=null,_=null,y=null,v=!0;c.onChange.subscribe(function(e){var t,r=e.playing,n=e.actuallyPlaying,i=e.seek,o=e.seeking,a=e.stalled,s=e.ended,u=e.dead;!0!==u&&!1!==r||!p||(p.stop(),1e3<=p.getTime()&&l._reportEvent("rageSkip",p.getTime(),null),p=null),c.isDead()?y&&window.clearTimeout(y):(t=c.getSeekState(),c.isActuallyPlaying()||p||!(!0===r||c.isPlaying()&&!0===a)||(p=new m.Timer).start(),!0===r&&(d||((d=new m.Timer).start(),h=new b.PreloadingCalculator({proxy:c,getPlayer:l._getPlayer}),y=window.setTimeout(function(){l._reportEvent("longInitialBuffering",0,null)},3e4),0===c.getPosition()&&(v=!1))),!1===r&&(y&&window.clearTimeout(y),d&&!d.isComplete()&&(d=null)),!0===n&&(p=null,d&&!d.isComplete()&&(d.stop(),y&&window.clearTimeout(y),l._reportEvent("play",d.getTime(),h.getPreloaded()))),i&&"IN_PROGRESS"===i.state&&c.isReady()&&((f=new m.Timer).start(),g=new b.PreloadingCalculator({proxy:c,getPlayer:l._getPlayer}),!0===o&&l._reportEvent("seekStart",0,null)),(i&&"COMPLETED"===i.state&&!c.isStalled()||!1===a&&t&&"COMPLETED"===t.state)&&f&&(f.stop(),l._reportEvent("seek",f.getTime(),g.getPreloaded()),f=null),!0!==a||!c.isPlaying()||t&&"IN_PROGRESS"===t.state||d&&d.isComplete()&&((_=new m.Timer).start(),l._reportEvent("rebufferingStart",c.getPosition(),null)),!1===a&&(d&&d.isComplete()&&(p=null),_&&(_.stop(),l._reportEvent("rebufferingEnd",_.getTime(),null),_=null)),!0!==s||v||(l._reportEvent("uninterruptedPlay",0,null),v=!0),t&&"IN_PROGRESS"===t.state||!0!==a||!c.isActuallyPlaying()||(v=!0))})},e.prototype._reportEvent=function(e,t,r){var n,i=this._getPlayerDetails();i?(n={type:e,latency:t,protocol:i.protocol,playerType:i.name,host:i.host,bitrate:i.bitrate,format:i.format,preset:i.preset,quality:i.quality,preloaded:r||void 0,appState:a.getAppState()},this._logger.debug("Generated audio performance event.",n),this._eventReporter(n)):this._logger.warn("Cannot report event because there is no player.",e,t)},e}();t.AudioPerformanceEventGenerator=n},function(e,t,r){"use strict";var n=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e){void 0===e&&(e=200),this._bufferSize=e,this._log=[]}return e.prototype.getLog=function(){return this._log.map(function(e){return n({},e,{data:function(e){return e.map(function(e){try{return JSON.stringify(e)}catch(e){return"<unavailable>"}})}(e.data)})})},e.prototype.debug=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._push({level:"debug",msg:e,data:t,time:Date.now()})},e.prototype.info=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._push({level:"info",msg:e,data:t,time:Date.now()})},e.prototype.warn=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._push({level:"warn",msg:e,data:t,time:Date.now()})},e.prototype.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this._push({level:"error",msg:e,data:t,time:Date.now()})},e.prototype._push=function(e){this._log.push(e)>this._bufferSize&&this._log.shift()},e}();t.LogCollector=i},function(e,t,r){"use strict";function u(e,t,r){return Math.min(t,Math.max(e,r))}var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var p=r(0),i=r(26),g=r(85),_=r(84),y=r(81),v=r(80),m=r(79),b=r(78),o=r(33),a=r(32),s=r(6),l=r(15),E=r(31),w=r(30),S=r(29),c=r(14),d=r(13),P=p.eventDispatcher.EventDispatcher,h=p.helpers.Promise,x=p.helpers.deferred.buildDeferred,A=new o.CacheManager(15e7,p.logger.noOpLogger),R=-1,T=[],C=1,O=!1;t.setGlobalVolume=function(t){if("number"!=typeof t)throw new Error("level must be a number.");if(t<0||1<t)throw new Error("Invalid volume level.");C=t,T.forEach(function(e){return e.setVolume(t)})},t.getGlobalVolume=function(){return C},t.setGlobalMuted=function(t){if("boolean"!=typeof t)throw new Error("muteEnabled must be a boolean.");O=t,T.forEach(function(e){return e.setMuted(t)})},t.getGlobalMuted=function(){return O},t.setCacheSize=function(e){if("number"!=typeof e||e<0)throw new Error("Invalid size.");A.setCacheSize(e)};var f=function(f){function e(e){var n=f.call(this,e)||this;n._onPreloadingEnabled=new P,n._onPreloadingDisabled=new P,n._retryDelayCalculator=new v.DecayingExponentialDelayCalculator,n._errorEventGenerator=null,n._fadeOutVolumeAutomator=null,n._volumeAutomators=[],n._volumeScale=1,n._userVolume=1,n._volumeAutomationSupported=!1,n._timer=null,n._pauseFadeTimer=null,n._pauseFadeDeferred=null,n._pauseFade=null,n._executionState={state:"IDLE"},n._preloadingListeners=[],n._retrieveAndBuildTimer=null,n._hadAStreamUrl=!1;var t=n._config=E.validatePlayerDependencies(e);n._preloadingEnabled=t.preloadingEnabled,n._getURLOpts=t.getURLOpts,n._controllers=t.controllers;var r=n._connectionRequiredHelper=new S.ConnectionRequiredHelper(n);n.onPreloadingEnabled=n._onPreloadingEnabled.getHandle(),n.onPreloadingDisabled=n._onPreloadingDisabled.getHandle(),n.onConnectionRequired=r.onConnectionRequired,n.onConnectionRecovered=r.onConnectionRecovered,n.onChange.subscribe(function(e){n.isDead()||((!1===e.playing||e.positionJumped||e.stalled||e.ended)&&n._completePauseFade(),n._pauseFade&&(!1===e.actuallyPlaying||e.ended||!0===e.playing)&&(n._removeVolumeAutomator(n._pauseFade),n._pauseFade=null),!e.positionJumped&&void 0===e.actuallyPlaying&&void 0===e.stalled||n._updateVolume(),void 0!==e.playing&&n._updateMaxBufferLength())});var i="SCAudio-"+ ++R,o=t.streamUrlRetriever.getTrackId();null!==o&&(i+="-"+o);var a=new g.LogCollector,s=p.logger.cloneLogger(a,n._logger);n._logger=p.logger.prefixLogger(s,i);var u=w.generateLogId();n._logger.info("Building player...",{ua:navigator.userAgent,getURLOpts:n._getURLOpts,logId:u}),T.push(n),n.setVolume(C,O),n._updateFadeOut();var l=null,c=null;t.audioPerformanceReporter&&(l=new _.AudioPerformanceEventGenerator(n,function(){return n._getPlayer()},t.audioPerformanceReporter,n._logger,function(){return n._getActivePlayerDetails()})),t.audioReporter&&new m.AudioEventGenerator(n,t.audioReporter,t.audioCheckpointInterval,n._logger,function(){return n._getActivePlayerDetails()}),t.errorReporter&&(c=n._errorEventGenerator=new y.ErrorEventGenerator(n,a,u,o,t.errorReporter,n._logger)),n._excludeUnsupportedRenditions();var d,h=n._controllerManager=new b.ControllerManager({logger:n._logger,controllers:t.controllers,playerId:i,streamUrlsExpire:t.streamUrlsExpire,fetchEnabled:t.fetchEnabled,fadeOnPauseAndPlay:t.fadeOnPauseAndPlay,fadeOnSeek:t.fadeOnSeek,cacheManager:A,providePlayer:function(e,t,r){n._volumeAutomationSupported=r,n._providePlayer(e,t),n._updateMaxBufferLength()},removePlayer:function(){n._getPlayer()&&n._removePlayer()},streamUrlRetriever:n._config.streamUrlRetriever,getURLOpts:n._getURLOpts,errorEventGenerator:c||void 0,audioPerformanceEventGenerator:l||void 0});return n.onQualityChanged=h.onQualityChanged,void 0!==t.duration&&(n._logger.debug("Setting initial duration.",t.duration),n._setInitialDuration(t.duration)),n._preloadingEnabled?(n._logger.debug("Preloading is enabled, so performing retrieve immediately."),n._retrieveAndBuild()):(n._logger.debug("Preloading is disabled, so deferring retrieve until either a play intent or preloading is enabled."),d=function(){n._removePreloadingListeners(),n._logger.debug("Preloading now enabled or received a play request. Peforming retrieve."),n._retrieveAndBuild()},n._preloadingListeners.push(n.onPreloadingEnabled.subscribe(d),n.onPlayIntent.subscribe(d))),n}return n(e,f),e.prototype.reload=function(e){void 0===e&&(e={}),this._ensureNotDead(),this._reloadStreamUrls(e)},e.prototype.enablePreloading=function(){this.isDead()||this._preloadingEnabled||(this._preloadingEnabled=!0,this._updateMaxBufferLength(),this._onPreloadingEnabled.dispatch(void 0))},e.prototype.disablePreloading=function(){this.isDead()||this._preloadingEnabled&&(this._preloadingEnabled=!1,this._updateMaxBufferLength(),this._onPreloadingDisabled.dispatch(void 0))},e.prototype.isPreloadingEnabled=function(){return this._preloadingEnabled},e.prototype.pauseAfterFade=function(e){var t=this;if(this._ensureNotDead(),this._pauseFadeDeferred)return this._pauseFadeDeferred.promise;if(!this.isPlaying()||!this.isActuallyPlaying())return h.resolve(this.pause());var r=x();this._pauseFadeDeferred=r;var n=this.getPosition();if(this._pauseFade)throw new Error("Fade should not already be assigned.");return this._pauseFade=new i.Fade({startPos:n,endPos:n+e,startLevel:1,endLevel:0}),this._addVolumeAutomator(this._pauseFade),this._pauseFadeTimer=window.setTimeout(function(){t._pauseFadeDeferred=null,r.resolve(t.pause({fadeDuration:0}))},e+50),r.promise},e.prototype.isConnectionRequired=function(){return this._connectionRequiredHelper.isConnectionRequired()},e.prototype.getQuality=function(){return this._controllerManager.getQuality()},e.prototype.getVolume=function(){return this._volumeAutomationSupported?this._userVolume:f.prototype.getVolume.call(this)},e.prototype._handleFatalError=function(e){this._logger.warn("Fatal error from current player.",e)},e.prototype._handleVolumeChange=function(e,t){this._userVolume=e,f.prototype._notifyVolumeChange.call(this,e,t),this._calculateAndSetVolume()},e.prototype._notifyVolumeChange=function(){},e.prototype._kill=function(){f.prototype._kill.call(this),this._timer&&window.clearTimeout(this._timer),this._abortPauseFade(),this._removePreloadingListeners(),T.splice(T.indexOf(this),1),"RETRIEVING_URL"===this._executionState.state?this._executionState.retrieveJob.abort():"CONTROLLING_PLAYER"===this._executionState.state&&this._controllerManager.releaseCurrentController({retry:!1}),this._executionState={state:"DEAD"},this._retrieveAndBuildTimer&&window.clearTimeout(this._retrieveAndBuildTimer)},e.prototype._excludeUnsupportedRenditions=function(){var r=this,n={streamUrlExpires:this._config.streamUrlsExpire},e=d.allRenditions.filter(function(t){return!r._controllers.some(function(e){return e.isRenditionSupported(t,n)})});e.forEach(function(e){r._config.streamUrlRetriever.excludeRendition(e)})},e.prototype._addVolumeAutomator=function(e){var t=this._volumeAutomators.indexOf(e);t<0&&(this._volumeAutomators.push(e),this._updateVolume())},e.prototype._removeVolumeAutomator=function(e){var t=this._volumeAutomators.indexOf(e);0<=t&&(this._volumeAutomators.splice(t,1),this._updateVolume())},e.prototype._removePreloadingListeners=function(){this._preloadingListeners.forEach(function(e){return e.remove()})},e.prototype._getActivePlayerDetails=function(){return"CONTROLLING_PLAYER"!==this._executionState.state?null:this._controllerManager.getPlayerDetails()},e.prototype._updateFadeOut=function(){this._fadeOutVolumeAutomator&&this._removeVolumeAutomator(this._fadeOutVolumeAutomator),this._getURLOpts.snippet&&(this._fadeOutVolumeAutomator=i.buildFadeOut(3e3),this._addVolumeAutomator(this._fadeOutVolumeAutomator))},e.prototype._handleUnexpectedError=function(e){try{e()}catch(e){this._logger.error("Unexpected error.",e),this._triggerError(new p.errors.PlayerFatalError("An unexpected error occurred.",e))}},e.prototype._retrieveAndBuild=function(){var o=this;this._handleUnexpectedError(function(){if(-1===["IDLE","WAITING_TO_RETRIEVE"].indexOf(o._executionState.state))throw new Error("Invalid state for retrieveAndBuild().");o._logger.debug("Retrieving URL...");var e=a.retrieveUrl({streamUrlRetriever:o._config.streamUrlRetriever,urlProviderRetryDelayCalculator:o._config.urlProviderRetryDelayCalculator,getURLOpts:o._getURLOpts,logger:o._logger});o._executionState={state:"RETRIEVING_URL",retrieveJob:e},e.onCompletion(function(n){var i,e,t;o._logger.debug("Retrieved URL.",!!n),n&&n.success?(i=!(o._hadAStreamUrl=!0),e=function(e){var t=e.excludeRendition,r=e.immediateRetry;o._handleUnexpectedError(function(){if(i)throw new Error("startOver called multiple times.");var e;i=!0,t&&o._config.streamUrlRetriever.excludeRendition(n.rendition),o._executionState={state:"WAITING_TO_RETRIEVE"},o.isDead()?o._logger.debug("Stopping execution because player is dead."):r?(o._logger.debug("Moving on immediately."),o._retrieveAndBuild()):(e=o._retryDelayCalculator.getDelay(),o._logger.debug("Will move on in "+e+"ms."),e?o._retrieveAndBuildTimer=window.setTimeout(function(){return o._retrieveAndBuild()},e):o._retrieveAndBuild())})},o._handleUnexpectedError(function(){o._executionState={state:"CONTROLLING_PLAYER"},o._logger.debug("Building controller..."),o._controllerManager.buildNextController(n,e),o._logger.debug("Built controller.")})):n&&n.rendition?(o._logger.warn("Error retrieving URL. Moving on.",n.error),o._errorEventGenerator&&(t="SCAUDIO.URL_RETRIEVER_ERROR."+o._config.streamUrlRetriever.name+"."+n.error.getCode(),o._errorEventGenerator.reportManualEvent(t,{preset:n.preset,quality:n.quality,bitrate:n.bitrate,format:n.rendition.scFormat,protocol:n.rendition.scProtocol})),o._config.streamUrlRetriever.excludeRendition(n.rendition),o._executionState={state:"WAITING_TO_RETRIEVE"},o._retrieveAndBuild()):(n&&n.rendition&&o._logger.warn("Error retrieving URL for any rendition.",n.error),o._logger.info("Ran out of streams.",o._hadAStreamUrl),o._triggerError(o._hadAStreamUrl?new s.NotSupportedError:new l.NoStreamsError))}),e.onError(function(e){e!==p.helpers.abortableJob.abortedError&&(e===a.NoMoreAttemptsError?o._logger.error("Ran out of retries to retrieve URL."):o._logger.error("Unexpected error when retrieving a URL.",e),o._triggerError(new c.FailedRetrievingUrlError))})})},e.prototype._reloadStreamUrls=function(e){this._getURLOpts=e,this._updateFadeOut(),this._logger.info("Reloading stream URL's...",this._getURLOpts),"RETRIEVING_URL"===this._executionState.state?(this._logger.debug("Aborting current URL retrieve."),this._executionState.retrieveJob.abort(),this._executionState={state:"WAITING_TO_RETRIEVE"},this._retrieveAndBuild()):"CONTROLLING_PLAYER"===this._executionState.state?(this._logger.debug("Releasing controller."),this._controllerManager.releaseCurrentController({retry:!0})):this._logger.debug("Nothing to do."),this._logger.info("Reloaded stream URL's.")},e.prototype._completePauseFade=function(){var e;this._pauseFadeDeferred&&(this._pauseFadeTimer&&window.clearTimeout(this._pauseFadeTimer),e=this._pauseFadeDeferred,this._pauseFadeDeferred=null,e.resolve(this.pause()))},e.prototype._abortPauseFade=function(){this._pauseFadeTimer&&(window.clearTimeout(this._pauseFadeTimer),this._pauseFadeTimer=null),this._pauseFadeDeferred&&(this._pauseFadeDeferred.reject(new Error("Player was killed.")),this._pauseFadeDeferred=null)},e.prototype._updateVolume=function(){var i,e,o,a,s,t=this;this._volumeAutomationSupported&&(this._ensureNotDead(),this._timer&&(window.clearTimeout(this._timer),this._timer=null),null!==(i=this.getDuration())&&(e=this._volumeAutomators,o=this.getPosition(),a=1/0,s=1,e.forEach(function(e){var t=e.calculate(o,i),r=t.nextCalculatePosition,n=t.level;s*=u(0,1,n),r<a&&(a=r)}),this._volumeScale!==s&&(this._volumeScale=s,this._calculateAndSetVolume()),a<1/0&&this.isActuallyPlaying()&&!this.isStalled()&&(this._timer=window.setTimeout(function(){t._timer=null,t._updateVolume()},u(100,5e3,a-this.getPosition())))))},e.prototype._calculateAndSetVolume=function(){this._volumeAutomationSupported?f.prototype._handleVolumeChange.call(this,this._userVolume*this._volumeScale,this.getMuted()):f.prototype._handleVolumeChange.call(this,this._userVolume,this.getMuted())},e.prototype._updateMaxBufferLength=function(){var e=this._getPlayer(),t=e&&e.getBufferController();t&&(this.isPlaying()?t.setMaxBufferLength(this._config.playingMaxBufferLength):t.setMaxBufferLength(this._preloadingEnabled?this._config.pausedMaxBufferLength:0))},e}(p.ProxyPlayerBase);t.Player=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){void 0===e&&(e="UNKNOWN"),void 0===t&&(t=!1),void 0===r&&(r=null),this._code=e,this._transient=t,this._cause=r}return e.prototype.isTransient=function(){return this._transient},e.prototype.getCode=function(){return this._code},e.prototype.getCause=function(){return this._cause},e}();t.UrlRetrieverError=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.httpAACHQ={scProtocol:"http",scFormat:"aac",maestroFormat:{mimeType:"audio/mp4",audioCodec:{id:"mp4a.40.2"}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptedHlsOpus={scProtocol:"encrypted-hls",scFormat:"opus",maestroFormat:{mimeType:"application/x-mpegURL"},maestroSegmentFormat:{mimeType:"audio/ogg",audioCodec:{id:"opus"}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hlsOpus={scProtocol:"hls",scFormat:"opus",maestroFormat:{mimeType:"application/x-mpegURL"},maestroSegmentFormat:{mimeType:"audio/ogg",audioCodec:{id:"opus"}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maestroChromecast={scProtocol:"maestro.chromecast",maestroFormat:{}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiMobile={scProtocol:"sc.api-mobile",maestroFormat:{}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptedHlsAACHQ={scProtocol:"encrypted-hls",scFormat:"aac",maestroFormat:{mimeType:"application/x-mpegURL"},maestroSegmentFormat:{mimeType:"audio/mp4",audioCodec:{id:"mp4a.40.2"}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hlsAACHQ={scProtocol:"hls",scFormat:"aac",maestroFormat:{mimeType:"application/x-mpegURL"},maestroSegmentFormat:{mimeType:"audio/mp4",audioCodec:{id:"mp4a.40.2"}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encryptedHlsMp3={scProtocol:"encrypted-hls",scFormat:"mp3",maestroFormat:{mimeType:"application/x-mpegURL"},maestroSegmentFormat:{mimeType:"audio/mpeg"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hlsMp3={scProtocol:"hls",scFormat:"mp3",maestroFormat:{mimeType:"application/x-mpegURL"},maestroSegmentFormat:{mimeType:"audio/mpeg"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.httpMp3={scProtocol:"http",scFormat:"mp3",maestroFormat:{mimeType:"audio/mpeg"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(26);!function(e){e.Fade=n.Fade,e.buildFadeIn=n.buildFadeIn,e.buildFadeOut=n.buildFadeOut}(t.volumeAutomation||(t.volumeAutomation={}))},function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),r.version="23.1.0",r.buildNumber=845;var i=t(98);r.volumeAutomation=i.volumeAutomation;var o=t(25);r.BaseStreamUrlRetriever=o.BaseStreamUrlRetriever,n(t(24));var a=t(13);r.renditions=a.renditions,r.allRenditions=a.allRenditions;var s=t(87);r.UrlRetrieverError=s.UrlRetrieverError;var u=t(86);r.Player=u.Player,r.setGlobalVolume=u.setGlobalVolume,r.setGlobalMuted=u.setGlobalMuted,r.getGlobalVolume=u.getGlobalVolume,r.getGlobalMuted=u.getGlobalMuted,r.setCacheSize=u.setCacheSize;var l=t(28);r.Quality=l.Quality,r.resolveQuality=l.resolveQuality,n(t(27))}]))},function(e,t,r){window,e.exports=function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=97)}([function(e,t,r){"use strict";var n=r(4);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,r){"use strict";e.exports=r(62)()?Symbol:r(61)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deferException=function(e){try{e()}catch(e){window.setTimeout(function(){throw e},0)}}},function(e,t,r){"use strict";var n=r(24)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(11),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return"PLAYER_FATAL_ERROR"},t}(i.PlayerError);t.PlayerFatalError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(19),n=function(){function e(){this._listeners=[],this.dispatch=this.dispatch.bind(this)}return e.prototype.subscribe=function(e){var t=this,r={fn:e,payloads:[]};return this._listeners.push(r),{remove:function(){var e=t._listeners.indexOf(r);return 0<=e&&(t._listeners.splice(e,1),!0)},retrieve:function(){return t._dispatchListenerPayloads(r)}}},e.prototype.dispatch=function(t,e){var i=this,r="number"==typeof e?{time:e}:e||{},n=void 0!==r.time?r.time:a.now(),o=this._listeners;o.forEach(function(e){return e.payloads.push({time:n,payload:t})});for(;!!o.some(function(e){var t=e.fn,r=e.payloads,n=r.shift();return!!n&&(i._callHandler(t,n),!0)}););},e.prototype.getHandle=function(){return{subscribe:this.subscribe.bind(this)}},e.prototype._dispatchListenerPayloads=function(e){for(var t=e.fn,r=e.payloads;;){var n=r.shift();if(!n)break;this._callHandler(t,n)}},e.prototype._callHandler=function(e,t){try{e(t.payload,t.time)}catch(e){window.setTimeout(function(){throw e},0)}},e}();t.EventDispatcher=n},function(e,t,r){"use strict";var s=r(14),u=r(23),l=r(66),c=r(22);(e.exports=function(e,t){var r,n,i,o,a;return arguments.length<2||"string"!=typeof e?(o=t,t=e,e=null):o=arguments[2],null==e?(r=i=!0,n=!1):(r=c.call(e,"c"),n=c.call(e,"e"),i=c.call(e,"w")),a={value:t,configurable:r,enumerable:n,writable:i},o?s(u(o),a):a}).gs=function(e,t,r){var n,i,o,a;return"string"!=typeof e?(o=r,r=t,t=e,e=null):o=arguments[3],null==t?t=void 0:l(t)?null==r?r=void 0:l(r)||(o=r,r=void 0):(o=t,t=r=void 0),i=null==e?!(n=!0):(n=c.call(e,"c"),c.call(e,"e")),a={get:t,set:r,configurable:n,enumerable:i},o?s(u(o),a):a}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(95);t.Promise=n.Promise},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===i)||!1}},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call(function(){return arguments}());e.exports=function(e){return n.call(e)===i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._msg=e,this._cause=t}return e.prototype.getCode=function(){return"PLAYER_ERROR"},e.prototype.getMsg=function(){return this._msg},e.prototype.getCause=function(){return this._cause},e}();t.PlayerError=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(36),i=n.isIE();t.noOpLogger={debug:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},error:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},info:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]},warn:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r]}},t.consoleLogger={debug:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];i?console.log(e,r):(t=console.debug||console.log).call.apply(t,[console,e].concat(r))},error:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];i?console.log(e,r):(t=console.error||console.log).call.apply(t,[console,e].concat(r))},info:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];i?console.log(e,r):(t=console.info||console.log).call.apply(t,[console,e].concat(r))},warn:function(e){for(var t,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];i?console.log(e,r):(t=console.warn||console.log).call.apply(t,[console,e].concat(r))}},t.prefixLogger=function(n,i){return{debug:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.debug.apply(n,["["+i+"] "+e].concat(t))},error:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.error.apply(n,["["+i+"] "+e].concat(t))},info:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.info.apply(n,["["+i+"] "+e].concat(t))},warn:function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.warn.apply(n,["["+i+"] "+e].concat(t))}}},t.cloneLogger=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return{debug:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return n.forEach(function(e){return e.debug.apply(e,[t].concat(r))})},error:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return n.forEach(function(e){return e.error.apply(e,[t].concat(r))})},info:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return n.forEach(function(e){return e.info.apply(e,[t].concat(r))})},warn:function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return n.forEach(function(e){return e.warn.apply(e,[t].concat(r))})}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(8);t.buildDeferred=function(){var r,n,t=!1;return{promise:new i.Promise(function(e,t){r=e,n=t}),resolve:function(e){t||(t=!0,r(e))},reject:function(e){t||(t=!0,n(e))},isSettled:function(){return t}}}},function(e,t,r){"use strict";e.exports=r(71)()?Object.assign:r(70)},function(e,t,r){"use strict";e.exports=r(27)()?Object.setPrototypeOf:r(26)},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r(28),o=function(n){function e(e,t,r){return void 0===r&&(r="The player that the proxy was controlling had a fatal error."),n.call(this,e,t,r)||this}return i(e,n),e.prototype.getCode=function(){return"PROXY_PLAYER_PROVIDED_PLAYER_FATAL_ERROR"},e}(n.ProxyProvidedPlayerError);t.ProxyProvidedPlayerFatalError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.find=function(e,t){var r=void 0;return e.some(function(e){return!!t(e)&&(r=e,!0)}),r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.always=function(e,t){return e.then(t,t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Date.now();t.now=function(){return"performance"in window&&window.performance.now?window.performance.now():Date.now()-n}},function(e,t,r){"use strict";var n,i=r(58),o=r(14),a=r(1),s=r(0),u=r(7),l=r(57),c=r(2),d=Object.defineProperty,h=Object.defineProperties;e.exports=n=function(e,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");h(this,{__list__:u("w",s(e)),__context__:u("w",t),__nextIndex__:u("w",0)}),t&&(a(t.on),t.on("_add",this._onAdd),t.on("_delete",this._onDelete),t.on("_clear",this._onClear))},delete n.prototype.constructor,h(n.prototype,o({_next:u(function(){var e;if(this.__list__)return this.__redo__&&void 0!==(e=this.__redo__.shift())?e:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:u(function(){return this._createResult(this._next())}),_createResult:u(function(e){return void 0===e?{done:!0,value:void 0}:{done:!1,value:this._resolve(e)}}),_resolve:u(function(e){return this.__list__[e]}),_unBind:u(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:u(function(){return"[object "+(this[c.toStringTag]||"Object")+"]"})},l({_onAdd:u(function(r){if(!(r>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__)return void d(this,"__redo__",u("c",[r]));this.__redo__.forEach(function(e,t){r<=e&&(this.__redo__[t]=++e)},this),this.__redo__.push(r)}}),_onDelete:u(function(r){var e;r>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(e=this.__redo__.indexOf(r))&&this.__redo__.splice(e,1),this.__redo__.forEach(function(e,t){r<e&&(this.__redo__[t]=--e)},this)))}),_onClear:u(function(){this.__redo__&&i.call(this.__redo__),this.__nextIndex__=0})}))),d(n.prototype,c.iterator,u(function(){return this}))},function(e,t,r){"use strict";var n=r(10),i=r(9),o=r(63),a=r(43),s=r(42),u=r(2).iterator;e.exports=function(e){return"function"==typeof s(e)[u]?e[u]():new(!n(e)&&i(e)?a:o)(e)}},function(e,t,r){"use strict";e.exports=r(65)()?String.prototype.contains:r(64)},function(e,t,r){"use strict";var n=r(4),i=Array.prototype.forEach,o=Object.create;e.exports=function(e){var t=o(null);return i.call(arguments,function(e){n(e)&&function(e,t){var r;for(r in e)t[r]=e[r]}(Object(e),t)}),t}},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n=r(4),i={function:!0,object:!0};e.exports=function(e){return n(e)&&i[typeof e]||!1}},function(e,t,r){"use strict";var i,n=r(25),o=r(0),a=Object.prototype.isPrototypeOf,s=Object.defineProperty,u={configurable:!0,enumerable:!1,writable:!0,value:void 0};i=function(e,t){if(o(e),null===t||n(t))return e;throw new TypeError("Prototype must be null or an object")},e.exports=function(e){var t,r;return e?(t=2===e.level?e.set?(r=e.set,function(e,t){return r.call(i(e,t),t),e}):function(e,t){return i(e,t).__proto__=t,e}:function e(t,r){var n;return i(t,r),(n=a.call(e.nullPolyfill,t))&&delete e.nullPolyfill.__proto__,null===r&&(r=e.nullPolyfill),t.__proto__=r,n&&s(e.nullPolyfill,"__proto__",u),t},Object.defineProperty(t,"level",{configurable:!1,enumerable:!1,writable:!1,value:e.level})):null}(function(){var e,t=Object.create(null),r={},n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(n){try{(e=n.set).call(t,r)}catch(e){}if(Object.getPrototypeOf(t)===r)return{set:e,level:2}}return t.__proto__=r,Object.getPrototypeOf(t)===r?{level:2}:((t={}).__proto__=r,Object.getPrototypeOf(t)===r&&{level:1})}()),r(74)},function(e,t,r){"use strict";var n=Object.create,i=Object.getPrototypeOf,o={};e.exports=function(){var e=Object.setPrototypeOf,t=arguments[0]||n;return"function"==typeof e&&i(e(t(null),o))===o}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(11),o=function(i){function e(e,t,r){void 0===r&&(r="The player that the proxy was controlling had an error.");var n=i.call(this,r)||this;return n._providedPlayerError=e,n._providedPlayer=t,n}return n(e,i),e.prototype.getCode=function(){return"PROXY_PLAYER_PROVIDED_PLAYER_ERROR"},e.prototype.getProvidedPlayerError=function(){return this._providedPlayerError},e.prototype.getProvidedPlayer=function(){return this._providedPlayer},e}(i.PlayerError);t.ProxyProvidedPlayerError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),o=function(r){function e(e,t){return r.call(this,e,t)||this}return n(e,r),e.prototype.getCode=function(){return"IMPLEMENTATION_ERROR"},e}(i.PlayerFatalError);t.ImplementationError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),n=function(){function e(e,t){this._inCallback=!1,this._onExit=e,this._onEnter=t||null}return e.prototype.enter=function(e){var t=this;if(this._inCallback)return e?e(this._onEnterResultRetriever):void 0;this._inCallback=!0;var r=[],n=!1;this._onEnter&&(this._onEnterResultRetriever={getResult:function(e){n?o.deferException(function(){return e(t._onEnterError,t._onEnterResult)}):r.push(e)}});try{var i=e?e(this._onEnterResultRetriever):void 0;if(this._onEnter){this._onEnterError=void 0,this._onEnterResult=void 0;try{this._onEnterResult=this._onEnter()}catch(e){this._onEnterError=e}n=!0,r.forEach(function(e){return o.deferException(function(){return e(t._onEnterError,t._onEnterResult)})})}return i}finally{this._inCallback=!1,o.deferException(function(){return t._onExit(t._onEnterError,t._onEnterResult)})}},e}();t.OnExit=n},function(e,t,r){"use strict";function o(t){var r=Object.create(null);return Object.keys(t).forEach(function(e){r[e]=t[e]}),r}Object.defineProperty(t,"__esModule",{value:!0});var n=r(30),i=r(3),a=function(){},s=function(){function e(e,t){void 0===t&&(t={});var r=this;this._subscribers=[],this._onExit=new n.OnExit(function(){return r._after()},function(){return r._onEnter()}),this._beforeUpdateError=void 0,this._inAfterUpdate=!1,this._dead=!1,this._officiallyDead=!1,this._errors=[],this._state=o(e),this._initialState=o(e),this._beforeUpdate=t.beforeUpdate||function(){},this._afterUpdate=t.afterUpdate||a,this._afterDispatches=t.afterDispatches||a}return e.prototype.subscribe=function(t,e){var r=this;if(void 0===e&&(e=!0),this._dead){var n=!1;return{retrieve:function(){},remove:function(){return!n&&(n=!0)}}}var i={callback:t,localState:e?o(this._state):this._initialState};return this._subscribers.push(i),e||this._updateSubscriber(i),{remove:function(){var e=r._subscribers.map(function(e){return e.callback}).indexOf(t);return 0<=e&&(r._subscribers.splice(e,1),!0)},retrieve:function(){r._updateSubscriber(i)}}},e.prototype.subscribeIndividual=function(r,n,e){return this.subscribe(function(e){var t=e[r];void 0!==t&&n(t)},e)},e.prototype.getHandle=function(){return{subscribe:this.subscribe.bind(this)}},e.prototype.getIndividualHandle=function(t){var r=this;return{subscribe:function(e){return r.subscribeIndividual(t,e)}}},e.prototype.update=function(t){var r=this;this._officiallyDead||(this._inAfterUpdate?t&&t(this._state,this._beforeUpdateError):this._onExit.enter(function(e){e.getResult(function(){try{t&&t(r._state,r._beforeUpdateError)}catch(e){r._errors.push(e)}})}))},e.prototype.getState=function(){return this._state},e.prototype.kill=function(){var e=this;this._dead||(this._dead=!0,window.setTimeout(function(){e._subscribers.splice(0),e._officiallyDead=!0},0))},e.prototype.isDead=function(){return this._dead},e.prototype._onEnter=function(){this._beforeUpdateError=void 0;try{this._beforeUpdate(this._state)}catch(e){this._beforeUpdateError=e}},e.prototype._after=function(){var t=this,e=this._errors;this._errors=[],i.deferException(function(){t._inAfterUpdate=!0;try{t._afterUpdate(t._state,{beforeUpdate:t._beforeUpdateError,update:e})}catch(e){throw t._inAfterUpdate=!1,e}t._inAfterUpdate=!1,t._subscribers.slice().forEach(function(e){return t._updateSubscriber(e)}),t._afterDispatches(t._state)})},e.prototype._updateSubscriber=function(e){var t=this._calculateDiff(e.localState);Object.keys(t).length&&(e.localState=o(this._state),i.deferException(function(){return e.callback(t,e.localState)}))},e.prototype._calculateDiff=function(r){var n=this,i=Object.create(null);return Object.keys(this._state).forEach(function(e){var t=n._state[e];t!==r[e]&&(i[e]=t)}),i},e}();t.StateManager=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.LOADING=0]="LOADING",e[e.PLAYING=1]="PLAYING",e[e.PAUSED=2]="PAUSED",e[e.DEAD=3]="DEAD"}(t.State||(t.State={}))},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),o=function(t){function e(e){return t.call(this,e||"The player cannot play the provided descriptor.")||this}return n(e,t),e.prototype.getCode=function(){return"NOT_SUPPORTED_ERROR"},e}(i.PlayerFatalError);t.NotSupportedError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(5),i=r(33),n=r(6),l=r(13),a=r(17),c=r(19),s=r(8),u=r(32),d=r(12),h=r(31),f=r(29),p=r(3),g="undefined"!=typeof navigator&&"mediaSession"in navigator,_=g?navigator.mediaSession:null,y=function(){function e(e){var a=this;this._stateManager=new h.StateManager({ended:!1,loading:!1,playing:!1,actuallyPlaying:!1,volume:1,muted:!1,isFading:!1,fadeRate:null,isFadingForSeek:!1,playDeferred:null,pauseDeferred:null,ready:!1,seeking:!1,seek:null,positionJumped:null,stalled:!0,duration:null,dead:!1,state:u.State.PAUSED,fatalError:null,errorOccurred:null,position:0},{afterUpdate:function(e,t){return a._afterUpdate(e,t)},afterDispatches:function(){return a._afterDispatches()},beforeUpdate:function(e){if(!e.dead&&(e.ready||!a._fatalErrorTriggered)){var t=a._getPosition(),r=e.duration;if(t<0)throw a._logger.error("Player provided invalid position.",t,r),a._triggerError(new f.ImplementationError("Player provided a position that was invalid.")),new Error("Player provided invalid position.");e.position=t,a._updateEndedInState(e)}}}),this._onError=new n.EventDispatcher,this._errors=[],this._fatalErrorTriggered=!1,this._loadingDelayTimer=null,this._stalled=!1,this._queuedDuration=null,this._readyDeferred=l.buildDeferred(),this._queuedSeekDeferreds=[],this._lastPlayError=null,this._lastPauseError=null,this._lastPlayedPosition=null,this._listenTimeBase=0,this._timePlaybackStarted=null,this._positionAfterLastUpdate=0,this._positionWhenStartedFadeOut=null,this._fadeStartAllowed=!1,this._seekFadeStartAllowed=!1,this._implementationIsFading=!1;var t=e.name;if(this._logger=d.prefixLogger(e.logger,"BasePlayer"+(t?"-"+t:"")),this._mediaSessionEnabled=!!e.mediaSessionEnabled,e.defaultFadeDuration&&e.defaultFadeDuration<0)throw new Error("defaultFadeDuration must be >= 0.");if(e.loadingDelay&&e.loadingDelay<0)throw new Error("loadingDelay must be >= 0.");this._defaultFadeDuration=void 0!==e.defaultFadeDuration?e.defaultFadeDuration:150,this._defaultSeekFadeOutDuration=void 0!==e.defaultSeekFadeOutDuration?e.defaultSeekFadeOutDuration:25,this._defaultSeekFadeInDuration=void 0!==e.defaultSeekFadeInDuration?e.defaultSeekFadeInDuration:35,this._loadingDelay=void 0!==e.loadingDelay?e.loadingDelay:1e3,this.onError=this._onError.getHandle(),this.whenReady=this._readyDeferred.promise,this._stateManager.subscribe(function(e,t){return a._onChange(e,t)}),this._stateManager.subscribe(function(e){var t=e.actuallyPlaying,r=e.seek;!0===t&&(a._fadeStartAllowed=!1),r&&"IN_PROGRESS"!==r.state&&(a._seekFadeStartAllowed=!1)}),this._stateManager.subscribe(function(e,t){var r=e.isFading,n=t.dead;!n&&!1===r&&a._implementationIsFading&&a._triggerError(new f.ImplementationError("Fade was still running when not allowed."))}),this._stateManager.subscribe(function(e,t){var r=e.playing,n=t.dead,i=t.fadeRate;if(!n&&void 0!==r)try{a._handlePlayPauseChange(r,{fadeRate:i||void 0}),r||(a._fadeStartAllowed=!1)}catch(e){a._triggerError(new f.ImplementationError("Exception occurred whilst handling play/pause change.",e))}}),this._stateManager.subscribe(function(e,t){var r=e.seek,n=t.dead;if(!n&&r&&"IN_PROGRESS"===r.state)try{a._seekFadeStartAllowed=!0,a._handleSeekChange(r.position,{fadeRate:{beforeSeek:r.fadeRate.beforeSeek||void 0,afterSeek:r.fadeRate.afterSeek||void 0}}),a._seekFadeStartAllowed=!1}catch(e){a._triggerError(new f.ImplementationError("Exception occurred whilst handling seek change.",e))}}),this.onChange=this._buildEventHandle(function(e,t){var r=t.ready;if(void 0!==r&&!0!==r)throw new Error("Ready state is invalid.");var n=t.duration;if(void 0!==n&&null===n)throw new Error("Duration state is invalid.");var i=t.dead;if(void 0!==i&&!0!==i)throw new Error("Dead state is invalid.");var o={ready:r,ended:t.ended,duration:n,volume:t.volume,muted:t.muted,playing:t.playing,actuallyPlaying:t.actuallyPlaying,stalled:t.stalled,loading:t.loading,fading:t.isFading,fadingForSeek:t.isFadingForSeek,playRejection:!1===t.playing&&a._lastPlayError||void 0,pauseRejection:!0===t.playing&&a._lastPauseError||void 0,seeking:t.seeking,seek:t.seek||void 0,positionJumped:void 0!==t.positionJumped||void 0,state:t.state,fatalError:t.fatalError||void 0,dead:i};Object.keys(o).some(function(e){return void 0!==o[e]})&&e(o)});var r=e.registerListeners;r&&p.deferException(function(){r({onChange:a.onChange,onError:a.onError})}),this._registerMediaSessionActionHandlers(),this._notifyMediaSessionPaused(),this.onDurationChange=this._buildEventHandle(function(e,t){var r=t.duration;null!=r&&e(r)}),this.onReady=this._buildEventHandle(function(e,t){var r=t.ready;!0===r&&e(void 0)}),this.onStateChange=this._buildEventHandle(function(e,t){var r=t.state;void 0!==r&&e(r)}),this.onVolumeChange=this._buildEventHandle(function(e,t,r){var n=t.volume,i=t.muted,o=r.volume,a=r.muted;void 0===n&&void 0===i||e({volume:o,muted:a})}),this.onPlay=this._buildEventHandle(function(e,t){var r=t.actuallyPlaying;!0===r&&e(void 0)}),this.onPlayIntent=this._buildEventHandle(function(e,t){var r=t.playing;!0===r&&e(void 0)}),this.onPlayRejection=this._buildEventHandle(function(e,t){var r=t.playing;!1===r&&a._lastPlayError&&e(a._lastPlayError)}),this.onPause=this._buildEventHandle(function(e,t){var r=t.actuallyPlaying;!1===r&&e(void 0)}),this.onPauseIntent=this._buildEventHandle(function(e,t){var r=t.playing;!1===r&&e(void 0)}),this.onPauseRejection=this._buildEventHandle(function(e,t){var r=t.playing;!0===r&&a._lastPauseError&&e(a._lastPauseError)}),this.onSeek=this._buildEventHandle(function(e,t){var r=t.seek;r&&"COMPLETED"===r.state&&e(void 0)}),this.onSeekIntent=this._buildEventHandle(function(e,t){var r=t.seeking;!0===r&&e(void 0)}),this.onSeekRejection=this._buildEventHandle(function(e,t){var r=t.seek;r&&"ERROR"===r.state&&e(r.error)}),this.onPositionJumped=this._buildEventHandle(function(e,t){var r=t.positionJumped;void 0!==r&&e(void 0)}),this.onEnded=this._buildEventHandle(function(e,t){var r=t.ended;!0===r&&e(void 0)}),this.onLeftEnded=this._buildEventHandle(function(e,t){var r=t.ended;!1===r&&e(void 0)}),this.onStallStart=this._buildEventHandle(function(e,t){var r=t.stalled;!0===r&&e(void 0)}),this.onStallEnd=this._buildEventHandle(function(e,t){var r=t.stalled;!1===r&&e(void 0)}),this.onLoadStart=this._buildEventHandle(function(e,t){var r=t.loading;!0===r&&e(void 0)}),this.onLoadEnd=this._buildEventHandle(function(e,t){var r=t.loading;!1===r&&e(void 0)}),this.onFadeStart=this._buildEventHandle(function(e,t){var r=t.isFading;!0===r&&e(void 0)}),this.onFadeEnd=this._buildEventHandle(function(e,t){var r=t.isFading;!1===r&&e(void 0)}),this.onFadeForSeekStart=this._buildEventHandle(function(e,t){var r=t.isFadingForSeek;!0===r&&e(void 0)}),this.onFadeForSeekEnd=this._buildEventHandle(function(e,t){var r=t.isFadingForSeek;!1===r&&e(void 0)})}return e.prototype.isReady=function(){return this._stateManager.getState().ready},e.prototype.getPosition=function(){return this._getPositionOrPositionSeekingTo()},e.prototype.getLastPlayedPosition=function(){var e=this._stateManager.getState(),t=e.actuallyPlaying,r=e.stalled;return t&&!r?this.getPosition():this._lastPlayedPosition},e.prototype.getListenTime=function(){var e=this._stateManager.getState(),t=e.actuallyPlaying,r=e.ended,n=this._listenTimeBase;return t&&!r&&(n+=c.now()-this._timePlaybackStarted),n},e.prototype.isStalled=function(){return this._stateManager.getState().stalled},e.prototype.isLoading=function(){return this._stateManager.getState().loading},e.prototype.isFading=function(){return this._stateManager.getState().isFading},e.prototype.isFadingForSeek=function(){return this._stateManager.getState().isFadingForSeek},e.prototype.isPlaying=function(){return this._stateManager.getState().playing},e.prototype.isActuallyPlaying=function(){return this._stateManager.getState().actuallyPlaying},e.prototype.isEnded=function(){return this._stateManager.getState().ended},e.prototype.getState=function(){return this._stateManager.getState().state},e.prototype.getBufferController=function(){return null},e.prototype.getMemoryCacheMaxSize=function(){return null},e.prototype.getMemoryCacheUsage=function(){return null},e.prototype.getMemoryCacheController=function(){return null},e.prototype.getFatalError=function(){return this._stateManager.getState().fatalError},e.prototype.isDead=function(){return this._stateManager.getState().dead},e.prototype.getVolume=function(){return this._stateManager.getState().volume},e.prototype.getMuted=function(){return this._stateManager.getState().muted},e.prototype.getDuration=function(){var e=this._stateManager.getState(),t=e.ready,r=e.duration;return t?r:null},e.prototype.setVolume=function(e,t){if(e<0||1<e)throw new Error("Volume must be >= 0 and <= 1.");if(!this._stateManager.getState().dead){var r=this._stateManager.getState().muted;void 0===t&&(t=r);try{this._handleVolumeChange(e,t)}catch(e){throw this._triggerError(new f.ImplementationError("Exception occurred updating volume.",e)),e}}},e.prototype.setMuted=function(e){this.setVolume(this._stateManager.getState().volume,e)},e.prototype.getCurrentBufferedTimeRange=function(){var e=this.getBufferedTimeRanges();if(!e)return null;var t=this.getPosition();return a.find(e,function(e){return e.containsTime(t)})||null},e.prototype.play=function(r){var n=this;this._ensureNotDead(),this._logger.debug("play() called.",r);var i=l.buildDeferred();try{return this._stateManager.update(function(e){var t;e.playing?n._logger.debug("Intent is already to be playing."):(n._logger.debug("Requesting play."),e.playing=!0,t=n._extractFadeDuration(r),e.fadeRate=t?1/t:null,n._lastPlayError=null),e.playDeferred&&!e.playDeferred.isSettled()||(e.playDeferred=l.buildDeferred()),i.resolve(e.playDeferred.promise)}),i.promise}catch(r){return this._triggerError(new o.PlayerFatalError("Unexpected error when attempting to play.",r)),s.Promise.reject(r)}},e.prototype.pause=function(r){var n=this;this._ensureNotDead(),this._logger.debug("pause() called.",r);var i=l.buildDeferred();try{return this._stateManager.update(function(e){var t;e.playing?(n._logger.debug("Requesting pause."),n._positionWhenStartedFadeOut=n._getPositionOrPositionSeekingTo(),e.playing=!1,t=n._extractFadeDuration(r),e.fadeRate=t?1/t*-1:null,n._fadeStartAllowed=!0,n._lastPauseError=null):n._logger.debug("Intent is already to be paused."),e.pauseDeferred&&!e.pauseDeferred.isSettled()||(e.pauseDeferred=l.buildDeferred()),i.resolve(e.pauseDeferred.promise)}),i.promise}catch(r){return this._triggerError(new o.PlayerFatalError("Unexpected error when attempting to pause.",r)),s.Promise.reject(r)}},e.prototype.seek=function(o,a){var s=this;this._ensureNotDead(),this._logger.debug("seek() called.",o);var u=l.buildDeferred();return this._stateManager.update(function(e){var t,r,n,i;o<0?(s._logger.warn("Rejecting seek immediately as the position was negative."),u.reject(new Error("You were attempting to seek to a negative time."))):null!==e.duration&&o>e.duration?(s._logger.warn("Rejecting seek immediately as the duration is now known, and the requested positon was past it."),u.reject(new Error("You were attempting to seek past the end of the media."))):(e.stalled||!e.actuallyPlaying||e.seek&&"IN_PROGRESS"===e.seek.state||(s._lastPlayedPosition=s._getPositionOrPositionSeekingTo()),t=l.buildDeferred(),e.seek&&"IN_PROGRESS"===e.seek.state&&e.seek.position===o?s._logger.debug("Seek already requested to the same position.",o):(s._logger.debug("Requesting seek.",o),e.seeking=!0,s._positionWhenStartedFadeOut=null,r=s._extractSeekFadeDurations(a,o),n=r.fadeOutDuration?1/r.fadeOutDuration*-1:null,i=r.fadeInDuration?1/r.fadeInDuration:null,e.seek={state:"IN_PROGRESS",position:o,fadeRate:{beforeSeek:n,afterSeek:i}},e.positionJumped=Object.create(null)),s._queuedSeekDeferreds.push({position:o,deferred:t}),u.resolve(t.promise))}),u.promise},e.prototype.getSeekState=function(){return this._stateManager.getState().seek},e.prototype.kill=function(){var t=this;this._stateManager.update(function(e){e.dead||(t._logger.debug("kill() called."),e.dead=!0)})},e.prototype._update=function(e){this._stateManager.update(function(){return e&&e()})},e.prototype._ensureNotDead=function(){if(this._stateManager.getState().dead)throw new Error("Player is dead.")},e.prototype._notifyStalled=function(e){this._ensureNotDead(),this._stalled!==e&&(this._logger.debug("notifyStalled() called.",e),this._stalled=e,this._stateManager.update())},e.prototype._getQueuedSeekPosition=function(){var e=this.getSeekState();return e&&"IN_PROGRESS"===e.state?e.position:null},e.prototype._provideDuration=function(r){var n=this;this._ensureNotDead(),this._stateManager.update(function(e){if(e.duration!==r){var t=n._getPositionOrPositionSeekingTo();if(r<0||e.ready&&r<t)throw n._triggerError(new f.ImplementationError("Attempt to update duration to an invalid value.")),new Error("Duration cannot be less than the current position.");n._logger.debug("provideDuration() called.",r),e.ready?e.duration=r:n._queuedDuration=r}})},e.prototype._notifyVolumeChange=function(t,r){if(t<0||1<t)throw this._triggerError(new f.ImplementationError("Volume was out of range.",t)),new Error("Volume was out of range.");this._stateManager.update(function(e){e.volume=t,e.muted=r})},e.prototype._notifyPlaying=function(t){var r=this;this._ensureNotDead(),this._stateManager.update(function(e){if(!e.ready)throw r._triggerError(new f.ImplementationError("Attempt to register playback as started before ready.")),new Error("Player must be ready first.");t!==e.actuallyPlaying&&(r._logger.debug("notifyPlaying() called.",t),t||e.seeking||e.stalled||(r._lastPlayedPosition=r._getPositionOrPositionSeekingTo()),(e.actuallyPlaying=e.playing=t)?(r._lastPlayError=null,r._fadeStartAllowed=!0):(e.isFading=!1,r._fadeStartAllowed=!1,r._lastPauseError=null))})},e.prototype._notifyPlayRejection=function(t){var r=this;this._ensureNotDead(),t=t||new Error("Unknown error."),this._stateManager.update(function(e){if(!e.ready)throw r._triggerError(new f.ImplementationError("Attempt to reject a play request before player ready.")),new Error("Player must be ready first.");if(e.actuallyPlaying||!e.playing)throw r._triggerError(new f.ImplementationError("Attempt to reject a play request when not valid.")),new Error("Playing state is incorrect.");r._logger.debug("notifyPlayRejection() called.",t),e.playing=!1,r._lastPlayError=t})},e.prototype._notifyPauseRejection=function(t){var r=this;this._ensureNotDead(),t=t||new Error("Unknown error."),this._stateManager.update(function(e){if(!e.ready)throw r._triggerError(new f.ImplementationError("Attempt to reject pause request before player ready.")),new Error("Player must be ready first.");if(!e.actuallyPlaying||e.playing)throw r._triggerError(new f.ImplementationError("Attempt to reject pause request when not valid.")),new Error("Playing state is incorrect.");r._logger.debug("notifyPauseRejection() called.",t),e.playing=!0,e.fadeRate&&(e.fadeRate*=-1),r._lastPauseError=t})},e.prototype._notifySeekRejection=function(t){var r=this;this._ensureNotDead(),t=t||new Error("Unknown error."),this._stateManager.update(function(e){if(!e.ready)throw r._triggerError(new f.ImplementationError("Attempt to reject seek request before player ready.")),new Error("Player must be ready first.");if(!e.seek||"IN_PROGRESS"!==e.seek.state)throw r._triggerError(new f.ImplementationError("Attempt to reject seek request when none requested.")),new Error("A seek hasn't been requested.");if(null!==e.duration&&e.position>e.duration)throw r._triggerError(new f.ImplementationError("Attempt to reject seek request after duration changed below current position.")),new Error("Attempt to reject seek request after duration changed below current position.");r._logger.debug("notifySeekRejection() called.",t),e.seeking=!1,e.seek={state:"ERROR",error:t},e.positionJumped=Object.create(null)})},e.prototype._notifyFading=function(t){var r=this;if(this._ensureNotDead(),t&&!this._fadeStartAllowed){var e="Attempt to register fade as starting when not allowed.";throw this._triggerError(new f.ImplementationError(e)),new Error(e)}this._implementationIsFading=t,this._stateManager.update(function(e){e.isFading!==t&&(r._logger.debug("notifyFading() called",t),t||e.playing||null===r._positionWhenStartedFadeOut||r.seek(r._positionWhenStartedFadeOut,{fadeInDuration:0,fadeOutDuration:0}).catch(function(e){r._logger.warn("Seek back to position where fade out started failed.",e)}),e.isFading=t)})},e.prototype._notifyFadingForSeek=function(t){var r=this;if(this._ensureNotDead(),t&&!this._seekFadeStartAllowed){var e="Attempt to register fade as starting for seek when not allowed.";throw this._triggerError(new f.ImplementationError(e)),new Error(e)}this._stateManager.update(function(e){e.isFadingForSeek!==t&&(r._logger.debug("notifyFadingForSeek() called",t),e.isFadingForSeek=t)})},e.prototype._signalReady=function(){var t=this;this._ensureNotDead(),this._stateManager.update(function(e){if(e.ready)throw t._triggerError(new f.ImplementationError("Attempt to signal ready twice.")),new Error("Ready already signalled.");if(null===t._queuedDuration)throw t._triggerError(new f.ImplementationError("Attempt to signal ready when duration unknown.")),new Error("Duration is still unknown.");t._logger.debug("signalReady() called."),e.ready=!0,e.duration=t._queuedDuration,e.seek&&"IN_PROGRESS"===e.seek.state&&e.seek.position>e.duration&&(e.seeking=!1,e.seek={state:"ERROR",error:new Error("You were attempting to seek past the end of the media.")})})},e.prototype._signalSeekComplete=function(){var r=this;this._ensureNotDead(),this._stateManager.update(function(e){if(!e.ready)throw r._triggerError(new f.ImplementationError("Attempt to signal seek as complete before player ready.")),new Error("Player must be ready first.");if(!e.seek||"IN_PROGRESS"!==e.seek.state)throw r._triggerError(new f.ImplementationError("Attempt to signal seek as complete when none requested.")),new Error("There shouldn't be a seek in progress.");var t=e.duration;if(e.seek&&"IN_PROGRESS"===e.seek.state&&e.seek.position>t)throw new Error("Seek cannot have completed given it was to a time greater than the duration.");r._logger.debug("signalSeekComplete() called."),r._seekFadeStartAllowed=!0,e.seek={state:"COMPLETED",position:e.seek.position,fadeRate:e.seek.fadeRate},e.seeking=!1,e.position=e.seek.position})},e.prototype._triggerError=function(r){var n=this;r instanceof o.PlayerFatalError&&(this._fatalErrorTriggered=!0),this._stateManager.update(function(e){var t=!1;if(e.ready&&r instanceof i.NotSupportedError&&(r=new f.ImplementationError("Invalid NotSupportedError."),t=!0),r instanceof o.PlayerFatalError?(r instanceof i.NotSupportedError?n._logger.info("NotSupportedError occurred.",r):n._logger.error("Fatal error occurred.",r),e.fatalError?n._logger.warn("A fatal error already occurred.",e.fatalError):e.fatalError=r,n._errors.push(r),e.errorOccurred=Object.create(null),e.dead=!0):(n._logger.warn("Non-fatal error occurred.",r),n._errors.push(r),e.errorOccurred=Object.create(null)),t)throw new Error("Not supported errors are only valid before the player is ready.")})},e.prototype._buildEventHandle=function(n){var e=this;return{subscribe:function(t){var r=function(e){return t(e,c.now())};return e._stateManager.subscribe(function(e,t){n(r,e,t)})}}},e.prototype._finalizeState=function(e){this._updateEndedInState(e);var t,r=this._getPositionOrPositionSeekingTo();e.dead?(this._lastPlayError=new Error("Player was killed."),e.loading=!1,this._clearLoadingDelay(),!e.playing&&e.isFading&&null!==this._positionWhenStartedFadeOut&&(this._logger.debug("Fade out was in progress. Pretending it completed."),e.isFading=!1,e.position=this._positionWhenStartedFadeOut),e.stalled=!0,e.actuallyPlaying=!1,e.isFadingForSeek=!1,e.playing=!1,e.state=u.State.DEAD):((t=!e.ended&&(!e.ready||this._stalled||!(!e.seek||"IN_PROGRESS"!==e.seek.state)))&&!e.stalled&&!e.seeking&&e.actuallyPlaying&&(this._lastPlayedPosition=r),e.stalled=t,!e.ended&&!e.isFading&&!e.isFadingForSeek&&(e.playing||e.actuallyPlaying)&&(e.stalled||e.playing!==e.actuallyPlaying)?this._loadingDelay?this._scheduleLoadingDelay():e.loading=!0:(e.loading=!1,this._clearLoadingDelay()),this._positionAfterLastUpdate!==r&&(this._positionAfterLastUpdate=r,e.playing||e.actuallyPlaying||(e.positionJumped=Object.create(null))),e.state=this._calculateState(e))},e.prototype._updateEndedInState=function(e){e.ended=e.ready&&this._getPositionOrPositionSeekingTo()===e.duration},e.prototype._scheduleLoadingDelay=function(){var e=this;this._loadingDelayTimer||(this._loadingDelayTimer=window.setTimeout(function(){e._stateManager.update(function(e){return e.loading=!0})},this._loadingDelay))},e.prototype._clearLoadingDelay=function(){this._loadingDelayTimer&&(window.clearTimeout(this._loadingDelayTimer),this._loadingDelayTimer=null)},e.prototype._getPositionOrPositionSeekingTo=function(){this._stateManager.update();var e=this._stateManager.getState();return e.seek&&"IN_PROGRESS"===e.seek.state?e.seek.position:e.isFading&&!e.playing&&null!==this._positionWhenStartedFadeOut?this._positionWhenStartedFadeOut:e.ready&&null!==e.duration?e.position:0},e.prototype._calculateState=function(e){var t=e.dead,r=e.loading,n=e.playing,i=e.ended;return t?u.State.DEAD:r?u.State.LOADING:n&&!i?u.State.PLAYING:u.State.PAUSED},e.prototype._registerMediaSessionActionHandlers=function(){var e=this;this._mediaSessionEnabled&&_&&(_.setActionHandler("play",function(){e.isDead()||e.play()}),_.setActionHandler("pause",function(){e.isDead()||e.pause()}),_.setActionHandler("seekbackward",function(){e.isDead()||e.seek(Math.max(0,e.getPosition()-5e3))}),_.setActionHandler("seekforward",function(){e.isDead()||e.seek(Math.min(e.getDuration()||0,e.getPosition()+5e3))}))},e.prototype._notifyMediaSessionPlaying=function(){this._mediaSessionEnabled&&_&&(_.playbackState="playing")},e.prototype._notifyMediaSessionPaused=function(){this._mediaSessionEnabled&&_&&(_.playbackState="paused")},e.prototype._extractFadeDuration=function(e){return void 0===e&&(e={}),void 0===e.fadeDuration?!this._stateManager.getState().playing||0<this._getPositionOrPositionSeekingTo()?this._defaultFadeDuration:0:0<e.fadeDuration?e.fadeDuration:0},e.prototype._extractSeekFadeDurations=function(e,t){var r,n;return void 0===e&&(e={}),r=void 0!==e.fadeOutDuration?0<e.fadeOutDuration?e.fadeOutDuration:0:this._defaultSeekFadeOutDuration,n=void 0!==e.fadeInDuration?0<e.fadeInDuration?e.fadeInDuration:0:0<t?this._defaultSeekFadeInDuration:0,{fadeOutDuration:r,fadeInDuration:n}},e.prototype._afterUpdate=function(e,t){var r;t.beforeUpdate||0<t.update.length?(this._logger.error("Errors occurred during state update. Killing player.",t),this._triggerError(new o.PlayerFatalError("Errors occurred during state update.",t))):e.dead||!e.ready||null!==(r=e.duration)&&!e.seeking&&e.position>r&&(this._logger.error("Player provided invalid position.",e.position,r),this._triggerError(new f.ImplementationError("Player provided a position that was invalid."))),this._finalizeState(e)},e.prototype._afterDispatches=function(){var t=this,e=this._errors;this._errors=[],e.forEach(function(e){return t._onError.dispatch(e)})},e.prototype._onChange=function(e,n){var t,i=this,r=e.ready,o=e.dead,a=e.fatalError,s=e.playing,u=e.actuallyPlaying,l=e.ended;if(!0===r&&(this._logger.debug("Resolving ready deferred."),this._readyDeferred.resolve(void 0)),!0===u&&this._registerMediaSessionActionHandlers(),!0===s?this._notifyMediaSessionPlaying():!1===s&&this._notifyMediaSessionPaused(),n.pauseDeferred&&!n.pauseDeferred.isSettled()&&n.playing&&(t=this._lastPauseError||new Error("Pause request aborted."),this._logger.debug("Rejecting pause deferred.",t),n.pauseDeferred.reject(t)),!n.playDeferred||n.playDeferred.isSettled()||n.playing||(t=this._lastPlayError||new Error("Play request aborted."),this._logger.debug("Rejecting play deferred.",t),n.playDeferred.reject(t)),n.playDeferred&&!n.playDeferred.isSettled()&&n.actuallyPlaying&&(this._logger.debug("Resolving play deferred."),n.playDeferred.resolve(void 0)),!n.pauseDeferred||n.pauseDeferred.isSettled()||n.actuallyPlaying||(this._logger.debug("Resolving pause deferred."),n.pauseDeferred.resolve(void 0)),!0===u&&!n.ended||!1===l&&n.actuallyPlaying?this._timePlaybackStarted=c.now():(!1===u&&!n.ended||!0===l&&n.actuallyPlaying)&&(this._listenTimeBase+=c.now()-this._timePlaybackStarted,this._timePlaybackStarted=null),this._queuedSeekDeferreds=this._queuedSeekDeferreds.filter(function(e){var t=e.position,r=e.deferred;if(n.seek)if("IN_PROGRESS"!==n.seek.state){if(!n.stalled||"ERROR"===n.seek.state)return"ERROR"!==n.seek.state?(i._logger.debug("Resolving seek()."),r.resolve(void 0)):(i._logger.debug("Rejecting seek().",n.seek.error),r.reject(n.seek.error)),!1}else if("IN_PROGRESS"!==n.seek.state||n.seek.position!==t)return i._logger.debug("Rejecting seek() because another seek was requested.",t),r.reject(new Error("Seek request aborted because another seek was requested to a different position.")),!1;return!0}),!0===o){this._logger.debug("Calling _kill() on player.");try{this._kill(),this._logger.info("Player killed.")}catch(e){this._triggerError(new f.ImplementationError("Exception occurred in _kill().",e)),this._logger.error("Exception when implementation was being killed.",e)}n.ready||(t=a||new Error("Player was killed."),this._logger.debug("Rejecting whenReady."),this._readyDeferred.reject(t)),this._queuedSeekDeferreds.forEach(function(e){var t=e.position,r=e.deferred,n=a||new Error("Seek aborted as player killed.");i._logger.debug("Rejecting seek().",t),r.reject(n)}),this._stateManager.kill(),this._logger.debug("Player dead.")}},e}();t.BasePlayer=y},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}(),i=this&&this.__assign||Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=r(34),l=r(11),c=r(5),a=r(12),s=r(6),d=r(28),h=r(16),u=function(r){function e(e){var t=r.call(this,e)||this;return t._onProvidedPlayerError=new s.EventDispatcher,t._errorHandler=null,t._changeHandler=null,t._player=null,t._instanceLock=null,t._playConfig=void 0,t._pauseConfig=void 0,t._seekConfig=void 0,t._lastPlayerPosition=0,t._synced=!1,t._unsyncInProgress=!1,t._logger=a.prefixLogger(t._logger,"ProxyPlayerBase"),t.onProvidedPlayerError=t._onProvidedPlayerError.getHandle(),t}return n(e,r),e.prototype.play=function(e){return this._playConfig=e,r.prototype.play.call(this)},e.prototype.pause=function(e){return this._pauseConfig=e,r.prototype.pause.call(this)},e.prototype.seek=function(e,t){return this._seekConfig=t,r.prototype.seek.call(this,e)},e.prototype.getBufferedTimeRanges=function(){return this._player&&this._synced?this._player.getBufferedTimeRanges():null},e.prototype.getCurrentBufferedTimeRange=function(){return this._player&&this._synced?this._player.getCurrentBufferedTimeRange():null},e.prototype.getMaxBufferLength=function(){return this._player&&this._synced?this._player.getMaxBufferLength():null},e.prototype._providePlayer=function(e,t){if(void 0===t&&(t={}),t=i({syncPosition:!0,syncVolume:!0},t),this._ensureNotDead(),this._player)throw new Error("A player has already been provided.");this._logger.debug("providePlayer() called."),this._instanceLock=Object.create(null),this._player=e,this._sync(t)},e.prototype._removePlayer=function(){var t=this;if(this._ensureNotDead(),!this._player)throw new Error("There is no player to remove.");if(this._unsyncInProgress)throw new Error("Player is currently unsyncing.");this._logger.debug("removePlayer() called."),this._instanceLock=null,this._unsync(),this._player=null,this.isReady()&&!this.isDead()&&this._update(function(){var e=null!==t._getQueuedSeekPosition();t._notifyFading(!1),e||null===t._getQueuedSeekPosition()||t._signalSeekComplete(),t._notifyFadingForSeek(!1),t._notifyStalled(!0)})},e.prototype._setInitialDuration=function(e){var t=this;if(this._ensureNotDead(),e<0)throw new Error("Cannot set duration to a value < 0.");null===this.getDuration()&&this._update(function(){t._ensureBelowPosition(e),t._provideDuration(e),t.isReady()||(t._signalReady(),t._handleSkippedSeek())})},e.prototype._triggerError=function(e){r.prototype._triggerError.call(this,e)},e.prototype._getPlayer=function(){return this.isDead()?null:this._player},e.prototype._handleVolumeChange=function(e,t){this._synced&&this._player?this._player.setVolume(e,t):this._notifyVolumeChange(e,t)},e.prototype._handlePlayPauseChange=function(e){var t=this,r=this._player;r&&this._update(function(){e?t._playAndHandleAbort(r):(t._pauseAndHandleAbort(r),r.isFading()&&t._notifyFading(!0))})},e.prototype._handleSeekChange=function(e){var t,r=this._player;r&&this._synced&&(t=this._seekConfig,this._seekConfig=void 0,r.seek(e,t),r.isFadingForSeek()&&this._notifyFadingForSeek(!0))},e.prototype._getPosition=function(){if(this._player&&this._synced){if(!this._changeHandler)throw new Error("Handler should exist.");if(this._changeHandler.retrieve(),this._synced)return this._player.getPosition()}return this._lastPlayerPosition},e.prototype._kill=function(){this._player&&(this._unsync(),this._player.kill()),this._player=null},e.prototype._handleSkippedSeek=function(){var e,t;this._player&&this._synced&&(e=this.getSeekState(),t=this._player.getSeekState(),!e||"IN_PROGRESS"!==e.state||t&&"IN_PROGRESS"===t.state||(this._logger.debug("Signalling seek as complete on proxy because provided player isn't seeking."),this._signalSeekComplete()))},e.prototype._ensureBelowPosition=function(e){this.getPosition()>e&&(this._logger.debug("Capping position.",e),this.seek(e),this.isReady()&&(this._lastPlayerPosition=e,this._signalSeekComplete()))},e.prototype._sync=function(a){var e,s=this,u=this._player;if(!u)throw new Error("Player should have become available by now.");this._logger.debug("Syncing...",this.isPlaying(),this.isActuallyPlaying()),u.isDead()?(this._logger.debug("Provided player is dead."),(e=u.getFatalError())&&this._handleFatalError(e,u)):(this._errorHandler=u.onError.subscribe(function(e){e instanceof c.PlayerFatalError?s._onProvidedPlayerError.dispatch(new h.ProxyProvidedPlayerFatalError(e,u)):(s._triggerError(e),s._onProvidedPlayerError.dispatch(new d.ProxyProvidedPlayerError(e,u)))}),this._changeHandler=u.onChange.subscribe(function(t){s._update(function(){return s._logger.debug("Handling changes.",t),t.dead?(s._logger.debug("Player has gone to DEAD state."),s._unsync(),void(s.isDead()||t.fatalError&&s._handleFatalError(t.fatalError,u))):(void 0===t.volume&&void 0===t.muted||s._notifyVolumeChange(u.getVolume(),u.getMuted()),void 0!==t.duration&&(s._ensureBelowPosition(t.duration),s._provideDuration(t.duration),s.isReady()||(s._signalReady(),s._handleSkippedSeek(),s._notifyStalled(u.isStalled()))),t.seek&&((e=s.getSeekState())&&"IN_PROGRESS"===e.state||"IN_PROGRESS"!==t.seek.state?e&&"IN_PROGRESS"===e.state&&("COMPLETED"===t.seek.state&&e.position===t.seek.position?(s._signalSeekComplete(),u.isFadingForSeek()&&s._notifyFadingForSeek(!0)):"COMPLETED"===t.seek.state&&e.position!==t.seek.position?s._notifySeekRejection(new Error("Another seek occurred to a different position.")):"IN_PROGRESS"===t.seek.state&&e.position!==t.seek.position?s.seek(t.seek.position):"ERROR"===t.seek.state&&s._notifySeekRejection(t.seek.error)):s.seek(t.seek.position)),void 0!==t.stalled&&s._notifyStalled(t.stalled),!1===t.playing&&t.playRejection?s.isActuallyPlaying()?(s._triggerError(new l.PlayerError("Paused because a player was provided that refused to play.")),s._notifyPlaying(!1)):s._notifyPlayRejection(t.playRejection):!1===t.playing&&(u.isActuallyPlaying()?s.pause():void 0===t.actuallyPlaying&&s.isReady()&&s._notifyPlaying(!1)),!0===t.playing&&t.pauseRejection?s._notifyPauseRejection(t.pauseRejection):!0===t.playing&&s.play(),void 0!==t.actuallyPlaying&&t.actuallyPlaying!==s.isActuallyPlaying()&&(s._notifyPlaying(t.actuallyPlaying),t.actuallyPlaying&&u.isFading()&&s._notifyFading(!0)),!1===t.fading&&s._notifyFading(!1),void(!1===t.fadingForSeek&&s._notifyFadingForSeek(!1)));var e})}),this._update(function(){var e,t=s._instanceLock;try{if(s._notifyStalled(u.isStalled()),u.isReady()&&(e=u.getDuration(),s._ensureBelowPosition(e),s._provideDuration(e),s.isReady()||(s._logger.debug("Provided player is already ready. Making proxy player ready."),s._signalReady())),a.syncVolume&&(u.setVolume(s.getVolume(),s.getMuted()),s._instanceLock!==t))return;var r,n,i,o=s.getSeekState();if(a.syncPosition?(s._logger.debug("Seeking to match position."),r=s.getPosition(),u.getPosition()!==r?u.seek(r):(s._logger.debug("Skipping seek because already at same position."),s.isReady()&&o&&"IN_PROGRESS"===o.state&&s._signalSeekComplete())):o&&"IN_PROGRESS"===o.state?(s._logger.debug("Seeking to match position because a seek has been queued."),n=s._seekConfig,s._seekConfig=void 0,u.seek(s.getPosition(),n)):(i=u.getSeekState())&&"IN_PROGRESS"===i.state&&(s._logger.debug("Seeking on proxy to match seek that is in progress on provided player."),s.seek(i.position)),s._instanceLock!==t)return;if(u.isActuallyPlaying()?(s._logger.debug("Provided player is already playing."),s.isActuallyPlaying()||(s._notifyPlaying(!0),u.isFading()&&s._notifyFading(!0))):u.isPlaying()?(s._logger.debug("Provided player is preparing to play."),s.play()):s.isPlaying()?(s._logger.debug("Calling play() on provided player to match proxy."),s._playAndHandleAbort(u)):s.isReady()&&s.isActuallyPlaying()&&(s._logger.debug("Switching to paused state, as provided player and proxy intended state is paused."),s._notifyPlaying(!1)),s._instanceLock!==t)return;s._synced=!0,s._notifyVolumeChange(u.getVolume(),u.getMuted())}catch(e){s._triggerError(new c.PlayerFatalError("Unexpected error occurred whilst syncing.",e))}}))},e.prototype._playAndHandleAbort=function(e){var t=this._instanceLock;this._logger.debug("Calling play() on provided player.");var r=this._playConfig;this._playConfig=this._pauseConfig=void 0,e.play(r),this._instanceLock===t&&!e.isPlaying()&&this.isPlaying()&&(this._logger.debug("Provided player was not playing after play() call completed."),this.isActuallyPlaying()?(this._triggerError(new l.PlayerError("Paused because a player was provided that refused to play.")),this._notifyPlaying(!1)):this.pause())},e.prototype._pauseAndHandleAbort=function(e){var t=this._instanceLock;this._logger.debug("Calling pause() on provided player.");var r=this._pauseConfig;this._playConfig=this._pauseConfig=void 0,e.pause(r),this._instanceLock===t&&e.isPlaying()&&!this.isPlaying()&&(this._logger.debug("Provided player was not paused after pause() call completed."),this.play())},e.prototype._unsync=function(){if(this._logger.debug("Unsyncing..."),this._changeHandler&&(this._changeHandler.remove(),this._changeHandler=null),this._errorHandler&&(this._errorHandler.remove(),this._errorHandler=null),this._synced){this._synced=!1,this._unsyncInProgress=!0;var e=this._player;if(e)try{this._lastPlayerPosition=e.getPosition()}catch(e){this._logger.error("Error whilst unsyncing.",e)}this._unsyncInProgress=!1,this._logger.debug("Unsynced.",this.isPlaying(),this.isActuallyPlaying())}else this._logger.debug("Unsynced. (Sync never completed)")},e}(o.BasePlayer);t.ProxyPlayerBase=u},function(e,t,r){"use strict";function n(e){var t=navigator.userAgent.match(e);if(t&&3<=t.length){var r=parseInt(t[1],10),n=parseInt(t[2],10);if(!isNaN(r)&&!isNaN(n))return{major:r,minor:n}}return null}Object.defineProperty(t,"__esModule",{value:!0});var i="undefined"!=typeof navigator?navigator.userAgent:"",o=!/chrome|opera/i.test(i)&&/safari/i.test(i),a=0<=i.indexOf("MSIE ")||0<=i.indexOf("Trident/"),s=0<=i.indexOf("Edge/"),u=/Chrom(?:e|ium)/.test(i),l=0<=i.toLowerCase().indexOf("firefox"),c=/version\/(\d+)\.(\d+)/i,d=/Chrom(?:e|ium)\/([0-9]+)\.([0-9]+)\.([0-9]+)/,h=/Firefox\/(\d+)\.(\d+)/;t.isSafari=function(){return o},t.isFirefox=function(){return l},t.isChrome=function(){return u},t.isIE=function(){return a},t.isEdge=function(){return s},t.getSafariVersion=function(){return n(c)},t.getChromeVersion=function(){return n(d)},t.getFirefoxVersion=function(){return n(h)}},function(e,d,t){"use strict";Object.defineProperty(d,"__esModule",{value:!0});var h=t(8),f=t(13),p=t(18),g=t(3),u=t(6);d.abortedError=new Error("Job aborted."),d.map=function(e,t){var o=t.convertResult,a=t.convertProgressUpdate,r=t.abortableJobOpts,n=t.passThroughAbort,s=void 0===n||n;return new i(function(){var r=e(),t=new u.EventDispatcher,n=!0,i=f.buildDeferred();return a&&r.onProgressUpdate(function(e){t.dispatch(a(e,n)),n=!1},{skipPast:!0}),r.onCompletion(function(e){try{i.resolve(o(e))}catch(e){i.reject(e)}}),r.onError(i.reject),{result:i.promise,progressUpdates:a?{onProgressUpdate:t,getProgressSoFar:function(){var e=r.getProgressSoFar();if(e){var t=a(e,n);return n=!1,t}return null}}:void 0,abort:function(){return s&&r.abort()}}},r)};var i=function(){function e(e,t){void 0===t&&(t={}),this._job=e,this._opts=t,this._counter=0,this._jobControl=null,this._promise=null,this._jobCompleted=!1}return e.prototype.run=function(){var i,e=this;if(this._jobControl)i=this._jobControl;else{try{i=this._jobControl=this._job()}catch(e){i=this._jobControl={result:h.Promise.reject(e)}}this._promise=i.result,p.always(this._promise,function(){e._jobCompleted=!0,e._opts.storeResult||(e._jobCompleted=!1,e._promise=null,e._jobControl=null)})}var t=this._promise;this._counter++;var r=f.buildDeferred(),o=!1,n=!1,a=void 0,s=!1,u=[],l=[],c=[];return p.always(t,function(){s||(o=!0,e._counter--),u.forEach(function(e){return e.remove()})}),t.then(function(t){s||(a=t,l.forEach(function(e){return g.deferException(function(){return e(t)})}),l.splice(0),r.resolve(t))},function(t){s||(n=!0,a=t,c.forEach(function(e){return e(t)}),c.splice(0),r.reject(t))}),{whenComplete:function(){return r.promise},onProgressUpdate:function(t,e){var r,n;void 0===e&&(e={}),i.progressUpdates&&(s||o||(r=i.progressUpdates.onProgressUpdate.subscribe(function(e){return t(e)}),u.push(r)),e.skipPast||(n=i.progressUpdates.getProgressSoFar())&&t(n))},getProgressSoFar:function(){return i.progressUpdates?i.progressUpdates.getProgressSoFar():null},onCompletion:function(e){o?n||g.deferException(function(){return e(a)}):l.push(e)},onError:function(e){s?g.deferException(function(){return e(d.abortedError)}):o?n&&g.deferException(function(){return e(a)}):c.push(e)},hasCompleted:function(){return o},hasErrored:function(){return n},isAborted:function(){return s},abort:function(){s||o||(s=!0,u.forEach(function(e){return e.remove()}),0==--e._counter&&!e._jobCompleted&&e._jobControl&&e._jobControl.abort&&(e._jobControl.abort(),e._promise=null,e._jobControl=null),c.forEach(function(e){return g.deferException(function(){return e(d.abortedError)})}),r.reject(d.abortedError))}}},e}();d.AbortableJob=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){if(this.start=e,(this.duration=t)<0)throw new RangeError("Duration must be >= 0.");this.end=e+t}return n.normalizeRawTimeRanges=function(e){return e.slice(0).sort(function(e,t){return e.start-t.start}).reduce(function(e,t,r){var n=e.length-1;return 0<r&&e[n].end>=t.start?e[n].end=t.end:e.push(t),e},[])},n.normalize=function(e){return n.normalizeRawTimeRanges(e.map(function(e){return{start:e.start,end:e.end}})).map(function(e){return new n(e.start,e.end-e.start)})},n.getCoverage=function(e){if(0===e.length)return new n(0,0);var t=1/0,r=0;return e.forEach(function(e){e.start<t&&(t=e.start),e.end>r&&(r=e.end)}),new n(t,r-t)},n.rangesContainTime=function(t,e){return e.some(function(e){return e.containsTime(t)})},n.prototype.containsTime=function(e){return this.start<=e&&this.end>e},n}();t.TimeRange=n},function(e,t,r){"use strict";e.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},function(e,t,r){"use strict";var d=r(10),h=r(1),f=r(9),p=r(21),g=Array.isArray,_=Function.prototype.call,y=Array.prototype.some;e.exports=function(e,t){var r,n,i,o,a,s,u,l,c=arguments[2];if(g(e)||d(e)?r="array":f(e)?r="string":e=p(e),h(t),i=function(){o=!0},"array"!==r)if("string"!==r)for(n=e.next();!n.done;){if(_.call(t,c,n.value,i),o)return;n=e.next()}else for(s=e.length,a=0;a<s&&(u=e[a],a+1<s&&(55296<=(l=u.charCodeAt(0))&&l<=56319&&(u+=e[++a])),_.call(t,c,u,i),!o);++a);else y.call(e,function(e){return _.call(t,c,e,i),o})}},function(e,t,r){"use strict";var n=r(10),i=r(4),o=r(9),a=r(2).iterator,s=Array.isArray;e.exports=function(e){return!(!i(e)||!s(e)&&!o(e)&&!n(e)&&"function"!=typeof e[a])}},function(e,t,r){"use strict";var n=r(41);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not iterable");return e}},function(e,t,r){"use strict";var n,i=r(15),o=r(7),a=r(2),s=r(20),u=Object.defineProperty;n=e.exports=function(e){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");e=String(e),s.call(this,e),u(this,"__length__",o("",e.length))},i&&i(n,s),delete n.prototype.constructor,n.prototype=Object.create(s.prototype,{_next:o(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:o(function(e){var t,r=this.__list__[e];return this.__nextIndex__===this.__length__?r:55296<=(t=r.charCodeAt(0))&&t<=56319?r+this.__list__[this.__nextIndex__++]:r})}),u(n.prototype,a.toStringTag,o("c","String Iterator"))},function(e,t,r){"use strict";var s=r(1),u=r(0),l=Function.prototype.bind,c=Function.prototype.call,d=Object.keys,h=Object.prototype.propertyIsEnumerable;e.exports=function(o,a){return function(r,n){var e,i=arguments[2],t=arguments[3];return r=Object(u(r)),s(n),e=d(r),t&&e.sort("function"==typeof t?l.call(t,r):void 0),"function"!=typeof o&&(o=e[o]),c.call(o,e,function(e,t){return h.call(r,e)?c.call(n,i,r[e],e,r,t):a})}}},function(e,t,r){"use strict";e.exports=r(44)("forEach")},function(e,t,r){"use strict";var n=r(1),s=r(45),u=Function.prototype.call;e.exports=function(e,i){var o={},a=arguments[2];return n(i),s(e,function(e,t,r,n){o[t]=u.call(i,a,e,t,r,n)}),o}},function(e,t,r){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:0<e?1:-1}},function(e,t,r){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&1===e(10)&&-1===e(-20)}},function(e,t,r){"use strict";e.exports=r(48)()?Math.sign:r(47)},function(e,t,r){"use strict";var n=r(49),i=Math.abs,o=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?n(e)*o(i(e)):e}},function(e,t,r){"use strict";var n=r(50),i=Math.max;e.exports=function(e){return i(0,n(e))}},function(e,t,r){"use strict";var n=Object.prototype.toString,i=n.call(r(24));e.exports=function(e){return"function"==typeof e&&n.call(e)===i}},function(e,t,r){"use strict";var f=r(2).iterator,p=r(10),g=r(52),_=r(51),y=r(1),v=r(0),m=r(4),b=r(9),E=Array.isArray,w=Function.prototype.call,S={configurable:!0,enumerable:!0,writable:!0,value:null},P=Object.defineProperty;e.exports=function(e){var t,r,n,i,o,a,s,u,l,c,d=arguments[1],h=arguments[2];if(e=Object(v(e)),m(d)&&y(d),this&&this!==Array&&g(this))t=this;else{if(!d){if(p(e))return 1!==(o=e.length)?Array.apply(null,e):((i=new Array(1))[0]=e[0],i);if(E(e)){for(i=new Array(o=e.length),r=0;r<o;++r)i[r]=e[r];return i}}i=[]}if(!E(e))if(void 0!==(l=e[f])){for(s=y(l).call(e),t&&(i=new t),u=s.next(),r=0;!u.done;)c=d?w.call(d,h,u.value,r):u.value,t?(S.value=c,P(i,r,S)):i[r]=c,u=s.next(),++r;o=r}else if(b(e)){for(o=e.length,t&&(i=new t),n=r=0;r<o;++r)c=e[r],r+1<o&&(55296<=(a=c.charCodeAt(0))&&a<=56319&&(c+=e[++r])),c=d?w.call(d,h,c,n):c,t?(S.value=c,P(i,n,S)):i[n]=c,++n;o=n}if(void 0===o)for(o=_(e.length),t&&(i=new t(o)),r=0;r<o;++r)c=d?w.call(d,h,e[r],r):e[r],t?(S.value=c,P(i,r,S)):i[r]=c;return t&&(S.value=null,i.length=o),i}},function(e,t,r){"use strict";e.exports=function(){var e,t,r=Array.from;return"function"==typeof r&&(t=r(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},function(e,t,r){"use strict";e.exports=r(54)()?Array.from:r(53)},function(e,t,r){"use strict";var o=r(55),a=r(14),s=r(0);e.exports=function(t){var e=Object(s(t)),r=arguments[1],n=Object(arguments[2]);if(e!==t&&!r)return e;var i={};return r?o(r,function(e){(n.ensure||e in t)&&(i[e]=t[e])}):a(i,t),i}},function(e,t,r){"use strict";var n,o=r(56),i=r(23),a=r(1),s=r(46),u=r(1),l=r(0),c=Function.prototype.bind,d=Object.defineProperty,h=Object.prototype.hasOwnProperty;n=function(e,t,r){var n,i=l(t)&&u(t.value);return delete(n=o(t)).writable,delete n.value,n.get=function(){return!r.overwriteDefinition&&h.call(this,e)?i:(t.value=c.call(i,r.resolveContext?r.resolveContext(this):this),d(this,e,t),this[e])},n},e.exports=function(e){var r=i(arguments[1]);return null!=r.resolveContext&&a(r.resolveContext),s(e,function(e,t){return n(t,e,r)})}},function(e,t,r){"use strict";var n=r(0);e.exports=function(){return n(this).length=0,this}},function(e,t,r){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&"Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag])}},function(e,t,r){"use strict";var n=r(59);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},function(e,t,r){"use strict";var n,i,o,a,s=r(7),u=r(60),l=Object.create,c=Object.defineProperties,d=Object.defineProperty,h=Object.prototype,f=l(null);if("function"==typeof Symbol){n=Symbol;try{String(n()),a=!0}catch(e){}}var p=function(){var i=l(null);return function(e){for(var t,r,n=0;i[e+(n||"")];)++n;return i[e+=n||""]=!0,d(h,t="@@"+e,s.gs(null,function(e){r||(r=!0,d(this,t,s(e)),r=!1)})),t}}();o=function(e){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return i(e)},e.exports=i=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return a?n(t):(r=l(o.prototype),t=void 0===t?"":String(t),c(r,{__description__:s("",t),__name__:s("",p(t))}))},c(i,{for:s(function(e){return f[e]?f[e]:f[e]=i(String(e))}),keyFor:s(function(e){var t;for(t in u(e),f)if(f[t]===e)return t}),hasInstance:s("",n&&n.hasInstance||i("hasInstance")),isConcatSpreadable:s("",n&&n.isConcatSpreadable||i("isConcatSpreadable")),iterator:s("",n&&n.iterator||i("iterator")),match:s("",n&&n.match||i("match")),replace:s("",n&&n.replace||i("replace")),search:s("",n&&n.search||i("search")),species:s("",n&&n.species||i("species")),split:s("",n&&n.split||i("split")),toPrimitive:s("",n&&n.toPrimitive||i("toPrimitive")),toStringTag:s("",n&&n.toStringTag||i("toStringTag")),unscopables:s("",n&&n.unscopables||i("unscopables"))}),c(o.prototype,{constructor:s(i),toString:s("",function(){return this.__name__})}),c(i.prototype,{toString:s(function(){return"Symbol ("+u(this).__description__+")"}),valueOf:s(function(){return u(this)})}),d(i.prototype,i.toPrimitive,s("",function(){var e=u(this);return"symbol"==typeof e?e:e.toString()})),d(i.prototype,i.toStringTag,s("c","Symbol")),d(o.prototype,i.toStringTag,s("c",i.prototype[i.toStringTag])),d(o.prototype,i.toPrimitive,s("c",i.prototype[i.toPrimitive]))},function(e,t,r){"use strict";var n={object:!0,symbol:!0};e.exports=function(){var e;if("function"!=typeof Symbol)return!1;e=Symbol("test symbol");try{String(e)}catch(e){return!1}return!!n[typeof Symbol.iterator]&&!!n[typeof Symbol.toPrimitive]&&!!n[typeof Symbol.toStringTag]}},function(e,t,r){"use strict";var n,i=r(15),o=r(22),a=r(7),s=r(2),u=r(20),l=Object.defineProperty;n=e.exports=function(e,t){if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");u.call(this,e),t=t?o.call(t,"key+value")?"key+value":o.call(t,"key")?"key":"value":"value",l(this,"__kind__",a("",t))},i&&i(n,u),delete n.prototype.constructor,n.prototype=Object.create(u.prototype,{_resolve:a(function(e){return"value"===this.__kind__?this.__list__[e]:"key+value"===this.__kind__?[e,this.__list__[e]]:e})}),l(n.prototype,s.toStringTag,a("c","Array Iterator"))},function(e,t,r){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return-1<n.call(this,e,arguments[1])}},function(e,t,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&!0===n.contains("dwa")&&!1===n.contains("foo")}},function(e,t,r){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t,r){"use strict";var n=r(4),i=Object.keys;e.exports=function(e){return i(n(e)?Object(e):e)}},function(e,t,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,r){"use strict";e.exports=r(68)()?Object.keys:r(67)},function(e,t,r){"use strict";var a=r(69),s=r(0),u=Math.max;e.exports=function(t,r){var n,e,i,o=u(arguments.length,2);for(t=Object(s(t)),i=function(e){try{t[e]=r[e]}catch(e){n=n||e}},e=1;e<o;++e)a(r=arguments[e]).forEach(i);if(void 0!==n)throw n;return t}},function(e,t,r){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,r){"use strict";var n=Object.create(null),i=Math.random;e.exports=function(){for(var e;e=i().toString(36).slice(2),n[e];);return e}},function(e,t,r){"use strict";var n=r(25);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not an Object");return e}},function(e,t,r){"use strict";var i,o=Object.create;r(27)()||(i=r(26)),e.exports=function(){var r,t,n;return!i||1!==i.level?o:(n={configurable:!(t={}),enumerable:!(r={}),writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(e){return"__proto__"===e?void(t[e]={configurable:!0,enumerable:!1,writable:!0,value:void 0}):void(t[e]=n)}),Object.defineProperties(r,t),Object.defineProperty(i,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:r}),function(e,t){return o(null===e?r:e,t)})}()},function(e,t,r){"use strict";var n,i=r(15),o=r(73),a=r(0),s=r(72),u=r(7),l=r(21),c=r(40),d=r(2).toStringTag,h=r(39),f=Array.isArray,p=Object.defineProperty,g=Object.prototype.hasOwnProperty,_=Object.getPrototypeOf;e.exports=n=function(){var t,e=arguments[0];if(!(this instanceof n))throw new TypeError("Constructor requires 'new'");return t=h&&i&&WeakMap!==n?i(new WeakMap,_(this)):this,null!=e&&(f(e)||(e=l(e))),p(t,"__weakMapData__",u("c","$weakMap$"+s())),e&&c(e,function(e){a(e),t.set(e[0],e[1])}),t},h&&(i&&i(n,WeakMap),n.prototype=Object.create(WeakMap.prototype,{constructor:u(n)})),Object.defineProperties(n.prototype,{delete:u(function(e){return!!g.call(o(e),this.__weakMapData__)&&(delete e[this.__weakMapData__],!0)}),get:u(function(e){if(g.call(o(e),this.__weakMapData__))return e[this.__weakMapData__]}),has:u(function(e){return g.call(o(e),this.__weakMapData__)}),set:u(function(e,t){return p(o(e),this.__weakMapData__,u("c",t)),this}),toString:u(function(){return"[object WeakMap]"})}),p(n.prototype,d,u("c","WeakMap"))},function(e,t,r){"use strict";e.exports=function(){var e,t;if("function"!=typeof WeakMap)return!1;try{e=new WeakMap([[t={},"one"],[{},"two"],[{},"three"]])}catch(e){return!1}return"[object WeakMap]"===String(e)&&"function"==typeof e.set&&e.set({},1)===e&&"function"==typeof e.delete&&"function"==typeof e.has&&"one"===e.get(t)}},function(e,t,r){"use strict";e.exports=r(76)()?WeakMap:r(75)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(77),i=function(){function e(){this._map=new n}return e.prototype.get=function(e){return this._map.get(e)},e.prototype.set=function(e,t){this._map.set(e,t)},e.prototype.has=function(e){return this._map.has(e)},e.prototype.delete=function(e){return this._map.delete(e)},e}();t.SCWeakMap=i},function(e,t,r){!function(){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,c=/^([^\/?#]*)(.*)$/,t=/(?:\/|^)\.(?=\/)/g,n=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,d={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var n=d.parseURL(e);if(!n)throw new Error("Error trying to parse base URL.");return n.path=d.normalizePath(n.path),d.buildURLFromParts(n)}var i=d.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=d.normalizePath(i.path),d.buildURLFromParts(i)):t;var o,a=d.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");!a.netLoc&&a.path&&"/"!==a.path[0]&&(o=c.exec(a.path),a.netLoc=o[1],a.path=o[2]),a.netLoc&&!a.path&&(a.path="/");var s,u,l={scheme:a.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};return i.netLoc||(l.netLoc=a.netLoc,"/"===i.path[0])||(i.path?(s=a.path,u=s.substring(0,s.lastIndexOf("/")+1)+i.path,l.path=d.normalizePath(u)):(l.path=a.path,i.params||(l.params=a.params,i.query||(l.query=a.query)))),null===l.path&&(l.path=r.alwaysNormalize?d.normalizePath(i.path):i.path),d.buildURLFromParts(l)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(t,"");e.length!==(e=e.replace(n,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=d}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(79),i=/^.*\.([^\.;\?#]*).*$/;t.getExtension=function(e){var t=i.exec(e);return t?t[1].toLowerCase():null},t.buildAbsoluteUrl=function(e,t){return n.buildAbsoluteURL(e,t,{alwaysNormalize:!0})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.combine=function(e){var t=new Uint8Array(e.reduce(function(e,t){return e+t.byteLength},0)),r=0;return e.forEach(function(e){t.set(e,r),r+=e.byteLength}),t},t.fill=function(e,t){if(Uint8Array.prototype.fill)e.fill(t);else for(var r=0;r<e.length;r++)e[r]=t},t.forEach=function(e,t){if(Uint8Array.prototype.forEach)e.forEach(t);else for(var r=0;r<e.length;r++)t(e[r],r)},t.numberToUint8Array=function(e,t){if(void 0===t&&(t=!1),(e=Math.round(e))<0)throw new Error("Negative numbers not supported.");for(var r=Math.max(1,Math.ceil(Math.log(e+1)/Math.log(2)/8)),n=new Uint8Array(r),i=0;i<r;i++)n[t?i:r-1-i]=255&e,e>>>=8;return n},t.createVintBuffer=function(e){if(e<0||e>Math.pow(2,53))throw new Error("Unrepresentable value: "+e);var t;for(t=1;t<=8&&!(e<Math.pow(2,7*t)-1);t++);for(var r=new Uint8Array(t),n=1;n<=t;n++){var i=255&e;r[t-n]=i,e-=i,e/=Math.pow(2,8)}return r[0]|=1<<8-t,r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compact=function(e){return e.filter(function(e){return null!=e})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(8),s=r(18);t.promiseWithTimeout=function(n,i,o){return void 0===o&&(o=new Error("Timed out.")),new a.Promise(function(e,t){var r=window.setTimeout(function(){t(o)},i);s.always(n,function(e){return window.clearTimeout(r),e}).then(e,t)})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(17),i="undefined"!=typeof window&&"Map"in window;t.buildCache=function(){return i?new window.Map:new o};var o=function(){function e(){this._store=[]}return e.prototype.set=function(t,e){var r=n.find(this._store,function(e){return e.key===t});r?r.val=e:this._store.push({key:t,val:e})},e.prototype.get=function(t){var e=n.find(this._store,function(e){return e.key===t});if(e)return e.val},e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c=r(3);t.retry=function(n,t,i){void 0===i&&(i={});var o=null,a=0,s=!1,u=null,l=function(){function e(){if(r)throw new Error("scheduleRetry() already called.");if(r=!0,u=null,!s){var e=n(++a);if(null!==e)return o=window.setTimeout(l,e),1;var t=i.onNoMoreRetries;return t&&c.deferException(function(){return t()}),0}}var r=!1;u=t({attemptNum:a,scheduleRetry:e})||null};return l(),{cancel:function(){s||(s=!0,o&&(window.clearTimeout(o),o=null),u&&u.onCancel())}}},t.buildExponentialDelayCalculator=function(e){var t=void 0===e?{}:e,r=t.timeBase,n=void 0===r?500:r,i=t.threshold,o=void 0===i?3:i,a=t.delayCap,s=void 0===a?45e3:a,u=t.jitter,l=void 0===u?200:u,c=t.maxAttempts,d=void 0===c?null:c;if(n<=0)throw new Error("Time base must be > 0.");if(o<=0)throw new Error("Threshold must be > 0.");if(null!==s&&s<=0)throw new Error("Delay cap must be null or > 0.");if(null!==d&&d<1)throw new Error("Max attempts must be >= 1.");return function(e){if(null!==d&&d<=e)return null;var t=0<e?Math.pow(2,e/o-1):0;return Math.min(t*n,s||1/0)+Math.round(Math.random()*l)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),i=r(37),o=r(85),a=r(30),s=r(17),u=r(84),l=r(19),c=r(8),d=r(83),h=r(18),f=r(82),p=r(81),g=r(3),_=r(36),y=r(80),v=r(78);!function(e){e.OnExit=a.OnExit,e.find=s.find,e.Promise=c.Promise,e.promiseWithTimeout=d.promiseWithTimeout,e.always=h.always,e.compact=f.compact,e.deferException=g.deferException,e.SCWeakMap=v.SCWeakMap,function(e){e.buildCache=u.buildCache}(e.cache||(e.cache={})),function(e){e.buildDeferred=n.buildDeferred}(e.deferred||(e.deferred={})),function(e){e.getExtension=y.getExtension,e.buildAbsoluteUrl=y.buildAbsoluteUrl}(e.url||(e.url={})),function(e){e.AbortableJob=i.AbortableJob,e.map=i.map,e.abortedError=i.abortedError}(e.abortableJob||(e.abortableJob={})),function(e){e.retry=o.retry,e.buildExponentialDelayCalculator=o.buildExponentialDelayCalculator}(e.retry||(e.retry={})),function(e){e.isSafari=_.isSafari,e.getSafariVersion=_.getSafariVersion,e.isIE=_.isIE,e.isEdge=_.isEdge,e.isFirefox=_.isFirefox,e.isChrome=_.isChrome,e.getChromeVersion=_.getChromeVersion,e.getFirefoxVersion=_.getFirefoxVersion}(e.browser||(e.browser={})),function(e){e.combine=p.combine,e.fill=p.fill,e.forEach=p.forEach,e.numberToUint8Array=p.numberToUint8Array,e.createVintBuffer=p.createVintBuffer}(e.arrayBuffer||(e.arrayBuffer={})),function(e){e.now=l.now}(e.time||(e.time={}))}(t.helpers||(t.helpers={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._msg=e,this._cause=t}return e.prototype.getMsg=function(){return this._msg},e.prototype.getCause=function(){return this._cause},e}();t.LoaderError=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(87);!function(e){e.LoaderError=n.LoaderError}(t.loaderErrors||(t.loaderErrors={}))},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),o=function(r){function e(e,t){return r.call(this,e||"The URL update failed for some reason.",t)||this}return n(e,r),e.prototype.getCode=function(){return"URL_UPDATE_ERROR"},e}(i.PlayerFatalError);t.URLUpdateError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(33),i=r(89),o=r(29),a=r(16),s=r(11),u=r(5);!function(e){e.PlayerError=s.PlayerError,e.PlayerFatalError=u.PlayerFatalError,e.NotSupportedError=n.NotSupportedError,e.URLUpdateError=i.URLUpdateError,e.ImplementationError=o.ImplementationError,e.ProxyProvidedPlayerFatalError=a.ProxyProvidedPlayerFatalError}(t.errors||(t.errors={}))},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),o=r(12),a=r(35),s=r(16),u=function(r){function e(e){var t=r.call(this,e)||this;return t._onPlayerProvided=new i.EventDispatcher,t._onPlayerRemoved=new i.EventDispatcher,t._shouldPassThroughFatalErrors=!!e.shouldPassThroughFatalErrors,t.onPlayerProvided=t._onPlayerProvided.getHandle(),t.onPlayerRemoved=t._onPlayerRemoved.getHandle(),t._logger=o.prefixLogger(t._logger,"ProxyPlayer"),t}return n(e,r),e.prototype.providePlayer=function(e,t){void 0===t&&(t={}),this._providePlayer(e,t),this._onPlayerProvided.dispatch(e)},e.prototype.removePlayer=function(){var e=this._getPlayer();if(!e)throw new Error("There is no player to remove.");this._removePlayer(),this._onPlayerRemoved.dispatch(e)},e.prototype.setInitialDuration=function(e){this._setInitialDuration(e)},e.prototype.getPlayer=function(){return this._getPlayer()},e.prototype._handleFatalError=function(e,t){this._shouldPassThroughFatalErrors?this._triggerError(e):this._triggerError(new s.ProxyProvidedPlayerFatalError(e,t))},e}(a.ProxyPlayerBase);t.ProxyPlayer=u},function(e,t){},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(){p&&h&&(p=!1,h.length?f=h.concat(f):g=-1,f.length&&a())}function a(){if(!p){var e=i(o);p=!0;for(var t=f.length;t;){for(h=f,f=[];++g<t;)h&&h[g].run();g=-1,t=f.length}h=null,p=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var l,c,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(e){c=n}}();var h,f=[],p=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new s(e,t)),1!==f.length||p||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,ce){(function(ue,le){e.exports=function(){"use strict";function r(e){return"function"==typeof e||"object"==typeof e&&null!==e}function l(e){return"function"==typeof e}function e(e){W=e}function t(e){J=e}function n(){return function(){return ue.nextTick(u)}}function i(){return void 0!==V?function(){V(u)}:s()}function o(){var e=0,t=new X(u),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function a(){var e=new MessageChannel;return e.port1.onmessage=u,function(){return e.port2.postMessage(0)}}function s(){var e=setTimeout;return function(){return e(u,1)}}function u(){for(var e=0;e<G;e+=2){var t=Z[e],r=Z[e+1];t(r),Z[e]=void 0,Z[e+1]=void 0}G=0}function c(){try{var e=ce(92);return V=e.runOnLoop||e.runOnContext,i()}catch(e){return s()}}function d(e,t){var r=arguments,n=this,i=new this.constructor(f);void 0===i[te]&&D(i);var o=n._state;return o?!function(){var e=r[o-1];J(function(){return C(o,i,e,n._result)})}():x(n,i,e,t),i}function h(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(f);return E(r,e),r}function f(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function g(){return new TypeError("A promises callback cannot return that same promise.")}function _(e){try{return e.then}catch(e){return oe.error=e,oe}}function y(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function v(e,n,i){J(function(t){var r=!1,e=y(i,n,function(e){r||(r=!0,(n!==e?E:S)(t,e))},function(e){r||(r=!0,P(t,e))},t._label);!r&&e&&(r=!0,P(t,e))},e)}function m(t,e){e._state===ne?S(t,e._result):e._state===ie?P(t,e._result):x(e,void 0,function(e){return E(t,e)},function(e){return P(t,e)})}function b(e,t,r){t.constructor===e.constructor&&r===d&&t.constructor.resolve===h?m(e,t):r===oe?P(e,oe.error):void 0===r?S(e,t):l(r)?v(e,t,r):S(e,t)}function E(e,t){e===t?P(e,p()):r(t)?b(e,t,_(t)):S(e,t)}function w(e){e._onerror&&e._onerror(e._result),A(e)}function S(e,t){e._state===re&&(e._result=t,e._state=ne,0!==e._subscribers.length&&J(A,e))}function P(e,t){e._state===re&&(e._state=ie,e._result=t,J(w,e))}function x(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+ne]=r,i[o+ie]=n,0===o&&e._state&&J(A,e)}function A(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?C(r,n,i,o):i(o);e._subscribers.length=0}}function R(){this.error=null}function T(e,t){try{return e(t)}catch(e){return ae.error=e,ae}}function C(e,t,r,n){var i=l(r),o=void 0,a=void 0,s=void 0,u=void 0;if(i){if(o=T(r,n),o===ae?(u=!0,a=o.error,o=null):s=!0,t===o)return void P(t,g())}else o=n,s=!0;t._state!==re||(i&&s?E(t,o):u?P(t,a):e===ne?S(t,o):e===ie&&P(t,o))}function O(t,e){try{e(function(e){E(t,e)},function(e){P(t,e)})}catch(e){P(t,e)}}function k(){return se++}function D(e){e[te]=se++,e._state=void 0,e._result=void 0,e._subscribers=[]}function M(e,t){this._instanceConstructor=e,this.promise=new e(f),this.promise[te]||D(this.promise),H(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?S(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&S(this.promise,this._result))):P(this.promise,I())}function I(){return new Error("Array Methods must be provided an Array")}function F(e){return new M(this,e).promise}function L(i){var o=this;return new o(H(i)?function(e,t){for(var r=i.length,n=0;n<r;n++)o.resolve(i[n]).then(e,t)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function N(e){var t=new this(f);return P(t,e),t}function j(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function U(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function B(e){this[te]=k(),this._result=this._state=void 0,this._subscribers=[],f!==e&&("function"!=typeof e&&j(),this instanceof B?O(this,e):U())}function q(){var e=void 0;if(void 0!==le)e=le;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var r=null;try{r=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===r&&!t.cast)return}e.Promise=B}var z=void 0,H=z=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},G=0,V=void 0,W=void 0,J=function(e,t){Z[G]=e,Z[G+1]=t,G+=2,2===G&&(W?W(u):ee())},Q="undefined"!=typeof window?window:void 0,K=Q||{},X=K.MutationObserver||K.WebKitMutationObserver,Y="undefined"==typeof self&&"undefined"!=typeof ue&&"[object process]"==={}.toString.call(ue),$="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),ee=void 0;ee=Y?n():X?o():$?a():void 0===Q?c():s();var te=Math.random().toString(36).substring(16),re=void 0,ne=1,ie=2,oe=new R,ae=new R,se=0;return M.prototype._enumerate=function(){for(var e=this.length,t=this._input,r=0;this._state===re&&r<e;r++)this._eachEntry(t[r],r)},M.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===h){var i=_(t);if(i===d&&t._state!==re)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(r===B){var o=new r(f);b(o,t,i),this._willSettleAt(o,e)}else this._willSettleAt(new r(function(e){return e(t)}),e)}else this._willSettleAt(n(t),e)},M.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===re&&(this._remaining--,e===ie?P(n,r):this._result[t]=r),0===this._remaining&&S(n,this._result)},M.prototype._willSettleAt=function(e,t){var r=this;x(e,void 0,function(e){return r._settledAt(ne,t,e)},function(e){return r._settledAt(ie,t,e)})},B.all=F,B.race=L,B.resolve=h,B.reject=N,B._setScheduler=e,B._setAsap=t,B._asap=J,B.prototype={constructor:B,then:d,catch:function(e){return this.then(null,e)}},B.polyfill=q,B.Promise=B}()}).call(this,ce(94),ce(93))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(13),o=r(6),a=r(37),s=r(3);!function(e){e[e.PENDING=0]="PENDING",e[e.WAITING=1]="WAITING",e[e.IN_PROGRESS=2]="IN_PROGRESS",e[e.COMPLETED=3]="COMPLETED",e[e.ERRORED=4]="ERRORED"}(n=t.ResponseState||(t.ResponseState={}));var u=function(){function e(){var e=this;this._responseDeferred=i.buildDeferred(),this._requestStartCallbacks=[],this._parts=[],this._progressEventDispatcher=new o.EventDispatcher,this._cachedCompleteParts=null,this._state=n.PENDING,this._statusAndHeaders=null,this._getProgressSoFar=function(){if(!e._parts.length)return null;if(!e._statusAndHeaders)throw new Error("Headers should be set.");return{initial:!0,statusCode:e._statusAndHeaders.statusCode,headers:e._statusAndHeaders.headers,part:e._getDataSoFar()}};var t=new a.AbortableJob(function(){return{result:e._responseDeferred.promise,progressUpdates:{getProgressSoFar:e._getProgressSoFar,onProgressUpdate:e._progressEventDispatcher}}},{storeResult:!0});this._jobHandle=t.run()}return e.prototype.onProgress=function(e){this._jobHandle.onProgressUpdate(e)},e.prototype.getResponse=function(){return this._jobHandle.whenComplete()},e.prototype.onRequestStart=function(e){this._state!==n.PENDING?s.deferException(e):this._requestStartCallbacks.push(e)},e.prototype.onResponseReceived=function(e){this._jobHandle.onCompletion(e)},e.prototype.onError=function(e){this._jobHandle.onError(e)},e.prototype.hasRequestStarted=function(){return this._state!==n.PENDING},e.prototype.hasCompleted=function(){return this._state===n.COMPLETED||this._state===n.ERRORED},e.prototype.getState=function(){return this._state},e.prototype.abort=function(){-1===[n.ERRORED,n.COMPLETED].indexOf(this._state)&&(this._jobHandle.abort(),this._state=n.ERRORED,this._abort())},e.prototype._signalRequestStart=function(){this._enforceState(n.PENDING),this._state=n.WAITING,this._requestStartCallbacks.splice(0).forEach(function(e){return s.deferException(e)})},e.prototype._signalTimeout=function(){this._enforceState(n.WAITING,n.IN_PROGRESS),this._state=n.COMPLETED,this._requestStartCallbacks.splice(0),this._responseDeferred.resolve(null)},e.prototype._provideStatusAndHeaders=function(e,t){this._enforceState(n.WAITING),this._statusAndHeaders=e,this._state=n.IN_PROGRESS,this._providePart(t)},e.prototype._providePart=function(e){this._enforceState(n.IN_PROGRESS);var t=!this._parts.length;if(this._parts.push(e),!this._statusAndHeaders)throw new Error("Headers should be set.");this._progressEventDispatcher.dispatch({initial:t,statusCode:this._statusAndHeaders.statusCode,headers:this._statusAndHeaders.headers,part:e})},e.prototype._finalize=function(e){var t=this;if(e)this._enforceState(n.PENDING,n.WAITING,n.IN_PROGRESS),this._state=n.ERRORED,this._requestStartCallbacks.splice(0),this._responseDeferred.reject(e);else{if(this._enforceState(n.IN_PROGRESS),this._state=n.COMPLETED,!this._statusAndHeaders)throw new Error("Headers should be set.");this._responseDeferred.resolve({statusCode:this._statusAndHeaders.statusCode,headers:this._statusAndHeaders.headers,getData:function(){if(!t._parts.length)throw new Error("Unexpected error. No parts.");return t._cachedCompleteParts?t._cachedCompleteParts:t._cachedCompleteParts=t._getDataSoFar()}})}},e.prototype._getDataSoFar=function(){var e=this._parts.length;if(!e)throw new Error("No parts.");return 1===e?this._parts[0]:this._reduceParts(this._parts)},e.prototype._enforceState=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(-1===e.indexOf(this._state))throw new Error("Invalid state. Got "+this._state+" Expecting one of "+e.join(","))},e}();t.LoaderRequest=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="29.0.0",t.buildNumber=1819;var n=r(6),i=r(96),o=r(12),a=r(91);t.ProxyPlayer=a.ProxyPlayer;var s=r(35);t.ProxyPlayerBase=s.ProxyPlayerBase;var u=r(90);t.errors=u.errors;var l=r(88);t.loaderErrors=l.loaderErrors;var c=r(86);t.helpers=c.helpers;var d=r(34);t.BasePlayer=d.BasePlayer;var h=r(32);t.State=h.State;var f=r(31);t.StateManager=f.StateManager;var p=r(38);t.TimeRange=p.TimeRange,function(e){e.EventDispatcher=n.EventDispatcher}(t.eventDispatcher||(t.eventDispatcher={})),function(e){e.LoaderRequest=i.LoaderRequest,e.ResponseState=i.ResponseState}(t.loader||(t.loader={})),function(e){e.noOpLogger=o.noOpLogger,e.consoleLogger=o.consoleLogger,e.prefixLogger=o.prefixLogger,e.cloneLogger=o.cloneLogger}(t.logger||(t.logger={}))}])},function(e,t,r){var n,i,o;window,e.exports=(n=r(4),i=r(2),o=r(1),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports=n},function(e,t){e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),i=r(0),o=new i.WebAudioContext,a=function(){function e(e,t){this._playerListeners=new n.helpers.SCWeakMap,this._playerWithElement=null,this._canActivate=!0,this._provideMediaElementErrorRunCheck={},this._element=document.createElement(e),this._logger=n.logger.prefixLogger(t,"MediaElementManager")}return e.prototype.activate=function(){this._canActivate&&(this._logger.debug("Activating media element."),this._element.load()),this._logger.debug("Activating web audio context."),o.activate()},e.prototype.registerPlayer=function(r,n){var i=this;if(this._playerListeners.has(r))throw new Error("Player already registered.");var o=function(){var t;r.getMediaElement()!==i._element&&(i._playerWithElement&&(i._playerWithElement.getMediaElement()===i._element&&(i._logger.debug("Revoking media element from previous player."),i._playerWithElement.isPlaying()&&i._logger.warn("Revoking media element from a playing player."),i._playerWithElement.revokeMediaElement()),i._playerWithElement=null),i._canActivate=!1,t=i._provideMediaElementErrorRunCheck={},i._logger.debug("Providing media element to new player."),r.provideMediaElement(i._element).catch(function(e){r.isDead()||i._provideMediaElementErrorRunCheck!==t||(i._logger.error("Error occurred providing media element to new player.",e),n(e))}),i._playerWithElement=r)},e=r.onChange.subscribe(function(e){var t=e.playing;t&&o()});this._playerListeners.set(r,e),r.getMediaElement()&&r.revokeMediaElement(),r.isPlaying()&&o()},e.prototype.unregisterPlayer=function(e){var t=this._playerListeners.get(e);t&&(t.remove(),this._playerWithElement===e&&(this._playerWithElement=null,e.getMediaElement()===this._element&&e.revokeMediaElement()),this._playerListeners.delete(e))},e.prototype.getWebAudioContext=function(){return o},e}();t.MediaElementManager=a},function(e,t){e.exports=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(1),p=r(0),g=function(r){function e(e){var t=r.call(this)||this;return t._mediaElementManager=e,t.name="MaestroHTML5",t}return n(e,r),e.errorQualifiesAbort=function(e){return!(e instanceof p.errors.WebAudioInitializeError)},e.prototype.isRenditionSupported=function(e,t){return("http"===e.scProtocol||-1!==["hls","encrypted-hls"].indexOf(e.scProtocol)&&!t.streamUrlExpires)&&p.HTML5Player.isFormatSupported(e.maestroFormat)},e.prototype.buildPlayer=function(e){var t=e.urlAndRendition,r=t.rendition,n=t.timeRetrieved;if(e.streamUrlExpires&&(0<=["hls","encrypted-hls"].indexOf(r.scProtocol)||void 0===n))throw i.notSupportedError;return new a(e,this._mediaElementManager)},e}(i.BaseController);t.HTML5PlayerController=g;var a=function(){function e(e,t){var a=this;this._config=e,this._mediaElementManager=t;var r=e.logger,n=e.playerId,i=e.urlAndRendition,o=e.streamUrlExpires,s=e.reportError,u=e.fadeOnPauseAndPlay,l=e.fadeOnSeek,c=e.releaseControl;this._logger=r;var d=i.rendition,h=i.timeRetrieved;if(o){if(void 0===h)throw new Error("Expecting timeUrlRetrieved to be set.");this._expirationConfig={urlExpires:!0,timeUrlRetrieved:h}}else this._expirationConfig={urlExpires:!1};var f=this._player=new p.HTML5Player({url:i.url,format:d.maestroFormat},{name:n,mediaElement:null,fadeSupportEnabled:u||l,defaultFadeDuration:u?void 0:0,defaultSeekFadeInDuration:l?void 0:0,defaultSeekFadeOutDuration:l?void 0:0,webAudioContext:this._mediaElementManager.getWebAudioContext(),logger:this._logger,registerListeners:function(e){var t=e.onError,r=e.onChange;t.subscribe(function(e){e instanceof p.errors.NetworkError&&a._hasExpired()?(a._logger.info("Releasing control as a network error occurred, and the URL has expired."),c({retry:!0})):(s(e.getCode()),g.errorQualifiesAbort(e)&&c({retry:!1}))}),r.subscribe(function(e){var t=e.dead,r=e.playing,n=e.actuallyPlaying,i=e.seeking,o=e.duration;return t?void c({retry:!1}):o===1/0?(a._logger.info("Releasing control because the duration was Infinity."),void c({retry:!1})):void(a._expirationConfig.urlExpires&&(r||n||i)&&a._checkIfUrlWillExpireBeforeEnd())})}});this._mediaElementManager.registerPlayer(f,function(){return c({retry:!1})})}return e.prototype.getPlayer=function(){return this._player},e.prototype.getUrl=function(){return this._config.urlAndRendition.url},e.prototype._checkIfUrlWillExpireBeforeEnd=function(){var e,t=this._player.getDuration(),r=this._getExpireTime();null!==t&&null!==r&&(e=t-this._player.getPosition(),o.helpers.time.now()+e>r&&(this._logger.info("Releasing control because stream URL would expire before reaching end."),this._config.releaseControl({retry:!0})))},e.prototype._getExpireTime=function(){if(!this._expirationConfig.urlExpires)return null;var e=this._player.getDuration();return null===e?null:this._expirationConfig.timeUrlRetrieved+e+105e3},e.prototype._hasExpired=function(){var e=this._getExpireTime();return null!==e&&e<=o.helpers.time.now()},e}();t.ControlledPlayer=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="23.1.0",t.buildNumber=845;var n=r(4);t.HTML5PlayerController=n.HTML5PlayerController;var i=r(2);t.MediaElementManager=i.MediaElementManager;var o=r(0);t.HTML5Player=o.HTML5Player}]))},function(e,t,r){var n;window,e.exports=(n=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=18)}([function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(0);t.buildMimeTypeFromFormat=function(e,t){void 0===t&&(t={});var r=e.mimeType||t.mimeType;if(!r)return null;var n=e.audioCodec||t.audioCodec,i=e.videoCodec||t.videoCodec,o=s.helpers.compact([n,i]),a=0<o.length?'; codecs="'+o.map(function(e){return e.id}).join(",")+'"':"";return r+a}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(r){function e(e,t){return void 0===e&&(e="An error occurred when initializing web audio."),r.call(this,e,t)||this}return n(e,r),e.prototype.getCode=function(){return"HTML5_PLAYER.WEB_AUDIO_INITIALIZE_ERROR"},e}(i.errors.PlayerError);t.WebAudioInitializeError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(r){function e(e,t){return void 0===e&&(e="An error occurred when activating web audio."),r.call(this,e,t)||this}return n(e,r),e.prototype.getCode=function(){return"HTML5_PLAYER.WEB_AUDIO_ACTIVATION_ERROR"},e}(i.errors.PlayerFatalError);t.WebAudioActivationError=o},function(e,t,r){"use strict";function n(){return"AudioContext"in window&&(o.helpers.browser.isChrome()||s&&48<=s.major||o.helpers.browser.isEdge())}function i(){if(u)return u;if(!n())throw new Error("Web audio is not enabled.");var e=new window.AudioContext;if(!e.destination.maxChannelCount)throw t.WEB_AUDIO_NO_OUTPUT_CHANNELS_ERROR;return u={context:e,suspender:new a.WebAudioContextSuspender(e)}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),a=r(15),s=o.helpers.browser.getFirefoxVersion();t.WEB_AUDIO_ACTIVATION_TIMEOUT=5e3,t.WEB_AUDIO_ACTIVATION_TIMEOUT_ERROR=new Error("Web audio activation timed out."),t.WEB_AUDIO_NO_OUTPUT_CHANNELS_ERROR=new Error("Web audio found no output channels.");var u=null,l=function(){function e(){}return e.prototype.getAudioContextWithSuspender=function(){return n()?i():null},e.prototype.activate=function(){if(!n())return o.helpers.Promise.resolve(void 0);try{var e=i().context;return function(e){return e.state&&e.resume&&"running"!==e.state?o.helpers.promiseWithTimeout(e.resume(),t.WEB_AUDIO_ACTIVATION_TIMEOUT,t.WEB_AUDIO_ACTIVATION_TIMEOUT_ERROR):o.helpers.Promise.resolve()}(e)}catch(e){return o.helpers.Promise.reject(e)}},e}();t.WebAudioContext=l},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),o=function(t){function e(e){return t.call(this,"Web audio found no channels.",e)||this}return n(e,t),e.prototype.getCode=function(){return"HTML5_PLAYER.WEB_AUDIO_INITIALIZE_NO_CHANNELS_ERROR"},e}(i.WebAudioInitializeError);t.WebAudioInitializeNoChannelsError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=function(t){function e(e){return t.call(this,"We timed out when trying to activate web audio.",e)||this}return n(e,t),e.prototype.getCode=function(){return"HTML5_PLAYER.WEB_AUDIO_ACTIVATION_TIMEOUT_ERROR"},e}(i.WebAudioActivationError);t.WebAudioActivationTimeoutError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(r){function e(e){var t=r.call(this,"Unexpected error from media element.",e)||this;return t._error=e,t}return n(e,r),e.prototype.getCode=function(){return"HTML5_PLAYER.UNEXPECTED_MEDIA_ELEMENT_ERROR_"+(this._error&&this._error.code||"UNKNWON")},e}(i.errors.PlayerFatalError);t.MediaElementError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return e.call(this,"An unrecoverable error occurred whilst decoding.")||this}return n(t,e),t.prototype.getCode=function(){return"HTML5_PLAYER.DECODE_ERROR"},t}(i.errors.PlayerFatalError);t.DecodeError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return e.call(this,"An unrecoverable network error occurred.")||this}return n(t,e),t.prototype.getCode=function(){return"HTML5_PLAYER.NETWORK_ERROR"},t}(i.errors.PlayerFatalError);t.NetworkError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(0);t.buildTimeRanges=function(e){for(var t=[],r=e.length,n=0;n<r;n++)t.push({end:1e3*e.end(n),start:1e3*e.start(n)});return i.TimeRange.normalizeRawTimeRanges(t).map(function(e){return new i.TimeRange(e.start,e.end-e.start)})}},function(e,t,r){"use strict";function i(e){try{var t=document.createElement("audio");return!!t.canPlayType(e)}catch(e){return!1}}var o=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var l=r(0),a=r(10),c=r(17),s=r(9),u=r(8),d=r(7),h=r(16),f=r(6),p=r(2),g=r(5),_=r(3),y=r(4),v=r(1),m=l.helpers.deferred.buildDeferred,b=l.helpers.url.getExtension,E=l.helpers.Promise,w=l.helpers.browser,S=l.logger.prefixLogger,P=l.errors.NotSupportedError,x=l.errors.PlayerFatalError,A=new Error("Media element was revoked."),R=[],T=new l.helpers.SCWeakMap,C=null,O=l.helpers.retry.buildExponentialDelayCalculator({jitter:0,timeBase:50}),n=function(n){function e(e){var s=n.call(this,e)||this;s._duration=null,s._stallDetected=!1,s._fadeManagers=null,s._shouldCoverGlitch=!0,s._initialized=!1,s._muted=!1,s._volume=1,s._deferredProvideMediaElementCallback=null,s._playInProgress={inProgress:!1},s._lastStallCheckPos=null,s._stallCheckTimerId=null,s._timeWhenPositionChanged=0,s._endedOverride=!1,s._pauseEventTimer=null,s._positionWhenMediaElementRevoked=0,s._playingWhenMediaElementRevoked=!1,s._provideMediaElementDeferred=null,s._mediaElementAndState=null,s._listeners=[],s._currentSeek=null,s._playDetectionPosition=0,s._playDetectionTimer=null,s._playDetectionTimerNumAttempts=0,s._fadeRate=null,s._seekFadeRate=null,s._webAudioOrchestration=null,s._fadeEndedHandle=null,s._onSeekFadeOutCompleted=null,s._fadeRateAfterSeek=1/0,s._mediaElPlayShouldBeAborted=new l.helpers.SCWeakMap,s._mediaElPaused=new l.helpers.SCWeakMap,s._mediaElPlayTracker=null,s._logger=S(s._logger,"HTML5PlayerBase"),s._playerDependencies=e,s._webAudioContext=e.webAudioContext||(C=C||new y.WebAudioContext);var t=s._webAudioOrchestration=e.fadeSupportEnabled?s._initWebAudio():null;t&&(s._logger.debug("Fading supported."),s._fadeManagers={pausePlay:new c.FadeManager(t.context,t.gainNodes.pausePlay),seek:new c.FadeManager(t.context,t.gainNodes.seek)}),s._handleDurationUpdates();var r=void 0!==e.mediaElement?e.mediaElement:s._createDefaultMediaElement();r&&s.provideMediaElement(r).catch(function(e){return e===A?void s._logger.debug("Initial provideMediaElement() call was aborted."):void s._triggerError(new h.InitializeError(e))});var u=s._fadeManagers;return u&&s.onChange.subscribe(function(e){var t,r,n,i=e.stalled,o=e.seek,a=e.ended;a&&u.seek.getDirection()===c.FadeDirection.UP&&u.seek.isFading()?(s._logger.debug("Completing fade in after seek early because reached end."),u.seek.performFade(1/0),s._notifyFadingForSeek(!1)):(t=s.getSeekState(),r=t&&"COMPLETED"===t.state,n=o&&"COMPLETED"===o.state,(!1===i&&r||n&&!s.isStalled())&&u.seek.getDirection()===c.FadeDirection.DOWN&&(s._logger.debug("Fading in after seek.",s._fadeRateAfterSeek),u.seek.performFade(s._fadeRateAfterSeek,function(){return s._notifyFadingForSeek(!1)})))}),s._logger.info("Checking if the player can play the provided descriptor."),s._canPlayTimer=window.setTimeout(function(){s._canPlay().then(function(e){if(!s.isDead())return e instanceof l.errors.NotSupportedError?(s._logger.info("Player not supported.",e),void s._triggerError(e)):e?(s._logger.info("Player supported."),void s._initialize()):(s._logger.info("Player not supported."),void s._triggerError(new P))}).catch(function(e){s._logger.error("Unexpected error during can play check.",e),s._triggerError(new x("An unexpected error occured during initialization.",e))})},0),s}return o(e,n),e.isFormatSupported=function(e){var t=v.buildMimeTypeFromFormat(e);return!!t&&i(t)},e.prototype.getMediaElement=function(){return this._mediaElementAndState&&this._mediaElementAndState.element},e.prototype.provideMediaElement=function(o){var a=this;if(this._ensureNotDead(),this._mediaElementAndState)throw new Error("Already have a media element.");if(0<=R.indexOf(o))throw new Error("The same media element is currently being used in another player.");if(!this._webAudioOrchestration&&T.has(o))throw new Error("The same media element has been used in another player with fading enabled.");R.push(o);var s=this._provideMediaElementDeferred=m();return this._update(function(){a._logger.debug("provideMediaElement() called.",o),a._initMediaElementLocal(o,!1);var i=a._mediaElementAndState={element:o,state:"INITIALIZING"},e=function(){a._logger.debug("Initializing media element."),a._initMediaElement(o,!0),a._addPausedHandlers(o),a._attachListeners();var e=a._listenToOnce("error",function(){a._provideMediaElementDeferred=null;var e=o.error,t=e?e.code:"unknown";a._logger.error("Error whilst initializing media element.",t),a.revokeMediaElement(),s.reject(new Error("Error when initializing media element. Error: "+t))},{earlyAttach:!0}),t=function(){null===a._getQueuedSeekPosition()&&0<a._positionWhenMediaElementRevoked?(a._logger.debug("Seeking to expected position..."),a._performSeek(a._positionWhenMediaElementRevoked,function(e){return void 0!==e?(a._provideMediaElementDeferred=null,a._logger.error("An error occurred when trying to seek to the expected position."),a.revokeMediaElement(),void s.reject(new Error("An error occurred when trying to restore the position."))):(a._logger.debug("Seeked to expected position."),void r())})):r()},r=function(){a.isPlaying()===a.isActuallyPlaying()&&a._playingWhenMediaElementRevoked?(a._logger.debug("Calling play to match previous state..."),a._mediaElementPlay().catch(function(e){a._provideMediaElementDeferred=null,a._logger.error("An error occurred when trying to play.",e),i===a._mediaElementAndState&&a.revokeMediaElement(),s.reject(new Error("Browser refused play() request on media element."))}),a._listenToOnce("play",function(){a._logger.debug("Play succeeded."),n()},{earlyAttach:!0})):n()},n=function(){return a._mediaElementAndState!==i?void a._triggerError(new x("Media element switched unexpectedly.")):(a._provideMediaElementDeferred=null,e.remove(),s.resolve(void 0),a._mediaElementAndState.state="STABLE",a._logger.debug("Finished putting element in expected state."),a._shouldCoverGlitch=!0,void(null!==a._duration&&a._update(function(){a.isReady()||a._signalReady(),a._handleDeferredPauseAndSeek()})))};a._listenToOnce("emptied",function(){a._logger.debug("Got emptied event from media element."),a._logger.debug("Putting media element in the state that is expected..."),t()},{earlyAttach:!0})};a._initialized?e():a._deferredProvideMediaElementCallback=e}),s.promise},e.prototype.revokeMediaElement=function(){var e=this;if(!this._mediaElementAndState)throw new Error("There is no media element to revoke.");this._deferredProvideMediaElementCallback=null,this._provideMediaElementDeferred&&(this._provideMediaElementDeferred.reject(A),this._provideMediaElementDeferred=null),this._logger.debug("revokeMediaElement() called."),this._detachListeners();var t=this._mediaElementAndState.element,r=R.indexOf(t);0<=r&&R.splice(r,1),this._onSeekFadeOutCompleted=null,this.isDead()||(this._positionWhenMediaElementRevoked=this.getPosition(),this._playingWhenMediaElementRevoked=this.isPlaying()),this._mediaElementAndState=null,this._initMediaElement(t,!1),this._removePausedHandlers(t),this._completeCurrentFade(),this._completeSeekFadeOutAndIn(),this._update(function(){e.isDead()||(!e.isPlaying()&&e.isActuallyPlaying()&&e._notifyPlaying(!1),e._handleStalled())})},e.prototype.getBufferedTimeRanges=function(){return this._mediaElementAndState&&"USABLE"===this._mediaElementAndState.state?a.buildTimeRanges(this._mediaElementAndState.element.buffered):[]},e.prototype.getMaxBufferLength=function(){return null},e.prototype._hasInitialized=function(){return this._initialized},e.prototype._inferFormat=function(e){var t=b(e);switch(t){case"mp3":return{mimeType:"audio/mpeg"};case"opus":return{mimeType:"audio/ogg",audioCodec:{id:"opus"}};case"mp4":return{mimeType:"video/mp4"};case"m4a":return{mimeType:"audio/mp4"};case"m3u8":return{mimeType:"application/x-mpegURL"};default:return{}}},e.prototype._canPlayType=i,e.prototype._initialize=function(){var t=this;this._initialized=!0,this._listenTo("error",function(){if("INITIALIZING"!==t._mediaElementAndState.state){var e=t._mediaElementAndState.element.error;switch(e&&e.code){case 2:t._triggerError(new s.NetworkError);break;case 3:t._triggerError(new u.DecodeError);break;default:t._logger.error("Unexpected error from media element.",e&&e.code,e&&e.message),t._triggerError(new d.MediaElementError(e))}}else t._logger.debug("An error occurred, but the media element is initializing, so ignoring...")},{earlyAttach:!0}),this._listenTo("play",function(){t._logger.debug("Media element play event."),t.isPlaying()||t.isActuallyPlaying()||!t._mediaElementAndState||t._isMediaElementPaused(t._mediaElementAndState.element)||(t._logger.debug("Calling play() because something external called play() on media element."),t.play())}),this._listenTo("playing",function(){t._logger.debug("Media element playing event."),t._mediaElementAndState&&!t._isMediaElementPaused(t._mediaElementAndState.element)?t._handlePlayingEvent():t._logger.debug("Ignoring playing event because media element is reporting it is paused.")}),this._listenTo("timeupdate",function(){return t._determineIfPlaying()}),this._listenTo("pause",function(){t._logger.debug("Media element pause event."),t._mediaElementAndState&&t._isMediaElementPaused(t._mediaElementAndState.element)?t._handlePauseEvent():t._logger.debug("Ignoring pause event because media element is reporting it is not paused.")}),this._listenTo("ended",function(){t._logger.debug("Media element ended event."),t._mediaElementAndState&&t._mediaElementAndState.element.ended?t._handleEndedEvent():t._logger.debug("Ignoring ended event because media element is reporting it is not ended.")}),this._listenTo("stalled",function(){t._logger.debug("Media element stalled event."),t._checkIfStalled()}),this._listenTo("volumechange",function(){t._mediaElementAndState&&t._notifyVolumeChangeFromMediaEl(t._mediaElementAndState.element)}),this._stallCheckTimerId=window.setInterval(function(){return t._checkIfStalled()},400),this._deferredProvideMediaElementCallback&&this._deferredProvideMediaElementCallback()},e.prototype._handleDurationChange=function(){var e=this,t=this._duration;null!==t&&this._update(function(){e._provideDuration(t),e._mediaElementAndState&&"STABLE"===e._mediaElementAndState.state&&(e._signalReady(),e._handleDeferredPauseAndSeek())})},e.prototype._createDefaultMediaElement=function(){return document.createElement(this._playerDependencies.mediaElementType||"audio")},e.prototype._handlePauseEvent=function(){var e=this;if(!this._mediaElementAndState)throw new Error("Media element should exist.");var t=this._mediaElementAndState.element;this.isActuallyPlaying()&&this._update(function(){t.ended||(e._notifyNotStalled(),e._completeCurrentFade(),e._completeSeekFadeOutAndIn(),e._notifyPlaying(!1))})},e.prototype._handlePlayingEvent=function(){var e=this,t=this._duration;if(null===t)throw new Error("Expecting duration to exist.");var r=this._getTruePosition();return t<=r?void this._logger.warn("Got a media element playing event and the positon was >= the duration.",r,t):this.isEnded()||this._shouldBeEnded()?void this._logger.warn("Got a media element playing event when the player is/should be ended."):void this._update(function(){e._notifyNotStalled(),e._determineIfPlaying(),e.isActuallyPlaying()||(e._playDetectionTimerNumAttempts=0,e._playDetectionTimer||(e._playDetectionTimer=window.setInterval(function(){return e._determineIfPlaying()},10)))})},e.prototype._handleEndedEvent=function(){return null!==this._getQueuedSeekPosition()?void this._logger.warn("Got a media element ended event but ignoring because a seek is in progress."):void this._update()},e.prototype._shouldBeEnded=function(){return this._endedOverride||this._mediaElementReportingEnded()},e.prototype._mediaElementReportingEnded=function(){return!!(this._mediaElementAndState&&this._mediaElementAndState.element.ended&&this._mediaElementAndState.element.paused)},e.prototype._handleDurationUpdates=function(){var e=this;this._listenToOnce("loadedmetadata",function(){return e._updateDurationFromMediaElement()},{reattach:!0,earlyAttach:!0}),this._listenTo("durationchange",function(){return e._updateDurationFromMediaElement()})},e.prototype._updateDurationFromMediaElement=function(){var e=this._mediaElementAndState;e&&(this._duration=1e3*e.element.duration,this._handleDurationChange())},e.prototype._handlePlayPauseChange=function(e,t){var r=this,n=t.fadeRate;this._fadeRate=n||null;var i,o=function(){r._mediaElementAndState&&"USABLE"===r._mediaElementAndState.state&&r._callMediaElementPause(r._mediaElementAndState.element),r._notifyFading(!1),r._completeSeekFadeOutAndIn(),r._notifyPlaying(!1)};this.isEnded()?e?this._notifyPlaying(!0):o():this._mediaElementAndState&&"USABLE"===this._mediaElementAndState.state&&(i=this._playInProgress.inProgress||!this._isMediaElementPaused(this._mediaElementAndState.element),e&&!i?(this._fadeManagers&&this._fadeManagers.pausePlay.performFade(-1/0),this._playDetectionPosition=this._getTruePosition(),this._play(function(e){return r._notifyPlayRejection(e)})):!e&&i?this._update(function(){r._fadeManagers&&r._fadeManagers.pausePlay.getDirection()===c.FadeDirection.UP?(r._notifyFading(!0),r._fadeManagers.pausePlay.performFade(n||-1/0,o)):o()}):e&&i?this._update(function(){r._fadeManagers&&r._fadeManagers.pausePlay.getDirection()===c.FadeDirection.DOWN&&r._fadeManagers.pausePlay.performFade(n||1/0,function(){return r._notifyFading(!1)}),r._notifyPlaying(!0)}):this._notifyPlaying(e))},e.prototype._handleVolumeChange=function(e,t){var r;this._mediaElementAndState?((r=this._mediaElementAndState.element).muted=t,r.volume=e,this._notifyVolumeChangeFromMediaEl(r)):(this._muted=t,this._volume=e,this._notifyVolumeChange(e,t))},e.prototype._handleSeekChange=function(t,e){var r=this,n=e.fadeRate;this._seekFadeRate=n,this._fadeRateAfterSeek=n.afterSeek||1/0;var i,o,a,s=this._mediaElementAndState;s&&"USABLE"===s.state&&(this._onSeekFadeOutCompleted=function(){r._onSeekFadeOutCompleted=null,o&&o.remove(),i&&i.seek.getDirection()===c.FadeDirection.DOWN&&(r._logger.debug("Fade out for seek completed.",t,n),i.seek.performFade(-1/0),r._notifyFadingForSeek(!1));var e=r._mediaElementReportingEnded();r._endedOverride=!1,r._performSeek(t,function(e){return void 0!==e?void r._triggerError(new l.errors.PlayerFatalError("An error occurred when trying to seek.",e)):(t===r._duration&&(r._endedOverride=!0),void r._update(function(){r.isActuallyPlaying()&&r._assumeStalled(),r._signalSeekComplete(),i&&(!r.isActuallyPlaying()||r._fadeRateAfterSeek===1/0||r.isEnded()?i.seek.performFade(1/0):r._notifyFadingForSeek(!0))}))}),e&&r.isPlaying()&&r._play(function(e){r._triggerError(new l.errors.PlayerFatalError("Error when trying to play after seek from end.",e))})},this._fadeEndedHandle&&(this._fadeEndedHandle.remove(),this._fadeEndedHandle=null),i=this._fadeManagers,o=null,a=function(){r._onSeekFadeOutCompleted&&r._onSeekFadeOutCompleted()},this._update(function(){i&&(n.beforeSeek||n.afterSeek)?(r._logger.debug("Fading out ready for seek.",t,n),(i.seek.getDirection()===c.FadeDirection.UP||i.seek.isFading())&&r.isActuallyPlaying()&&n.beforeSeek&&!r._mediaElementReportingEnded()?(r._notifyFadingForSeek(!0),o=r._fadeEndedHandle=r._listenToOnce("ended",a),i.seek.performFade(n.beforeSeek||-1/0,a)):(i.seek.performFade(-1/0),a())):a()}))},e.prototype._performSeek=function(n,i){var o=this,e=this._mediaElementAndState;if(!e)throw new Error("Media element does not exist.");var t=this._currentSeek;t&&(this._currentSeek=null,t.abort());var a,s,u=e.element;u.currentTime!==n/1e3?(a=0,(s=function(){var e=[];try{u.currentTime=n/1e3}catch(e){o._logger.warn("Error when trying to seek.",e,n)}o._playDetectionPosition=1e3*u.currentTime;var t=window.setTimeout(function(){o._logger.warn("Seek attempt failed. Retrying...",n,a),r(),s()},O(++a));e.push(o._listenToOnce("seeking",function(){window.clearTimeout(t)},{earlyAttach:!0})),e.push(o._listenToOnce("seeked",function(){var e=1e3*u.currentTime;Math.abs(e-n)<=100?(o._currentSeek&&(o._currentSeek.abort(),o._currentSeek=null),i()):(o._logger.warn("Seek attempt failed. Incorect position. Retrying...",e,n),r(),s())},{earlyAttach:!0}));var r=function(){e.forEach(function(e){return e.remove()}),window.clearTimeout(t)};o._currentSeek={abort:r}})()):i()},e.prototype._getPosition=function(){var e=null!==this._duration?this._duration:1/0;if(!this._mediaElementAndState||"USABLE"!==this._mediaElementAndState.state)return this._positionWhenMediaElementRevoked;this._determineIfPlaying();var t=Math.min(this._getTruePosition(),e);return this._shouldBeEnded()?e:t},e.prototype._getTruePosition=function(){if(!this._mediaElementAndState||"USABLE"!==this._mediaElementAndState.state)throw new Error("Media element does not exist or is in invalid state.");var e=this._mediaElementAndState.element;return 1e3*e.currentTime},e.prototype._kill=function(){window.clearTimeout(this._canPlayTimer),this._playDetectionTimer&&window.clearInterval(this._playDetectionTimer),this._mediaElementAndState&&this.revokeMediaElement(),this._stallCheckTimerId&&window.clearInterval(this._stallCheckTimerId),this._webAudioOrchestration&&this._webAudioOrchestration.gainNodes.glitchCoverup.disconnect(this._webAudioOrchestration.context.destination),this._listeners=[]},e.prototype._listenToOnce=function(e,t,r){void 0===r&&(r={});var n=r.reattach,i=r.earlyAttach;void 0===n&&(n=!1),void 0===i&&(i=!1);var o=this._listenTo(e,function(e){o.remove(),t(e)},{reattach:n,earlyAttach:i});return o},e.prototype._listenTo=function(r,n,e){var i=this;void 0===e&&(e={});var t=e.reattach,o=e.earlyAttach;void 0===t&&(t=!0),void 0===o&&(o=!1);var a=function(e){if(s.attachedToElement)switch(r){case"play":var t=i._mediaElPlayShouldBeAborted.get(s.attachedToElement);if(i._mediaElPlayShouldBeAborted.delete(s.attachedToElement),t){i._logger.warn("Calling pause() on media element because the play request should have been rejected."),s.attachedToElement.pause();break}default:n(e)}else i._logger.warn("Got media element event after handler was removed. Ignoring.",e)},s={attachedToElement:null,handler:a,eventType:r,once:!1,reattach:t,earlyAttach:o};if(this._listeners.push(s),!this._mediaElementAndState||"USABLE"!==this._mediaElementAndState.state&&!o)return{remove:function(){var e=i._listeners.indexOf(s);0<=e&&i._listeners.splice(e,1)}};var u=this._mediaElementAndState.element;return u.addEventListener(r,a,!1),s.attachedToElement=u,{remove:function(){var e=i._listeners.indexOf(s);0<=e&&(i._listeners.splice(e,1),s.attachedToElement=null,u.removeEventListener(r,a,!1))}}},e.prototype._notifyNotStalled=function(){this._stallDetected=!1,this._lastStallCheckPos=null,this._handleStalled()},e.prototype._assumeStalled=function(){this._mediaElementAndState&&"USABLE"===this._mediaElementAndState.state&&(this._lastStallCheckPos=this._mediaElementAndState.element.currentTime,this._timeWhenPositionChanged=0,this._stallDetected=!0,this._handleStalled())},e.prototype._initMediaElement=function(e,t){this._initMediaElementLocal(e,t)},e.prototype._callMediaElementPlay=function(e){var t=this;w.isEdge()&&this._mediaElPlayShouldBeAborted.set(e,!1);var r=this._mediaElPaused.get(e);r&&(r.paused=!1);var n=this._mediaElPlayTracker={},i=e.play();return r&&i&&i.catch&&i.catch(function(){n===t._mediaElPlayTracker&&(r.paused=!0)}),i},e.prototype._callMediaElementPause=function(e){this._playInProgress.inProgress=!1,w.isEdge()&&this._mediaElPlayShouldBeAborted.has(e)&&this._mediaElPlayShouldBeAborted.set(e,!0);var t=this._mediaElPaused.get(e);t&&(t.paused=!0),e.pause()},e.prototype._isMediaElementPaused=function(e){var t=this._mediaElPaused.get(e);return!t||t.paused},e.prototype._completeCurrentFade=function(){var e=this._fadeManagers;e&&(e.pausePlay.performFade(this.isPlaying()?1/0:-1/0),this.isDead()||this._notifyFading(!1))},e.prototype._completeSeekFadeOutAndIn=function(){var e=this,t=this._fadeManagers;t&&this._update(function(){t.seek.performFade(1/0),e.isDead()||(e._notifyFadingForSeek(!1),e._onSeekFadeOutCompleted&&e._onSeekFadeOutCompleted())})},e.prototype._determineIfPlaying=function(){var e=this;this._playDetectionTimer&&(!this.isPlaying()||200<=++this._playDetectionTimerNumAttempts)&&(window.clearInterval(this._playDetectionTimer),this._playDetectionTimer=null),this._update(function(){e._mediaElementAndState&&"USABLE"===e._mediaElementAndState.state&&(e.isDead()||!e.isReady()||!e.isPlaying()||e.isActuallyPlaying()||e._isMediaElementPaused(e._mediaElementAndState.element)||e._getTruePosition()===e._playDetectionPosition||(e._logger.debug("Detected that playback has started."),e._playDetectionTimer&&(window.clearInterval(e._playDetectionTimer),e._playDetectionTimer=null),e._notifyPlaying(!0),e._fadeManagers&&(e._notifyFading(!0),e._fadeManagers.pausePlay.performFade(e._fadeRate||1/0,function(){return e._notifyFading(!1)}))))})},e.prototype._initMediaElementLocal=function(e,t){var r,n,i,o;e.setAttribute("msAudioCategory","BackgroundCapableMedia"),e.mozAudioChannelType="content",e.removeAttribute("src"),function(e){e.load()}(e),this._activateWebAudio(),this._pauseEventTimer&&(this._logger.debug("Clearing pause event timer."),window.clearTimeout(this._pauseEventTimer),this._pauseEventTimer=null),this._webAudioOrchestration&&this._webAudioOrchestration.mediaElementSource&&(this._logger.debug("Disconnecting media element from gain node."),this._webAudioOrchestration.mediaElementSource.disconnect(this._webAudioOrchestration.gainNodes.pausePlay),this._webAudioOrchestration.mediaElementSource=void 0),this._currentSeek&&(this._logger.debug("Aborting seek attempt."),this._currentSeek.abort(),this._currentSeek=null),t&&(this._webAudioOrchestration&&(this._logger.debug("Adding crossorigin attribute to media element because fading enabled."),e.setAttribute("crossorigin","anonymous")),r=this._getUrlForMediaElement(),this._logger.debug("Setting media element src.",r),e.src=r,e.volume=this._volume,e.muted=this._muted,this._webAudioOrchestration&&this._fadeManagers&&(this._logger.debug("Creating media element source node..."),(n=T.get(e))?this._logger.debug("Reusing media element source node."):(n=this._webAudioOrchestration.context.createMediaElementSource(e),T.set(e,n)),(this._webAudioOrchestration.mediaElementSource=n).connect(this._webAudioOrchestration.gainNodes.pausePlay),this._logger.debug("Created media element source node."),this._shouldCoverGlitch&&(i=this._webAudioOrchestration.context.currentTime,(o=this._webAudioOrchestration.gainNodes.glitchCoverup).gain.setValueAtTime(0,i),o.gain.setValueAtTime(1,i+.1),this._shouldCoverGlitch=!1))),e.playbackRate=1,e.setAttribute("preload","metadata"),this._callMediaElementPause(e),e.load()},e.prototype._addPausedHandlers=function(e){var t={removeListeners:function(){e.removeEventListener("play",r),e.removeEventListener("playing",r),e.removeEventListener("pause",r),e.removeEventListener("ended",r)},paused:!1},r=function(){t.paused=e.paused};r(),e.addEventListener("play",r),e.addEventListener("playing",r),e.addEventListener("pause",r),e.addEventListener("ended",r),this._mediaElPaused.set(e,t)},e.prototype._removePausedHandlers=function(e){var t=this._mediaElPaused.get(e);t&&t.removeListeners(),this._mediaElPaused.delete(e)},e.prototype._checkIfStalled=function(){var e,t,r;this._mediaElementAndState&&"USABLE"===this._mediaElementAndState.state&&this.isActuallyPlaying()&&(e=this._mediaElementAndState.element,t=e.currentTime,r=l.helpers.time.now(),t!==this._lastStallCheckPos&&(this._timeWhenPositionChanged=r),this._stallDetected=e.readyState<=2||this._timeWhenPositionChanged<=r-500,this._lastStallCheckPos=t,this._handleStalled())},e.prototype._handleStalled=function(){this._shouldBeEnded()&&null===this._getQueuedSeekPosition()?this.isEnded()||(this._logger.debug("Updating because stalled near end."),this._update()):this._notifyStalled(this._stallDetected||!this._mediaElementAndState||"USABLE"!==this._mediaElementAndState.state)},e.prototype._play=function(t){var r=this,e=this._activateWebAudio(),n={inProgress:!0};this._playInProgress=n,this._mediaElementPlay().then(function(){n.inProgress=!1,e.catch(function(e){r._logger.error("Error activating web audio.",e),e===y.WEB_AUDIO_ACTIVATION_TIMEOUT_ERROR?r._triggerError(new f.WebAudioActivationTimeoutError):r._triggerError(new _.WebAudioActivationError)})}).catch(function(e){return r._playInProgress!==n?void r._logger.debug("Ignoring play error because paused since.",e):(n.inProgress=!1,void(t&&t(e)))})},e.prototype._mediaElementPlay=function(){var n=this;if(!this._mediaElementAndState)throw new Error("Media element doesn't exist.");if(this._mediaElementReportingEnded())return this._logger.debug("Not calling play() because we are at the end. It will be called after a seek."),E.resolve();var e=this._mediaElementAndState.element,i=this._callMediaElementPlay(e);return new E(function(t,r){i?(i=i.then(function(){return t()})).catch&&(i=i.catch(function(e){"AbortError"===e.name?(n._logger.debug("Media element play() promise rejected with AbortError."),t()):r(e)})):t()})},e.prototype._notifyVolumeChangeFromMediaEl=function(e){this._volume=e.volume,this._muted=e.muted,this._notifyVolumeChange(e.volume,e.muted)},e.prototype._initWebAudio=function(){try{var e=this._webAudioContext.getAudioContextWithSuspender();if(!e)return this._logger.debug("WebAudio not supported/enabled."),null;this._logger.debug("WebAudio supported.");var t=e.context,r=e.suspender;r.watchPlayer(this);var n=t.createGain(),i=t.createGain(),o=t.createGain();return n.connect(i),i.connect(o),o.connect(t.destination),{context:t,suspender:r,gainNodes:{glitchCoverup:o,pausePlay:n,seek:i}}}catch(e){return e===y.WEB_AUDIO_NO_OUTPUT_CHANNELS_ERROR?this._triggerError(new g.WebAudioInitializeNoChannelsError(e)):this._triggerError(new p.WebAudioInitializeError(e)),this._logger.error("Failed initializing web audio.",e),null}},e.prototype._activateWebAudio=function(){return this._webAudioOrchestration?this._webAudioContext.activate():E.resolve(void 0)},e.prototype._handleDeferredPauseAndSeek=function(){var r=this;if(!this._mediaElementAndState||"STABLE"!==this._mediaElementAndState.state)throw new Error("Media element must be in the STABLE state.");this._logger.debug("Handling deferred pause and seek..."),this._mediaElementAndState.state="USABLE",this._attachListeners(),this._update(function(){r._handleStalled();var e,t=r._getQueuedSeekPosition();null!==t&&(e=r._seekFadeRate?r._seekFadeRate.afterSeek:void 0,r._handleSeekChange(t,{fadeRate:{afterSeek:e}})),r.isPlaying()!==r.isActuallyPlaying()&&r._handlePlayPauseChange(r.isPlaying(),{fadeRate:r._fadeRate||void 0})})},e.prototype._detachListeners=function(){if(!this._mediaElementAndState)throw new Error("Media element doesn't exist.");var t=this._mediaElementAndState.element;this._listeners.forEach(function(e){e.attachedToElement&&(e.attachedToElement=null,t.removeEventListener(e.eventType,e.handler,!1))}),this._listeners=this._listeners.filter(function(e){return e.reattach})},e.prototype._attachListeners=function(){if(!this._mediaElementAndState)throw new Error("Media element doesn't exist.");this._logger.debug("Attaching listeners...");var e=this._mediaElementAndState,t=e.element,r=e.state;this._listeners.forEach(function(e){e.attachedToElement||!e.reattach||"USABLE"!==r&&!e.earlyAttach||(t.addEventListener(e.eventType,e.handler,!1),e.attachedToElement=t)}),this._logger.debug("Attached listeners.")},e}(l.BasePlayer);t.HTML5PlayerBase=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(10),i=r(1);!function(e){!function(e){e.buildTimeRanges=n.buildTimeRanges}(e.timeRanges||(e.timeRanges={})),function(e){e.buildMimeTypeFromFormat=i.buildMimeTypeFromFormat}(e.mimeType||(e.mimeType={}))}(t.helpers||(t.helpers={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8),i=r(9),o=r(7),a=r(2),s=r(5),u=r(3),l=r(6);!function(e){e.DecodeError=n.DecodeError,e.NetworkError=i.NetworkError,e.MediaElementError=o.MediaElementError,e.WebAudioInitializeError=a.WebAudioInitializeError,e.WebAudioInitializeNoChannelsError=s.WebAudioInitializeNoChannelsError,e.WebAudioActivationError=u.WebAudioActivationError,e.WebAudioActivationTimeoutError=l.WebAudioActivationTimeoutError}(t.errors||(t.errors={}))},function(e,t,r){"use strict";var i=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(11),a=r(1),s=n.helpers.Promise,u=function(n){function e(e,t){var r=n.call(this,t)||this;return r._descriptor=e,r._mimeType=e.format.mimeType||a.buildMimeTypeFromFormat(e.format,r._inferFormat(e.url)),r}return i(e,n),e.prototype._getUrlForMediaElement=function(){return this._descriptor.url},e.prototype._canPlay=function(){return this._mimeType&&this._canPlayType(this._mimeType)?s.resolve(!0):s.resolve(!1)},e}(o.HTML5PlayerBase);t.HTML5Player=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){void 0===t&&(t=2e4),this._audioContext=e,this._idleTime=t,this._players=[],this._prevPlayingCount=0,this._playingCount=0,this._timerId=null,this._suspendTimerId=null,this._suspendSupported="function"==typeof e.suspend}return e.prototype.watchPlayer=function(i){var o=this;!this._suspendSupported||i.isDead()||0<=this._players.indexOf(i)||(i.onChange.subscribe(function(e){var t,r=e.dead,n=e.playing;void 0!==n&&o._handleCountChange(n),r&&0<=(t=o._players.indexOf(i))&&(o._players.splice(t,1),!o._players.length&&o._suspendTimerId&&(window.clearInterval(o._suspendTimerId),o._suspendTimerId=null))}),this._players.length||(this._suspendTimerId=window.setInterval(function(){0===o._playingCount&&null===o._timerId&&"suspended"!==o._audioContext.state&&o._scheduleSuspend(5e3)},5e3)),this._players.push(i),i.isPlaying()&&this._handleCountChange(!0))},e.prototype._handleCountChange=function(e){e?this._playingCount++:this._playingCount--,this._playingCount!==this._prevPlayingCount&&(this._prevPlayingCount=this._playingCount,0===this._playingCount?this._scheduleSuspend(this._idleTime):1===this._playingCount&&this._abortSuspend())},e.prototype._scheduleSuspend=function(e){var t=this;this._timerId=window.setTimeout(function(){t._timerId=null,t._audioContext.suspend()},e)},e.prototype._abortSuspend=function(){this._timerId&&(window.clearTimeout(this._timerId),this._timerId=null)},e}();t.WebAudioContextSuspender=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(t){function e(e){return t.call(this,"An error occurred when initializing the media element.",e)||this}return n(e,t),e.prototype.getCode=function(){return"HTML5_PLAYER.INITIALIZE_ERROR"},e}(i.errors.PlayerFatalError);t.InitializeError=o},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"}(n=t.FadeDirection||(t.FadeDirection={}));var i=function(){function e(e,t){this._context=e,this._gain=t,this._currentFade={startTime:0,startValue:1,rate:0},this._fadeEndTimer=null}return e.prototype.isFading=function(){return!!this._fadeEndTimer},e.prototype.getDirection=function(){var e=this._currentFade,t=e.rate,r=e.startValue;return 0===t?0===r?n.DOWN:n.UP:t<0?n.DOWN:n.UP},e.prototype.performFade=function(e,t){var r=this;if(0===e)throw new Error("Rate cannot be 0.");this._fadeEndTimer&&window.clearTimeout(this._fadeEndTimer);var n,i,o,a,s,u=this._context.currentTime,l=this._gain;e===1/0||e===-1/0?(l.gain.cancelScheduledValues(u),n=e===1/0?1:0,l.gain.setValueAtTime(n,u),this._currentFade={startTime:u,startValue:n,rate:0},this._fadeEndTimer=null,t&&t()):(i=this._currentFade,o=function(e,t,r){return Math.min(t,Math.max(e,r))}(0,1,i.startValue+1e3*i.rate*(u-i.startTime)),a=(0<e?1-o:o)*(1/Math.abs(1e3*e)),s=u+a,this._currentFade={startTime:u,rate:e,startValue:o},l.gain.cancelScheduledValues(u),l.gain.setValueAtTime(o,u),l.gain.linearRampToValueAtTime(0<e?1:0,s),this._fadeEndTimer=window.setTimeout(function(){r._fadeEndTimer=null,t&&t()},1e3*a))},e}();t.FadeManager=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="29.0.0",t.buildNumber=1819;var n=r(11);t.HTML5PlayerBase=n.HTML5PlayerBase;var i=r(14);t.HTML5Player=i.HTML5Player;var o=r(13);t.errors=o.errors;var a=r(12);t.helpers=a.helpers;var s=r(4);t.WebAudioContext=s.WebAudioContext}]))},function(e,t,r){var n,i,o,a,s,u;window,e.exports=(n=r(6),i=r(10),o=r(11),a=r(2),s=r(3),u=r(1),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t){e.exports=n},function(e,t){e.exports=i},function(e,t){e.exports=o},function(e,t){e.exports=a},function(e,t){e.exports=s},function(e,t){e.exports=u},function(e,t,r){"use strict";function g(e){return e.match(s)[0]}var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),_=r(4),y=r(3),o=r(2),a=r(1),v=r(0),s=/^[^\?#]*/,u=function(r){function e(e){var t=r.call(this)||this;return t._mediaElementManager=e,t.name="MaestroHLSMSE",t}return n(e,r),e.prototype.isRenditionSupported=function(e){return-1!==["hls","encrypted-hls"].indexOf(e.scProtocol)&&v.HLSMSEPlayer.isFormatSupported(e.maestroSegmentFormat||{})},e.prototype.buildPlayer=function(e){return new l(e,this._mediaElementManager)},e}(i.BaseController);t.HLSMSEPlayerController=u;var l=function(){function e(e,t){var n=this;this._config=e,this._mediaElementManager=t,this._urlRefreshRetrieveHandle=null;var i=e.logger,r=e.playerId,o=e.urlAndRendition,a=e.streamUrlExpires,s=e.reportError,u=e.fadeOnPauseAndPlay,l=e.fadeOnSeek,c=e.releaseControl,d=e.getNewUrl;this._currentUrl=o.url;var h=o.rendition.maestroSegmentFormat||{},f=this._buildPlaylist(o.url),p=this._player=new v.HLSMSEPlayer({playlist:f,segmentFormat:h},{name:r,mediaElement:null,fadeSupportEnabled:u||l,defaultFadeDuration:u?void 0:0,defaultSeekFadeInDuration:l?void 0:0,defaultSeekFadeOutDuration:l?void 0:0,logger:i,registerListeners:function(e){var t=e.onError,r=e.onChange;t.subscribe(function(e){if(a){if(e instanceof y.errors.URLUpdateError)return i.error("URL refresh failed for some reason.",e),void c({retry:!0});if(n._isErrorWhichShouldTriggerURLRefresh(e)){if(n._urlRefreshRetrieveHandle)return void i.debug("Got a 403 status code, but URL refresh already in progress.");i.info("Got a 403 status code. Peforming a URL refresh...");var t=n._urlRefreshRetrieveHandle=d();return void t.whenComplete().then(function(e){n._urlRefreshRetrieveHandle=null,e?g(e)!==g(n._currentUrl)?(i.warn("Got a new URL but the rendition did not match the original."),c({retry:!1})):(n._currentUrl=e,i.info("Got a new URL. Updating..."),p.switchPlaylist(n._buildPlaylist(e))):(i.warn("Could not get a new URL."),c({retry:!1}))}).catch(function(e){i.error("Unexpected error when trying to retrieve a new URL.",e),c({retry:!1})})}}s(e.getCode()),_.HTML5PlayerController.errorQualifiesAbort(e)&&c({retry:!1})}),r.subscribe(function(e){var t=e.dead;t&&(n._urlRefreshRetrieveHandle&&(n._urlRefreshRetrieveHandle.abort(),n._urlRefreshRetrieveHandle=null),c({retry:!1}))})}});this._mediaElementManager.registerPlayer(p,function(){return c({retry:!1})})}return e.prototype.getPlayer=function(){return this._player},e.prototype.getUrl=function(){return this._currentUrl},e.prototype._buildPlaylist=function(e){var t=new o.ArrayBufferLoader({fetchEnabled:this._config.fetchEnabled});return new a.PlaylistHLS({url:e,playlistLoader:o.stringLoader,segmentLoader:t,keyLoader:t,segmentFormat:this._config.urlAndRendition.rendition.maestroSegmentFormat||{},logger:this._config.logger})},e.prototype._isErrorWhichShouldTriggerURLRefresh=function(e){if(e instanceof v.errors.RetrievalError){var t=e.getCause();if(t instanceof v.retrievalErrors.UnacceptableResponseStatusCodeError)return 403===t.getStatusCode()}return!1},e}();t.ControlledPlayer=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="23.1.0",t.buildNumber=845;var n=r(6);t.HLSMSEPlayerController=n.HLSMSEPlayerController;var i=r(0);t.HLSMSEPlayer=i.HLSMSEPlayer}]))},function(e,t,r){var n,i,o;window,e.exports=(n=r(2),i=r(4),o=r(7),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}([function(e,t){e.exports=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return"HLS_MSE_PLAYER.PLAYLIST_UPDATE_ERROR"},t}(i.errors.PlayerFatalError);t.PlaylistUpdateError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return e.call(this,"A transmuxer could not be found.")||this}return n(t,e),t.prototype.getCode=function(){return"HLS_MSE_PLAYER.NO_TRANSMUXER_ERROR"},t}(i.errors.NotSupportedError);t.NoTransmuxerError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(r){function e(e){var t=r.call(this,"An error occurred when trying to retrieve a playlist/segment/key.",e)||this;return t._internalRetrievalError=e,t}return n(e,r),e.prototype.getCode=function(){return"HLS_MSE_PLAYER.RETRIEVAL_ERROR."+this._internalRetrievalError.getCode()},e}(i.errors.PlayerError);t.RetrievalError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(t){function e(e){return t.call(this,"An error occurred trying to initialize the buffer.",e)||this}return n(e,t),e.prototype.getCode=function(){return"HLS_MSE_PLAYER.INITIALIZE_ERROR"},e}(i.errors.PlayerFatalError);t.InitializeError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(t){function e(e){return t.call(this,"An error occurred trying to append to the buffer.",e)||this}return n(e,t),e.prototype.getCode=function(){return"HLS_MSE_PLAYER.APPEND_ERROR"},e}(i.errors.PlayerError);t.AppendError=o},function(e,t){e.exports=i},function(e,t){e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(5),i=r(4),o=r(1),a=r(2),s=r(3);!function(e){e.AppendError=n.AppendError,e.InitializeError=i.InitializeError,e.PlaylistUpdateError=o.PlaylistUpdateError,e.NoTransmuxerError=a.NoTransmuxerError,e.RetrievalError=s.RetrievalError}(t.errors||(t.errors={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=r(0),a=d.eventDispatcher.EventDispatcher,s=d.logger.prefixLogger,u=d.logger.noOpLogger,n=function(){function e(e,t,r,n,i){void 0===i&&(i=u);var o=this;this._onAppendQueued=new a,this._onAppendEnd=new a,this._needsInitData=!0,this._updateTimerId=null,this._gcTimerId=null,this._waitingForData=!1,this._started=!1,this._error=null,this._currentRetrieveHandle=null,this._logger=s(i,"SimpleMSE"),this.onAppendQueued=this._onAppendQueued.getHandle(),this.onAppendEnd=this._onAppendEnd.getHandle(),this._mse=e,this._getNextSegmentData=t,this._getPosition=r,this._onError=n,e.whenInitialized().then(function(){!o._error&&o._started&&(o._logger.debug("MSE initialized. Preparing to update."),o._prepareUpdate())}).catch(function(e){o._error||(o._logger.error("Error when waiting for MSE to initialize.",e),o._handleError(e||new Error("Error waiting for MSE to initialize.")))})}return e.prototype.start=function(){if(this._checkNotErrored(),this._started)throw new Error("Already started.");this._logger.debug("start() called."),this._scheduleGC(),this._started=!0,this._prepareUpdate()},e.prototype.kill=function(){this._error||(this._logger.debug("kill() called."),this._error=new Error("Killed."),this._clearTimers(),this._logger.debug("Killed."))},e.prototype.waitingForSegmentData=function(){return this._checkNotErrored(),this._waitingForData},e.prototype.provideNextSegmentData=function(e){if(this._checkNotErrored(),!this._waitingForData)throw new Error("Not waiting for data.");this._logger.debug("Segment data provided."),this._waitingForData=!1,this._update(e)},e.prototype._prepareUpdate=function(){var e,t;this._updateTimerId||(e=this._mse).hasInitialized()&&(d.TimeRange.getCoverage(e.getBuffered()).end<=this._getPosition()+15e3?(this._logger.debug("Requesting next segment data."),(t=this._getNextSegmentData())?(this._logger.debug("Got segment data."),this._update(t)):(this._logger.debug("Did not get any data."),this._waitingForData=!0)):this._scheduleUpdate())},e.prototype._gc=function(){var e,t,r,n=this,i=this._mse;i.hasInitialized()?(e=d.TimeRange.getCoverage(i.getBuffered()),t=this._getPosition()-5e3,e.start<t?(r=new d.TimeRange(e.start,t-e.start),this._logger.debug("Removing media that has been played.",r),i.remove(r).then(function(){n._logger.debug("Removed media that has been played.",r),n._error||n._scheduleGC()}).catch(function(e){n._logger.error("Error when attempting to remove media that has been played.",r,e),n._error||n._scheduleGC()})):this._scheduleGC()):this._scheduleGC()},e.prototype._update=function(e){var r=this,t=e.data,n=e.eventRepresentation,i=this._mse;this._onAppendQueued.dispatch({segment:n}),this._logger.debug("Appending...",n);var o=[],a=!1,s=!1,u=!1,l=this._currentRetrieveHandle=t.run(),c=function(){var e;a||r._error||((e=o.shift())&&!e.byteLength?(r._logger.warn("Got 0 bytes to append. Skipping..."),c()):e?(a=!0,r._logger.debug("Appending part...",n,e.byteLength),i.append(e).then(function(){s=!(a=!1),c()}).catch(function(e){r._error||(r._logger.error("Error updating MSE.",e,n),r._handleError(e||new Error("Error updating MSE.")))})):u&&(r._logger.debug("Append finished.",n),s||r._logger.warn("There was nothing to append."),r._currentRetrieveHandle=null,r._onAppendEnd.dispatch({segment:n}),r._prepareUpdate()))};l.onProgressUpdate(function(e){var t;t=r._needsInitData&&e.initData?d.helpers.arrayBuffer.combine([e.initData,e.data]):e.data,r._needsInitData=!1,o.push(t),c()}),l.onError(function(e){r._error||(r._logger.error("Error whilst retrieving data.",e,n),r._handleError(e||new Error("Error retrieving data for MSE.")))}),l.onCompletion(function(){r._logger.debug("Got all data for append.",n),u=!0,c()})},e.prototype._scheduleUpdate=function(){var e=this;this._updateTimerId=window.setTimeout(function(){e._updateTimerId=null,e._prepareUpdate()},500)},e.prototype._scheduleGC=function(){var e=this;this._gcTimerId||(this._gcTimerId=window.setTimeout(function(){e._gcTimerId=null,e._gc()},2e4))},e.prototype._checkNotErrored=function(){if(this._error)throw this._error},e.prototype._clearTimers=function(){this._updateTimerId&&(this._logger.debug("Clearing update timer."),window.clearTimeout(this._updateTimerId),this._updateTimerId=null),this._gcTimerId&&(window.clearTimeout(this._gcTimerId),this._gcTimerId=null),this._currentRetrieveHandle&&(this._currentRetrieveHandle.abort(),this._currentRetrieveHandle=null)},e.prototype._handleError=function(e){this._error||(this._error=e,this._logger.error("Error occurred.",e),this._clearTimers(),this._onError(e))},e}();t.SimpleMSE=n},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,r,t){(function(e){var t,Q=function(l){"use strict";function f(e,t){return void 0===e?f[0]:void 0===t||10==+t?L(e):J(e,t)}function p(e,t){this.value=e,this.sign=t,this.isSmall=!1}function g(e){this.value=e,this.sign=e<0,this.isSmall=!0}function h(e){return-U<e&&e<U}function _(e){return e<1e7?[e]:e<1e14?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function y(e){v(e);var t=e.length;if(t<4&&T(e,B)<0)switch(t){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*N;default:return e[0]+(e[1]+e[2]*N)*N}return e}function v(e){for(var t=e.length;0===e[--t];);e.length=t+1}function m(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function b(e){return 0<e?Math.floor(e):Math.ceil(e)}function r(e,t){var r,n,i=e.length,o=t.length,a=new Array(i),s=0,u=N;for(n=0;n<o;n++)r=e[n]+t[n]+s,s=u<=r?1:0,a[n]=r-s*u;for(;n<i;)r=e[n]+s,s=r===u?1:0,a[n++]=r-s*u;return 0<s&&a.push(s),a}function E(e,t){return e.length>=t.length?r(e,t):r(t,e)}function i(e,t){var r,n,i=e.length,o=new Array(i),a=N;for(n=0;n<i;n++)r=e[n]-a+t,t=Math.floor(r/a),o[n]=r-t*a,t+=1;for(;0<t;)o[n++]=t%a,t=Math.floor(t/a);return o}function w(e,t){var r,n,i=e.length,o=t.length,a=new Array(i),s=0,u=N;for(r=0;r<o;r++)n=e[r]-s-t[r],s=n<0?(n+=u,1):0,a[r]=n;for(r=o;r<i;r++){if(!((n=e[r]-s)<0)){a[r++]=n;break}n+=u,a[r]=n}for(;r<i;r++)a[r]=e[r];return v(a),a}function o(e,t,r){var n,i,o=e.length,a=new Array(o),s=-t,u=N;for(n=0;n<o;n++)i=e[n]+s,s=Math.floor(i/u),i%=u,a[n]=i<0?i+u:i;return"number"==typeof(a=y(a))?(r&&(a=-a),new g(a)):new p(a,r)}function S(e,t){var r,n,i,o,a,s=e.length,u=t.length,l=s+u,c=m(l),d=N;for(i=0;i<s;++i){o=e[i];for(var h=0;h<u;++h)a=t[h],r=o*a+c[i+h],n=Math.floor(r/d),c[i+h]=r-n*d,c[i+h+1]+=n}return v(c),c}function P(e,t){var r,n,i=e.length,o=new Array(i),a=N,s=0;for(n=0;n<i;n++)r=e[n]*t+s,s=Math.floor(r/a),o[n]=r-s*a;for(;0<s;)o[n++]=s%a,s=Math.floor(s/a);return o}function x(e,t){for(var r=[];0<t--;)r.push(0);return r.concat(e)}function t(e,t,r){return new p(e<N?P(t,e):S(t,_(e)),r)}function n(e){var t,r,n,i,o,a=e.length,s=m(a+a),u=N;for(n=0;n<a;n++){i=e[n],r=0-i*i;for(var l=n;l<a;l++)o=e[l],t=i*o*2+s[n+l]+r,r=Math.floor(t/u),s[n+l]=t-r*u;s[n+a]=r}return v(s),s}function A(e,t){var r,n,i,o,a=e.length,s=m(a),u=N;for(i=0,r=a-1;0<=r;--r)o=i*u+e[r],n=b(o/t),i=o-n*t,s[r]=0|n;return[s,0|i]}function R(e,t){var r,n,i=L(t),o=e.value,a=i.value;if(0===a)throw new Error("Cannot divide by zero");if(e.isSmall)return i.isSmall?[new g(b(o/a)),new g(o%a)]:[f[0],e];if(i.isSmall){if(1===a)return[e,f[0]];if(-1==a)return[e.negate(),f[0]];var s=Math.abs(a);if(s<N){r=A(o,s),n=y(r[0]);var u=r[1];return e.sign&&(u=-u),"number"==typeof n?(e.sign!==i.sign&&(n=-n),[new g(n),new g(u)]):[new p(n,e.sign!==i.sign),new g(u)]}a=_(s)}var l=T(o,a);if(-1===l)return[f[0],e];if(0===l)return[f[e.sign===i.sign?1:-1],f[0]];r=(o.length+a.length<=200?function(e,t){var r,n,i,o,a,s,u,l=e.length,c=t.length,d=N,h=m(t.length),f=t[c-1],p=Math.ceil(d/(2*f)),g=P(e,p),_=P(t,p);for(g.length<=l&&g.push(0),_.push(0),f=_[c-1],n=l-c;0<=n;n--){for(r=d-1,g[n+c]!==f&&(r=Math.floor((g[n+c]*d+g[n+c-1])/f)),o=i=0,s=_.length,a=0;a<s;a++)i+=r*_[a],u=Math.floor(i/d),o+=g[n+a]-(i-u*d),i=u,o=o<0?(g[n+a]=o+d,-1):(g[n+a]=o,0);for(;0!==o;){for(--r,a=i=0;a<s;a++)i=(i+=g[n+a]-d+_[a])<0?(g[n+a]=i+d,0):(g[n+a]=i,1);o+=i}h[n]=r}return g=A(g,p)[0],[y(h),y(g)]}:function(e,t){for(var r,n,i,o,a,s=e.length,u=t.length,l=[],c=[],d=N;s;)if(c.unshift(e[--s]),v(c),T(c,t)<0)l.push(0);else{n=c.length,i=c[n-1]*d+c[n-2],o=t[u-1]*d+t[u-2],u<n&&(i=(i+1)*d),r=Math.ceil(i/o);do{if(T(a=P(t,r),c)<=0)break;r--}while(r);l.push(r),c=w(c,a)}return l.reverse(),[y(l),y(c)]})(o,a),n=r[0];var c=e.sign!==i.sign,d=r[1],h=e.sign;return n="number"==typeof n?(c&&(n=-n),new g(n)):new p(n,c),d="number"==typeof d?(h&&(d=-d),new g(d)):new p(d,h),[n,d]}function T(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;0<=r;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function c(e){var t=e.abs();return!t.isUnit()&&(!!(t.equals(2)||t.equals(3)||t.equals(5))||!(t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5))&&(!!t.lesser(25)||void 0))}function a(e){return("number"==typeof e||"string"==typeof e)&&+Math.abs(e)<=N||e instanceof p&&e.value.length<=1}function s(e,t,r){t=L(t);for(var n=e.isNegative(),i=t.isNegative(),o=n?e.not():e,a=i?t.not():t,s=0,u=0,l=null,c=null,d=[];!o.isZero()||!a.isZero();)l=R(o,G),s=l[1].toJSNumber(),n&&(s=G-1-s),c=R(a,G),u=c[1].toJSNumber(),i&&(u=G-1-u),o=l[0],a=c[0],d.push(r(s,u));for(var h=Q(0!==r(n?1:0,i?1:0)?-1:0),f=d.length-1;0<=f;--f)h=h.multiply(G).add(Q(d[f]));return h}function u(e){var t=e.value,r="number"==typeof t?t|V:t[0]+t[1]*N|W;return r&-r}function d(e,t){return e=L(e),t=L(t),e.greater(t)?e:t}function C(e,t){return e=L(e),t=L(t),e.lesser(t)?e:t}function O(e,t){if(e=L(e).abs(),t=L(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,n,i=f[1];e.isEven()&&t.isEven();)r=Math.min(u(e),u(t)),e=e.divide(r),t=t.divide(r),i=i.multiply(r);for(;e.isEven();)e=e.divide(u(e));do{for(;t.isEven();)t=t.divide(u(t));e.greater(t)&&(n=t,t=e,e=n),t=t.subtract(e)}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}function k(e,t,r){var n,i=f[0],o=f[1];for(n=e.length-1;0<=n;n--)i=i.add(e[n].times(o)),o=o.times(t);return r?i.negate():i}function D(e){return e<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e):"<"+e+">"}function M(e,t){if((t=Q(t)).isZero()){if(e.isZero())return{value:[0],isNegative:!1};throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1)){if(e.isZero())return{value:[0],isNegative:!1};if(e.isNegative())return{value:[].concat.apply([],Array.apply(null,Array(-e)).map(Array.prototype.valueOf,[1,0])),isNegative:!1};var r=Array.apply(null,Array(e-1)).map(Array.prototype.valueOf,[0,1]);return r.unshift([1]),{value:[].concat.apply([],r),isNegative:!1}}var n=!1;if(e.isNegative()&&t.isPositive()&&(n=!0,e=e.abs()),t.equals(1))return e.isZero()?{value:[0],isNegative:!1}:{value:Array.apply(null,Array(+e)).map(Number.prototype.valueOf,1),isNegative:n};for(var i,o=[],a=e;a.isNegative()||0<=a.compareAbs(t);){a=(i=a.divmod(t)).quotient;var s=i.remainder;s.isNegative()&&(s=t.minus(s).abs(),a=a.next()),o.push(s.toJSNumber())}return o.push(a.toJSNumber()),{value:o.reverse(),isNegative:n}}function I(e,t){var r=M(e,t);return(r.isNegative?"-":"")+r.value.map(D).join("")}function F(e){if(h(+e)){var t=+e;if(t===b(t))return new g(t);throw new Error("Invalid integer: "+e)}var r="-"===e[0];r&&(e=e.slice(1));var n=e.split(/e/i);if(2<n.length)throw new Error("Invalid integer: "+n.join("e"));if(2===n.length){var i=n[1];if("+"===i[0]&&(i=i.slice(1)),(i=+i)!==b(i)||!h(i))throw new Error("Invalid integer: "+i+" is not a valid exponent.");var o=n[0],a=o.indexOf(".");if(0<=a&&(i-=o.length-a-1,o=o.slice(0,a)+o.slice(a+1)),i<0)throw new Error("Cannot include negative exponent part for integers");o+=new Array(i+1).join("0"),e=o}var s=/^([0-9][0-9]*)$/.test(e);if(!s)throw new Error("Invalid integer: "+e);for(var u=[],l=e.length,c=j,d=l-c;0<l;)u.push(+e.slice(d,l)),(d-=c)<0&&(d=0),l-=c;return v(u),new p(u,r)}function L(e){return"number"==typeof e?function(e){if(h(e)){if(e!==b(e))throw new Error(e+" is not an integer.");return new g(e)}return F(e.toString())}(e):"string"==typeof e?F(e):e}var N=1e7,j=7,U=9007199254740992,B=_(U),q=Math.log(U);p.prototype=Object.create(f.prototype),g.prototype=Object.create(f.prototype),p.prototype.plus=p.prototype.add=function(e){var t=L(e);if(this.sign!==t.sign)return this.subtract(t.negate());var r=this.value,n=t.value;return t.isSmall?new p(i(r,Math.abs(n)),this.sign):new p(E(r,n),this.sign)},g.prototype.plus=g.prototype.add=function(e){var t=L(e),r=this.value;if(r<0!==t.sign)return this.subtract(t.negate());var n=t.value;if(t.isSmall){if(h(r+n))return new g(r+n);n=_(Math.abs(n))}return new p(i(n,Math.abs(r)),r<0)},p.prototype.minus=p.prototype.subtract=function(e){var t=L(e);if(this.sign!==t.sign)return this.add(t.negate());var r=this.value,n=t.value;return t.isSmall?o(r,Math.abs(n),this.sign):function(e,t,r){var n;return 0<=T(e,t)?n=w(e,t):(n=w(t,e),r=!r),"number"==typeof(n=y(n))?(r&&(n=-n),new g(n)):new p(n,r)}(r,n,this.sign)},g.prototype.minus=g.prototype.subtract=function(e){var t=L(e),r=this.value;if(r<0!==t.sign)return this.add(t.negate());var n=t.value;return t.isSmall?new g(r-n):o(n,Math.abs(r),0<=r)},p.prototype.negate=function(){return new p(this.value,!this.sign)},g.prototype.negate=function(){var e=this.sign,t=new g(-this.value);return t.sign=!e,t},p.prototype.abs=function(){return new p(this.value,!1)},g.prototype.abs=function(){return new g(Math.abs(this.value))},p.prototype.times=p.prototype.multiply=function(e){var t,r=L(e),n=this.value,i=r.value,o=this.sign!==r.sign;if(r.isSmall){if(0===i)return f[0];if(1===i)return this;if(-1===i)return this.negate();if((t=Math.abs(i))<N)return new p(P(n,t),o);i=_(t)}return function(e,t){return 0<-.012*e-.012*t+15e-6*e*t}(n.length,i.length)?new p(function e(t,r){var n=Math.max(t.length,r.length);if(n<=30)return S(t,r);n=Math.ceil(n/2);var i=t.slice(n),o=t.slice(0,n),a=r.slice(n),s=r.slice(0,n),u=e(o,s),l=e(i,a),c=e(E(o,i),E(s,a)),d=E(E(u,x(w(w(c,u),l),n)),x(l,2*n));return v(d),d}(n,i),o):new p(S(n,i),o)},g.prototype._multiplyBySmall=function(e){return h(e.value*this.value)?new g(e.value*this.value):t(Math.abs(e.value),_(Math.abs(this.value)),this.sign!==e.sign)},p.prototype._multiplyBySmall=function(e){return 0===e.value?f[0]:1===e.value?this:-1===e.value?this.negate():t(Math.abs(e.value),this.value,this.sign!==e.sign)},g.prototype.times=g.prototype.multiply=function(e){return L(e)._multiplyBySmall(this)},p.prototype.square=function(){return new p(n(this.value),!1)},g.prototype.square=function(){var e=this.value*this.value;return h(e)?new g(e):new p(n(_(Math.abs(this.value))),!1)},g.prototype.divmod=p.prototype.divmod=function(e){var t=R(this,e);return{quotient:t[0],remainder:t[1]}},g.prototype.over=g.prototype.divide=p.prototype.over=p.prototype.divide=function(e){return R(this,e)[0]},g.prototype.remainder=g.prototype.mod=p.prototype.remainder=p.prototype.mod=function(e){return R(this,e)[1]},p.prototype.pow=function(e){var t,r,n,i=L(e),o=this.value,a=i.value;if(0===a)return f[1];if(0===o)return f[0];if(1===o)return f[1];if(-1===o)return i.isEven()?f[1]:f[-1];if(i.sign)return f[0];if(!i.isSmall)throw new Error("The exponent "+i.toString()+" is too large.");if(this.isSmall&&h(t=Math.pow(o,a)))return new g(b(t));for(r=this,n=f[1];!0&a&&(n=n.times(r),--a),0!==a;)a/=2,r=r.square();return n},g.prototype.pow=p.prototype.pow,g.prototype.modPow=p.prototype.modPow=function(e,t){if(e=L(e),(t=L(t)).isZero())throw new Error("Cannot take modPow with modulus 0");for(var r=f[1],n=this.mod(t);e.isPositive();){if(n.isZero())return f[0];e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t)}return r},p.prototype.compareAbs=function(e){var t=L(e),r=this.value,n=t.value;return t.isSmall?1:T(r,n)},g.prototype.compareAbs=function(e){var t=L(e),r=Math.abs(this.value),n=t.value;return t.isSmall?(n=Math.abs(n),r===n?0:n<r?1:-1):-1},p.prototype.compareTo=p.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=L(e),r=this.value,n=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:T(r,n)*(this.sign?-1:1)},g.prototype.compareTo=g.prototype.compare=function(e){if(e===1/0)return-1;if(e===-1/0)return 1;var t=L(e),r=this.value,n=t.value;return t.isSmall?r==n?0:n<r?1:-1:r<0!==t.sign?r<0?-1:1:r<0?1:-1},g.prototype.eq=g.prototype.equals=p.prototype.eq=p.prototype.equals=function(e){return 0===this.compare(e)},g.prototype.neq=g.prototype.notEquals=p.prototype.neq=p.prototype.notEquals=function(e){return 0!==this.compare(e)},g.prototype.gt=g.prototype.greater=p.prototype.gt=p.prototype.greater=function(e){return 0<this.compare(e)},g.prototype.lt=g.prototype.lesser=p.prototype.lt=p.prototype.lesser=function(e){return this.compare(e)<0},g.prototype.geq=g.prototype.greaterOrEquals=p.prototype.geq=p.prototype.greaterOrEquals=function(e){return 0<=this.compare(e)},g.prototype.leq=g.prototype.lesserOrEquals=p.prototype.leq=p.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},p.prototype.isEven=function(){return 0==(1&this.value[0])},g.prototype.isEven=function(){return 0==(1&this.value)},p.prototype.isOdd=function(){return 1==(1&this.value[0])},g.prototype.isOdd=function(){return 1==(1&this.value)},p.prototype.isPositive=function(){return!this.sign},g.prototype.isPositive=function(){return 0<this.value},p.prototype.isNegative=function(){return this.sign},g.prototype.isNegative=function(){return this.value<0},p.prototype.isUnit=function(){return!1},g.prototype.isUnit=function(){return 1===Math.abs(this.value)},p.prototype.isZero=function(){return!1},g.prototype.isZero=function(){return 0===this.value},g.prototype.isDivisibleBy=p.prototype.isDivisibleBy=function(e){var t=L(e),r=t.value;return 0!==r&&(1===r||(2===r?this.isEven():this.mod(t).equals(f[0])))},g.prototype.isPrime=p.prototype.isPrime=function(){var e=c(this);if(e!==l)return e;for(var t,r,n,i,o=this.abs(),a=o.prev(),s=[2,3,5,7,11,13,17,19],u=a;u.isEven();)u=u.divide(2);for(n=0;n<s.length;n++)if(!(i=Q(s[n]).modPow(u,o)).equals(f[1])&&!i.equals(a)){for(r=!0,t=u;r&&t.lesser(a);t=t.multiply(2))(i=i.square().mod(o)).equals(a)&&(r=!1);if(r)return!1}return!0},g.prototype.isProbablePrime=p.prototype.isProbablePrime=function(e){var t=c(this);if(t!==l)return t;for(var r=this.abs(),n=e===l?5:e,i=0;i<n;i++){var o=Q.randBetween(2,r.minus(2));if(!o.modPow(r.prev(),r).isUnit())return!1}return!0},g.prototype.modInv=p.prototype.modInv=function(e){for(var t,r,n,i=Q.zero,o=Q.one,a=L(e),s=this.abs();!s.equals(Q.zero);)t=a.divide(s),r=i,n=a,i=o,a=s,o=r.subtract(t.multiply(o)),s=n.subtract(t.multiply(s));if(!a.equals(1))throw new Error(this.toString()+" and "+e.toString()+" are not co-prime");return-1===i.compare(0)&&(i=i.add(e)),this.isNegative()?i.negate():i},p.prototype.next=function(){var e=this.value;return this.sign?o(e,1,this.sign):new p(i(e,1),this.sign)},g.prototype.next=function(){var e=this.value;return e+1<U?new g(e+1):new p(B,!1)},p.prototype.prev=function(){var e=this.value;return this.sign?new p(i(e,1),!0):o(e,1,this.sign)},g.prototype.prev=function(){var e=this.value;return-U<e-1?new g(e-1):new p(B,!0)};for(var z=[1];2*z[z.length-1]<=N;)z.push(2*z[z.length-1]);var H=z.length,G=z[H-1];g.prototype.shiftLeft=p.prototype.shiftLeft=function(e){if(!a(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftRight(-e);var t=this;if(t.isZero())return t;for(;H<=e;)t=t.multiply(G),e-=H-1;return t.multiply(z[e])},g.prototype.shiftRight=p.prototype.shiftRight=function(e){var t;if(!a(e))throw new Error(String(e)+" is too large for shifting.");if((e=+e)<0)return this.shiftLeft(-e);for(var r=this;H<=e;){if(r.isZero()||r.isNegative()&&r.isUnit())return r;t=R(r,G),r=t[1].isNegative()?t[0].prev():t[0],e-=H-1}return(t=R(r,z[e]))[1].isNegative()?t[0].prev():t[0]},g.prototype.not=p.prototype.not=function(){return this.negate().prev()},g.prototype.and=p.prototype.and=function(e){return s(this,e,function(e,t){return e&t})},g.prototype.or=p.prototype.or=function(e){return s(this,e,function(e,t){return e|t})},g.prototype.xor=p.prototype.xor=function(e){return s(this,e,function(e,t){return e^t})};var V=1<<30,W=(N&-N)*(N&-N)|V;g.prototype.bitLength=p.prototype.bitLength=function(){var e=this;return e.compareTo(Q(0))<0&&(e=e.negate().subtract(Q(1))),0===e.compareTo(Q(0))?Q(0):Q(function e(t,r){if(r.compareTo(t)<=0){var n=e(t,r.square(r)),i=n.p,o=n.e,a=i.multiply(r);return a.compareTo(t)<=0?{p:a,e:2*o+1}:{p:i,e:2*o}}return{p:Q(1),e:0}}(e,Q(2)).e).add(Q(1))};var J=function(e,t){for(var r=e.length,n=Math.abs(t),i=0;i<r;i++){var o=e[i].toLowerCase();if("-"!==o&&/[a-z0-9]/.test(o)){if(/[0-9]/.test(o)&&n<=+o){if("1"===o&&1===n)continue;throw new Error(o+" is not a valid digit in base "+t+".")}if(o.charCodeAt(0)-87>=n)throw new Error(o+" is not a valid digit in base "+t+".")}}if(2<=t&&t<=36&&r<=q/Math.log(t)){var a=parseInt(e,t);if(isNaN(a))throw new Error(o+" is not a valid digit in base "+t+".");return new g(parseInt(e,t))}t=L(t);var s=[],u="-"===e[0];for(i=u?1:0;i<e.length;i++){var o=e[i].toLowerCase(),l=o.charCodeAt(0);if(48<=l&&l<=57)s.push(L(o));else if(97<=l&&l<=122)s.push(L(o.charCodeAt(0)-87));else{if("<"!==o)throw new Error(o+" is not a valid character");for(var c=i;">"!==e[++i];);s.push(L(e.slice(c+1,i)))}}return k(s,t,u)};p.prototype.toArray=function(e){return M(this,e)},g.prototype.toArray=function(e){return M(this,e)},p.prototype.toString=function(e){if(e===l&&(e=10),10!==e)return I(this,e);for(var t,r=this.value,n=r.length,i=String(r[--n]);0<=--n;)t=String(r[n]),i+="0000000".slice(t.length)+t;var o=this.sign?"-":"";return o+i},g.prototype.toString=function(e){return e===l&&(e=10),10!=e?I(this,e):String(this.value)},p.prototype.toJSON=g.prototype.toJSON=function(){return this.toString()},p.prototype.toJSNumber=p.prototype.valueOf=function(){return parseInt(this.toString(),10)},g.prototype.toJSNumber=g.prototype.valueOf=function(){return this.value};for(var e=0;e<1e3;e++)f[e]=new g(e),0<e&&(f[-e]=new g(-e));return f.one=f[1],f.zero=f[0],f.minusOne=f[-1],f.max=d,f.min=C,f.gcd=O,f.lcm=function(e,t){return e=L(e).abs(),t=L(t).abs(),e.divide(O(e,t)).multiply(t)},f.isInstance=function(e){return e instanceof p||e instanceof g},f.randBetween=function(e,t){e=L(e),t=L(t);var r=C(e,t),n=d(e,t).subtract(r).add(1);if(n.isSmall)return r.add(Math.floor(Math.random()*n));for(var i=n.value.length-1,o=[],a=!0,s=i;0<=s;s--){var u=a?n.value[s]:N,l=b(Math.random()*u);o.unshift(l),l<u&&(a=!1)}return o=y(o),r.add("number"==typeof o?new g(o):new p(o,!1))},f.fromArray=function(e,t,r){return k(e.map(L),L(t||10),r)},f}();void 0!==e&&e.hasOwnProperty("exports")&&(e.exports=Q),void 0===(t=function(){return Q}.apply(r,[]))||(e.exports=t)}).call(this,t(10)(e))},function(e,t,r){"use strict";function u(e,t){for(var r=e.byteLength,n=0;n<r;){var i=e.getUint32(n);if(1===i)throw new Error("Large atom size not supported.");0===i&&(i=r-n);var o=e.getUint32(n+4);if(t(o,new DataView(e.buffer,e.byteOffset+n+a,i-a)))break;n+=i}}Object.defineProperty(t,"__esModule",{value:!0});var l=r(0),c=r(11),a=8;t.clearMP4InternalTimestamp=function(e,n){void 0===n&&(n=!1);function r(e){var t=e.getUint8(0);e.setUint32(12,0),0<t&&e.setUint32(16,0)}function i(e){u(e,function(e,t){return 1953653094===e&&(o(t),1)})}var o=function(e){u(e,function(e,t){return 1952867444===e&&(a(t),1)})},a=function(e){var t=e.getUint8(0),r=n?c(0):(r=c(e.getUint32(4)),0<t&&(r=(r=r.shiftLeft(32)).add(e.getUint32(8))),null===s&&(s=r),r.subtract(s));0<t?(e.setUint32(4,r.shiftRight(32).toJSNumber()),e.setUint32(8,r.and(65535).toJSNumber())):e.setUint32(4,r.toJSNumber())},t=l.helpers.arrayBuffer.combine([e]),s=null;return u(new DataView(t.buffer,t.byteOffset,t.byteLength),function(e,t){switch(e){case 1936286840:r(t);break;case 1836019558:i(t)}}),t}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t(0),n=t(6),i=t(12),a=o.helpers.deferred.buildDeferred,s=n.helpers.timeRanges.buildTimeRanges,u=o.helpers.Promise,l=o.logger.prefixLogger,c=o.logger.noOpLogger,d=o.helpers.browser.isIE(),h=o.helpers.browser.isSafari(),f='audio/mp4; codecs="mp3"',p=o.helpers.browser.getSafariVersion(),g=o.helpers.browser.getChromeVersion(),_=h||!!(g&&g.major<=49),y=!!p&&p.major<10||!!g&&g.major<=49;r.killedError=new Error("MSE killed.");var v=function(){function e(e,t){var r=this.constructor;if(void 0===t&&(t=c),this._sourceBuffer=null,this._initialized=!1,this._initializeDeferred=a(),this._whenIdleDeferred=a(),this._error=null,this._dead=!1,this._eosSignalled=!1,this._pendingActions=[],this._currentAction=null,this._logger=l(t,"MSE"),this._onMediaSourceInit=this._onMediaSourceInit.bind(this),this._onMediaSourceEnded=this._onMediaSourceEnded.bind(this),this._onMediaSourceError=this._onMediaSourceError.bind(this),this._onSourceBufferUpdateEnd=this._onSourceBufferUpdateEnd.bind(this),this._onSourceBufferError=this._onSourceBufferError.bind(this),!r.isSupported(e))throw this._logger.error("Not supported."),new Error("Not supported.");h&&e===f&&(e="audio/mp4"),this._type=e,this._useSegmentsMode=y&&0===e.indexOf("audio/mp4"),this._mediaSource=new MediaSource,this._mediaSource.addEventListener("sourceopen",this._onMediaSourceInit,!1),this._mediaSource.addEventListener("error",this._onMediaSourceError,!1),this._url=URL.createObjectURL(this._mediaSource),this._logger.debug("Created URL.",this._url)}return e.isSupported=function(e){return!d&&"MediaSource"in window&&(!e||!(!h||e!==f)||!(p&&p.major<10&&"audio/mpeg"===e)&&!(g&&g.major<50&&'audio/webm; codecs="opus"'===e)&&MediaSource.isTypeSupported(e))},e.prototype.whenInitialized=function(){return this._initializeDeferred.promise},e.prototype.whenIdle=function(){return this._whenIdleDeferred?this._whenIdleDeferred.promise:u.resolve(void 0)},e.prototype.isIdle=function(){return this._dead||!this._whenIdleDeferred},e.prototype.hasInitialized=function(){return this._initialized},e.prototype.getError=function(){return this._error},e.prototype.getUrl=function(){return this._ensureNotDead(),this._url},e.prototype.getBuffered=function(){if(this._ensureNotDead(),!this._sourceBuffer)return[];try{return s(this._sourceBuffer.buffered)}catch(e){if("InvalidStateError"===e.name&&"Failed to read the 'buffered' property from 'SourceBuffer': This SourceBuffer has been removed from the parent media source."===e.message)return[];throw e}},e.prototype.append=function(e){if(this._ensureNotDead(),this._ensureInitialized(),this._ensureNotEOS(),this._logger.debug("append() called."),_&&0===this._type.indexOf("audio/mp4")){this._logger.debug("Rewriting internal timestamp to 0.");try{e=i.clearMP4InternalTimestamp(e,!this._useSegmentsMode)}catch(e){return this._logger.error("Error rewriting timestamps.",e),this._handleError(e),u.reject(e)}}var t=a();return this._pendingActions.push({type:"append",data:e,deferred:t}),this._performNextAction(),t.promise},e.prototype.remove=function(e){if(0===e.duration)throw new Error("Remove range must have a duration > 0.");this._ensureNotDead(),this._ensureInitialized(),this._ensureNotEOS(),this._logger.debug("remove() called.",e);var t=a();return this._pendingActions.push({type:"remove",range:e,deferred:t}),this._performNextAction(),t.promise},e.prototype.signalEOS=function(){this._ensureNotDead(),this._ensureInitialized(),this._ensureNotEOS(),this._logger.debug("signalEOS() called."),this._eosSignalled=!0;var e=a();return this._pendingActions.push({type:"eos",deferred:e}),this._performNextAction(),e.promise},e.prototype.eosSignalled=function(){return this._eosSignalled},e.prototype.kill=function(){if(!this._dead){if(this._logger.debug("kill() called."),this._dead=!0,this._sourceBuffer){this._sourceBuffer.removeEventListener("updateend",this._onSourceBufferUpdateEnd,!1),this._sourceBuffer.removeEventListener("error",this._onSourceBufferError,!1);try{this._mediaSource.removeSourceBuffer(this._sourceBuffer)}catch(t){this._logger.error("Error from removeSourceBuffer()",t)}}this._mediaSource.removeEventListener("sourceopen",this._onMediaSourceInit,!1),this._mediaSource.removeEventListener("sourceended",this._onMediaSourceEnded,!1),this._mediaSource.removeEventListener("error",this._onMediaSourceError,!1),URL.revokeObjectURL(this._url);var t=this._error||r.killedError,e=this._currentAction?[this._currentAction]:[];(e=e.concat(this._pendingActions)).forEach(function(e){e.deferred.reject(t)}),this._whenIdleDeferred||(this._whenIdleDeferred=a()),this._whenIdleDeferred.reject(t),this._initialized||this._initializeDeferred.reject(t),this._pendingActions.length=0,this._logger.debug("Killed.")}},e.prototype._ensureInitialized=function(){if(!this._initialized)throw new Error("Not initialized yet.")},e.prototype._ensureNotEOS=function(){if(this._eosSignalled)throw new Error("EOS signalled.")},e.prototype._ensureNotDead=function(){if(this._dead)throw new Error("MSE is dead.")},e.prototype._onMediaSourceInit=function(){this._logger.debug("MSE initialized."),this._mediaSource.removeEventListener("sourceopen",this._onMediaSourceInit,!1);try{this._logger.debug("Creating source buffer.",this._type),this._sourceBuffer=this._mediaSource.addSourceBuffer(this._type),this._sourceBuffer.mode=this._useSegmentsMode?"segments":"sequence",this._logger.debug("Using append mode: "+this._sourceBuffer.mode),this._sourceBuffer.addEventListener("updateend",this._onSourceBufferUpdateEnd,!1),this._sourceBuffer.addEventListener("error",this._onSourceBufferError,!1)}catch(e){this._handleError(e)}this._initializeDeferred.resolve(void 0),this._whenIdleDeferred.resolve(void 0),this._initialized=!0,this._performNextAction()},e.prototype._onMediaSourceEnded=function(){this._onSourceBufferUpdateEnd()},e.prototype._onMediaSourceError=function(e){this._handleError(e)},e.prototype._handleError=function(e){this._ensureNotDead(),this._logger.error("Error occurred.",e),this._error=e||new Error("Unknown error."),this.kill()},e.prototype._onSourceBufferUpdateEnd=function(){var e=this._currentAction;return this._logger.debug("Update ended.",this.getBuffered()),e?(this._currentAction=null,e.deferred.resolve(void 0),void this._performNextAction()):void this._handleError(new Error("No action in progress."))},e.prototype._onSourceBufferError=function(e){this._handleError(e)},e.prototype._performNextAction=function(){var e=this._whenIdleDeferred;if(!this._currentAction&&this._sourceBuffer){var t=this._pendingActions.shift();if(!t)return this._logger.debug("No more actions."),void(e&&(this._whenIdleDeferred=null,e.resolve(void 0)));switch(e||(this._whenIdleDeferred=a()),this._currentAction=t,this._logger.debug("Performing next action..."),t.type){case"append":var r=o.TimeRange.getCoverage(this.getBuffered());try{if("segments"===this._sourceBuffer.mode){var n=r.end/1e3;this._logger.debug("Setting timestampOffset because detected safari.",n);try{this._sourceBuffer.timestampOffset=n}catch(e){if(11!==e.code)throw e;this._logger.debug("Failed to set timestampOffset.",e)}}this._logger.debug("Calling appendBuffer()."),this._sourceBuffer.appendBuffer(t.data)}catch(e){this._handleError(e)}break;case"remove":try{var i=t.range;this._logger.debug("Calling remove().",i.start,i.end),this._sourceBuffer.remove(i.start/1e3,i.end/1e3)}catch(e){this._handleError(e)}break;case"eos":try{this._logger.debug("Calling endOfStream()."),this._sourceBuffer.removeEventListener("updateend",this._onSourceBufferUpdateEnd,!1),this._mediaSource.addEventListener("sourceended",this._onMediaSourceEnded,!1),this._mediaSource.endOfStream()}catch(e){this._handleError(e)}}}},e}();r.MSE=v},function(e,t,r){"use strict";function s(e){if(e.hasEnded()){var t=e.getCompleteDuration();if(null===t)throw new Error("Expected playlist duration to be available.");return t}return 1/0}function n(r){var e=u.TransmuxerFactory.retrieveTransmuxers(r),t=y(e,function(e){var t=o.helpers.mimeType.buildMimeTypeFromFormat(e.getOutputFormat(),r);return!!t&&a.MSE.isSupported(t)})||null;if(!t)return null;var n=t.getOutputFormat(),i=o.helpers.mimeType.buildMimeTypeFromFormat(n,r);return i?{transmuxer:t,mimeType:i}:null}var i=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var h=r(0),u=r(7),o=r(6),a=r(13),l=r(9),c=r(5),f=r(4),p=r(3),g=r(2),_=r(1),y=h.helpers.find,v=h.helpers.Promise,m=h.helpers.time.now,b=h.errors.PlayerFatalError,E=h.eventDispatcher.EventDispatcher,w=h.logger.prefixLogger,S=h.helpers.abortableJob.abortedError,P=h.helpers.browser.getSafariVersion(),x=h.helpers.browser.isSafari(),A=h.helpers.browser.isFirefox(),R=h.helpers.browser.isEdge(),d=function(d){function e(e,t){var r=d.call(this,t)||this;if(r._onSegmentRequestQueued=new E,r._onSegmentRequestStart=new E,r._onSegmentRetrieved=new E,r._onSegmentRequestFailed=new E,r._onSegmentReady=new E,r._onSegmentAppendQueued=new E,r._onSegmentAppendEnd=new E,r._playlist=null,r._playlistSegmentRetriever=null,r._playlistUpdateJob=null,r._initialPlaylistRetrieveCompleted=!1,r._playlistUpdateTimer=null,r._earliestAllowedNextUpdateTime=m(),r._mse=null,r._simpleMSE=null,r._html5PlayerReady=!1,r._startPositionOffset=0,r._transmuxerAndMimeType=null,r._lastSegmentAppended=null,r._maxBufferLength=null,r._cacheSize=null,r._onFirstSegmentRetrieved=null,r._firstSegmentOffset=0,r._seekAttemptTimer=null,r._seekMetadataEventHandle=null,r._playlistUpdateEventHandle=null,r._playlistDuration=null,r._logger=w(r._logger,"HLSMSEPlayer"),void 0!==t.maxBufferLength&&t.maxBufferLength<0)throw new Error("maxBufferLength cannot be < 0.");if(void 0!==t.memoryCacheSize&&t.memoryCacheSize<0)throw new Error("memoryCacheSize cannot be < 0.");return r.onSegmentRequestQueued=r._onSegmentRequestQueued.getHandle(),r.onSegmentRequestStart=r._onSegmentRequestStart.getHandle(),r.onSegmentRetrieved=r._onSegmentRetrieved.getHandle(),r.onSegmentRequestFailed=r._onSegmentRequestFailed.getHandle(),r.onSegmentReady=r._onSegmentReady.getHandle(),r.onSegmentAppendQueued=r._onSegmentAppendQueued.getHandle(),r.onSegmentAppendEnd=r._onSegmentAppendEnd.getHandle(),r.__descriptor=e,r.__playerDependencies=t,r._queuedPlaylist=e.playlist,r}return i(e,d),e.isFormatSupported=function(e){return!!a.MSE.isSupported()&&!!n(e)},e.prototype.getBufferedTimeRanges=function(){var e=this._playlistSegmentRetriever;return e?h.TimeRange.normalize(e.getSegmentsWithData().map(function(e){return e.segment.getTimeRange()})):[]},e.prototype.getCompleteBufferedTimeRanges=function(){var e=this._playlistSegmentRetriever;return e?h.TimeRange.normalize(e.getSegmentsWithData().filter(function(e){return e.complete}).map(function(e){return e.segment.getTimeRange()})):[]},e.prototype.getMaxBufferLength=function(){return this._maxBufferLength},e.prototype.getBufferController=function(){var t=this;return{setMaxBufferLength:function(e){if(e<0)throw new Error("Max buffer length cannot be < 0.");t._logger.debug("Updating max buffer length.",e),t._maxBufferLength=e,t._playlistSegmentRetriever?t._playlistSegmentRetriever.updateMaxBufferLength(e):t._logger.debug("Cannot update right now. Playlist segment retriever doesn't exist.")}}},e.prototype.switchPlaylist=function(e){return this._logger.debug("Updating playlist."),this._hasInitialized()?(this._playlistSegmentRetriever&&(this._playlistSegmentRetriever.switchPlaylist(null),this._logger.debug("Removed current URL.")),this._disposePlaylist(),void this._setPlaylist(e)):(this._logger.debug("Cannot update right now. Still initializing."),void(this._queuedPlaylist=e))},e.prototype.getMemoryCacheMaxSize=function(){return null!==this._cacheSize?this._cacheSize:1e8},e.prototype.getMemoryCacheUsage=function(){return this._playlistSegmentRetriever?this._playlistSegmentRetriever.getCacheUsage():0},e.prototype.getMemoryCacheController=function(){var t=this;return{setMaxCacheSize:function(e){if(e<0)throw new Error("Max size cannot be < 0.");t._cacheSize=e,t._playlistSegmentRetriever&&t._playlistSegmentRetriever.updateCacheSize(e)}}},e.prototype._canPlay=function(){if(!a.MSE.isSupported())return this._logger.debug("MSE not supported."),v.resolve(!1);var e=this.__descriptor.segmentFormat,t=n(e);return t?(this._transmuxerAndMimeType=t,v.resolve(!0)):(this._logger.debug("No transmuxer found."),v.resolve(new g.NoTransmuxerError))},e.prototype._getUrlForMediaElement=function(){if(!this._mse)throw new Error("MSE does not exist.");return this._mse.getUrl()},e.prototype._handleDurationUpdates=function(){},e.prototype._signalReady=function(){this._html5PlayerReady=!0,this._initialPlaylistRetrieveCompleted&&d.prototype._signalReady.call(this)},e.prototype._initialize=function(){var e=this.__playerDependencies;if(null===this._maxBufferLength&&(void 0!==e.maxBufferLength?this._maxBufferLength=e.maxBufferLength:this._maxBufferLength=3e4),this._logger.debug("Initialized max buffer length.",this._maxBufferLength),null===this._cacheSize&&(void 0!==e.memoryCacheSize?this._cacheSize=e.memoryCacheSize:this._cacheSize=1e8),this._logger.debug("Initialized cache size.",this._cacheSize),d.prototype._initialize.call(this),!this._queuedPlaylist)throw new Error("Playlist should exist.");this._setPlaylist(this._queuedPlaylist),this._queuedPlaylist=null},e.prototype._initMediaElement=function(e,t){this._simpleMSE&&(this._simpleMSE.kill(),this._simpleMSE=null,this._logger.debug("Killed SimpleMSE.")),this._mse&&(this._mse.kill(),this._mse=null,this._logger.debug("Killed MSE.")),null!==this._seekAttemptTimer&&(window.clearTimeout(this._seekAttemptTimer),this._seekAttemptTimer=null,this._logger.debug("Cancelled seek attempt timer.")),this._onFirstSegmentRetrieved=null,this._seekMetadataEventHandle&&(this._seekMetadataEventHandle.remove(),this._seekMetadataEventHandle=null),t?(this._initMSE(),d.prototype._initMediaElement.call(this,e,!0)):d.prototype._initMediaElement.call(this,e,!1)},e.prototype._shouldBeEnded=function(){var e=this._lastSegmentAppended;if(!e||!e.isFinalSegment())return!1;if(!x)return d.prototype._shouldBeEnded.call(this);if(d.prototype._shouldBeEnded.call(this))return!0;if(!this.getMediaElement())return!1;var t=this._duration;return this._stallDetected&&null!==t&&this._getTruePosition()>=t-600},e.prototype._getTruePosition=function(){var e=this.getMediaElement();if(!e)throw new Error("Media element should exist.");return this._startPositionOffset+this._getMediaElementPosition()},e.prototype._handleSeekChange=function(e,t){d.prototype._handleSeekChange.call(this,e,t),this._playlistSegmentRetriever&&(this._logger.debug("Explicitly updating playlist segment retriever, as seek requested."),this._playlistSegmentRetriever.update(),this._findSegmentAndAppendToMSE())},e.prototype._performSeek=function(e,o){var a=this,t=this._simpleMSE,r=this._mse,s=this.getMediaElement();if(!r)throw new Error("MSE should exist.");if(!s)throw new Error("Media element should exist.");var n=!this._isMediaElementPaused(s);null!==this._seekAttemptTimer&&(window.clearTimeout(this._seekAttemptTimer),this._seekAttemptTimer=null,this._logger.debug("Cancelled previous seek attempt timer.")),this._seekMetadataEventHandle&&(this._seekMetadataEventHandle.remove(),this._seekMetadataEventHandle=null,this._logger.debug("Removed previous loaded metadata event handler.")),t&&t.kill(),r.kill(),this._logger.debug("SimpleMSE and MSE destroyed."),this._startPositionOffset=e;var i=!1;this._onFirstSegmentRetrieved=function(){return i=!0},this._logger.debug("Initializing MSE and SimpleMSE for new position."),this._initMSE();var u,l=this._mse.getUrl();this._logger.debug("Updated media element MSE src.",l),d.prototype._initMediaElement.call(this,s,!0),n&&(this._logger.debug("Calling play() on media element as it was playing previously."),(u=this._callMediaElementPlay(s))&&u.catch&&u.catch(function(e){"AbortError"!==e.name&&(a._logger.error("Unexpected play() error.",e),a._triggerError(new b("Exception from calling play() after seek.",e)))}));var c=function(i){(P&&P.major<11||A)&&i<50&&(a._logger.debug("Tweaking offset to fix glitch issue."),i=50);var e=function(){a._startPositionOffset=Math.max(0,a._startPositionOffset-i),a._logger.debug("Updated start position offset.",a._startPositionOffset,i);var n=function(){a._seekAttemptTimer=null,a._logger.debug("Attempting to seek to the required offset.",i);var e=a._mse?a._mse.getBuffered():[];if(!h.TimeRange.rangesContainTime(i,e))return a._logger.debug("Holding seek because not buffered yet.",i,e),void(a._seekAttemptTimer=window.setTimeout(n,50));s.currentTime=i/1e3;var t=1e3*s.currentTime,r=t-i;Math.abs(r)<=100?(a._logger.debug("Seeked to the required offset.",i,t,r),o()):(a._logger.warn("Seek attempt failed. Trying again shortly.",i,t,r),a._seekAttemptTimer=window.setTimeout(n,50))};n()};a._onFirstSegmentRetrieved=null,R||s.readyState===s.HAVE_METADATA?(a._logger.debug("Media element has metadata. Seeking to offset."),e()):(a._logger.debug("Media element has not loaded metadata. Waiting for metadata..."),a._seekMetadataEventHandle=a._listenToOnce("loadedmetadata",function(){a._seekMetadataEventHandle=null,a._logger.debug("Got metadata. Seeking to offset."),e()},{earlyAttach:!0}))};i?(this._logger.debug("First segment already retrieved. Preparing to seek to initial offset."),c(this._firstSegmentOffset)):(this._logger.debug("Waiting for first segment to be retrieved."),this._onFirstSegmentRetrieved=function(){a._logger.debug("First segment retrieved. Preparing to seek to initial offset."),c(a._firstSegmentOffset)})},e.prototype._kill=function(){this._simpleMSE&&(this._logger.debug("Killing SimpleMSE."),this._simpleMSE.kill(),this._simpleMSE=null),this._mse&&(this._logger.debug("Killing MSE."),this._mse.kill(),this._mse=null),this._playlistSegmentRetriever&&(this._logger.debug("Killing playlist segment retriever."),this._playlistSegmentRetriever.kill(),this._playlistSegmentRetriever=null),this._disposePlaylist(),d.prototype._kill.call(this)},e.prototype._disposePlaylist=function(){this._playlistUpdateJob&&(this._logger.debug("Aborting playlist retrieve job."),this._playlistUpdateJob.abort(),this._playlistUpdateJob=null),this._playlistUpdateTimer&&(window.clearTimeout(this._playlistUpdateTimer),this._playlistUpdateTimer=null),this._playlistUpdateEventHandle&&(this._playlistUpdateEventHandle.remove(),this._playlistUpdateEventHandle=null),this._playlist=null},e.prototype._initMSE=function(){var r=this;if(!this._transmuxerAndMimeType)throw new Error("Transmuxer should have been configured.");this._lastSegmentAppended=null;var e=new a.MSE(this._transmuxerAndMimeType.mimeType,this._logger),t=new l.SimpleMSE(e,function(){return r._getSegmentDataToAppendNext()},function(){return r._getMediaElementPosition()},function(e){r._triggerError(new c.AppendError(e))},this._logger);t.onAppendQueued.subscribe(this._onSegmentAppendQueued.dispatch),t.onAppendEnd.subscribe(function(e){var t;!x||(t=r.getMediaElement())&&r._isMediaElementPaused(t)&&r.isActuallyPlaying()&&(r._logger.debug("Calling play() on media element because we just appended something and should be playing."),r._callMediaElementPlay(t)),r._onSegmentAppendEnd.dispatch(e)}),(this._simpleMSE=t).start(),(this._mse=e).whenInitialized().catch(function(e){e!==a.killedError&&(r._logger.error("Error during mse initialization.",e),r._triggerError(new f.InitializeError(e)))})},e.prototype._getMediaElementPosition=function(){var e=this.getMediaElement();if(!e)throw new Error("No media element.");return 1e3*e.currentTime},e.prototype._whenPlaylistRetrieved=function(){var r=this,e=this._playlist;if(!e)throw new Error("Playlist should have been retrieved.");this._playlistUpdateEventHandle=e.onUpdated.subscribe(function(){r._updateLocalDurationsFromPlaylist(),r._handleDurationChange(),r._schedulePlaylistUpdate()});var t=!this._initialPlaylistRetrieveCompleted;if(t)this._initialPlaylistRetrieveCompleted=!0;else{var n=s(e);if(this._playlistDuration<n)return this._logger.error("The duration from the new playlist was less than the previous one."),void this._triggerError(new _.PlaylistUpdateError("The duration from the new playlist was less than the previous one.",{oldDuration:this._playlistDuration,newDuration:n}))}if(!this._transmuxerAndMimeType)throw new Error("Transmuxer should have been configured.");if(this._playlistSegmentRetriever)this._logger.debug("Switching playlist for playlist segment retriever."),this._playlistSegmentRetriever.switchPlaylist(e);else{var i=this._maxBufferLength;if(null===i)throw new Error("maxBufferLength should have been initiaized by now.");this._logger.debug("Creating playlist segment retriever.");var o=this._cacheSize;if(null===o)throw new Error("cacheSize should be set.");var a=new u.PlaylistSegmentRetriever({playlist:e,getPosition:function(){return r.getPosition()},maxBufferLength:i,cacheSize:o,transmuxer:this._transmuxerAndMimeType.transmuxer,logger:this._logger});a.onSegmentRequestQueued.subscribe(this._onSegmentRequestQueued.dispatch),a.onSegmentRequestStart.subscribe(this._onSegmentRequestStart.dispatch),a.onSegmentRetrieved.subscribe(this._onSegmentRetrieved.dispatch),a.onSegmentRequestFailed.subscribe(this._onSegmentRequestFailed.dispatch),(this._playlistSegmentRetriever=a).onError.subscribe(function(e){r._logger.error("Error from playlist segment retriever.",e),e instanceof u.retrievalErrors.RetrievalError?r._triggerError(new p.RetrievalError(e)):r._triggerError(new b("Unexpected error when trying to retrieve segment.",e))}),a.onSegmentDataRetrieveStarted.subscribe(function(e){var t=e.segment;r._logger.debug("Segment retrieve started.",t.getEventRepresentation()),r._findSegmentAndAppendToMSE(),r._updateLocalDurationsFromPlaylist(),r._handleDurationChange(),r._onSegmentReady.dispatch({segment:t.getEventRepresentation()})})}this._initialPlaylistRetrieveCompleted=!0,e.hasEnded()||this._schedulePlaylistUpdate(),this._updateLocalDurationsFromPlaylist(),this._update(function(){t&&r._html5PlayerReady&&d.prototype._signalReady.call(r),r._handleDurationChange()})},e.prototype._schedulePlaylistUpdate=function(){var e,t,r,n,i,o=this,a=this._playlist;if(!a)throw new Error("Playlist should exist.");this._playlistUpdateJob&&!this._playlistUpdateJob.hasCompleted()||(this._playlistUpdateTimer&&(window.clearTimeout(this._playlistUpdateTimer),this._playlistUpdateTimer=null),a.hasEnded())||(e=this.isPlaying()?a.getDuration()-this.getPosition()-1e4:1/0,t=a.getExpireTime(),r=t?m()-t:1/0,n=Math.max(0,this._earliestAllowedNextUpdateTime-m()),(i=Math.max(n,Math.min(e,r,a.getType()===u.PlaylistType.EVENT?1e4:1/0)))<1/0&&(this._earliestAllowedNextUpdateTime=m()+2e3,this._playlistUpdateTimer=window.setTimeout(function(){o._playlistUpdateTimer=null;var e=o._playlistUpdateJob=a.update();e.onError(function(e){e!==S&&(o._handlePlaylistUpdateError(e),o._schedulePlaylistUpdate())})},i)))},e.prototype._updateLocalDurationsFromPlaylist=function(){var e=this._playlist;if(!e)throw new Error("Missing playlist.");this._duration=s(e),this._playlistDuration=e.getDuration()},e.prototype._findSegmentAndAppendToMSE=function(){var e,t=this._simpleMSE;t&&t.waitingForSegmentData()&&((e=this._getSegmentDataToAppendNext())&&(this._logger.debug("Providing segment to SimpleMSE.",e.eventRepresentation),t.provideNextSegmentData(e)))},e.prototype._setPlaylist=function(e){var t=this;if(this._playlist)throw new Error("Playlist already exists.");this._playlist=e,this._playlistUpdateJob=this._playlist.update(),this._playlistUpdateJob.onCompletion(function(){t._logger.debug("Playlist retrieved."),t._whenPlaylistRetrieved()}),this._playlistUpdateJob.onError(function(e){e!==S&&t._handlePlaylistUpdateError(e)})},e.prototype._handlePlaylistUpdateError=function(e){this._logger.error("Error when retrieving playlist.",e),e instanceof u.retrievalErrors.RetrievalError?this._triggerError(new p.RetrievalError(e)):this._triggerError(new b("Unexpected error when retrieving playlist.",e))},e.prototype._getSegmentDataToAppendNext=function(){var e=this._lastSegmentAppended;this._logger.debug("Looking for segment to append next.",!!e);var t=this._playlistSegmentRetriever;if(!t)return this._logger.debug("No segment retriever."),null;if(e){var r=this._getSubsequentSegment(e);if(!r)return this._logger.debug("No segment found."),e.isFinalSegment()&&(this._logger.debug("The last segment we appended was the last one in the stream. Signalling EOS."),this._signalEOS()),null;var n=r.segment;return this._logger.debug("Found segment.",n.getEventRepresentation()),this._lastSegmentAppended=n,{data:r.dataRetrieveJob,eventRepresentation:n.getEventRepresentation()}}var i=this.getPosition(),r=y(t.getSegmentsWithData(),function(e){return e.segment.getTimeRange().containsTime(i)});if(!r)return this._logger.debug("No segment found.",i),null;var n=r.segment,o=r.dataRetrieveJob,a=this._firstSegmentOffset=i-n.getTimeRange().start,s=this.getMediaElement();if(!s)throw new Error("Media element should exist.");var u={data:o,eventRepresentation:n.getEventRepresentation()};if(!n.isFinalSegment())for(var l=n.getTimeRange().duration-a;l<1e3;){var c=this._getSubsequentSegment(n);if(!c)return this._logger.debug("Not enough segments to cover min append duration.",l),null;c.segment.isFinalSegment()?l=1/0:l+=c.segment.getTimeRange().duration}return this._logger.debug("Found initial segment.",n.getEventRepresentation()),this._lastSegmentAppended=n,this._onFirstSegmentRetrieved&&this._onFirstSegmentRetrieved(),u},e.prototype._getSubsequentSegment=function(e){var t=this._playlistSegmentRetriever;if(!t)return this._logger.debug("No segment retriever."),null;var r=t.getSegmentsWithData(),n=r[r.map(function(e){return e.segment.getSequenceNumber()}).indexOf(e.getSequenceNumber())+1];return n&&n.segment.getTimeRange().start===e.getTimeRange().end?n:null},e.prototype._signalEOS=function(){var t=this;this._logger.debug("Signalling EOS."),this._simpleMSE&&(this._simpleMSE.kill(),this._logger.debug("Killed SimpleMSE."),this._simpleMSE=null);var r=this._mse;r&&!r.eosSignalled()&&r.signalEOS().catch(function(e){if(r===t._mse){if("InvalidStateError"===e.name)return void t._logger.error("InvalidStateError occurred when signalling EOS.",e);t._logger.error("Error occurred when signalling EOS.",e),t._triggerError(new c.AppendError(e))}})},e}(o.HTML5PlayerBase);t.HLSMSEPlayer=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="29.0.0",t.buildNumber=1819;var n=r(14);t.HLSMSEPlayer=n.HLSMSEPlayer;var i=r(8);t.errors=i.errors;var o=r(7);t.retrievalErrors=o.retrievalErrors}]))},function(e,t,r){var n,i,o;window,e.exports=(n=r(2),i=r(8),o=r(9),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=38)}([function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.getCode=function(){return"GENERIC"},e}();t.RetrievalError=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isPartialMatch=function(e,t){return!(e.mimeType&&t.mimeType!==e.mimeType||e.audioCodec&&(!t.audioCodec||t.audioCodec.id!==e.audioCodec.id)||e.videoCodec&&(!t.videoCodec||t.videoCodec.id!==e.videoCodec.id))}},function(e,t){e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=r(0),f=r(5),p=r(21),g={rate:44100,id:3},_=g.rate;t.MP3ToMP4={getInputFormat:function(){return{mimeType:"audio/mpeg"}},getOutputFormat:function(){return{mimeType:"audio/mp4",audioCodec:{id:"mp3"}}},transmux:function(d){var e=new h.helpers.abortableJob.AbortableJob(function(){function t(){l.close(),c.flush()}function n(e){u=!0;try{t()}catch(e){}r.reject(e),d.abort()}var r=h.helpers.deferred.buildDeferred(),i=new h.eventDispatcher.EventDispatcher,o=[],a=!1,s=null,u=!1,l=new f.MP3Parser,c=new p.MP4Mux({audioTrackId:0,videoTrackId:-1,tracks:[{codecId:2,channels:2,samplerate:g.rate,samplesize:16,timescale:_}]});return c.ondata=function(e){u||(s?(o.push(e),i.dispatch({initData:s,data:e})):s=e)},l.onFrame=function(e){if(!u)try{var t=new Uint8Array(e.length+1),r=32;r|=g.id<<2,r|=2,r|=1,t[0]=r,t.set(e,1);c.pushPacket(8,t,0)}catch(e){n(e)}},d.onProgressUpdate(function(e){var t=e.data;!a&&e.initData&&(t=h.helpers.arrayBuffer.combine([e.initData,e.data])),a=!0;try{l.push(t)}catch(e){n(e)}}),d.onCompletion(function(e){try{t(),r.resolve(e)}catch(e){n(e)}}),d.onError(n),{result:r.promise,progressUpdates:{onProgressUpdate:i,getProgressSoFar:function(){return o.length?{initData:s,data:h.helpers.arrayBuffer.combine(o)}:null}},abort:function(){u=!0,d.abort(),t()}}});return e.run()}}},function(e,t,r){"use strict";function n(){this.buffer=null,this.bufferSize=0}t.__esModule=!0,t.MP3Parser=n;var g=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],_=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3];n.prototype.push=function(e){var t,r,n;t=0<this.bufferSize?(r=e.length+this.bufferSize,(!this.buffer||this.buffer.length<r)&&(n=new Uint8Array(r),0<this.bufferSize&&n.set(this.buffer.subarray(0,this.bufferSize)),this.buffer=n),this.buffer.set(e,this.bufferSize),this.bufferSize=r,e=this.buffer,r):e.length;for(var i,o=0;o<t&&0<(i=this._parse(e,o,t));)o+=i;var a=t-o;0<a&&(!this.buffer||this.buffer.length<a?this.buffer=new Uint8Array(e.subarray(o,t)):this.buffer.set(e.subarray(o,t))),this.bufferSize=a},n.prototype._parse=function(e,t,r){if(r<t+2)return-1;if(255===e[t]||224==(224&e[t+1])){if(r<t+24)return-1;var n=e[t+1]>>3&3,i=e[t+1]>>1&3,o=e[t+2]>>4&15,a=e[t+2]>>2&3,s=!!(2&e[t+2]);if(1!=n&&0!=o&&15!=o&&3!=a){var u=3==n?3-i:3==i?3:4,l=1e3*g[14*u+o-1],c=3==n?0:2==n?1:2,d=_[3*c+a],h=s?1:0,f=3==i?(3==n?12:6)*l/d+h<<2:(3==n?144:72)*l/d+h|0;return r<t+f?-1:(this.onFrame&&this.onFrame(new Uint8Array(e.subarray(t,t+f))),f)}}for(var p=t+2;p<r;){if(255===e[p-1]&&224==(224&e[p]))return this.onNoise&&this.onNoise(new Uint8Array(e.subarray(t,p-1))),p-t-1;p++}return-1},n.prototype.close=function(){0<this.bufferSize&&this.onNoise&&this.onNoise(new Uint8Array(this.buffer.subarray(0,this.bufferSize))),this.buffer=null,this.bufferSize=0,this.onClose&&this.onClose()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PassThrough={getInputFormat:function(){return{}},getOutputFormat:function(){return{}},transmux:function(e){return e}}},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return"NO_DECRYPTOR"},t}(i.RetrievalError);t.NoDecryptorError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=function(r){function e(e){var t=r.call(this)||this;return t._statusCode=e,t}return n(e,r),e.prototype.getStatusCode=function(){return this._statusCode},e.prototype.getCode=function(){return"UNACCEPTABLE_RESPONSE_STATUS_CODE"},e}(i.RetrievalError);t.UnacceptableResponseStatusCodeError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r){this._playlist=e,this._url=t,this._sequenceNumber=r}return e.prototype.getPlaylist=function(){return this._playlist},e.prototype.getUrl=function(){return this._url},e.prototype.getSequenceNumber=function(){return this._sequenceNumber},e}();t.Segment=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=function(r){function e(e){var t=r.call(this)||this;return t._code=e,t}return n(e,r),e.prototype.getCode=function(){return"OGG_PARSER."+this._code},e}(i.RetrievalError);t.OggParserError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._url=e}return e.prototype.getUrl=function(){return this._url},e}();t.Playlist=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._playlist=e,this._url=t}return e.prototype.getPlaylist=function(){return this._playlist},e.prototype.getUrl=function(){return this._url},e}();t.Key=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this._playlist=e,this._url=t}return e.prototype.getPlaylist=function(){return this._playlist},e.prototype.getUrl=function(){return this._url},e}();t.InitData=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(13),i=r(12),o=r(11),a=r(9);!function(e){e.InitData=n.InitData,e.Key=i.Key,e.Playlist=o.Playlist,e.Segment=a.Segment}(t.events||(t.events={}))},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.getCode=function(){return"UNSUPPORTED_ENCRYPTION_ERROR"},t}(i.RetrievalError);t.UnsupportedEncryptionError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=function(r){function e(e){var t=r.call(this)||this;return t._details=e,t}return n(e,r),e.prototype.getDetails=function(){return this._details},e.prototype.getCode=function(){return"PLAYLIST_PARSE"},e}(i.RetrievalError);t.PlaylistParseError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),i=r(16),o=r(10),a=r(1),s=r(8),u=r(15);!function(e){e.NoDecryptorError=n.NoDecryptorError,e.PlaylistParseError=i.PlaylistParseError,e.OggParserError=o.OggParserError,e.RetrievalError=a.RetrievalError,e.UnacceptableResponseStatusCodeError=s.UnacceptableResponseStatusCodeError,e.UnsupportedEncryptionError=u.UnsupportedEncryptionError}(t.retrievalErrors||(t.retrievalErrors={}))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=r(0);t.MP4ToMP4={getInputFormat:function(){return{mimeType:"audio/mp4"}},getOutputFormat:function(){return{mimeType:"audio/mp4"}},transmux:function(r){var e=new d.helpers.abortableJob.AbortableJob(function(){function i(e){t.reject(e),r.abort()}var t=d.helpers.deferred.buildDeferred(),o=new d.eventDispatcher.EventDispatcher,a=[],s=[],u=new Uint8Array(0),n=null,l=!1,c=function(e){if(e.byteLength<4)u=e;else{if(null===n){var t=new DataView(e.buffer).getUint32(0);if(1===t)throw new Error("Large atom size not supported.");n=t}var r;0!==n&&e.byteLength>=n?(r=new Uint8Array(e.buffer.slice(0,n)),s.push(r),u=new Uint8Array(e.buffer.slice(n)),n=null,c(u)):u=e}};return r.onProgressUpdate(function(e){var t=e.data;!l&&e.initData&&(t=d.helpers.arrayBuffer.combine([e.initData,e.data])),l=!0;try{var r,n=d.helpers.arrayBuffer.combine([u,t]);c(n),s.length&&(r=d.helpers.arrayBuffer.combine(s),s.splice(0),a.push(r),o.dispatch({data:r}))}catch(e){i(e)}}),r.onCompletion(function(e){try{if(0===n)a.push(u),o.dispatch({data:u});else if(u.byteLength)throw new Error("Part way through an atom.");t.resolve(e)}catch(e){i(e)}}),r.onError(i),{result:t.promise,progressUpdates:{onProgressUpdate:o,getProgressSoFar:function(){return a.length?{data:d.helpers.arrayBuffer.combine(a)}:null}},abort:function(){r.abort()}}});return e.run()}}},function(e,t){e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var _=r(0),y=r(3),v=r(19);t.OggOpusToWebm={getInputFormat:function(){return{mimeType:"audio/ogg",audioCodec:{id:"opus"}}},getOutputFormat:function(){return{mimeType:"audio/webm",audioCodec:{id:"opus"}}},transmux:function(r){var e=new _.helpers.abortableJob.AbortableJob(function(){function u(e){g=!0,t.reject(e),r.abort()}var t=_.helpers.deferred.buildDeferred(),l=new _.eventDispatcher.EventDispatcher,c=[],d=null,h=new Uint8Array(0),f=!1,p=null,g=!1;return r.onProgressUpdate(function(e){if(!g){var t=[h,e.data];!f&&e.initData&&(t=[e.initData].concat(t)),f=!0;var r=_.helpers.arrayBuffer.combine(t);try{var n=y.retrievePages(r).pages,i=n.reduce(function(e,t){return e+t.entirePage.byteLength},0);h=new Uint8Array(r.buffer.slice(i));var o,a=y.retrievePackets(n);if(a.length&&!d){if(a.length<2)throw new Error("Expecting at least 2 opus packets.");var s=v.parseOpusHead(a[0]);-2<s.outputGain&&v.setOutputGain(a[0],-2),d=[a[0],a[1]],a=a.slice(2)}a.length&&d&&(c.push.apply(c,a),o=v.buildWebm(d.concat(a)),p=p||o.initData,l.dispatch({initData:p,data:o.data}))}catch(e){u(e)}}}),r.onCompletion(function(e){h.byteLength?t.reject(new Error("Still data left in buffer.")):t.resolve(e)}),r.onError(u),{result:t.promise,progressUpdates:{onProgressUpdate:l,getProgressSoFar:function(){if(c.length&&d){var e=v.buildWebm(d.concat(c)).data;return{initData:p,data:e}}return null}},abort:function(){g=!0,r.abort()}}});return e.run()}}},function(e,t,r){"use strict";t.__esModule=!0;var n,J,Q=function(e,t){function r(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)};!function(e){!function(e){e.utf8decode=function(e){for(var t=new Uint8Array(4*e.length),r=0,n=0,i=e.length;n<i;n++){var o,a=e.charCodeAt(n);a<=127?t[r++]=a:(55296<=a&&a<=56319&&(56320<=(o=e.charCodeAt(n+1))&&o<=57343&&(a=((1023&a)<<10)+(1023&o)+65536,++n)),0!=(4292870144&a)?(t[r++]=248|a>>>24&3,t[r++]=128|a>>>18&63,t[r++]=128|a>>>12&63,t[r++]=128|a>>>6&63):0!=(4294901760&a)?(t[r++]=240|a>>>18&7,t[r++]=128|a>>>12&63,t[r++]=128|a>>>6&63):0!=(4294965248&a)?(t[r++]=224|a>>>12&15,t[r++]=128|a>>>6&63):t[r++]=192|a>>>6&31,t[r++]=128|63&a)}return t.subarray(0,r)},e.utf8encode=function(e){for(var t=0,r="";t<e.length;){var n=255&e[t++];if(n<=127)r+=String.fromCharCode(n);else{var i=192,o=5;do{if((n&(i>>1|128))===i)break;i=i>>1|128,--o}while(0<=o);if(o<=0)throw new Error("Invalid UTF8 character");for(var a=n&(1<<o)-1,s=5;o<=s;--s){var u=e[t++];if(128!=(192&u))throw new Error("Invalid UTF8 character sequence");a=a<<6|63&u}r+=65536<=a?String.fromCharCode(a-65536>>10&1023|55296,1023&a|56320):String.fromCharCode(a)}}return r}}(e.StringUtilities||(e.StringUtilities={}))}(J=J||{}),function(e){!function(L){function w(e){for(var t=e.length>>1,r=new Uint8Array(t),n=0;n<t;n++)r[n]=parseInt(e.substr(2*n,2),16);return r}var h,f=[5500,11025,22050,44100],p=["PCM","ADPCM","MP3","PCM le","Nellymouser16","Nellymouser8","Nellymouser","G.711 A-law","G.711 mu-law",null,"AAC","Speex","MP3 8khz"];!function(e){e[e.HEADER=0]="HEADER",e[e.RAW=1]="RAW"}(h=h||{});var N,s,u=[null,"JPEG","Sorenson","Screen","VP6","VP6 alpha","Screen2","AVC"];!function(e){e[e.KEY=1]="KEY",e[e.INNER=2]="INNER",e[e.DISPOSABLE=3]="DISPOSABLE",e[e.GENERATED=4]="GENERATED",e[e.INFO=5]="INFO"}(N=N||{}),function(e){e[e.HEADER=0]="HEADER",e[e.NALU=1]="NALU",e[e.END=2]="END"}(s=s||{});var S;!function(e){e[e.CAN_GENERATE_HEADER=0]="CAN_GENERATE_HEADER",e[e.NEED_HEADER_DATA=1]="NEED_HEADER_DATA",e[e.MAIN_PACKETS=2]="MAIN_PACKETS"}(S=S||{});var e=function(){function e(e){var n=this;this.oncodecinfo=function(e){},this.ondata=function(e){throw new Error("MP4Mux.ondata is not set")},this.metadata=e,this.trackStates=this.metadata.tracks.map(function(e,t){var r={trackId:t+1,trackInfo:e,cachedDuration:0,samplesProcessed:0,initializationData:[]};return n.metadata.audioTrackId===t&&(n.audioTrackState=r),n.metadata.videoTrackId===t&&(n.videoTrackState=r),r},this),this._checkIfNeedHeaderData(),this.filePos=0,this.cachedPackets=[],this.chunkIndex=0}return e.prototype.pushPacket=function(e,t,r){switch(this.state===S.CAN_GENERATE_HEADER&&this._tryGenerateHeader(),e){case 8:var n=this.audioTrackState,i=function(e){var t,r=0,n=h.RAW,i=e[r],o=i>>4,a=i>>2&3,s=2&i?16:8,u=1&i?2:1;switch(r++,o){case 10:var l=e[r++];n=l,t=1024;break;case 2:var c=e[r+1]>>3&3,d=e[r+1]>>1&3;t=1==d?3==c?1152:576:3==d?384:1152}return{codecDescription:p[o],codecId:o,data:e.subarray(r),rate:f[a],size:s,channels:u,samples:t,packetType:n}}(t);if(!n||n.trackInfo.codecId!==i.codecId)throw new Error("Unexpected audio packet codec: "+i.codecDescription);switch(i.codecId){default:throw new Error("Unsupported audio codec: "+i.codecDescription);case 2:break;case 10:if(i.packetType===h.HEADER)return void n.initializationData.push(i.data)}this.cachedPackets.push({packet:i,timestamp:r,trackId:n.trackId});break;case 9:var o=this.videoTrackState,a=function(e){var t=0,r=e[t]>>4,n=15&e[t];t++;var i={frameType:r,codecId:n,codecDescription:u[n]};switch(n){case 7:var o=e[t++];i.packetType=o,i.compositionTime=(e[t]<<24|e[t+1]<<16|e[t+2]<<8)>>8,t+=3;break;case 4:i.packetType=s.NALU,i.horizontalOffset=e[t]>>4&15,i.verticalOffset=15&e[t],i.compositionTime=0,t++}return i.data=e.subarray(t),i}(t);if(!o||o.trackInfo.codecId!==a.codecId)throw new Error("Unexpected video packet codec: "+a.codecDescription);switch(a.codecId){default:throw new Error("unsupported video codec: "+a.codecDescription);case 4:break;case 7:if(a.packetType===s.HEADER)return void o.initializationData.push(a.data)}this.cachedPackets.push({packet:a,timestamp:r,trackId:o.trackId});break;default:throw new Error("unknown packet type: "+e)}this.state===S.NEED_HEADER_DATA&&this._tryGenerateHeader(),50<=this.cachedPackets.length&&this.state===S.MAIN_PACKETS&&this._chunk()},e.prototype.flush=function(){0<this.cachedPackets.length&&this._chunk()},e.prototype._checkIfNeedHeaderData=function(){this.trackStates.some(function(e){return 10===e.trackInfo.codecId||7===e.trackInfo.codecId})?this.state=S.NEED_HEADER_DATA:this.state=S.CAN_GENERATE_HEADER},e.prototype._tryGenerateHeader=function(){var e=this.trackStates.every(function(e){switch(e.trackInfo.codecId){case 10:case 7:return 0<e.initializationData.length;default:return!0}});if(e){for(var t=["isom"],r=[],n=0;n<this.trackStates.length;n++){var i,o=this.trackStates[n],a=o.trackInfo;switch(a.codecId){case 10:var s=o.initializationData[0];i=new L.Iso.AudioSampleEntry("mp4a",1,a.channels,a.samplesize,a.samplerate);var u=new Uint8Array(41+s.length);u.set(w("0000000003808080"),0),u[8]=32+s.length,u.set(w("00020004808080"),9),u[16]=18+s.length,u.set(w("40150000000000FA000000000005808080"),17),u[34]=s.length,u.set(s,35),u.set(w("068080800102"),35+s.length),i.otherBoxes=[new L.Iso.RawTag("esds",u)];var l=s[0]>>3;o.mimeTypeCodec="mp4a.40."+l;break;case 2:i=new L.Iso.AudioSampleEntry(".mp3",1,a.channels,a.samplesize,a.samplerate),o.mimeTypeCodec="mp3";break;case 7:var c=o.initializationData[0];(i=new L.Iso.VideoSampleEntry("avc1",1,a.width,a.height)).otherBoxes=[new L.Iso.RawTag("avcC",c)];var d=c[1]<<16|c[2]<<8|c[3];o.mimeTypeCodec="avc1."+(16777216|d).toString(16).substr(1),t.push("iso2","avc1","mp41");break;case 4:(i=new L.Iso.VideoSampleEntry("VP6F",1,a.width,a.height)).otherBoxes=[new L.Iso.RawTag("glbl",w("00"))],o.mimeTypeCodec="avc1.42001E";break;default:throw new Error("not supported track type")}var h,f=L.Iso.TrackHeaderFlags.TRACK_ENABLED|L.Iso.TrackHeaderFlags.TRACK_IN_MOVIE;o===this.audioTrackState?h=new L.Iso.TrackBox(new L.Iso.TrackHeaderBox(f,o.trackId,-1,0,0,1,n),new L.Iso.MediaBox(new L.Iso.MediaHeaderBox(a.timescale,-1,a.language),new L.Iso.HandlerBox("soun","SoundHandler"),new L.Iso.MediaInformationBox(new L.Iso.SoundMediaHeaderBox,new L.Iso.DataInformationBox(new L.Iso.DataReferenceBox([new L.Iso.DataEntryUrlBox(L.Iso.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new L.Iso.SampleTableBox(new L.Iso.SampleDescriptionBox([i]),new L.Iso.RawTag("stts",w("0000000000000000")),new L.Iso.RawTag("stsc",w("0000000000000000")),new L.Iso.RawTag("stsz",w("000000000000000000000000")),new L.Iso.RawTag("stco",w("0000000000000000")))))):o===this.videoTrackState&&(h=new L.Iso.TrackBox(new L.Iso.TrackHeaderBox(f,o.trackId,-1,a.width,a.height,0,n),new L.Iso.MediaBox(new L.Iso.MediaHeaderBox(a.timescale,-1,a.language),new L.Iso.HandlerBox("vide","VideoHandler"),new L.Iso.MediaInformationBox(new L.Iso.VideoMediaHeaderBox,new L.Iso.DataInformationBox(new L.Iso.DataReferenceBox([new L.Iso.DataEntryUrlBox(L.Iso.SELF_CONTAINED_DATA_REFERENCE_FLAG)])),new L.Iso.SampleTableBox(new L.Iso.SampleDescriptionBox([i]),new L.Iso.RawTag("stts",w("0000000000000000")),new L.Iso.RawTag("stsc",w("0000000000000000")),new L.Iso.RawTag("stsz",w("000000000000000000000000")),new L.Iso.RawTag("stco",w("0000000000000000"))))))),r.push(h)}var p=new L.Iso.MovieExtendsBox(null,[new L.Iso.TrackExtendsBox(1,1,0,0,0),new L.Iso.TrackExtendsBox(2,1,0,0,0)],null),g=new L.Iso.BoxContainerBox("udat",[new L.Iso.MetaBox(new L.Iso.RawTag("hdlr",w("00000000000000006D6469726170706C000000000000000000")),[new L.Iso.RawTag("ilst",w("00000025A9746F6F0000001D6461746100000001000000004C61766635342E36332E313034"))])]),_=new L.Iso.MovieHeaderBox(1e3,0,this.trackStates.length+1),y=new L.Iso.MovieBox(_,r,p,g),v=new L.Iso.FileTypeBox("isom",512,t),m=v.layout(0),b=y.layout(m),E=new Uint8Array(m+b);v.write(E),y.write(E),this.oncodecinfo(this.trackStates.map(function(e){return e.mimeTypeCodec})),this.ondata(E),this.filePos+=E.length,this.state=S.MAIN_PACKETS}},e.prototype._chunk=function(){var e=this.cachedPackets;if(this.videoTrackState){for(var t=e.length-1,r=this.videoTrackState.trackId;0<t&&(e[t].trackId!==r||e[t].packet.frameType!==N.KEY);)t--;0<t&&(e=e.slice(0,t))}if(0!==e.length){for(var n=[],i=0,o=[],a=[],s=0;s<this.trackStates.length;s++){var u=this.trackStates[s],l=u.trackInfo,c=u.trackId,d=e.filter(function(e){return e.trackId===c});if(0!==d.length){var h,f,p,g=new L.Iso.TrackFragmentBaseMediaDecodeTimeBox(u.cachedDuration);switch(a.push(i),l.codecId){case 10:case 2:p=[];for(var t=0;t<d.length;t++){var _=d[t].packet,y=Math.round(_.samples*l.timescale/l.samplerate);n.push(_.data),i+=_.data.length,p.push({duration:y,size:_.data.length}),u.samplesProcessed+=_.samples}var v=L.Iso.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;h=new L.Iso.TrackFragmentHeaderBox(v,c,0,0,0,0,L.Iso.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var m=L.Iso.TrackRunFlags.DATA_OFFSET_PRESENT|L.Iso.TrackRunFlags.SAMPLE_DURATION_PRESENT|L.Iso.TrackRunFlags.SAMPLE_SIZE_PRESENT;f=new L.Iso.TrackRunBox(m,p,0,0),u.cachedDuration=Math.round(u.samplesProcessed*l.timescale/l.samplerate);break;case 7:case 4:p=[];for(var b=u.samplesProcessed,E=b*l.timescale/l.framerate,w=Math.round(E),t=0;t<d.length;t++){var S=d[t].packet;b++;var P=Math.round(b*l.timescale/l.framerate),x=P-w;w=P;var A=Math.round(b*l.timescale/l.framerate+S.compositionTime*l.timescale/1e3);n.push(S.data),i+=S.data.length;var R=S.frameType===N.KEY?L.Iso.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS:L.Iso.SampleFlags.SAMPLE_DEPENDS_ON_OTHER|L.Iso.SampleFlags.SAMPLE_IS_NOT_SYNC;p.push({duration:x,size:S.data.length,flags:R,compositionTimeOffset:A-P})}var v=L.Iso.TrackFragmentFlags.DEFAULT_SAMPLE_FLAGS_PRESENT;h=new L.Iso.TrackFragmentHeaderBox(v,c,0,0,0,0,L.Iso.SampleFlags.SAMPLE_DEPENDS_ON_NO_OTHERS);var m=L.Iso.TrackRunFlags.DATA_OFFSET_PRESENT|L.Iso.TrackRunFlags.SAMPLE_DURATION_PRESENT|L.Iso.TrackRunFlags.SAMPLE_SIZE_PRESENT|L.Iso.TrackRunFlags.SAMPLE_FLAGS_PRESENT|L.Iso.TrackRunFlags.SAMPLE_COMPOSITION_TIME_OFFSET;f=new L.Iso.TrackRunBox(m,p,0,0),u.cachedDuration=w,u.samplesProcessed=b;break;default:throw new Error("Un codec")}var T=new L.Iso.TrackFragmentBox(h,g,f);o.push(T)}}this.cachedPackets.splice(0,e.length);for(var C=new L.Iso.MovieFragmentHeaderBox(++this.chunkIndex),O=new L.Iso.MovieFragmentBox(C,o),k=O.layout(0),D=new L.Iso.MediaDataBox(n),M=D.layout(k),I=k+8,s=0;s<o.length;s++)o[s].run.dataOffset=I+a[s];var F=new Uint8Array(k+M);O.write(F),D.write(F),this.ondata(F),this.filePos+=F.length}},e}();L.MP4Mux=e,L.parseFLVMetadata=function(e){var t,r,n=[],i=-1,o=-1,a=+e.asGetPublicProperty("duration"),s=e.asGetPublicProperty("audiocodecid");switch(s){case 2:case"mp3":t="mp3",r=2;break;case 10:case"mp4a":t="mp4a",r=10;break;default:if(!isNaN(s))throw new Error("Unsupported audio codec: "+s);t=null,r=-1}var u,l,c=e.asGetPublicProperty("videocodecid");switch(c){case 4:case"vp6f":u="vp6f",l=4;break;case 7:case"avc1":u="avc1",l=7;break;default:if(!isNaN(c))throw new Error("Unsupported video codec: "+c);u=null,l=-1}var d=null===t?null:{codecDescription:t,codecId:r,language:"und",timescale:+e.asGetPublicProperty("audiosamplerate")||44100,samplerate:+e.asGetPublicProperty("audiosamplerate")||44100,channels:+e.asGetPublicProperty("audiochannels")||2,samplesize:16},h=null===u?null:{codecDescription:u,codecId:l,language:"und",timescale:6e4,framerate:+e.asGetPublicProperty("videoframerate")||+e.asGetPublicProperty("framerate"),width:+e.asGetPublicProperty("width"),height:+e.asGetPublicProperty("height")},f=e.asGetPublicProperty("trackinfo");if(f)for(var p=0;p<f.length;p++){var g=f[p],_=g.asGetPublicProperty("sampledescription")[0];_.asGetPublicProperty("sampletype")===s?(d.language=g.asGetPublicProperty("language"),d.timescale=+g.asGetPublicProperty("timescale")):_.asGetPublicProperty("sampletype")===c&&(h.language=g.asGetPublicProperty("language"),h.timescale=+g.asGetPublicProperty("timescale"))}return h&&(o=n.length,n.push(h)),d&&(i=n.length,n.push(d)),{tracks:n,duration:a,audioTrackId:i,videoTrackId:o}},L.splitMetadata=function(e){var t=[];return 0<=e.audioTrackId&&t.push({tracks:[e.tracks[e.audioTrackId]],duration:e.duration,audioTrackId:0,videoTrackId:-1}),0<=e.videoTrackId&&t.push({tracks:[e.tracks[e.videoTrackId]],duration:e.duration,audioTrackId:-1,videoTrackId:0}),t}}(e.MP4||(e.MP4={}))}(n=n||{}),function(e){!function(e){!function(h){function a(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Array.prototype.concat.apply(e,t)}function c(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r}function o(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}function r(e){return(e-f)/1e3|0}function n(e){return 65536*e|0}function i(e){return 1073741824*e|0}function s(e){return 256*e|0}var u=J.StringUtilities.utf8decode,f=-20828448e5,p=[1,0,0,0,1,0,0,0,1],l=[0,0,0],e=function(){function e(e,t){"uuid"===(this.boxtype=e)&&(this.userType=t)}return e.prototype.layout=function(e){this.offset=e;var t=8;return this.userType&&(t+=16),this.size=t},e.prototype.write=function(e){return c(e,this.offset,this.size),c(e,this.offset+4,o(this.boxtype)),this.userType?(e.set(this.userType,this.offset+8),24):8},e.prototype.toUint8Array=function(){var e=this.layout(0),t=new Uint8Array(e);return this.write(t),t},e}(),t=function(i){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=0);var n=i.call(this,e)||this;return n.version=t,n.flags=r,n}return Q(e,i),e.prototype.layout=function(e){return this.size=i.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var t=i.prototype.write.call(this,e);return c(e,this.offset+t,this.version<<24|this.flags),t+4},e}(h.Box=e);h.FullBox=t;var d=function(i){function e(e,t,r){var n=i.call(this,"ftype")||this;return n.majorBrand=e,n.minorVersion=t,n.compatibleBrands=r,n}return Q(e,i),e.prototype.layout=function(e){return this.size=i.prototype.layout.call(this,e)+4*(2+this.compatibleBrands.length),this.size},e.prototype.write=function(t){var r=this,n=i.prototype.write.call(this,t);return c(t,this.offset+n,o(this.majorBrand)),c(t,this.offset+n+4,this.minorVersion),n+=8,this.compatibleBrands.forEach(function(e){c(t,r.offset+n,o(e)),n+=4},this),n},e}(e);h.FileTypeBox=d;var g=function(n){function e(e,t){var r=n.call(this,e)||this;return r.children=t,r}return Q(e,n),e.prototype.layout=function(t){var r=n.prototype.layout.call(this,t);return this.children.forEach(function(e){e&&(r+=e.layout(t+r))}),this.size=r},e.prototype.write=function(t){var r=n.prototype.write.call(this,t);return this.children.forEach(function(e){e&&(r+=e.write(t))}),r},e}(e),_=function(o){function e(e,t,r,n){var i=o.call(this,"moov",a([e],t,[r,n]))||this;return i.header=e,i.tracks=t,i.extendsBox=r,i.userData=n,i}return Q(e,o),e}(h.BoxContainerBox=g);h.MovieBox=_;var y=function(l){function e(e,t,r,n,i,o,a,s){void 0===n&&(n=1),void 0===i&&(i=1),void 0===o&&(o=p),void 0===a&&(a=f),void 0===s&&(s=f);var u=l.call(this,"mvhd",0,0)||this;return u.timescale=e,u.duration=t,u.nextTrackId=r,u.rate=n,u.volume=i,u.matrix=o,u.creationTime=a,u.modificationTime=s,u}return Q(e,l),e.prototype.layout=function(e){return this.size=l.prototype.layout.call(this,e)+16+4+2+2+8+36+24+4,this.size},e.prototype.write=function(e){var t=l.prototype.write.call(this,e);return c(e,this.offset+t,r(this.creationTime)),c(e,this.offset+t+4,r(this.modificationTime)),c(e,this.offset+t+8,this.timescale),c(e,this.offset+t+12,this.duration),t+=16,c(e,this.offset+t,n(this.rate)),c(e,this.offset+t+4,s(this.volume)<<16),c(e,this.offset+t+8,0),c(e,this.offset+t+12,0),t+=16,c(e,this.offset+t,n(this.matrix[0])),c(e,this.offset+t+4,n(this.matrix[1])),c(e,this.offset+t+8,n(this.matrix[2])),c(e,this.offset+t+12,n(this.matrix[3])),c(e,this.offset+t+16,n(this.matrix[4])),c(e,this.offset+t+20,n(this.matrix[5])),c(e,this.offset+t+24,i(this.matrix[6])),c(e,this.offset+t+28,i(this.matrix[7])),c(e,this.offset+t+32,i(this.matrix[8])),t+=36,c(e,this.offset+t,0),c(e,this.offset+t+4,0),c(e,this.offset+t+8,0),c(e,this.offset+t+12,0),c(e,this.offset+t+16,0),c(e,this.offset+t+20,0),t+=24,c(e,this.offset+t,this.nextTrackId),t+=4},e}(t);h.MovieHeaderBox=y,function(e){e[e.TRACK_ENABLED=1]="TRACK_ENABLED",e[e.TRACK_IN_MOVIE=2]="TRACK_IN_MOVIE",e[e.TRACK_IN_PREVIEW=4]="TRACK_IN_PREVIEW"}(h.TrackHeaderFlags||(h.TrackHeaderFlags={}));var v=function(h){function e(e,t,r,n,i,o,a,s,u,l,c){void 0===a&&(a=0),void 0===s&&(s=0),void 0===u&&(u=p),void 0===l&&(l=f),void 0===c&&(c=f);var d=h.call(this,"tkhd",0,e)||this;return d.trackId=t,d.duration=r,d.width=n,d.height=i,d.volume=o,d.alternateGroup=a,d.layer=s,d.matrix=u,d.creationTime=l,d.modificationTime=c,d}return Q(e,h),e.prototype.layout=function(e){return this.size=h.prototype.layout.call(this,e)+20+8+6+2+36+8,this.size},e.prototype.write=function(e){var t=h.prototype.write.call(this,e);return c(e,this.offset+t,r(this.creationTime)),c(e,this.offset+t+4,r(this.modificationTime)),c(e,this.offset+t+8,this.trackId),c(e,this.offset+t+12,0),c(e,this.offset+t+16,this.duration),t+=20,c(e,this.offset+t,0),c(e,this.offset+t+4,0),c(e,this.offset+t+8,this.layer<<16|this.alternateGroup),c(e,this.offset+t+12,s(this.volume)<<16),t+=16,c(e,this.offset+t,n(this.matrix[0])),c(e,this.offset+t+4,n(this.matrix[1])),c(e,this.offset+t+8,n(this.matrix[2])),c(e,this.offset+t+12,n(this.matrix[3])),c(e,this.offset+t+16,n(this.matrix[4])),c(e,this.offset+t+20,n(this.matrix[5])),c(e,this.offset+t+24,i(this.matrix[6])),c(e,this.offset+t+28,i(this.matrix[7])),c(e,this.offset+t+32,i(this.matrix[8])),t+=36,c(e,this.offset+t,n(this.width)),c(e,this.offset+t+4,n(this.height)),t+=8},e}(t);h.TrackHeaderBox=v;var m=function(a){function e(e,t,r,n,i){void 0===r&&(r="unk"),void 0===n&&(n=f),void 0===i&&(i=f);var o=a.call(this,"mdhd",0,0)||this;return o.timescale=e,o.duration=t,o.language=r,o.creationTime=n,o.modificationTime=i,o}return Q(e,a),e.prototype.layout=function(e){return this.size=a.prototype.layout.call(this,e)+16+4,this.size},e.prototype.write=function(e){var t=a.prototype.write.call(this,e);return c(e,this.offset+t,r(this.creationTime)),c(e,this.offset+t+4,r(this.modificationTime)),c(e,this.offset+t+8,this.timescale),c(e,this.offset+t+12,this.duration),c(e,this.offset+t+16,function(e){return(31&e.charCodeAt(0))<<10|(31&e.charCodeAt(1))<<5|31&e.charCodeAt(2)}(this.language)<<16),t+20},e}(t);h.MediaHeaderBox=m;var b=function(n){function e(e,t){var r=n.call(this,"hdlr",0,0)||this;return r.handlerType=e,r.name=t,r._encodedName=u(r.name),r}return Q(e,n),e.prototype.layout=function(e){return this.size=n.prototype.layout.call(this,e)+8+12+(this._encodedName.length+1),this.size},e.prototype.write=function(e){var t=n.prototype.write.call(this,e);return c(e,this.offset+t,0),c(e,this.offset+t+4,o(this.handlerType)),c(e,this.offset+t+8,0),c(e,this.offset+t+12,0),c(e,this.offset+t+16,0),t+=20,e.set(this._encodedName,this.offset+t),e[this.offset+t+this._encodedName.length]=0,t+=this._encodedName.length+1},e}(t);h.HandlerBox=b;var E=function(r){function e(e){void 0===e&&(e=0);var t=r.call(this,"smhd",0,0)||this;return t.balance=e,t}return Q(e,r),e.prototype.layout=function(e){return this.size=r.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var t=r.prototype.write.call(this,e);return c(e,this.offset+t,s(this.balance)<<16),t+4},e}(t);h.SoundMediaHeaderBox=E;var w=function(n){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=l);var r=n.call(this,"vmhd",0,0)||this;return r.graphicsMode=e,r.opColor=t,r}return Q(e,n),e.prototype.layout=function(e){return this.size=n.prototype.layout.call(this,e)+8,this.size},e.prototype.write=function(e){var t=n.prototype.write.call(this,e);return c(e,this.offset+t,this.graphicsMode<<16|this.opColor[0]),c(e,this.offset+t+4,this.opColor[1]<<16|this.opColor[2]),t+8},e}(t);h.VideoMediaHeaderBox=w,h.SELF_CONTAINED_DATA_REFERENCE_FLAG=1;var S=function(n){function e(e,t){void 0===t&&(t=null);var r=n.call(this,"url ",0,e)||this;return r.location=t,e&h.SELF_CONTAINED_DATA_REFERENCE_FLAG||(r._encodedLocation=u(t)),r}return Q(e,n),e.prototype.layout=function(e){var t=n.prototype.layout.call(this,e);return this._encodedLocation&&(t+=this._encodedLocation.length+1),this.size=t},e.prototype.write=function(e){var t=n.prototype.write.call(this,e);return this._encodedLocation&&(e.set(this._encodedLocation,this.offset+t),e[this.offset+t+this._encodedLocation.length]=0,t+=this._encodedLocation.length),t},e}(t);h.DataEntryUrlBox=S;var P=function(n){function e(e){var t=n.call(this,"dref",0,0)||this;return t.entries=e,t}return Q(e,n),e.prototype.layout=function(t){var r=n.prototype.layout.call(this,t)+4;return this.entries.forEach(function(e){r+=e.layout(t+r)}),this.size=r},e.prototype.write=function(t){var r=n.prototype.write.call(this,t);return c(t,this.offset+r,this.entries.length),this.entries.forEach(function(e){r+=e.write(t)}),r},e}(t);h.DataReferenceBox=P;var x=function(r){function e(e){var t=r.call(this,"dinf",[e])||this;return t.dataReference=e,t}return Q(e,r),e}(g);h.DataInformationBox=x;var A=function(n){function e(e){var t=n.call(this,"stsd",0,0)||this;return t.entries=e,t}return Q(e,n),e.prototype.layout=function(t){var r=n.prototype.layout.call(this,t);return r+=4,this.entries.forEach(function(e){r+=e.layout(t+r)}),this.size=r},e.prototype.write=function(t){var r=n.prototype.write.call(this,t);return c(t,this.offset+r,this.entries.length),r+=4,this.entries.forEach(function(e){r+=e.write(t)}),r},e}(t);h.SampleDescriptionBox=A;var R=function(a){function e(e,t,r,n,i){var o=a.call(this,"stbl",[e,t,r,n,i])||this;return o.sampleDescriptions=e,o.timeToSample=t,o.sampleToChunk=r,o.sampleSizes=n,o.chunkOffset=i,o}return Q(e,a),e}(g);h.SampleTableBox=R;var T=function(i){function e(e,t,r){var n=i.call(this,"minf",[e,t,r])||this;return n.header=e,n.info=t,n.sampleTable=r,n}return Q(e,i),e}(g);h.MediaInformationBox=T;var C=function(i){function e(e,t,r){var n=i.call(this,"mdia",[e,t,r])||this;return n.header=e,n.handler=t,n.info=r,n}return Q(e,i),e}(g);h.MediaBox=C;var O=function(n){function e(e,t){var r=n.call(this,"trak",[e,t])||this;return r.header=e,r.media=t,r}return Q(e,n),e}(g);h.TrackBox=O;var k=function(a){function e(e,t,r,n,i){var o=a.call(this,"trex",0,0)||this;return o.trackId=e,o.defaultSampleDescriptionIndex=t,o.defaultSampleDuration=r,o.defaultSampleSize=n,o.defaultSampleFlags=i,o}return Q(e,a),e.prototype.layout=function(e){return this.size=a.prototype.layout.call(this,e)+20,this.size},e.prototype.write=function(e){var t=a.prototype.write.call(this,e);return c(e,this.offset+t,this.trackId),c(e,this.offset+t+4,this.defaultSampleDescriptionIndex),c(e,this.offset+t+8,this.defaultSampleDuration),c(e,this.offset+t+12,this.defaultSampleSize),c(e,this.offset+t+16,this.defaultSampleFlags),t+20},e}(t);h.TrackExtendsBox=k;var D=function(i){function e(e,t,r){var n=i.call(this,"mvex",a([e],t,[r]))||this;return n.header=e,n.tracDefaults=t,n.levels=r,n}return Q(e,i),e}(g);h.MovieExtendsBox=D;var M=function(n){function e(e,t){var r=n.call(this,"meta",0,0)||this;return r.handler=e,r.otherBoxes=t,r}return Q(e,n),e.prototype.layout=function(t){var r=n.prototype.layout.call(this,t);return r+=this.handler.layout(t+r),this.otherBoxes.forEach(function(e){r+=e.layout(t+r)}),this.size=r},e.prototype.write=function(t){var r=n.prototype.write.call(this,t);return r+=this.handler.write(t),this.otherBoxes.forEach(function(e){r+=e.write(t)}),r},e}(t);h.MetaBox=M;var I,F=function(r){function e(e){var t=r.call(this,"mfhd",0,0)||this;return t.sequenceNumber=e,t}return Q(e,r),e.prototype.layout=function(e){return this.size=r.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var t=r.prototype.write.call(this,e);return c(e,this.offset+t,this.sequenceNumber),t+4},e}(t);h.MovieFragmentHeaderBox=F,function(e){e[e.BASE_DATA_OFFSET_PRESENT=1]="BASE_DATA_OFFSET_PRESENT",e[e.SAMPLE_DESCRIPTION_INDEX_PRESENT=2]="SAMPLE_DESCRIPTION_INDEX_PRESENT",e[e.DEFAULT_SAMPLE_DURATION_PRESENT=8]="DEFAULT_SAMPLE_DURATION_PRESENT",e[e.DEFAULT_SAMPLE_SIZE_PRESENT=16]="DEFAULT_SAMPLE_SIZE_PRESENT",e[e.DEFAULT_SAMPLE_FLAGS_PRESENT=32]="DEFAULT_SAMPLE_FLAGS_PRESENT"}(I=h.TrackFragmentFlags||(h.TrackFragmentFlags={}));var L=function(u){function e(e,t,r,n,i,o,a){var s=u.call(this,"tfhd",0,e)||this;return s.trackId=t,s.baseDataOffset=r,s.sampleDescriptionIndex=n,s.defaultSampleDuration=i,s.defaultSampleSize=o,s.defaultSampleFlags=a,s}return Q(e,u),e.prototype.layout=function(e){var t=u.prototype.layout.call(this,e)+4,r=this.flags;return r&I.BASE_DATA_OFFSET_PRESENT&&(t+=8),r&I.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(t+=4),r&I.DEFAULT_SAMPLE_DURATION_PRESENT&&(t+=4),r&I.DEFAULT_SAMPLE_SIZE_PRESENT&&(t+=4),r&I.DEFAULT_SAMPLE_FLAGS_PRESENT&&(t+=4),this.size=t},e.prototype.write=function(e){var t=u.prototype.write.call(this,e),r=this.flags;return c(e,this.offset+t,this.trackId),t+=4,r&I.BASE_DATA_OFFSET_PRESENT&&(c(e,this.offset+t,0),c(e,this.offset+t+4,this.baseDataOffset),t+=8),r&I.SAMPLE_DESCRIPTION_INDEX_PRESENT&&(c(e,this.offset+t,this.sampleDescriptionIndex),t+=4),r&I.DEFAULT_SAMPLE_DURATION_PRESENT&&(c(e,this.offset+t,this.defaultSampleDuration),t+=4),r&I.DEFAULT_SAMPLE_SIZE_PRESENT&&(c(e,this.offset+t,this.defaultSampleSize),t+=4),r&I.DEFAULT_SAMPLE_FLAGS_PRESENT&&(c(e,this.offset+t,this.defaultSampleFlags),t+=4),t},e}(t);h.TrackFragmentHeaderBox=L;var N=function(r){function e(e){var t=r.call(this,"tfdt",0,0)||this;return t.baseMediaDecodeTime=e,t}return Q(e,r),e.prototype.layout=function(e){return this.size=r.prototype.layout.call(this,e)+4,this.size},e.prototype.write=function(e){var t=r.prototype.write.call(this,e);return c(e,this.offset+t,this.baseMediaDecodeTime),t+4},e}(t);h.TrackFragmentBaseMediaDecodeTimeBox=N;var j,U=function(i){function e(e,t,r){var n=i.call(this,"traf",[e,t,r])||this;return n.header=e,n.decodeTime=t,n.run=r,n}return Q(e,i),e}(g);h.TrackFragmentBox=U,function(e){e[e.IS_LEADING_MASK=201326592]="IS_LEADING_MASK",e[e.SAMPLE_DEPENDS_ON_MASK=50331648]="SAMPLE_DEPENDS_ON_MASK",e[e.SAMPLE_DEPENDS_ON_OTHER=16777216]="SAMPLE_DEPENDS_ON_OTHER",e[e.SAMPLE_DEPENDS_ON_NO_OTHERS=33554432]="SAMPLE_DEPENDS_ON_NO_OTHERS",e[e.SAMPLE_IS_DEPENDED_ON_MASK=12582912]="SAMPLE_IS_DEPENDED_ON_MASK",e[e.SAMPLE_HAS_REDUNDANCY_MASK=3145728]="SAMPLE_HAS_REDUNDANCY_MASK",e[e.SAMPLE_PADDING_VALUE_MASK=917504]="SAMPLE_PADDING_VALUE_MASK",e[e.SAMPLE_IS_NOT_SYNC=65536]="SAMPLE_IS_NOT_SYNC",e[e.SAMPLE_DEGRADATION_PRIORITY_MASK=65535]="SAMPLE_DEGRADATION_PRIORITY_MASK"}(h.SampleFlags||(h.SampleFlags={})),function(e){e[e.DATA_OFFSET_PRESENT=1]="DATA_OFFSET_PRESENT",e[e.FIRST_SAMPLE_FLAGS_PRESENT=4]="FIRST_SAMPLE_FLAGS_PRESENT",e[e.SAMPLE_DURATION_PRESENT=256]="SAMPLE_DURATION_PRESENT",e[e.SAMPLE_SIZE_PRESENT=512]="SAMPLE_SIZE_PRESENT",e[e.SAMPLE_FLAGS_PRESENT=1024]="SAMPLE_FLAGS_PRESENT",e[e.SAMPLE_COMPOSITION_TIME_OFFSET=2048]="SAMPLE_COMPOSITION_TIME_OFFSET"}(j=h.TrackRunFlags||(h.TrackRunFlags={}));var B=function(a){function e(e,t,r,n){var i=a.call(this,"trun",1,e)||this;return i.samples=t,i.dataOffset=r,i.firstSampleFlags=n,i}return Q(e,a),e.prototype.layout=function(e){var t=a.prototype.layout.call(this,e)+4,r=this.samples.length,n=this.flags;return n&j.DATA_OFFSET_PRESENT&&(t+=4),n&j.FIRST_SAMPLE_FLAGS_PRESENT&&(t+=4),n&j.SAMPLE_DURATION_PRESENT&&(t+=4*r),n&j.SAMPLE_SIZE_PRESENT&&(t+=4*r),n&j.SAMPLE_FLAGS_PRESENT&&(t+=4*r),n&j.SAMPLE_COMPOSITION_TIME_OFFSET&&(t+=4*r),this.size=t},e.prototype.write=function(e){var t=a.prototype.write.call(this,e),r=this.samples.length,n=this.flags;c(e,this.offset+t,r),t+=4,n&j.DATA_OFFSET_PRESENT&&(c(e,this.offset+t,this.dataOffset),t+=4),n&j.FIRST_SAMPLE_FLAGS_PRESENT&&(c(e,this.offset+t,this.firstSampleFlags),t+=4);for(var i=0;i<r;i++){var o=this.samples[i];n&j.SAMPLE_DURATION_PRESENT&&(c(e,this.offset+t,o.duration),t+=4),n&j.SAMPLE_SIZE_PRESENT&&(c(e,this.offset+t,o.size),t+=4),n&j.SAMPLE_FLAGS_PRESENT&&(c(e,this.offset+t,o.flags),t+=4),n&j.SAMPLE_COMPOSITION_TIME_OFFSET&&(c(e,this.offset+t,o.compositionTimeOffset),t+=4)}return t},e}(t);h.TrackRunBox=B;var q=function(n){function e(e,t){var r=n.call(this,"moof",a([e],t))||this;return r.header=e,r.trafs=t,r}return Q(e,n),e}(g);h.MovieFragmentBox=q;var z=function(i){function e(e){var t=i.call(this,"mdat")||this;return t.chunks=e,t}return Q(e,i),e.prototype.layout=function(e){var t=i.prototype.layout.call(this,e);return this.chunks.forEach(function(e){t+=e.length}),this.size=t},e.prototype.write=function(t){var r=this,n=i.prototype.write.call(this,t);return this.chunks.forEach(function(e){t.set(e,r.offset+n),n+=e.length},this),n},e}(e);h.MediaDataBox=z;var H=function(n){function e(e,t){var r=n.call(this,e)||this;return r.dataReferenceIndex=t,r}return Q(e,n),e.prototype.layout=function(e){return this.size=n.prototype.layout.call(this,e)+8,this.size},e.prototype.write=function(e){var t=n.prototype.write.call(this,e);return c(e,this.offset+t,0),c(e,this.offset+t+4,this.dataReferenceIndex),t+8},e}(e),G=function(s){function e(e,t,r,n,i,o){void 0===r&&(r=2),void 0===n&&(n=16),void 0===i&&(i=44100),void 0===o&&(o=null);var a=s.call(this,e,t)||this;return a.channelCount=r,a.sampleSize=n,a.sampleRate=i,a.otherBoxes=o,a}return Q(e,s),e.prototype.layout=function(t){var r=s.prototype.layout.call(this,t)+20;return this.otherBoxes&&this.otherBoxes.forEach(function(e){r+=e.layout(t+r)}),this.size=r},e.prototype.write=function(t){var r=s.prototype.write.call(this,t);return c(t,this.offset+r,0),c(t,this.offset+r+4,0),c(t,this.offset+r+8,this.channelCount<<16|this.sampleSize),c(t,this.offset+r+12,0),c(t,this.offset+r+16,this.sampleRate<<16),r+=20,this.otherBoxes&&this.otherBoxes.forEach(function(e){r+=e.write(t)}),r},e}(h.SampleEntry=H);h.AudioSampleEntry=G,h.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH=24;var V=function(d){function e(e,t,r,n,i,o,a,s,u,l){void 0===i&&(i=""),void 0===o&&(o=72),void 0===a&&(a=72),void 0===s&&(s=1),void 0===u&&(u=h.COLOR_NO_ALPHA_VIDEO_SAMPLE_DEPTH),void 0===l&&(l=null);var c=d.call(this,e,t)||this;if(c.width=r,c.height=n,c.compressorName=i,c.horizResolution=o,c.vertResolution=a,c.frameCount=s,c.depth=u,c.otherBoxes=l,31<i.length)throw new Error("invalid compressor name");return c}return Q(e,d),e.prototype.layout=function(t){var r=d.prototype.layout.call(this,t)+16+12+4+2+32+2+2;return this.otherBoxes&&this.otherBoxes.forEach(function(e){r+=e.layout(t+r)}),this.size=r},e.prototype.write=function(t){var r=d.prototype.write.call(this,t);c(t,this.offset+r,0),c(t,this.offset+r+4,0),c(t,this.offset+r+8,0),c(t,this.offset+r+12,0),r+=16,c(t,this.offset+r,this.width<<16|this.height),c(t,this.offset+r+4,n(this.horizResolution)),c(t,this.offset+r+8,n(this.vertResolution)),r+=12,c(t,this.offset+r,0),c(t,this.offset+r+4,this.frameCount<<16),r+=6,t[this.offset+r]=this.compressorName.length;for(var e=0;e<31;e++)t[this.offset+r+e+1]=e<this.compressorName.length?127&this.compressorName.charCodeAt(e):0;return r+=32,c(t,this.offset+r,this.depth<<16|65535),r+=4,this.otherBoxes&&this.otherBoxes.forEach(function(e){r+=e.write(t)}),r},e}(H);h.VideoSampleEntry=V;var W=function(n){function e(e,t){var r=n.call(this,e)||this;return r.data=t,r}return Q(e,n),e.prototype.layout=function(e){return this.size=n.prototype.layout.call(this,e)+this.data.length,this.size},e.prototype.write=function(e){var t=n.prototype.write.call(this,e);return e.set(this.data,this.offset+t),t+this.data.length},e}(e);h.RawTag=W}(e.Iso||(e.Iso={}))}(e.MP4||(e.MP4={}))}(n=n||{}),t.MP4Mux=n.MP4.MP4Mux},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d=r(0),h=r(5);t.MP3ToMP3={getInputFormat:function(){return{mimeType:"audio/mpeg"}},getOutputFormat:function(){return{mimeType:"audio/mpeg"}},transmux:function(c){var e=new d.helpers.abortableJob.AbortableJob(function(){function t(){l.close()}function n(e){u=!0;try{t()}catch(e){}r.reject(e),c.abort()}var r=d.helpers.deferred.buildDeferred(),i=new d.eventDispatcher.EventDispatcher,o=[],a=[],s=!1,u=!1,l=new h.MP3Parser;return l.onFrame=function(e){if(!u)try{a.push(e)}catch(e){n(e)}},c.onProgressUpdate(function(e){var t,r=e.data;!s&&e.initData&&(r=d.helpers.arrayBuffer.combine([e.initData,e.data])),s=!0;try{l.push(r),a.length&&(t=d.helpers.arrayBuffer.combine(a),o.push(t),a.splice(0),i.dispatch({data:t}))}catch(e){n(e)}}),c.onCompletion(function(e){try{t(),r.resolve(e)}catch(e){n(e)}}),c.onError(n),{result:r.promise,progressUpdates:{onProgressUpdate:i,getProgressSoFar:function(){return o.length?{data:d.helpers.arrayBuffer.combine(o)}:null}},abort:function(){u=!0,c.abort(),t()}}});return e.run()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),i=r(22),o=r(4),a=r(20),s=r(18),u=[i.MP3ToMP3,s.MP4ToMP4,n.PassThrough,o.MP3ToMP4,a.OggOpusToWebm];t.default=u},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=t(2),a=t(23);r.TransmuxerFactory={retrieveTransmuxers:function(n,i){return a.default.filter(function(e){var t=e.getInputFormat(),r=e.getOutputFormat();return(!n||o.isPartialMatch(t,n))&&(!i||o.isPartialMatch(r,i))})},retrieveTransmuxer:function(e,t){return r.TransmuxerFactory.retrieveTransmuxers(e,t)[0]||null}}},function(e,t,r){"use strict";function I(e){var t=e.byteLength,r=new DataView(e),n=t&&r.getUint8(t-1);if(n){for(var i=t-n,o=new Uint8Array(i),a=0;a<i;a++)o[a]=r.getUint8(a);return o.buffer}return e}t.__esModule=!0,t.removePadding=I;var n=t.AESDecryptor=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],o=r[2],a=r[3],s=this.invSubMix,u=s[0],l=s[1],c=s[2],d=s[3],h=new Uint32Array(256),f=0,p=0,g=0;for(g=0;g<256;g++)h[g]=g<128?g<<1:g<<1^283;for(g=0;g<256;g++){var _=p^p<<1^p<<2^p<<3^p<<4;_=_>>>8^255&_^99,e[f]=_,t[_]=f;var y=h[f],v=h[y],m=h[v],b=257*h[_]^16843008*_;n[f]=b<<24|b>>>8,i[f]=b<<16|b>>>16,o[f]=b<<8|b>>>24,a[f]=b,b=16843009*m^65537*v^257*y^16843008*f,u[_]=b<<24|b>>>8,l[_]=b<<16|b>>>16,c[_]=b<<8|b>>>24,d[_]=b,f?(f=y^h[h[h[m^y]]],p^=h[h[p]]):f=p=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o=this.ksRows=4*(i+6+1),a=void 0,s=void 0,u=this.keySchedule=new Uint32Array(o),l=this.invKeySchedule=new Uint32Array(o),c=this.sBox,d=this.rcon,h=this.invSubMix,f=h[0],p=h[1],g=h[2],_=h[3],y=void 0,v=void 0;for(a=0;a<o;a++)a<i?y=u[a]=t[a]:(v=y,a%i==0?(v=c[(v=v<<8|v>>>24)>>>24]<<24|c[v>>>16&255]<<16|c[v>>>8&255]<<8|c[255&v],v^=d[a/i|0]<<24):6<i&&a%i==4&&(v=c[v>>>24]<<24|c[v>>>16&255]<<16|c[v>>>8&255]<<8|c[255&v]),u[a]=y=(u[a-i]^v)>>>0);for(s=0;s<o;s++)a=o-s,v=3&s?u[a]:u[a-4],l[s]=s<4||a<=4?v:f[c[v>>>24]]^p[c[v>>>16&255]]^g[c[v>>>8&255]]^_[c[255&v]],l[s]=l[s]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,r,n){for(var i=this.keySize+6,o=this.invKeySchedule,a=this.invSBox,s=this.invSubMix,u=s[0],l=s[1],c=s[2],d=s[3],h=this.uint8ArrayToUint32Array_(r),f=h[0],p=h[1],g=h[2],_=h[3],y=new Int32Array(e),v=new Int32Array(y.length),m=void 0,b=void 0,E=void 0,w=void 0,S=void 0,P=void 0,x=void 0,A=void 0,R=void 0,T=void 0,C=void 0,O=void 0,k=void 0,D=void 0,M=this.networkToHostOrderSwap;t<y.length;){for(R=M(y[t]),T=M(y[t+1]),C=M(y[t+2]),O=M(y[t+3]),S=R^o[0],P=O^o[1],x=C^o[2],A=T^o[3],k=4,D=1;D<i;D++)m=u[S>>>24]^l[P>>16&255]^c[x>>8&255]^d[255&A]^o[k],b=u[P>>>24]^l[x>>16&255]^c[A>>8&255]^d[255&S]^o[k+1],E=u[x>>>24]^l[A>>16&255]^c[S>>8&255]^d[255&P]^o[k+2],w=u[A>>>24]^l[S>>16&255]^c[P>>8&255]^d[255&x]^o[k+3],S=m,P=b,x=E,A=w,k+=4;m=a[S>>>24]<<24^a[P>>16&255]<<16^a[x>>8&255]<<8^a[255&A]^o[k],b=a[P>>>24]<<24^a[x>>16&255]<<16^a[A>>8&255]<<8^a[255&S]^o[k+1],E=a[x>>>24]<<24^a[A>>16&255]<<16^a[S>>8&255]<<8^a[255&P]^o[k+2],w=a[A>>>24]<<24^a[S>>16&255]<<16^a[P>>8&255]<<8^a[255&x]^o[k+3],k+=3,v[t]=M(m^f),v[t+1]=M(w^p),v[t+2]=M(E^g),v[t+3]=M(b^_),f=R,p=T,g=C,_=O,t+=4}return n?I(v.buffer):v.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}();t.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h=r(0),f=r(25),n=null,p=16;t.JSCrypto={canDecrypt:function(e){return"AES-CBC"===e.cipher},decrypt:function(e,c){var d=n=n||new f.AESDecryptor,t=new h.helpers.abortableJob.AbortableJob(function(){var t,i=new h.eventDispatcher.EventDispatcher,r=h.helpers.deferred.buildDeferred(),o=[],a=null,n=[],s=0,u=new Uint8Array(c.iv),l=!1;d.expandKey(c.key.buffer);return e.onProgressUpdate(function(e){l||(h.helpers.arrayBuffer.forEach(e,function(e){l||(s||(t=new Uint8Array(16)),t[s++]=e,16===s&&(n.push(t),s=0))}),n.length&&(function(e){var t=a;a=new Uint8Array(d.decrypt(e.buffer,0,u.buffer,!1));var r=e.byteLength-p;if(r<0)throw new Error("lastBlockOffset invalid.");for(var n=0;n<p;n++)u[n]=e[r+n];t&&(o.push(t),i.dispatch(t))}(h.helpers.arrayBuffer.combine(n)),n=[]))}),e.onCompletion(function(e){var t;l||(s?r.reject(new Error("Reached end part way through block.")):(a&&(t=new Uint8Array(f.removePadding(a.buffer)),o.push(t),i.dispatch(t)),r.resolve(e)))}),e.onError(r.reject),{result:r.promise,abort:function(){l=!0,e.abort()},progressUpdates:{onProgressUpdate:i,getProgressSoFar:function(){return h.helpers.arrayBuffer.combine(o)}}}});return t.run()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(26),i=[n.JSCrypto];t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(27),o=n.helpers.find;t.DecryptorFactory={retrieveDecryptor:function(t){return o(i.default,function(e){return e.canDecrypt(t)})||null}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=r(0),c=r(28),d=r(7);t.getSegmentDownloadAndDecryptJob=function(e){var a=e.encryptionConfig,s=e.downloadAbortableJob,u=e.logger;return new l.helpers.abortableJob.AbortableJob(function(){var t=new l.eventDispatcher.EventDispatcher,r=l.helpers.deferred.buildDeferred(),e=null;if(a&&(u.info("Finding a decryptor..."),!(e=c.DecryptorFactory.retrieveDecryptor(a))))return u.error("Could not find a decryptor."),r.reject(new d.NoDecryptorError),{result:r.promise,progressUpdates:{onProgressUpdate:t,getProgressSoFar:function(){return null}}};var n=s.run(),i=null,o=[];return a&&e?((i=e.decrypt(n,a)).onProgressUpdate(function(e){o.push(e),t.dispatch(e)}),i.onError(function(e){e!==l.helpers.abortableJob.abortedError&&u.error("Error occurred during decryption.",e),r.reject(e),n.abort()})):n.onProgressUpdate(function(e){o.push(e),t.dispatch(e)}),n.onCompletion(function(){function e(){return r.resolve(void 0)}i?i.whenComplete().then(e):e()}),n.onError(r.reject),{result:r.promise,progressUpdates:{onProgressUpdate:t,getProgressSoFar:function(){return o.length?l.helpers.arrayBuffer.combine(o):null}},abort:function(){n.abort(),i&&i.abort()}}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var E=r(0),w=r(8);t.getSegmentDownloadJob=function(e){var t=e.delayCalculator,f=e.segmentEventRepresentation,p=e.url,r=e.loader,n=e.onSegmentRequestQueued,g=e.onSegmentRequestStart,_=e.onSegmentRequestFailed,y=e.onSegmentRetrieved,v=e.isResponseCodeAcceptable,m=e.isResponseCodeRetryable,b=e.logger;return new E.helpers.abortableJob.AbortableJob(function(){var l=E.helpers.deferred.buildDeferred(),c=new E.eventDispatcher.EventDispatcher,d=[],h=0,e=E.helpers.retry.retry(t,function(e){var o=e.scheduleRetry,a=!1,i=0;n.dispatch({segment:f}),b.debug("Requesting segment.",p);var s=r.request({url:p});s.onRequestStart(function(){return g.dispatch({segment:f})});function u(e){var t,r,n=e.byteLength;n&&((i+=n)<=h?b.debug("Already downloaded this part. Skipping...",i,h):(t=n-(i-h),r=new Uint8Array(e,t),h=i,d.push(r),c.dispatch(r)))}return s.onProgress(function(e){var t,r=e.initial,n=e.statusCode,i=e.part;r?v(n)?(b.debug("Segment response started.",p,n),u(i)):(t=null,m(n)?b.debug("Segment response code was not acceptable. Will retry.",p,n):(b.debug("Segment response code was not acceptable.",p,n),t=new w.UnacceptableResponseStatusCodeError(n)),s.abort(),_.dispatch({segment:f,statusCode:n}),t?l.reject(t):(a=!0,o())):(b.debug("Got segment response part.",p,n),u(i))}),s.onResponseReceived(function(e){a||(e?(y.dispatch({segment:f,statusCode:e.statusCode}),l.resolve(void 0)):(b.warn("Segment request timed out.",p),_.dispatch({segment:f,statusCode:null}),o()))}),s.onError(function(e){a||e!==E.helpers.abortableJob.abortedError&&(e instanceof E.loaderErrors.LoaderError?(b.warn("Error from loader. Will retry",p,e),o()):(b.error("Unexpected error when requesting segment.",e),l.reject(e)))}),{onCancel:function(){b.debug("Aborting segment request.",p),s.hasCompleted()||s.abort(),_.dispatch({segment:f,aborted:!0})}}},{onNoMoreRetries:function(){return l.reject(new Error("No more retries for requesting segment."))}}).cancel;return{result:l.promise,progressUpdates:{onProgressUpdate:c,getProgressSoFar:function(){return d.length?E.helpers.arrayBuffer.combine(d):null}},abort:function(){return e()}}})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0);t.DefaultSegmentParser={getFormat:function(){return{}},parseSegmentData:function(e){return n.helpers.abortableJob.map(function(){return e},{convertProgressUpdate:function(e){return{data:e}},convertResult:function(e){return e}}).run()}}},function(e,f,t){"use strict";Object.defineProperty(f,"__esModule",{value:!0});var p=t(0),g=t(3),n=p.helpers.abortableJob.AbortableJob,_=p.helpers.arrayBuffer.combine,y=new p.helpers.SCWeakMap;f.OggOpusSegmentParser={getFormat:function(){return{mimeType:"audio/ogg",audioCodec:{id:"opus"}}},parseSegmentData:function(r,d,h){var e=new n(function(){var t=p.helpers.deferred.buildDeferred(),i=new p.eventDispatcher.EventDispatcher,o=[],a=null,s=null,u=null,l=function(e){t.reject(e),r.abort()},c=function(e){y.set(h,e),i.dispatch({initData:e,data:_(o)})};return r.onProgressUpdate(function(e){var t,r,n;a&&"PRESENT"===a.state&&a.initDataEnded?(o.push(e),i.dispatch({initData:a.initData,data:e})):a&&"NOT_PRESENT"===a.state?o.push(e):(o.push(e),t=_(o),(a=function(e){var t=g.retrievePages(e).pages;if(t.length){var r=g.retrievePackets([t[0]])[0];if(r&&r.first){var n=1,i=t.slice(1).some(function(e,t){var r=!!(1&e.header.type[0]);return 0<t&&!r||(n=t+2,!1)});return{state:"PRESENT",initData:_(t.slice(0,n).map(function(e){return e.entirePage})),initDataEnded:i}}return{state:"NOT_PRESENT"}}return null}(t))&&("NOT_PRESENT"===a.state?(r=y.get(h),d.getSequenceNumber()<=h.getFirstSegmentIndex()?l(new Error("Could not find init data.")):r?c((a={state:"PRESENT",initData:r,initDataEnded:!0}).initData):((s=h.getSegment(h.getFirstSegmentIndex())).onCompletion(function(e){var n=u=f.OggOpusSegmentParser.parseSegmentData(p.helpers.abortableJob.map(function(){return e.retrieveData()},{convertProgressUpdate:function(e){return e.initData?p.helpers.arrayBuffer.combine([e.initData,e.data]):e.data},convertResult:function(e){return e}}).run(),e,h);n.onProgressUpdate(function(e){var t=e.initData;if(n.abort(),!t){var r=new Error("OggOpusSegmentParser should always provide init data.");throw l(r),r}a={state:"PRESENT",initData:t,initDataEnded:!0},c(t)}),n.onError(function(e){e!==p.helpers.abortableJob.abortedError&&l(e)})}),s.onError(l))):"PRESENT"===a.state&&a.initDataEnded&&(o.splice(0),t.byteLength>a.initData.byteLength&&(n=new Uint8Array(t.buffer.slice(a.initData.byteLength)),o.push(n)),c(a.initData))))}),r.onCompletion(function(e){a&&"PRESENT"===a.state&&!a.initDataEnded?(c(a.initData),t.resolve(e)):a&&"PRESENT"===a.state?t.resolve(e):t.reject(new Error("Could not find init data."))}),r.onError(l),{result:t.promise,progressUpdates:{onProgressUpdate:i,getProgressSoFar:function(){return a&&"PRESENT"===a.state&&a.initDataEnded?{initData:a.initData,data:_(o)}:null}},abort:function(){r.abort(),s&&s.abort(),u&&u.abort()}}});return e.run()}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(32),i=r(31),o=[n.OggOpusSegmentParser,i.DefaultSegmentParser];t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=r(2),o=r(33),a=n.helpers.find;t.SegmentParserFactory={retrieveSegmentParser:function(t){var e=a(o.default,function(e){return i.isPartialMatch(e.getFormat(),t)});if(!e)throw new Error("No segment parser found.");return e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var w=r(0),S=r(9),P=r(34),x=r(30),A=r(29),R=w.helpers.abortableJob.AbortableJob,T=w.eventDispatcher.EventDispatcher,C=w.logger.noOpLogger,n=function(){function e(e){var t=e.url,r=e.sequenceNumber,n=e.playlist,i=e.timeRange,o=e.encryptionConfig,a=e.initData,s=e.format,u=e.loader,l=e.playlistEventRepresentation,c=e.logger,d=void 0===c?C:c,h=e.delayCalculator,f=void 0===h?w.helpers.retry.buildExponentialDelayCalculator():h,p=e.isResponseCodeAcceptable,g=void 0===p?function(e){return 200===e}:p,_=e.isResponseCodeRetryable,y=void 0===_?function(e){return!(400<=e&&e<500)}:_,v=this;this._onSegmentRequestQueued=new T,this._onSegmentRequestStart=new T,this._onSegmentRetrieved=new T,this._onSegmentRequestFailed=new T,this.onSegmentRequestQueued=this._onSegmentRequestQueued.getHandle(),this.onSegmentRequestStart=this._onSegmentRequestStart.getHandle(),this.onSegmentRetrieved=this._onSegmentRetrieved.getHandle(),this.onSegmentRequestFailed=this._onSegmentRequestFailed.getHandle(),this._sequenceNumber=r,this._playlist=n,this._timeRange=i,this._format=s;var m=this._segmentEventRepresentation=new S.Segment(l,t,r),b=x.getSegmentDownloadJob({delayCalculator:f,segmentEventRepresentation:m,url:t,loader:u,onSegmentRequestQueued:this._onSegmentRequestQueued,onSegmentRequestStart:this._onSegmentRequestStart,onSegmentRequestFailed:this._onSegmentRequestFailed,onSegmentRetrieved:this._onSegmentRetrieved,isResponseCodeAcceptable:g,isResponseCodeRetryable:y,logger:d}),E=A.getSegmentDownloadAndDecryptJob({encryptionConfig:o,downloadAbortableJob:b,logger:d});this._retrieveAbortableJob=new R(function(){var e=P.SegmentParserFactory.retrieveSegmentParser(v._format),t=new T,r=w.helpers.deferred.buildDeferred(),n=e.parseSegmentData(w.helpers.abortableJob.map(function(){return E.run()},{convertProgressUpdate:function(e,t){return t&&a?w.helpers.arrayBuffer.combine([a,e]):e},convertResult:function(e){return e}}).run(),v,v._playlist);return n.onProgressUpdate(t.dispatch,{skipPast:!0}),n.onCompletion(function(){return r.resolve(void 0)}),n.onError(r.reject),{result:r.promise,progressUpdates:{onProgressUpdate:t,getProgressSoFar:n.getProgressSoFar},abort:n.abort}})}return e.prototype.getFormat=function(){return this._format},e.prototype.getSequenceNumber=function(){return this._sequenceNumber},e.prototype.isFinalSegment=function(){var e=this._playlist;return e.hasEnded()&&e.getFirstSegmentIndex()+e.getSegmentCount()-1===this._sequenceNumber},e.prototype.getTimeRange=function(){return this._timeRange},e.prototype.getEventRepresentation=function(){return this._segmentEventRepresentation},e.prototype.retrieveData=function(){var r=this,e=new R(function(){var e=w.helpers.deferred.buildDeferred(),n=new T,i=[],t=r._retrieveAbortableJob.run(),o=void 0;return t.onProgressUpdate(function(e){var t=e.data,r=e.initData;i.length||(o=r),i.push(t),n.dispatch({data:t,initData:o})}),t.onCompletion(function(){e.resolve(void 0)}),t.onError(e.reject),{result:e.promise,progressUpdates:{onProgressUpdate:n,getProgressSoFar:function(){return i.length?{initData:o,data:w.helpers.arrayBuffer.combine(i)}:null}},abort:function(){return t.abort()}}});return e.run()},e}();t.Segment=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=n.eventDispatcher.EventDispatcher;!function(e){e[e.LIVE=0]="LIVE",e[e.EVENT=1]="EVENT",e[e.VOD=2]="VOD"}(t.PlaylistType||(t.PlaylistType={}));var o=function(){function e(){this._onPlaylistRequestQueued=new i,this._onPlaylistRequestStart=new i,this._onPlaylistRetrieved=new i,this._onPlaylistRequestFailed=new i,this._onPlaylistParseStart=new i,this._onPlaylistParseEnd=new i,this._onKeyRequestQueued=new i,this._onKeyRequestStart=new i,this._onKeyRetrieved=new i,this._onKeyRequestFailed=new i,this._onInitDataRequestQueued=new i,this._onInitDataRequestStart=new i,this._onInitDataRetrieved=new i,this._onInitDataRequestFailed=new i,this._onUpdated=new i,this.onPlaylistRequestQueued=this._onPlaylistRequestQueued.getHandle(),this.onPlaylistRequestStart=this._onPlaylistRequestStart.getHandle(),this.onPlaylistRetrieved=this._onPlaylistRetrieved.getHandle(),this.onPlaylistRequestFailed=this._onPlaylistRequestFailed.getHandle(),this.onPlaylistParseStart=this._onPlaylistParseStart.getHandle(),this.onPlaylistParseEnd=this._onPlaylistParseEnd.getHandle(),this.onKeyRequestQueued=this._onKeyRequestQueued.getHandle(),this.onKeyRequestStart=this._onKeyRequestStart.getHandle(),this.onKeyRetrieved=this._onKeyRetrieved.getHandle(),this.onKeyRequestFailed=this._onKeyRequestFailed.getHandle(),this.onInitDataRequestQueued=this._onInitDataRequestQueued.getHandle(),this.onInitDataRequestStart=this._onInitDataRequestStart.getHandle(),this.onInitDataRetrieved=this._onInitDataRetrieved.getHandle(),this.onInitDataRequestFailed=this._onInitDataRequestFailed.getHandle(),this.onUpdated=this._onUpdated.getHandle()}return e.prototype.update=function(){var e=this,t=this._update();return t.onCompletion(function(){return e._onUpdated.dispatch(void 0)}),t},e.prototype.getSegment=function(e){return this.getSegments(e,e+1)[0]},e.prototype.getSegments=function(e,t){var r=this.getSegmentCount(),n=this.getFirstSegmentIndex();if(void 0===t&&(t=n+r),void 0===e&&(e=n),e<n||t<e||n+r<t)throw new Error("Invalid range of segments.");for(var i=[],o=e;o<t;o++)i.push(this._getSegment(o));return i},e}();t.Playlist=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u,l=r(0),c=r(3),d=r(10),s=r(2),h=l.helpers.find,f=l.eventDispatcher.EventDispatcher,p=l.helpers.abortableJob.abortedError,g=l.logger.prefixLogger,_=l.logger.noOpLogger;!function(e){e[e.RETRIEVING_SEGMENT=0]="RETRIEVING_SEGMENT",e[e.RETRIEVED_SEGMENT=1]="RETRIEVED_SEGMENT",e[e.RETRIEVING_DATA=2]="RETRIEVING_DATA",e[e.COMPLETE=3]="COMPLETE"}(u=u||{});var n=function(){function e(e){this._onSegmentRequestQueued=new f,this._onSegmentRequestStart=new f,this._onSegmentRetrieved=new f,this._onSegmentRequestFailed=new f,this._onSegmentDataRetrieveStarted=new f,this._onSegmentReady=new f,this._onError=new f,this._segments=[],this._retrievingSegment=null,this._timerId=null,this._dead=!1;var t=e.playlist,r=e.getPosition,n=e.maxBufferLength,i=e.cacheSize,o=e.transmuxer,a=e.logger,s=void 0===a?_:a;if(this._logger=g(s,"PlaylistSegmentRetriever"),t&&!t.hasInitialUpdateCompleted())throw new Error("Playlist retrieve has not completed.");if(n<0)throw new Error("Max buffer length must be > 0.");if(i<0)throw new Error("Cache size must be > 0.");this.onSegmentRequestQueued=this._onSegmentRequestQueued.getHandle(),this.onSegmentRequestStart=this._onSegmentRequestStart.getHandle(),this.onSegmentRetrieved=this._onSegmentRetrieved.getHandle(),this.onSegmentRequestFailed=this._onSegmentRequestFailed.getHandle(),this.onSegmentDataRetrieveStarted=this._onSegmentDataRetrieveStarted.getHandle(),this.onSegmentReady=this._onSegmentReady.getHandle(),this.onError=this._onError.getHandle(),this._playlist=t,this._transmuxer=o,this._getPosition=r,this._maxBufferLength=n,this._cacheSize=i,this.update()}return e.prototype.updateMaxBufferLength=function(e){if(this._ensureNotDead(),e<0)throw new Error("Max buffer length must be > 0.");this._logger.debug("updateMaxBufferLength() called.",e),this._maxBufferLength=e,this.update()},e.prototype.updateCacheSize=function(e){if(this._ensureNotDead(),e<0)throw new Error("Cache size must be > 0.");this._cacheSize=e,this.update()},e.prototype.getCacheSize=function(){return this._cacheSize},e.prototype.getCacheUsage=function(){return this._segments.reduce(function(e,t){return t.state===u.RETRIEVING_DATA||t.state===u.COMPLETE?e+t.size:e},0)},e.prototype.switchPlaylist=function(e){if(this._ensureNotDead(),e&&!e.hasInitialUpdateCompleted())throw new Error("Playlist retrieve has not completed.");this._logger.debug("switchPlaylist() called."),this._abortCurrentRetrieve(),this._playlist=e,this._segments=this._segments.filter(function(e){return e.state===u.COMPLETE}),this.update()},e.prototype.getSegmentsWithData=function(){return this._ensureNotDead(),this._segments.filter(function(e){return e.state===u.RETRIEVING_DATA&&e.size||e.state===u.COMPLETE}).map(function(e){var t=e.segment,r=e.dataRetrieveJob;return{segment:t,dataRetrieveJob:r,complete:e.state===u.COMPLETE}})},e.prototype.update=function(){var r=this;this._ensureNotDead(),this._timerId&&(window.clearTimeout(this._timerId),this._timerId=null);var n=this._getPosition(),i=n,o=0;this._segments.some(function(e){if(e.state!==u.COMPLETE)return!1;var t=e.segment.getTimeRange();return t.containsTime(o)&&(o=t.end),!(t.end<n)&&(t.start>i||(i=t.end,!1))});var a=n+this._maxBufferLength,e=function(){var e=r._playlist;if(e){var t=e.hasEnded()&&i===e.getDuration();if(t)return i=o,e.getDuration()+o<a}return i<a}();if(!e)return this._abortCurrentRetrieve(),this._garbageCollect(n),void this._scheduleNextUpdate();var t=h(this._segments,function(e){if(e.state!==u.RETRIEVED_SEGMENT&&e.state!==u.RETRIEVING_DATA)return!1;var t=e.segment.getTimeRange();return t.containsTime(i)});t?this._retrieveSegmentData(t):this._retrieveSegment(i),this._garbageCollect(n)},e.prototype.kill=function(){this._dead||(this._logger.debug("kill() called."),this._abortCurrentRetrieve(),this._dead=!0,this._timerId&&(this._logger.debug("Cancelling update timer."),window.clearTimeout(this._timerId)),this._segments=[],this._logger.debug("Killed."))},e.prototype._retrieveSegmentData=function(n){var i,e,o,a,s=this;if(n.state!==u.RETRIEVED_SEGMENT&&n.state!==u.RETRIEVING_DATA)throw new Error("Segment in incorrect state for data to be retrieved.");this._retrievingSegment&&this._retrievingSegment.state===u.RETRIEVING_DATA&&n.segment===this._retrievingSegment.segment||(this._abortCurrentRetrieve(),i=l.helpers.abortableJob.map(function(){return s._transmuxer.transmux(n.segment.retrieveData())},{convertResult:function(e){return e},convertProgressUpdate:function(e){return e},abortableJobOpts:{storeResult:!0}}),e=i.run(),o=!1,a=this._retrievingSegment={state:u.RETRIEVING_DATA,dataRetrieveJob:i,dataRetrieveJobHandle:e,segment:n.segment,size:0},this._switchSegment(n,a),e.onProgressUpdate(function(e){var t=a.size,r=t;!o&&e.initData&&(t+=e.initData.byteLength),o=!0,t+=e.data.byteLength,a.size=t,0===r&&0<t&&s._onSegmentDataRetrieveStarted.dispatch({segment:n.segment,dataRetrieveJob:i,complete:!1})}),e.onCompletion(function(){if(s._retrievingSegment=null,a.state!==u.RETRIEVING_DATA)throw new Error("Incorrect retrieval state.");s._switchSegment(a,{state:u.COMPLETE,dataRetrieveJob:a.dataRetrieveJob,dataRetrieveJobHandle:a.dataRetrieveJobHandle,segment:n.segment,size:a.size}),s._logger.debug("Segment retrieve completed.",n.segment.getEventRepresentation()),s.update(),s._onSegmentReady.dispatch({segment:n.segment,complete:!0,dataRetrieveJob:a.dataRetrieveJob})}),e.onError(function(e){e!==p&&(s._logger.error("Error retrieving segment data.",e,n.segment.getEventRepresentation()),s._scheduleNextUpdate(),e instanceof c.OggParserError&&(e=e instanceof c.ChecksumFailedError?new d.OggParserError("CHECKSUM_FAILED"):e instanceof c.NoSegmentsInPageError?new d.OggParserError("NO_SEGMENTS_IN_PAGE"):e instanceof c.PageFromDifferentBitstreamError?new d.OggParserError("PAGE_FROM_DIFFERENT_BITSTREAM"):e instanceof c.PageSequenceNumberDidNotIncrementError?new d.OggParserError("SEQUENCE_NUMBER_DID_NOT_INCREMENT"):e instanceof c.UnexpectedBOSError?new d.OggParserError("UNEXPECTED_BOS"):e instanceof c.UnexpectedEOSError?new d.OggParserError("UNEXPECTED_EOS"):new d.OggParserError("UNKNOWN")),s._onError.dispatch(e))}))},e.prototype._retrieveSegment=function(e){var t,i,o=this,r=this._retrievingSegment,n=this._playlist,a=n?n.getSegmentIndexContainingTime(e):null;r&&r.state===u.RETRIEVING_SEGMENT&&r.segmentIndex===a||(this._abortCurrentRetrieve(),n?null===a?this._scheduleNextUpdate():(t=n.getSegment(a),this._logger.debug("Retrieving segment.",a),t.onCompletion(function(e){if(o._logger.debug("Retrieved segment.",a),!s.isPartialMatch(o._transmuxer.getInputFormat(),e.getFormat())){var t=new Error("Segment format is not supported by transmuxer.");return o._logger.error("Segment incorrect format.",t),o._scheduleNextUpdate(),void o._onError.dispatch(t)}e.onSegmentRequestQueued.subscribe(o._onSegmentRequestQueued.dispatch),e.onSegmentRequestStart.subscribe(o._onSegmentRequestStart.dispatch),e.onSegmentRetrieved.subscribe(o._onSegmentRetrieved.dispatch),e.onSegmentRequestFailed.subscribe(o._onSegmentRequestFailed.dispatch),o._segments.splice(o._segments.indexOf(i),1);var r=e.getTimeRange(),n=o._segments.length;o._segments.some(function(e,t){return e.state!==u.RETRIEVING_SEGMENT&&e.segment.getTimeRange().start>r.start&&(n=t,!0)}),o._segments.splice(n,0,{state:u.RETRIEVED_SEGMENT,segment:e}),o._retrievingSegment=null,o.update()}),t.onError(function(e){e!==p&&(o._logger.error("Error retrieving segment.",e),o._scheduleNextUpdate(),o._onError.dispatch(e))}),i={state:u.RETRIEVING_SEGMENT,segmentIndex:a,segmentRetrieveJob:t},this._segments.push(i),this._retrievingSegment=i):(this._logger.debug("Cannot retrieve segment as there is no playlist."),this._scheduleNextUpdate()))},e.prototype._abortCurrentRetrieve=function(){var e=this._retrievingSegment;e&&(e.state===u.RETRIEVING_SEGMENT?(this._logger.debug("Aborting segment retrieve job."),e.segmentRetrieveJob.abort()):e.state===u.RETRIEVING_DATA&&(this._logger.debug("Aborting segment data retrieve job."),e.dataRetrieveJobHandle.abort(),this._switchSegment(e,{state:u.RETRIEVED_SEGMENT,segment:e.segment})),this._retrievingSegment=null)},e.prototype._switchSegment=function(e,t){var r=this._segments.indexOf(e);if(-1===r)throw new Error("Old segment missing.");this._segments.splice(r,1,t)},e.prototype._garbageCollect=function(i){var e,t,o,r,n=this._segments,a=this._cacheSize,s=this.getCacheUsage();s<=a||(e=this._playlist,t=e&&e.getCompleteDuration(),o=null!==t?t:1/0,r=i+this._maxBufferLength,o<r&&i<=(r-=o)||n.filter(function(e){return e.state===u.COMPLETE&&!function(e,t,r){var n=e.getTimeRange();return r!==t&&(t<r?n.end>t&&n.start<r:n.end>t||n.start<r)}(e.segment,i,r)}).map(function(e){var t=e.segment.getTimeRange(),r=t.start,n=Math.min(Math.abs(i-r),r+o-i);return{segment:e,distance:n,size:e.size}}).sort(function(e,t){return t.distance-e.distance}).some(function(e){return s<=a||(n.splice(n.indexOf(e.segment),1),s-=e.size,!1)}))},e.prototype._scheduleNextUpdate=function(){var e=this;this._timerId||(this._timerId=window.setTimeout(function(){e._timerId=null,e.update()},1e3))},e.prototype._ensureNotDead=function(){if(this._dead)throw new Error("Playlist segment retriever has been killed.")},e}();t.PlaylistSegmentRetriever=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="29.0.0",t.buildNumber=1819;var n=r(37);t.PlaylistSegmentRetriever=n.PlaylistSegmentRetriever;var i=r(36);t.Playlist=i.Playlist,t.PlaylistType=i.PlaylistType;var o=r(35);t.Segment=o.Segment;var a=r(24);t.TransmuxerFactory=a.TransmuxerFactory;var s=r(4);t.MP3ToMP4Transmuxer=s.MP3ToMP4;var u=r(6);t.PassThroughTransmuxer=u.PassThrough;var l=r(17);t.retrievalErrors=l.retrievalErrors;var c=r(14);t.events=c.events}]))},function(e,t,r){var n;window,e.exports=(n=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this._msg=e}return e.prototype.getMsg=function(){return this._msg},e}();t.OggParserError=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.IncompletePageError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.NoSegmentsInPageError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.UnexpectedEOSError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.UnexpectedBOSError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.PageSequenceNumberDidNotIncrementError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.PageFromDifferentBitstreamError=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t}(i.OggParserError);t.ChecksumFailedError=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=new Uint32Array([0,79764919,159529838,222504665,319059676,398814059,445009330,507990021,638119352,583659535,797628118,726387553,890018660,835552979,1015980042,944750013,1276238704,1221641927,1167319070,1095957929,1595256236,1540665371,1452775106,1381403509,1780037320,1859660671,1671105958,1733955601,2031960084,2111593891,1889500026,1952343757,2552477408,2632100695,2443283854,2506133561,2334638140,2414271883,2191915858,2254759653,3190512472,3135915759,3081330742,3009969537,2905550212,2850959411,2762807018,2691435357,3560074640,3505614887,3719321342,3648080713,3342211916,3287746299,3467911202,3396681109,4063920168,4143685023,4223187782,4286162673,3779000052,3858754371,3904687514,3967668269,881225847,809987520,1023691545,969234094,662832811,591600412,771767749,717299826,311336399,374308984,453813921,533576470,25881363,88864420,134795389,214552010,2023205639,2086057648,1897238633,1976864222,1804852699,1867694188,1645340341,1724971778,1587496639,1516133128,1461550545,1406951526,1302016099,1230646740,1142491917,1087903418,2896545431,2825181984,2770861561,2716262478,3215044683,3143675388,3055782693,3001194130,2326604591,2389456536,2200899649,2280525302,2578013683,2640855108,2418763421,2498394922,3769900519,3832873040,3912640137,3992402750,4088425275,4151408268,4197601365,4277358050,3334271071,3263032808,3476998961,3422541446,3585640067,3514407732,3694837229,3640369242,1762451694,1842216281,1619975040,1682949687,2047383090,2127137669,1938468188,2001449195,1325665622,1271206113,1183200824,1111960463,1543535498,1489069629,1434599652,1363369299,622672798,568075817,748617968,677256519,907627842,853037301,1067152940,995781531,51762726,131386257,177728840,240578815,269590778,349224269,429104020,491947555,4046411278,4126034873,4172115296,4234965207,3794477266,3874110821,3953728444,4016571915,3609705398,3555108353,3735388376,3664026991,3290680682,3236090077,3449943556,3378572211,3174993278,3120533705,3032266256,2961025959,2923101090,2868635157,2813903052,2742672763,2604032198,2683796849,2461293480,2524268063,2284983834,2364738477,2175806836,2238787779,1569362073,1498123566,1409854455,1355396672,1317987909,1246755826,1192025387,1137557660,2072149281,2135122070,1912620623,1992383480,1753615357,1816598090,1627664531,1707420964,295390185,358241886,404320391,483945776,43990325,106832002,186451547,266083308,932423249,861060070,1041341759,986742920,613929101,542559546,756411363,701822548,3316196985,3244833742,3425377559,3370778784,3601682597,3530312978,3744426955,3689838204,3819031489,3881883254,3928223919,4007849240,4037393693,4100235434,4180117107,4259748804,2310601993,2373574846,2151335527,2231098320,2596047829,2659030626,2470359227,2550115596,2947551409,2876312838,2788305887,2733848168,3165939309,3094707162,3040238851,2985771188]);t.calculateCRC=function(e){var r=0;return e.forEach(function(e){for(var t=0;t<e.length;t++)r=r<<8^n[r>>24&255^e[t]]}),r>>>0}},function(e,t){e.exports=n},function(e,t,r){"use strict";function c(e,t,r){if(void 0===r&&(r=1),t<0||t+r>e.byteLength)throw new Error("extract() out of bounds. "+t+" "+r+" "+e.byteLength);return e.slice(t,t+r)}function g(e,t){return void 0===t&&(t=!0),new DataView(e).getUint32(0,t)}function s(e){var t=new Uint8Array(e.buffer,e.byteOffset),r=t.byteLength;if(r<S)throw new p.IncompletePageError("Incomplete page.");var n=c(t,26);if(r<S+n[0])throw new p.IncompletePageError("Incomplete page.");var i=c(t,S,n[0]),o={version:c(t,4),type:c(t,5),granulePosition:c(t,6,8),bitstreamSerialNumber:c(t,14,4),pageSequenceNumber:c(t,18,4),checksum:c(t,22,4),pageSegments:n,segmentTable:i},a=[],s=S+n[0];if(i.forEach(function(e){if(r<s+e)throw new p.IncompletePageError("Incomplete page.");a.push(c(t,s,e)),s+=e}),!a.length)throw new f.NoSegmentsInPageError("No segments.");var u=d.calculateCRC([E,o.version,o.type,o.granulePosition,o.bitstreamSerialNumber,o.pageSequenceNumber,w,n,i].concat(a)),l=g(o.checksum.buffer);if(u!==l)throw new h.ChecksumFailedError("Checksum failed.");return{header:o,segments:a,entirePage:c(t,0,s)}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),d=r(8),h=r(7),_=r(6),y=r(5),v=r(4),m=r(3),f=r(2),p=r(1),b=n.helpers.arrayBuffer.combine,E=new Uint8Array([79,103,103,83]),w=new Uint8Array([0,0,0,0]),S=27;t.retrievePages=function(e){for(var t=e.buffer,r=[],n=e.byteOffset,i=!0;n<e.byteOffset+e.byteLength;){var o=new DataView(t,n);try{var a=s(o);r.push(a),n+=a.entirePage.byteLength}catch(e){if(e instanceof p.IncompletePageError){i=!1;break}throw e}}return{pages:r,eos:i}},t.parsePage=s,t.retrievePackets=function(c){if(!c.length)return[];var d=g(c[0].header.bitstreamSerialNumber.buffer),h=-1,f=null,p=[];return c.forEach(function(n,e){if(g(n.header.bitstreamSerialNumber.buffer)!==d)throw new _.PageFromDifferentBitstreamError("Got a page from a different bitstream.");var t=g(n.header.pageSequenceNumber.buffer);if(t<=h)throw new y.PageSequenceNumberDidNotIncrementError("Page sequence number was not greater than the previous one.");var i=t!==h+1;h=t;var r=n.header.type[0],o=!!(1&r),a=!!(2&r);if(a&&0<e)throw new v.UnexpectedBOSError("Got BOS on a page which is not the first.");var s=!!(4&r);if(s&&e!==c.length-1)throw new m.UnexpectedEOSError("Got EOS on a page which is not the last.");var u=0;i&&(f=null);var l=n.segments.length;n.segments.forEach(function(e,t){var r;f?f.data=b([f.data,e]):o&&0===t||(f={granulePosition:null,pageSequenceNumber:h,packetOffset:u,discontinuity:i&&0===u,first:a&&0===u,last:!1,data:e},u++),f&&e.byteLength<255&&((r=t===l-1)&&(f.granulePosition=g(n.header.granulePosition.buffer)),f.last=s&&r,p.push(f),f=null)})}),p}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.version="29.0.0",r.buildNumber=1819,function(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}(t(10));var n=t(0);r.OggParserError=n.OggParserError;var i=t(7);r.ChecksumFailedError=i.ChecksumFailedError;var o=t(2);r.NoSegmentsInPageError=o.NoSegmentsInPageError;var a=t(6);r.PageFromDifferentBitstreamError=a.PageFromDifferentBitstreamError;var s=t(5);r.PageSequenceNumberDidNotIncrementError=s.PageSequenceNumberDidNotIncrementError;var u=t(4);r.UnexpectedBOSError=u.UnexpectedBOSError;var l=t(3);r.UnexpectedEOSError=l.UnexpectedEOSError;var c=t(1);r.IncompletePageError=c.IncompletePageError}]))},function(e,t,r){var n;window,e.exports=(n=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),i=n.helpers.arrayBuffer,o=i.combine,a=i.numberToUint8Array,s=i.createVintBuffer;t.IDS={EBML:440786851,EBMLVersion:17030,EBMLReadVersion:17143,EBMLMaxIDLength:17138,EBMLMaxSizeLength:17139,DocType:17026,DocTypeVersion:17031,DocTypeReadVersion:17029,Segment:408125543,Info:357149030,Duration:17545,Tracks:374648427,TrackEntry:174,TrackNumber:215,TrackUID:29637,FlagLacing:156,CodecID:134,CodecDelay:22186,SeekPreRoll:22203,TrackType:131,Audio:225,Channels:159,SamplingFrequency:181,CodecPrivate:25506,Cluster:524531317,Timecode:231,SimpleBlock:163},t.encodeElement=function(e,t){var r=a(e),n=s(t.byteLength);return o([r,n,t])}},function(e,t,r){"use strict";function u(e){var t=3&e[0];return 0==t?1:3!=t?2:63&e[1]}function l(e){var t=e[0]>>>3&31;if(t>=o.length)throw new Error("Invalid configuration.");return o[t]}function c(e){if(!e.first)throw new Error("OpusHead is always in the first packet.");var t=e.data,r=new DataView(t.buffer),n=r.getUint8(9),i=r.getUint8(18),o=void 0,a=void 0,s=void 0;if(0<i){o=r.getUint8(18),a=r.getUint8(19),s=[];for(var u=0;u<n;u++)s.push(r.getUint8(20+u))}return{version:r.getUint8(8),channelCount:n,preSkip:r.getUint16(10,!0),inputSampleRate:r.getUint32(12,!0),outputGain:r.getInt16(16,!0)*Math.pow(2,-8),channelMapFamily:i,streamCount:o,twoChannelStreamCount:a,channelMappingTable:s}}Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),d=r(1),i=n.helpers.arrayBuffer,h=i.combine,f=i.numberToUint8Array,o=[10,20,40,60,10,20,40,60,10,20,40,60,10,20,10,20,2.5,5,10,20,2.5,5,10,20,2.5,5,10,20,2.5,5,10,20];t.parseOpusHead=c,t.setOutputGain=function(e,t){if(128<=t||t<-128)throw new Error("outputGainOverride invalid. It must be >= -128 and < 128.");c(e),new DataView(e.data.buffer).setInt16(16,Math.round(t*Math.pow(2,8)),!0)},t.buildWebm=function(e){var t=e[0];if(!t||!t.first)throw new Error("Missing start of stream.");var r=e.slice(2),n=c(t),i=0,o=r.map(function(e){var t=new Uint8Array(4);t[0]=129,new DataView(t.buffer).setInt16(1,i),t[3]=128;var r=u(e.data);return i+=r*l(e.data),d.encodeElement(d.IDS.SimpleBlock,h([t,e.data]))}),a=h([d.encodeElement(d.IDS.EBML,h([d.encodeElement(d.IDS.EBMLVersion,f(1)),d.encodeElement(d.IDS.EBMLReadVersion,f(1)),d.encodeElement(d.IDS.EBMLMaxIDLength,f(4)),d.encodeElement(d.IDS.EBMLMaxSizeLength,f(8)),d.encodeElement(d.IDS.DocType,new Uint8Array([119,101,98,109])),d.encodeElement(d.IDS.DocTypeVersion,f(1)),d.encodeElement(d.IDS.DocTypeReadVersion,f(2))])),d.encodeElement(d.IDS.Segment,function(){return d.encodeElement(d.IDS.Info,d.encodeElement(d.IDS.Duration,(e=new Uint8Array(8),new DataView(e.buffer).setFloat64(0,i),e)));var e}()),d.encodeElement(d.IDS.Tracks,d.encodeElement(d.IDS.TrackEntry,h([d.encodeElement(d.IDS.TrackNumber,f(1)),d.encodeElement(d.IDS.TrackUID,f(1)),d.encodeElement(d.IDS.FlagLacing,f(0)),d.encodeElement(d.IDS.CodecID,new Uint8Array([65,95,79,80,85,83])),d.encodeElement(d.IDS.CodecDelay,f(n.preSkip/48e3*1e9)),d.encodeElement(d.IDS.SeekPreRoll,new Uint8Array([4,196,180,0])),d.encodeElement(d.IDS.TrackType,f(2)),d.encodeElement(d.IDS.Audio,h([d.encodeElement(d.IDS.Channels,f(n.channelCount)),d.encodeElement(d.IDS.SamplingFrequency,new Uint8Array([64,231,112,0,0,0,0,0]))])),d.encodeElement(d.IDS.CodecPrivate,t.data)])))]),s=d.encodeElement(d.IDS.Cluster,function(){var e=[d.encodeElement(d.IDS.Timecode,f(0))];return e.push.apply(e,o),h(e)}());return{initData:a,data:s}}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.version="29.0.0",r.buildNumber=1819,function(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}(t(2))}]))},function(e,t,r){var n,i;window,e.exports=(n=r(7),i=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=n},function(e,t){e.exports=i},function(e,t,r){"use strict";function T(e){return!(400<=e&&e<500)}function C(e){var t,r={};for(s.lastIndex=0;null!==(t=s.exec(e));){var n=t[1].trim().toLowerCase(),i=function(e){return 0===e.indexOf('"')&&e.lastIndexOf('"')===e.length-1?e.slice(1,-1):e}(t[2].trim());r[n]=i}return r}var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var O,k=r(1),D=r(0),M=D.retrievalErrors.UnacceptableResponseStatusCodeError,I=D.retrievalErrors.PlaylistParseError,a=D.retrievalErrors.UnsupportedEncryptionError,F=k.helpers.abortableJob.AbortableJob,L=k.helpers.deferred.buildDeferred,N=k.helpers.cache.buildCache,i=k.helpers.retry,j=i.retry,U=i.buildExponentialDelayCalculator,B=k.helpers.Promise,o=k.helpers.find,q=k.helpers.url,z=k.logger.prefixLogger,H=k.logger.noOpLogger,G=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(MAP):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT(INF): *(\d+(?:\.\d+)?)(?:,(.*))?)|(?:(?!#)()(\S.+))|(?:#EXT-X-(BYTERANGE): *(\d+(?:@\d+(?:\.\d+)?)?)|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(PROGRAM-DATE-TIME):(.+))|(?:#EXT-X-(VERSION):(\d+))|(?:(#)(.*):(.*))|(?:(#)(.*)))(?:.*)\r?\n?/g,s=/(.+?)=(.+?)(?:,|$)/g,V=/^\d*(\.\d+)?$/;!function(e){e[e.NONE=0]="NONE",e[e.AES_128=1]="AES_128",e[e.SAMPLE_AES=2]="SAMPLE_AES"}(O=O||{});var u=function(R){function e(e){var a=e.url,t=e.playlistLoader,r=e.segmentLoader,n=e.keyLoader,i=void 0===n?null:n,o=e.segmentFormat,s=e.logger,u=void 0===s?H:s,l=e.delayCalculator,c=void 0===l?U():l,d=e.keyDelayCalculator,h=void 0===d?U():d,f=e.segmentDelayCalculator,p=e.isPlaylistResponseCodeAcceptable,g=void 0===p?function(e){return 200===e}:p,_=e.isPlaylistResponseCodeRetryable,y=void 0===_?T:_,v=e.isSegmentResponseCodeAcceptable,m=void 0===v?function(e){return 200===e}:v,b=e.isSegmentResponseCodeRetryable,E=void 0===b?T:b,w=e.isKeyResponseCodeAcceptable,S=void 0===w?function(e){return 200===e}:w,P=e.isKeyResponseCodeRetryable,x=void 0===P?T:P,A=R.call(this)||this;return A._keyRetrievalJobsCache=N(),A._initDataRetrievalJobsCache=N(),A._data=null,A._lastUpdateTime=null,A._playlistEventRepresentation=null,A._logger=z(u,"PlaylistHLS"),A._url=a,A._playlistLoader=t,A._segmentLoader=r,A._keyLoader=i,A._segmentFormat=o,A._keyDelayCalculator=h,A._isPlaylistResponseCodeAcceptable=g,A._isPlaylistResponseCodeRetryable=y,A._isSegmentResponseCodeAcceptable=m,A._isSegmentResponseCodeRetryable=E,A._isKeyOrInitDataResponseCodeAcceptable=S,A._isKeyOrInitDataResponseCodeRetryable=x,A._segmentDelayCalculator=f,A._downloadAbortableJob=new F(function(){var o=k.helpers.deferred.buildDeferred(),e=j(c,function(e){var n=e.scheduleRetry,i=new D.events.Playlist(a);A._onPlaylistRequestQueued.dispatch({playlist:i});var t=A._playlistLoader.request({url:a});return t.onRequestStart(function(){A._onPlaylistRequestStart.dispatch({playlist:i})}),A._logger.debug("Requesting playlist.",a),t.onResponseReceived(function(e){if(!e)return A._logger.warn("Playlist request timed out.",a),A._onPlaylistRequestFailed.dispatch({playlist:i,statusCode:null}),void n();var t=e.statusCode;if(A._isPlaylistResponseCodeAcceptable(t)){var r=e.getData();return r?(A._logger.debug("Got playlist response.",a,t),A._onPlaylistRetrieved.dispatch({playlist:i,statusCode:t}),void o.resolve({playlistContent:r,eventRepresentation:i})):(A._logger.warn("Playlist response contained no data.",a,t),A._onPlaylistRequestFailed.dispatch({playlist:i,statusCode:t}),void n())}return A._isPlaylistResponseCodeRetryable(t)?(A._logger.debug("Playlist response code was not acceptable. Will retry.",a,t),A._onPlaylistRequestFailed.dispatch({playlist:i,statusCode:t}),void n()):(A._logger.debug("Playlist response code was not acceptable.",a,t),A._onPlaylistRequestFailed.dispatch({playlist:i,statusCode:t}),void o.reject(new M(t)))}),t.onError(function(e){return e instanceof k.loaderErrors.LoaderError?(A._logger.warn("Error from loader. Will retry",a,e),void n()):void o.reject(e)}),{onCancel:function(){A._logger.debug("Aborting playlist request.",a),t.hasCompleted()||t.abort(),A._onPlaylistRequestFailed.dispatch({playlist:i,aborted:!0})}}},{onNoMoreRetries:function(){return o.reject(new Error("No more retries for requesting playlist."))}}).cancel;return{result:o.promise,abort:function(){return e()}}}),A._updateJob=new F(function(){if(A._data&&A._data.ended)return{result:B.resolve(void 0)};var n=L(),e=A._downloadAbortableJob.run();return e.onCompletion(function(e){var t=e.playlistContent,r=e.eventRepresentation;A._lastUpdateTime=k.helpers.time.now(),A._onPlaylistParseStart.dispatch({playlist:r});try{A._data=A._parsePlaylist(t)}catch(e){return A._logger.error("Error when parsing playlist.",e,t),void n.reject(e)}A._playlistEventRepresentation=r,A._onPlaylistParseEnd.dispatch({playlist:r}),n.resolve(void 0)}),e.onError(n.reject),{result:n.promise,abort:function(){return e.abort()}}}),A}return n(e,R),e.prototype.hasInitialUpdateCompleted=function(){return!!this._data},e.prototype.getType=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.type},e.prototype.getExpireTime=function(){var e=this._data,t=this._lastUpdateTime;if(!e||e.type!==D.PlaylistType.LIVE||null===t)return null;var r=e.segments.reduce(function(e,t){return e+t.timeRange.duration},0);return t+r/2},e.prototype.hasEnded=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.ended},e.prototype.getCompleteDuration=function(){return this._data&&this._data.ended?this._data.totalDuration:null},e.prototype.getDuration=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.totalDuration},e.prototype.getTargetDuration=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.targetDuration},e.prototype.getFirstSegmentIndex=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.mediaSequence},e.prototype.getSegmentCount=function(){if(!this._data)throw new Error("Not loaded yet.");return this._data.segments.length},e.prototype.getSegmentIndexContainingTime=function(t){var e=this._data;if(!e)throw new Error("Not loaded yet.");var r=o(e.segments,function(e){return e.timeRange.containsTime(t)});return r?e.mediaSequence+e.segments.indexOf(r):null},e.prototype._update=function(){return this._updateJob.run()},e.prototype._getSegment=function(o){var a=this,e=this._data;if(!e)throw new Error("Not loaded yet.");var s=e.segments[o-e.mediaSequence],t=new F(function(){var e=s.encryptionData,r=a._playlistEventRepresentation;if(!r)throw new Error("Playlist event representation should exist.");var t=a._buildEncryptionConfig(e,o),n=s.initDataUrl?a._retrieveInitData(s.initDataUrl):null,i=t.whenComplete().then(function(t){var e=function(e){return new D.Segment({url:s.url,sequenceNumber:o,playlist:a,timeRange:s.timeRange,format:a._segmentFormat,loader:a._segmentLoader,playlistEventRepresentation:r,logger:a._logger,delayCalculator:a._segmentDelayCalculator,isResponseCodeAcceptable:a._isSegmentResponseCodeAcceptable,isResponseCodeRetryable:a._isSegmentResponseCodeRetryable,encryptionConfig:t,initData:e})};return n?n.whenComplete().then(e):e(void 0)});return{result:i,abort:function(){t.abort(),n&&n.abort()}}});return t.run()},e.prototype._buildEncryptionConfig=function(n,i){var o=this,e=new F(function(){if(n.method===O.NONE)return{result:B.resolve(void 0)};if(n.method!==O.AES_128)return o._logger.error("Unsupported encryption method.",n.method),{result:B.reject(new a)};var e=o._keyLoader;if(!e)return{result:B.reject(new Error("Encryption method not supported as no key loader provided."))};var t=o._retrieveKey(n.keyUrl),r=t.whenComplete().then(function(e){return{cipher:"AES-CBC",key:e,iv:n.iv||function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t}(i)}});return{result:r,abort:function(){return t.abort()}}},{storeResult:!0});return e.run()},e.prototype._retrieveKey=function(e){var t=this,r=this._keyLoader;if(!r)throw new Error("No key loader.");var n=this._playlistEventRepresentation;if(!n)throw new Error("Playlist event representation should exist.");var i=new D.events.Key(n,e);return this._retrieveKeyOrInitData({url:e,loader:r,cache:this._keyRetrievalJobsCache,onRequestQueued:function(){return t._onKeyRequestQueued.dispatch({key:i})},onRequestStart:function(){return t._onKeyRequestStart.dispatch({key:i})},onRequestTimedOut:function(){t._onKeyRequestFailed.dispatch({key:i,statusCode:null})},onRequestFailed:function(e){t._onKeyRequestFailed.dispatch({key:i,statusCode:e})},onRequestAborted:function(){t._onKeyRequestFailed.dispatch({key:i,aborted:!0})},onRetrieved:function(e){t._onKeyRetrieved.dispatch({key:i,statusCode:e})},type:"key"})},e.prototype._retrieveInitData=function(e){var t=this,r=this._playlistEventRepresentation;if(!r)throw new Error("Playlist event representation should exist.");var n=new D.events.InitData(r,e);return this._retrieveKeyOrInitData({url:e,loader:this._segmentLoader,cache:this._initDataRetrievalJobsCache,onRequestQueued:function(){return t._onInitDataRequestQueued.dispatch({initData:n})},onRequestStart:function(){return t._onInitDataRequestStart.dispatch({initData:n})},onRequestTimedOut:function(){t._onInitDataRequestFailed.dispatch({initData:n,statusCode:null})},onRequestFailed:function(e){t._onInitDataRequestFailed.dispatch({initData:n,statusCode:e})},onRequestAborted:function(){t._onInitDataRequestFailed.dispatch({initData:n,aborted:!0})},onRetrieved:function(e){t._onInitDataRetrieved.dispatch({initData:n,statusCode:e})},type:"init data"})},e.prototype._retrieveKeyOrInitData=function(e){var o=this,a=e.url,r=e.loader,t=e.cache,s=e.onRequestQueued,u=e.onRequestStart,l=e.onRequestTimedOut,c=e.onRequestFailed,d=e.onRequestAborted,h=e.onRetrieved,f=e.type,n=t.get(a);return n?this._logger.debug(f+" retrieval already in progress.",a):(n=new F(function(){var i=k.helpers.deferred.buildDeferred(),e=j(o._keyDelayCalculator,function(e){var n=e.scheduleRetry;s();var t=r.request({url:a});return t.onRequestStart(u),o._logger.debug("Retrieving "+f+".",a),t.onResponseReceived(function(e){if(!e)return o._logger.warn(f+" request timed out.",a),l(),void n();var t=e.statusCode;if(o._isKeyOrInitDataResponseCodeAcceptable(t)){var r=e.getData();return r?(o._logger.debug("Got "+f+" response.",a,t),h(t),void i.resolve(new Uint8Array(r))):(o._logger.warn(f+" response contained no data.",a,t),c(t),void n())}return o._isKeyOrInitDataResponseCodeRetryable(t)?(o._logger.warn(f+" response code was not acceptable. Will retry.",a,t),c(t),void n()):(o._logger.warn(f+" response code was not acceptable.",a,t),c(t),void i.reject(new M(t)))}),t.onError(function(e){return e instanceof k.loaderErrors.LoaderError?(o._logger.warn("Error from loader. Will retry",a,e),void n()):void i.reject(e)}),{onCancel:function(){o._logger.debug("Aborting "+f+" request.",a),t.hasCompleted()||t.abort(),d()}}},{onNoMoreRetries:function(){return i.reject(new Error("No more retries for requesting "+f+"."))}}).cancel;return{result:i.promise,abort:function(){return e()}}},{storeResult:!0}),t.set(a,n)),n.run()},e.prototype._parsePlaylist=function(e){for(var t,r=this._data,n={version:null,type:D.PlaylistType.LIVE,mediaSequence:null,targetDuration:null,totalDuration:0,ended:!1},i=[],o={method:O.NONE},a=null,s=null,u=G.lastIndex=0,l=!1;null!==(t=G.exec(e));){var c=t.filter(function(e,t){return 0!==t&&void 0!==e}).map(function(e,t){return 0===t?e.toLowerCase():e}),d=c[0],h=c.slice(1);if(0===u){if("extm3u"!==d)throw new I("First line did not contain EXTM3U tag.")}else{if(!l)switch(d){case"playlist-type":if(n.type!==D.PlaylistType.LIVE)throw new I("Already have playlist type.");switch(h[0].toLowerCase()){case"vod":n.type=D.PlaylistType.VOD;break;case"event":n.type=D.PlaylistType.EVENT;break;default:throw new I("Invalid playlist type.")}break;case"media-sequence":if(null!==n.mediaSequence)throw new I("Already have media sequence number.");var f=parseInt(h[0],10);if(f+""!==h[0])throw new I("Invalid media sequence number.");n.mediaSequence=f;break;case"targetduration":if(null!==n.targetDuration)throw new I("Already have target duration.");var p=parseInt(h[0],10);if(p+""!==h[0]||p<0)throw new I("Invalid target duration.");n.targetDuration=1e3*p;break;case"version":if(null!==n.version)throw new I("Already have version.");var g=parseInt(h[0],10);if(g+""!==h[0])throw new I("Invalid version.");if(g<3)throw new I("HLS version must be 3 or above.");n.version=g;break;default:l=!0}if(l)switch(d){case"key":var _=C(h[0]),y="method"in _?_.method.toLowerCase():null,v="uri"in _?q.buildAbsoluteUrl(this._url,_.uri):null,m="iv"in _?function(e){0===e.indexOf("0x")&&(e=e.substr(2));var t=new Uint16Array(8);if(e.length%4!=0)throw new I("Failed to parse IV (length is not multiple of 4).");for(var r=0;r<e.length;r+=4){var n=parseInt(e.substr(r,4),16);if(isNaN(n))throw new I("Failed to parse hex number in IV string.");t[r/4]=n}return new Uint8Array(t)}(_.iv):null;if(!y)throw new I("Missing encryption method.");if(!v&&"none"!==y)throw new I("Missing key url.");switch(y){case"none":if(null!==v)throw new I("Key url not allowed.");if(null!==m)throw new I("IV not allowed.");o={method:O.NONE};break;case"aes-128":if(!v)throw new I("Key url required.");o={method:O.AES_128,keyUrl:v,iv:m};break;case"sample-aes":if(!v)throw new I("Key url required.");o={method:O.SAMPLE_AES,keyUrl:v,iv:m};break;default:throw new I("Unknown encryption method.")}break;case"map":var _=C(h[0]);if(!("uri"in _))throw new I("URI missing from EXT-X-MAP tag.");if("byterange"in _)throw new I("BYTERANGE in EXT-X-MAP tag is currently unsupported.");a=_.uri?q.buildAbsoluteUrl(this._url,_.uri):null;break;case"inf":if(!h[0].match(V))throw new I("Invalid segment duration.");s=1e3*parseFloat(h[0]);break;case"":if(n.ended)throw new I("Already received ENDLIST tag.");if(null===s)throw new I("Not received segment duration.");var b=q.buildAbsoluteUrl(this._url,h[0]);i.push({url:b,timeRange:new k.TimeRange(n.totalDuration,s),initDataUrl:a,encryptionData:o}),n.totalDuration+=s,s=null;break;case"endlist":if(n.ended)throw new I("Already had ENDLIST tag.");n.ended=!0;break;default:this._logger.warn("Unable to parse playlist line.",d)}}u++}var E=n.version,w=n.type,S=n.mediaSequence,P=n.targetDuration,x=n.ended,A=n.totalDuration;if(null===E)throw new I("Missing version.");if(null===P)throw new I("Missing target duration.");if(x&&w===D.PlaylistType.LIVE)throw new I("Cannot be ended if type is LIVE.");if(!x&&w===D.PlaylistType.VOD)throw new I("Must be ended if type is VOD.");if(null===S&&(S=0),r){if(r.type!==w)throw new I("Playlist type has changed since last update.");if(r.type===D.PlaylistType.EVENT&&S!==r.mediaSequence)throw new I("Media sequence number has changed. Not valid for EVENT playlist.");var R=r.segments[S-r.mediaSequence];if(!R)throw new I("Tracking lost. The last segment of the previous playlist is no longer in the new one.");var T=R.timeRange.start;i.forEach(function(e){var t=e.timeRange;e.timeRange=new k.TimeRange(t.start+T,t.duration)}),A+=T}return{version:E,type:w,mediaSequence:S,targetDuration:P,totalDuration:A,ended:x,segments:i}},e}(D.Playlist);t.PlaylistHLS=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="29.0.0",t.buildNumber=1819;var n=r(2);t.PlaylistHLS=n.PlaylistHLS}]))},function(e,t,r){var n;window,e.exports=(n=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t){e.exports=n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=function(o){function e(e,t,r){void 0===t&&(t={}),void 0===r&&(r=2e4);var n=o.call(this)||this;if(n._responseStarted=!1,r<0)throw new Error("Invaid timeout.");n._timeoutTimer=window.setTimeout(function(){return n._onManualTimeout()},r),n._xhr=new XMLHttpRequest,n._xhr.addEventListener("load",function(){return n._onLoad()}),n._xhr.addEventListener("abort",function(){return n._onAbort()}),n._xhr.addEventListener("error",function(e){return n._onError(e)}),n._xhr.addEventListener("timeout",function(){return n._onTimeout()}),n._xhr.addEventListener("loadend",function(){return n._onLoadEnd()}),n._xhr.addEventListener("progress",function(){return n._onProgress()}),n._xhr.open("GET",e,!0),n._xhr.timeout=r;var i=n._getResponseType().some(function(e){return n._xhr.responseType=e,n._xhr.responseType===e});if(!i)throw new Error("Failed setting response type.");return Object.keys(t).forEach(function(e){return n._xhr.setRequestHeader(e,t[e])}),n._signalRequestStart(),n._xhr.send(),n}return n(e,o),e.prototype._abort=function(){this._xhr.abort()},e.prototype._onAbort=function(){this.hasCompleted()||this._onTimeout()},e.prototype._onManualTimeout=function(){this.hasCompleted()||(this._signalTimeout(),this._xhr.abort())},e.prototype._onTimeout=function(){this.hasCompleted()||this._signalTimeout()},e.prototype._onLoad=function(){var e;this.hasCompleted()||(this._isChunkedResponse()||(e=this._xhr,this._provideStatusAndHeaders({statusCode:e.status,headers:this._parseHeaders(e.getAllResponseHeaders()||"")},e.response)),this.hasCompleted()||this._finalize())},e.prototype._onError=function(e){switch(this.getState()){case i.loader.ResponseState.COMPLETED:case i.loader.ResponseState.ERRORED:break;case i.loader.ResponseState.PENDING:if(0===this._xhr.status){this._provideStatusAndHeaders({statusCode:0,headers:{}},this._getEmptyData()),this._finalize();break}default:this._finalize(new i.loaderErrors.LoaderError("An error occurred.",e))}},e.prototype._onLoadEnd=function(){window.clearTimeout(this._timeoutTimer),this.hasCompleted()||this._finalize(new i.loaderErrors.LoaderError("Unexpected error occurred."))},e.prototype._onProgress=function(){var e;this.hasCompleted()||(e=this._xhr,this._isChunkedResponse()&&(this._responseStarted?this._providePart(e.response):(this._responseStarted=!0,this._provideStatusAndHeaders({statusCode:e.status,headers:this._parseHeaders(e.getAllResponseHeaders()||"")},e.response))))},e.prototype._isChunkedResponse=function(){return"moz-chunked-arraybuffer"===this._xhr.responseType},e.prototype._parseHeaders=function(e){var t={};if(!e)return t;for(var r=e.split("\r\n"),n=0,i=r.length;n<i;n++){var o,a,s=r[n],u=s.indexOf(": ");0<u&&(o=s.substring(0,u).trim(),a=s.substring(u+2),t[o]=a)}return t},e}(i.loader.LoaderRequest);t.LoaderRequest=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var c=r(0),i=c.helpers.browser.isFirefox(),o=function(u){function l(e,t,r){void 0===t&&(t={}),void 0===r&&(r=2e4);var i=u.call(this)||this;if(!l.isSupported())throw new Error("Not supported.");var n=i._abortController=new AbortController,o=new Request(e,{headers:t,redirect:"follow",signal:n.signal});i._signalRequestStart();var a=i._abortTimer=window.setTimeout(function(){i._signalTimeout(),i._abort()},r),s=fetch(o).then(function(e){var r={};if(e.headers.forEach(function(e,t){return r[e]=t}),i._provideStatusAndHeaders({statusCode:e.status,headers:r},new ArrayBuffer(0)),e.body){var t=e.body.getReader(),n=function(){return t.read().then(function(e){var t=e.done,r=e.value;if(!t&&!i.hasCompleted())return i._providePart(r.buffer),n()})};return n()}return e.arrayBuffer().then(function(e){e&&i._providePart(e)})}).then(function(){i.hasCompleted()||i._finalize()}).catch(function(e){var t;i.hasCompleted()||(t=e instanceof c.loaderErrors.LoaderError?e:new c.loaderErrors.LoaderError(e),i._finalize(t))});return c.helpers.always(s,function(){return window.clearTimeout(a)}),i}return n(l,u),l.isSupported=function(){return"fetch"in window&&"Request"in window&&"AbortController"in window&&!i},l.prototype._abort=function(){window.clearTimeout(this._abortTimer),this._abortController.abort()},l.prototype._reduceParts=function(e){return c.helpers.arrayBuffer.combine(e.map(function(e){return new Uint8Array(e)})).buffer},l}(c.loader.LoaderRequest);t.ArrayBufferLoaderRequest=o},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(0),o=r(1),a=i.helpers.browser.getFirefoxVersion(),s=a&&60<=a.major?["moz-chunked-arraybuffer","arraybuffer"]:["arraybuffer"],u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResponseType=function(){return s},t.prototype._getEmptyData=function(){return new ArrayBuffer(0)},t.prototype._reduceParts=function(e){return i.helpers.arrayBuffer.combine(e.map(function(e){return new Uint8Array(e)})).buffer},t}(o.LoaderRequest);t.ArrayBufferLoaderRequest=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),o=r(2),n=function(){function e(e){var t=(void 0===e?{}:e).fetchEnabled,r=void 0===t||t;this._fetchEnabled=r}return e.prototype.request=function(e){var t=e.url,r=e.headers,n=e.timeout;return this._fetchEnabled&&o.ArrayBufferLoaderRequest.isSupported()?new o.ArrayBufferLoaderRequest(t,r,n):new i.ArrayBufferLoaderRequest(t,r,n)},e}();t.ArrayBufferLoader=n,t.arrayBufferLoader=new n},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),o=["text"],a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype._getResponseType=function(){return o},t.prototype._getEmptyData=function(){return""},t.prototype._reduceParts=function(e){return e.join("")},t}(i.LoaderRequest);t.StringLoaderRequest=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(5);t.stringLoader={request:function(e){var t=e.url,r=e.headers,n=e.timeout;return new i.StringLoaderRequest(t,r,n)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="29.0.0",t.buildNumber=1819;var n=r(6);t.stringLoader=n.stringLoader;var i=r(4);t.arrayBufferLoader=i.arrayBufferLoader,t.ArrayBufferLoader=i.ArrayBufferLoader}]))},function(e,t,r){var n,i;window,e.exports=(n=r(1),i=r(2),function(r){function n(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,n),t.l=!0,t.exports}var i={};return n.m=r,n.c=i,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){if(void 0===t&&(t=6e4),this._limit=e,this._period=t,this._jobs=[],this._jobsRunInPeriod=0,e<=0)throw new Error("limit must be > 0.");if(t<=0)throw new Error("period must be > 0.")}return e.prototype.execute=function(e){var t=this,r={job:e};return this._jobs.push(r),this._executeNextJob(),{abort:function(){var e=t._jobs.indexOf(r);0<=e&&t._jobs.splice(e,1)}}},e.prototype._executeNextJob=function(){var e,t=this;this._jobsRunInPeriod<this._limit&&((e=this._jobs.shift())&&(this._jobsRunInPeriod++,window.setTimeout(function(){t._jobsRunInPeriod--,t._executeNextJob()},this._period),e.job()))},e}();t.Limiter=n},function(e,t){e.exports=n},function(e,t){e.exports=i},function(e,t,r){"use strict";var n=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0});var u=r(2),l=r(1),i=r(0),c=u.helpers.abortableJob.AbortableJob,d=u.helpers.find,a=u.helpers.time,s=new i.Limiter(300,3e5),h=[l.renditions.encryptedHlsMp3,l.renditions.hlsMp3,l.renditions.encryptedHlsOpus,l.renditions.hlsOpus,l.renditions.httpMp3],o=function(y){function e(e){var t=e.loader,r=e.clientId,n=e.trackId,i=e.secretToken,o=void 0===i?null:i,a=e.requestAuthorization,s=void 0===a?null:a,u=e.excludedRenditions,l=void 0===u?[]:u,c=e.maxBitrate,d=void 0===c?1/0:c,h=e.endpointBaseUrl,f=void 0===h?"https://api.soundcloud.com/":h,p=e.encryptedStreamsEnabled,g=void 0!==p&&p,_=y.call(this)||this;if(_.name="PublicAPI",_._getUrlsJob=null,_._clearResponseTimer=null,!t)throw new Error("loader required.");if("string"!=typeof r)throw new Error("clientId invalid.");if("number"!=typeof n)throw new Error("trackId invalid.");if(null!==o&&"string"!=typeof o)throw new Error("secretToken invalid.");if(null!==s&&"string"!=typeof s)throw new Error("requestAuthorizaton invalid.");if("number"!=typeof d||d<=0)throw new Error("maxBitrate must be > 0.");if("string"!=typeof f)throw new Error("endpointBaseUrl must be > 0.");if("boolean"!=typeof g)throw new Error("encryptedStreamsEnabled invalid.");return _._loader=t,_._clientId=r,_._requestAuthorization=s,_._trackId=n,_._secretToken=o,_._endpointBaseUrl=f,_._encryptedStreamsEnabled=g,_._excludedRenditions=l,_._maxBitrate=d,_}return n(e,y),e.prototype.getTrackId=function(){return this._trackId},e.prototype.excludeRendition=function(e){this._excludedRenditions.indexOf(e)<0&&this._excludedRenditions.push(e)},e.prototype.updateRequestAuthorization=function(e){if(null!==e&&"string"!=typeof e)throw new Error("requestAuthorizaton invalid.");this._requestAuthorization=e},e.prototype.clearCache=function(){this._clearResponseTimer&&(window.clearTimeout(this._clearResponseTimer),this._clearResponseTimer=null),this._getUrlsJob=null},e.prototype.getMaxBitrate=function(){return this._maxBitrate},e.prototype.setMaxBitrate=function(e){if("number"!=typeof e||e<=0)throw new Error("maxBitrate must be > 0.");this._maxBitrate=e},e.prototype.getUrl=function(){var r=this,a=this._maxBitrate,s=this._excludedRenditions,e=new c(function(){var t=u.helpers.deferred.buildDeferred(),e=r._getUrls();return e.onCompletion(function(e){var n=e.urls,i=e.timeRetrieved,o=null;h.filter(function(e){return s.indexOf(e)<0}).some(function(t){var e=n.filter(function(e){return e.rendition===t}).map(function(e){return{url:e.url,bitrate:e.bitrate}}),r=d(e.sort(function(e,t){return t.bitrate-e.bitrate}),function(e){return e.bitrate<=a});return!!r&&(o={success:!0,url:r.url,rendition:t,bitrate:r.bitrate,timeRetrieved:i},!0)}),t.resolve(o)}),e.onError(function(e){e instanceof l.UrlRetrieverError?t.resolve({success:!1,error:e}):t.reject(e)}),{result:t.promise,abort:function(){return e.abort()}}});return e.run()},e.prototype._getUrls=function(){var o=this;return this._getUrlsJob||(this._getUrlsJob=new c(function(){var n=u.helpers.deferred.buildDeferred(),i=null,e=s.execute(function(){var e=o._requestAuthorization?{Authorization:o._requestAuthorization}:{},t=o._endpointBaseUrl+"i1/tracks/"+encodeURI(o._trackId+"")+"/streams?client_id="+encodeURIComponent(o._clientId);o._encryptedStreamsEnabled&&(t+="&with_encrypted_streams=true"),o._secretToken&&(t+="&secret_token="+encodeURIComponent(o._secretToken));var r=(i=o._loader.request({url:t,headers:e})).getResponse().then(function(e){if(!e)throw new l.UrlRetrieverError("TIMED_OUT",!0);if(200!==e.statusCode)throw new l.UrlRetrieverError("INVALID_STATUS_"+e.statusCode);var t=e.getData();if(!t)throw new l.UrlRetrieverError("NO_DATA");var r=a.now(),s=JSON.parse(t),u=[];return Object.keys(s).map(function(e){var t,r=e.split("_"),n=r[0],i=r[1],o=r[2],a=parseInt(o,10);!n||!i||isNaN(a)||(t=d(h,function(e){return e.scProtocol===n&&e.scFormat===i}))&&u.push({rendition:t,bitrate:a,url:s[e]})}),{urls:u,timeRetrieved:r}});r.then(n.resolve,n.reject)});return{result:n.promise,abort:function(){e.abort(),i&&i.abort()}}}),this._clearResponseTimer=window.setTimeout(function(){o._clearResponseTimer=null,o._getUrlsJob=null},5e3)),this._getUrlsJob.run()},e}(l.BaseStreamUrlRetriever);t.StreamUrlRetriever=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="23.1.0",t.buildNumber=845;var n=r(3);t.StreamUrlRetriever=n.StreamUrlRetriever}]))}],r.c=i,r.p="",r(0))},function(e,Y,$){var Z;(function(J,Q,K,X){(function(){"use strict";function l(e){return"function"==typeof e}function t(){return function(){setTimeout(r,1)}}function r(){for(var e=0;e<x;e+=2){(0,D[e])(D[e+1]),D[e]=void 0,D[e+1]=void 0}x=0}function a(){}function o(e,n,i){A(function(t){var r=!1,e=function(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}(i,n,function(e){r||(r=!0,(n!==e?c:d)(t,e))},function(e){r||(r=!0,h(t,e))},t._label);!r&&e&&(r=!0,h(t,e))},e)}function n(e,t){var r,n,i;t.constructor===e.constructor?(n=e,(i=t)._state===F?d(n,i._result):i._state===L?h(n,i._result):s(i,void 0,function(e){c(n,e)},function(e){h(n,e)})):(r=function(e){try{return e.then}catch(e){return N.error=e,N}}(t))===N?h(e,N.error):void 0!==r&&l(r)?o(e,t,r):d(e,t)}function c(e,t){var r;e===t?h(e,new TypeError("You cannot resolve a promise with itself")):("function"==typeof(r=t)||"object"==typeof r&&null!==r?n:d)(e,t)}function i(e){e._onerror&&e._onerror(e._result),u(e)}function d(e,t){e._state===I&&(e._result=t,e._state=F,0!==e._subscribers.length&&A(u,e))}function h(e,t){e._state===I&&(e._state=L,e._result=t,A(i,e))}function s(e,t,r,n){var i=e._subscribers,o=i.length;e._onerror=null,i[o]=t,i[o+F]=r,i[o+L]=n,0===o&&e._state&&A(u,e)}function u(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i,o=e._result,a=0;a<t.length;a+=3)n=t[a],i=t[a+r],n?f(r,n,i,o):i(o);e._subscribers.length=0}}function e(){this.error=null}function f(e,t,r,n){var i,o,a,s,u=l(r);if(u){if((i=function(e,t){try{return e(t)}catch(e){return j.error=e,j}}(r,n))===j?(s=!0,o=i.error,i=null):a=!0,t===i)return h(t,new TypeError("A promises callback cannot return that same promise.")),0}else i=n,a=!0;t._state!==I||(u&&a?c(t,i):s?h(t,o):e===F?d(t,i):e===L&&h(t,i))}function p(e,t){var r=this;r._instanceConstructor=e,r.promise=new e(a),r._validateInput(t)?(r._input=t,r.length=t.length,r._remaining=t.length,r._init(),0===r.length?d(r.promise,r._result):(r.length=r.length||0,r._enumerate(),0===r._remaining&&d(r.promise,r._result))):h(r.promise,r._validationError())}function g(e){this._id=H++,this._state=void 0,this._result=void 0,this._subscribers=[],a!==e&&(l(e)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof g||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(t,e){try{e(function(e){c(t,e)},function(e){h(t,e)})}catch(e){h(t,e)}}(this,e))}var _,y,v,m,b,E,w,S,P=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},x=0,A=function(e,t){D[x]=e,D[x+1]=t,2===(x+=2)&&(y?y(r):M())},R="undefined"!=typeof window?window:void 0,T=R||{},C=T.MutationObserver||T.WebKitMutationObserver,O=void 0!==J&&"[object process]"==={}.toString.call(J),k="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,D=new Array(1e3),M=O?(w=J.nextTick,S=J.versions.node.match(/^(?:(\d+)\.)?(?:(\d+)\.)?(\*|\d+)$/),Array.isArray(S)&&"0"===S[1]&&"10"===S[2]&&(w=Q),function(){w(r)}):C?(m=0,b=new C(r),E=document.createTextNode(""),b.observe(E,{characterData:!0}),function(){E.data=m=++m%2}):k?((v=new MessageChannel).port1.onmessage=r,function(){v.port2.postMessage(0)}):(void 0===R?function(){try{var e=$(29);return _=e.runOnLoop||e.runOnContext,function(){_(r)}}catch(e){return t()}}:t)(),I=void 0,F=1,L=2,N=new e,j=new e;p.prototype._validateInput=function(e){return P(e)},p.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},p.prototype._init=function(){this._result=new Array(this.length)};var U=p;p.prototype._enumerate=function(){for(var e=this.length,t=this.promise,r=this._input,n=0;t._state===I&&n<e;n++)this._eachEntry(r[n],n)},p.prototype._eachEntry=function(e,t){var r,n=this._instanceConstructor;"object"==typeof(r=e)&&null!==r?e.constructor===n&&e._state!==I?(e._onerror=null,this._settledAt(e._state,t,e._result)):this._willSettleAt(n.resolve(e),t):(this._remaining--,this._result[t]=e)},p.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===I&&(this._remaining--,e===L?h(n,r):this._result[t]=r),0===this._remaining&&d(n,this._result)},p.prototype._willSettleAt=function(e,t){var r=this;s(e,void 0,function(e){r._settledAt(F,t,e)},function(e){r._settledAt(L,t,e)})};function B(e){function t(e){c(n,e)}function r(e){h(n,e)}var n=new this(a);if(!P(e))return h(n,new TypeError("You must pass an array to race.")),n;for(var i=e.length,o=0;n._state===I&&o<i;o++)s(this.resolve(e[o]),void 0,t,r);return n}function q(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(a);return c(t,e),t}function z(e){var t=new this(a);return h(t,e),t}var H=0,G=g;g.all=function(e){return new U(this,e).promise},g.race=B,g.resolve=q,g.reject=z,g._setScheduler=function(e){y=e},g._setAsap=function(e){A=e},g._asap=A,g.prototype={constructor:g,then:function(e,t){var r=this._state;if(r===F&&!e||r===L&&!t)return this;var n,i=new this.constructor(a),o=this._result;return r?(n=arguments[r-1],A(function(){f(r,i,n,o)})):s(this,i,e,t),i},catch:function(e){return this.then(null,e)}};var V=function(){var e;if(void 0!==K)e=K;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(e.Promise=G)},W={Promise:G,polyfill:V};$(23).amd?void 0===(Z=function(){return W}.call(Y,$,Y,X))||(X.exports=Z):void 0!==X&&X.exports?X.exports=W:void 0!==this&&(this.ES6Promise=W),V()}).call(this)}).call(Y,$(6),$(25).setImmediate,function(){return this}(),$(24)(e))},function(e,t){"use strict";var r={oauth_token:void 0,baseURL:"https://api.soundcloud.com",connectURL:"//connect.soundcloud.com",client_id:void 0,redirect_uri:void 0};e.exports={get:function(e){return r[e]},set:function(e,t){t&&(r[e]=t)}}},function(e,t,r){(function(f){"use strict";function p(e,t,r,n){var i,o,a,s,u,l,c=(i=e,o=t,a=r,s=n,u=void 0,(l=new h(function(e){var t=f.FormData&&a instanceof FormData;(u=new XMLHttpRequest).upload&&u.upload.addEventListener("progress",s),u.open(i,o,!0),t||u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),u.onreadystatechange=function(){4===u.readyState&&e({responseText:u.responseText,request:u})},u.send(a)})).request=u,l),d=c.then(function(e){var t=e.responseText,r=e.request,n=function(e){var t=e.responseText,r=e.request,n=void 0,i=void 0;try{i=JSON.parse(t)}catch(e){}return i?i.errors&&(n={message:""},i.errors[0]&&i.errors[0].error_message&&(n={message:i.errors[0].error_message})):n=r?{message:"HTTP Error: "+r.status}:{message:"Unknown error"},n&&(n.status=r.status),{json:i,error:n}}({responseText:t,request:r});if(n.json&&"302 - Found"===n.json.status)return p("GET",n.json.location,null);if(200!==r.status&&n.error)throw n.error;return n.json});return d.request=c.request,d}var g=r(3),_=r(20),h=r(2).Promise;e.exports={request:function(e,t){var r,n,i,o,a=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],s=arguments.length<=3||void 0===arguments[3]?function(){}:arguments[3],u=g.get("oauth_token"),l=g.get("client_id"),c={},d=f.FormData&&a instanceof FormData,h=void 0;return c.format="json",u?c.oauth_token=u:c.client_id=l,n=a,i=c,o=d,Object.keys(i).forEach(function(e){o?n.append(e,i[e]):n[e]=i[e]}),"GET"!==e&&(h=d?a:_.encode(a),a={oauth_token:u}),t="/"!==t[0]?"/"+t:t,r=""+g.get("baseURL")+t+"?"+_.encode(a),p(e,r,h,s)},oEmbed:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=t.element;delete t.element,t.url=e;var n="https://soundcloud.com/oembed.json?"+_.encode(t);return p("GET",n,null).then(function(e){return r&&e.html&&(r.innerHTML=e.html),e})},upload:function(){var r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=r.asset_data||r.file;if(!(g.get("oauth_token")&&r.title&&e))return new h(function(e,t){t({status:0,error_message:"oauth_token needs to be present and title and asset_data / file passed as parameters"})});var t=Object.keys(r),n=new FormData;return t.forEach(function(e){var t=r[e];"file"===e&&(e="asset_data",t=r.file),n.append("track["+e+"]",t)}),this.request("POST","/tracks",n,r.progress)},resolve:function(e){return this.request("GET","/resolve",{url:e,_status_code_map:{302:200}})}}}).call(t,function(){return this}())},function(e,t){"use strict";var r={};e.exports={get:function(e){return r[e]},set:function(e,t){r[e]=t}}},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function i(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(){p&&h&&(p=!1,h.length?f=h.concat(f):g=-1,f.length&&a())}function a(){if(!p){var e=i(o);p=!0;for(var t=f.length;t;){for(h=f,f=[];++g<t;)h&&h[g].run();g=-1,t=f.length}h=null,p=!1,function(t){if(c===clearTimeout)return clearTimeout(t);if((c===n||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(e)}}function s(e,t){this.fun=e,this.array=t}function u(){}var l,c,d=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:r}catch(e){l=r}try{c="function"==typeof clearTimeout?clearTimeout:n}catch(e){c=n}}();var h,f=[],p=!1,g=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];f.push(new s(e,t)),1!==f.length||p||i(a)},s.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=u,d.addListener=u,d.once=u,d.off=u,d.removeListener=u,d.removeAllListeners=u,d.emit=u,d.prependListener=u,d.prependOnceListener=u,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t,r){"use strict";var n=r(22);t.extract=function(e){return e.split("?")[1]||""},t.parse=function(e){return"string"!=typeof e?{}:(e=e.trim().replace(/^(\?|#|&)/,""))?e.split("&").reduce(function(e,t){var r=t.replace(/\+/g," ").split("="),n=r.shift(),i=0<r.length?r.join("="):void 0,n=decodeURIComponent(n),i=void 0===i?null:decodeURIComponent(i);return e.hasOwnProperty(n)?Array.isArray(e[n])?e[n].push(i):e[n]=[e[n],i]:e[n]=i,e},{}):{}},t.stringify=function(r){return r?Object.keys(r).sort().map(function(t){var e=r[t];return Array.isArray(e)?e.sort().map(function(e){return n(t)+"="+n(e)}).join("&"):n(t)+"="+n(e)}).filter(function(e){return 0<e.length}).join("&"):""}},function(e,t,r){"use strict";var o=r(7),a=r(5);e.exports={notifyDialog:function(e){var t=o.parse(e.search),r=o.parse(e.hash),n={oauth_token:t.access_token||r.access_token,dialog_id:t.state||r.state,error:t.error||r.error,error_description:t.error_description||r.error_description},i=a.get(n.dialog_id);i&&i.handleConnectResponse(n)}}},function(e,t,r){"use strict";function n(e){return i.set("oauth_token",e.oauth_token),e}var i=r(3),o=r(11),a=r(2).Promise;e.exports=function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],t=i.get("oauth_token");if(t)return new a(function(e){e({oauth_token:t})});var r={client_id:e.client_id||i.get("client_id"),redirect_uri:e.redirect_uri||i.get("redirect_uri"),response_type:"code_and_token",scope:e.scope||"non-expiring",display:"popup"};if(!r.client_id||!r.redirect_uri)throw new Error("Options client_id and redirect_uri must be passed");return new o(r).open().then(n)}},function(e,t,r){"use strict";var n=r(2).Promise;e.exports=function(){var r={};return r.promise=new n(function(e,t){r.resolve=e,r.reject=t}),r}},function(e,t,r){"use strict";var n=function(e,t,r){return t&&h(e.prototype,t),r&&h(e,r),e},i=r(10),o=r(5),a=r(12),s=r(7),u="SoundCloud_Dialog",l=function(){return[u,Math.ceil(1e6*Math.random()).toString(16)].join("_")},c=(n(d,[{key:"open",value:function(){var e,t=(e=this.options,"https://soundcloud.com/connect?"+s.stringify(e));return this.popup=a.open(t,this.width,this.height),o.set(this.id,this),this.deferred.promise}},{key:"handleConnectResponse",value:function(e){e.error?this.deferred.reject(e):this.deferred.resolve(e),this.popup.close()}}]),d);function d(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,d),this.id=l(),this.options=e,this.options.state=this.id,this.width=420,this.height=670,this.deferred=i()}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=c},function(e,t){"use strict";e.exports={open:function(e,t,r){var n,i={};return i.location=1,i.width=t,i.height=r,i.left=window.screenX+(window.outerWidth-t)/2,i.top=window.screenY+(window.outerHeight-r)/2,i.toolbar="no",i.scrollbars="yes",n=Object.keys(i).map(function(e){return e+"="+i[e]}).join(", "),window.open(e,i.name,n)}}},function(e,t,r){"use strict";var s=r(19),n=r(1).MaestroCore,u=n.errors.PlayerFatalError,l=n.State,i=r(1).SCAudio.errors,c=i.NoStreamsError,d=i.NotSupportedError;e.exports=function(t){function e(){switch(t.getState()){case l.PLAYING:return"playing";case l.PAUSED:return t.isEnded()?"ended":"paused";case l.DEAD:return t.getFatalError()?"error":"dead";case l.LOADING:default:return"loading"}}var r=!1;t.onStateChange.subscribe(function(){return o.trigger("state-change",e())}),t.onPlay.subscribe(function(){o.trigger(r?"play-resume":"play-start"),r=!0}),t.onPlayIntent.subscribe(function(){return o.trigger("play")}),t.onPlayRejection.subscribe(function(e){return o.trigger("play-rejection",e)}),t.onPauseIntent.subscribe(function(){return o.trigger("pause")}),t.onSeek.subscribe(function(){return o.trigger("seeked")}),t.onSeekRejection.subscribe(function(e){return o.trigger("seek-rejection",e)}),t.onLoadStart.subscribe(function(){return o.trigger("buffering_start")}),t.onLoadEnd.subscribe(function(){return o.trigger("buffering_end")}),t.onEnded.subscribe(function(){return o.trigger("finish")}),t.onError.subscribe(function(e){e instanceof c?o.trigger("no_streams"):e instanceof d?o.trigger("no_protocol"):e instanceof u&&o.trigger("audio_error")});var n,i,o={play:t.play.bind(t),pause:t.pause.bind(t),seek:t.seek.bind(t),getVolume:t.getVolume.bind(t),setVolume:t.setVolume.bind(t),currentTime:t.getPosition.bind(t),getDuration:t.getDuration.bind(t),isBuffering:t.isLoading.bind(t),isPlaying:t.isPlaying.bind(t),isActuallyPlaying:t.isActuallyPlaying.bind(t),isEnded:t.isEnded.bind(t),isDead:t.isDead.bind(t),kill:t.kill.bind(t),hasErrored:function(){return!!t.getFatalError()},getState:e};return s.mixin(o),n=0,i=null,t.onChange.subscribe(function(e){var t=e.playing,r=e.seeking;e.dead?window.clearTimeout(n):void 0===t&&void 0===r||a()}),o;function a(){window.clearTimeout(n),t.isPlaying()&&!t.isEnded()&&(n=window.setTimeout(a,1e3/60));var e=t.getPosition();e!==i&&(i=e,o.trigger("time",e))}}},function(n,e){(function(e){"use strict";var t=e.AudioContext||e.webkitAudioContext,r=null;n.exports=function(){return r||(r=new t)}}).call(e,function(){return this}())},function(e,t){(function(n){"use strict";var i=n.navigator.getUserMedia||n.navigator.webkitGetUserMedia||n.navigator.mozGetUserMedia;e.exports=function(e,t,r){i.call(n.navigator,e,t,r)}}).call(t,function(){return this}())},function(e,t,r){"use strict";var n=function(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e},i=r(14),o=r(15),a=r(2).Promise,s=r(28),u=(n(l,[{key:"start",value:function(){var t=this;return function(){var r=this,n=this.context;return new a(function(t,e){r.source?r.source instanceof AudioNode?t(r.source):e(new Error("source needs to be an instance of AudioNode")):o({audio:!0},function(e){r.stream=e,r.source=n.createMediaStreamSource(e),t(r.source)}.bind(r),e)})}.call(this).then(function(e){return t._recorder=new s(e),t._recorder.record(),e})}},{key:"stop",value:function(){var e;this._recorder&&this._recorder.stop(),this.stream&&(this.stream.stop?this.stream.stop():!this.stream.getTracks||(e=this.stream.getTracks()[0])&&e.stop())}},{key:"getBuffer",value:function(){var i=this;return new a(function(n,e){i._recorder?i._recorder.getBuffer(function(e){var t=i.context.sampleRate,r=i.context.createBuffer(2,e[0].length,t);r.getChannelData(0).set(e[0]),r.getChannelData(1).set(e[1]),n(r)}.bind(i)):e(new Error("Nothing has been recorded yet."))})}},{key:"getWAV",value:function(){var r=this;return new a(function(t,e){r._recorder?r._recorder.exportWAV(function(e){t(e)}):e(new Error("Nothing has been recorded yet."))})}},{key:"play",value:function(){var r=this;return this.getBuffer().then(function(e){var t=r.context.createBufferSource();return t.buffer=e,t.connect(r.context.destination),t.start(0),t})}},{key:"saveAs",value:function(t){return this.getWAV().then(function(e){s.forceDownload(e,t)})}},{key:"delete",value:function(){this._recorder&&(this._recorder.stop(),this._recorder.clear(),this._recorder=null),this.stream&&this.stream.stop()}}]),l);function l(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,l),this.context=e.context||i(),this._recorder=null,this.source=e.source,this.stream=null}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=u},function(e,t,r){"use strict";var n=r(4),u=r(3),l=r(13),c=r(1).SCAudio,d=r(1).MaestroCore.logger,h=r(1).SCAudioPublicApiStreamURLRetriever.StreamUrlRetriever,i=r(1).SCAudioControllerHTML5Player.MediaElementManager,f=r(1).SCAudioControllerHTML5Player.HTML5PlayerController,p=r(1).SCAudioControllerHLSMSEPlayer.HLSMSEPlayerController,g=r(1).MaestroLoaders.stringLoader,_=new i("audio",d.noOpLogger);e.exports=function(e,s){var t=s?{secret_token:s}:{};return n.request("GET",e,t).then(function(r){var n=u.get("baseURL"),i=u.get("client_id"),e=u.get("oauth_token"),t=!1,o=new h({clientId:i,secretToken:s,trackId:r.id,requestAuthorization:e?"OAuth "+e:null,loader:g}),a=new c.Player({controllers:[new p(_),new f(_)],streamUrlRetriever:o,getURLOpts:{preview:"SNIP"===r.policy},streamUrlsExpire:!0,mediaSessionEnabled:!0,logger:d.noOpLogger});return a.onPlay.subscribe(function(){t||(t=!0,function(){var e=n+"/tracks/"+encodeURIComponent(r.id)+"/plays?client_id="+encodeURIComponent(i);s&&(e+="&secret_token="+encodeURIComponent(s));var t=new XMLHttpRequest;t.open("POST",e,!0),t.send()}())}),a.onEnded.subscribe(function(){a.pause()}),a.onPlayIntent.subscribe(function(){a.isEnded()&&a.seek(0)}),l(a)})},e.exports.activateAudioElement=function(){_.activate()}},function(e,t,r){var a,n,i,o,d,s,u,h,l;a=Array.prototype.forEach,n=Object.prototype.hasOwnProperty,i=Array.prototype.slice,o=0,d={keys:Object.keys||function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("keys() called on a non-object");var t,r=[];for(t in e)e.hasOwnProperty(t)&&(r[r.length]=t);return r},uniqueId:function(e){var t=++o+"";return e?e+t:t},has:function(e,t){return n.call(e,t)},each:function(e,t,r){if(null!=e)if(a&&e.forEach===a)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var o in e)this.has(e,o)&&t.call(r,e[o],o,e)},once:function(e){var t,r=!1;return function(){return r||(r=!0,t=e.apply(this,arguments),e=null),t}}},s={on:function(e,t,r){return h(this,"on",e,[t,r])&&t&&(this._events||(this._events={}),(this._events[e]||(this._events[e]=[])).push({callback:t,context:r,ctx:r||this})),this},once:function(e,t,r){if(!h(this,"once",e,[t,r])||!t)return this;var n=this,i=d.once(function(){n.off(e,i),t.apply(this,arguments)});return i._callback=t,this.on(e,i,r)},off:function(e,t,r){var n,i,o,a,s,u,l,c;if(!this._events||!h(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events={},this;for(s=0,u=(a=e?[e]:d.keys(this._events)).length;s<u;s++)if(e=a[s],o=this._events[e]){if(this._events[e]=n=[],t||r)for(l=0,c=o.length;l<c;l++)i=o[l],(t&&t!==i.callback&&t!==i.callback._callback||r&&r!==i.context)&&n.push(i);n.length||delete this._events[e]}return this},trigger:function(e){if(!this._events)return this;var t=i.call(arguments,1);if(!h(this,"trigger",e,t))return this;var r=this._events[e],n=this._events.all;return r&&l(r,t),n&&l(n,arguments),this},stopListening:function(e,t,r){var n=this._listeners;if(!n)return this;var i=!t&&!r;for(var o in"object"==typeof t&&(r=this),e&&((n={})[e._listenerId]=e),n)n[o].off(t,r,this),i&&delete this._listeners[o];return this}},u=/\s+/,h=function(e,t,r,n){if(!r)return!0;if("object"==typeof r){for(var i in r)e[t].apply(e,[i,r[i]].concat(n));return!1}if(u.test(r)){for(var o=r.split(u),a=0,s=o.length;a<s;a++)e[t].apply(e,[o[a]].concat(n));return!1}return!0},l=function(e,t){var r,n=-1,i=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++n<i;)(r=e[n]).callback.call(r.ctx);return;case 1:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o);return;case 2:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o,a);return;case 3:for(;++n<i;)(r=e[n]).callback.call(r.ctx,o,a,s);return;default:for(;++n<i;)(r=e[n]).callback.apply(r.ctx,t)}},d.each({listenTo:"on",listenToOnce:"once"},function(i,e){s[e]=function(e,t,r){var n=this._listeners||(this._listeners={});return"object"==typeof t&&(r=this),(n[e._listenerId||(e._listenerId=d.uniqueId("l"))]=e)[i](t,r,this),this}}),s.bind=s.on,s.unbind=s.off,s.mixin=function(t){return d.each(["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"],function(e){t[e]=this[e]},this),t},void 0!==e&&e.exports&&(t=e.exports=s),t.BackboneEvents=s},function(e,t,r){e.exports=r(18)},function(e,t){e.exports={encode:function(t,e){function u(e){return e.filter(function(e){return"string"==typeof e&&e.length}).join("&")}function l(e){var t=Object.keys(e);return n?t.sort():t}function c(e,t){var r,n,i,o=encodeURIComponent,a=typeof t,s=null;return Array.isArray(t)?(i=e,s=u(t.map(function(e){return c(":name[]".replace(/:name/,i),e)}))):"string"==a?s=o(e)+"="+t.replace(/[^ !'()~\*]*/g,encodeURIComponent).replace(/ /g,"+").replace(/[!'()~\*]/g,d):"number"==a?s=o(e)+"="+o(t).replace(/%20/g,"+"):"boolean"==a?s=o(e)+"="+t:"object"==a&&(null!==t?(r=e,s=u(l(n=t).map(function(e){return c(":name[:prop]".replace(/:name/,r).replace(/:prop/,e),n[e])}))):h||(s=o(e)+"=null")),s}function d(e){return"%"+("0"+e.charCodeAt(0).toString(16)).slice(-2).toUpperCase()}var r="object"==typeof e?e:{},h=r.ignorenull||!1,n=r.sorted||!1;return u(l(t).map(function(e){return c(e,t[e])}))}}},function(e,t,r){(function(e,p){!function(r,n){"use strict";function i(e){delete u[e]}function o(e){if(l)setTimeout(o,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{i(e),l=!1}}}}var a,s,u,l,c,e,d,t,h;function f(e){e.source===r&&"string"==typeof e.data&&0===e.data.indexOf(h)&&o(+e.data.slice(h.length))}r.setImmediate||(s=1,l=!(u={}),c=r.document,e=(e=Object.getPrototypeOf&&Object.getPrototypeOf(r))&&e.setTimeout?e:r,a="[object process]"==={}.toString.call(r.process)?function(e){p.nextTick(function(){o(e)})}:function(){if(r.postMessage&&!r.importScripts){var e=!0,t=r.onmessage;return r.onmessage=function(){e=!1},r.postMessage("","*"),r.onmessage=t,e}}()?(h="setImmediate$"+Math.random()+"$",r.addEventListener?r.addEventListener("message",f,!1):r.attachEvent("onmessage",f),function(e){r.postMessage(h+e,"*")}):r.MessageChannel?((t=new MessageChannel).port1.onmessage=function(e){o(e.data)},function(e){t.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(d=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){o(e),t.onreadystatechange=null,d.removeChild(t),t=null},d.appendChild(t)}):function(e){setTimeout(o,0,e)},e.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var n={callback:e,args:t};return u[s]=n,a(s),s++},e.clearImmediate=i)}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,function(){return this}(),r(6))},function(e,t){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,i,o){(function(e){function t(e,t){this._id=e,this._clearFn=t}var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;i.setTimeout=function(){return new t(n.call(setTimeout,r,arguments),clearTimeout)},i.setInterval=function(){return new t(n.call(setInterval,r,arguments),clearInterval)},i.clearTimeout=i.clearInterval=function(e){e&&e.close()},t.prototype.unref=t.prototype.ref=function(){},t.prototype.close=function(){this._clearFn.call(r,this._id)},i.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},i.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},i._unrefActive=i.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;0<=t&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},o(21),i.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,i.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(i,function(){return this}())},function(e,t){var n=window.URL||window.webkitURL;e.exports=function(e,t){try{try{var r;try{(r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(e),r=r.getBlob()}catch(t){r=new Blob([e])}return new Worker(n.createObjectURL(r))}catch(t){return new Worker("data:application/javascript,"+encodeURIComponent(e))}}catch(e){return new Worker(t)}}},function(e,t,r){e.exports=function(){return r(26)('!function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var e={};return n.m=t,n.c=e,n.p="",n(0)}([function(t,n){(function(t){function n(t){h=t.sampleRate,v=t.numChannels,s()}function e(t){for(var n=0;n<v;n++)p[n].push(t[n]);g+=t[0].length}function r(t){for(var n=[],e=0;e<v;e++)n.push(i(p[e],g));if(2===v)var r=f(n[0],n[1]);else var r=n[0];var a=l(r),o=new Blob([a],{type:t});this.postMessage(o)}function a(){for(var t=[],n=0;n<v;n++)t.push(i(p[n],g));this.postMessage(t)}function o(){g=0,p=[],s()}function s(){for(var t=0;t<v;t++)p[t]=[]}function i(t,n){for(var e=new Float32Array(n),r=0,a=0;a<t.length;a++)e.set(t[a],r),r+=t[a].length;return e}function f(t,n){for(var e=t.length+n.length,r=new Float32Array(e),a=0,o=0;a<e;)r[a++]=t[o],r[a++]=n[o],o++;return r}function c(t,n,e){for(var r=0;r<e.length;r++,n+=2){var a=Math.max(-1,Math.min(1,e[r]));t.setInt16(n,a<0?32768*a:32767*a,!0)}}function u(t,n,e){for(var r=0;r<e.length;r++)t.setUint8(n+r,e.charCodeAt(r))}function l(t){var n=new ArrayBuffer(44+2*t.length),e=new DataView(n);return u(e,0,"RIFF"),e.setUint32(4,36+2*t.length,!0),u(e,8,"WAVE"),u(e,12,"fmt "),e.setUint32(16,16,!0),e.setUint16(20,1,!0),e.setUint16(22,v,!0),e.setUint32(24,h,!0),e.setUint32(28,4*h,!0),e.setUint16(32,2*v,!0),e.setUint16(34,16,!0),u(e,36,"data"),e.setUint32(40,2*t.length,!0),c(e,44,t),e}var h,v,g=0,p=[];t.onmessage=function(t){switch(t.data.command){case"init":n(t.data.config);break;case"record":e(t.data.buffer);break;case"exportWAV":r(t.data.type);break;case"getBuffer":a();break;case"clear":o()}}}).call(n,function(){return this}())}]);\n//# sourceMappingURL=9f9aac32c9a7432b5555.worker.js.map',r.p+"9f9aac32c9a7432b5555.worker.js")}},function(e,t,r){function n(e,t){var r=t||{},n=r.bufferLen||4096,i=r.numChannels||2;this.context=e.context,this.node=(this.context.createScriptProcessor||this.context.createJavaScriptNode).call(this.context,n,i,i);var o=new u;o.postMessage({command:"init",config:{sampleRate:this.context.sampleRate,numChannels:i}});var a,s=!1;this.node.onaudioprocess=function(e){if(s){for(var t=[],r=0;r<i;r++)t.push(e.inputBuffer.getChannelData(r));o.postMessage({command:"record",buffer:t})}},this.configure=function(e){for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t])},this.record=function(){s=!0},this.stop=function(){s=!1},this.clear=function(){o.postMessage({command:"clear"})},this.getBuffer=function(e){a=e||r.callback,o.postMessage({command:"getBuffer"})},this.exportWAV=function(e,t){if(a=e||r.callback,t=t||r.type||"audio/wav",!a)throw new Error("Callback not set");o.postMessage({command:"exportWAV",type:t})},o.onmessage=function(e){var t=e.data;a(t)},e.connect(this.node),this.node.connect(this.context.destination)}var u=r(27);n.forceDownload=function(e,t){var r=(window.URL||window.webkitURL).createObjectURL(e),n=window.document.createElement("a");n.href=r,n.download=t||"output.wav";var i=document.createEvent("Event");i.initEvent("click",!0,!0),n.dispatchEvent(i)},e.exports=n},function(e,t){}],r.c=i,r.p="",r(0);function r(e){if(i[e])return i[e].exports;var t=i[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,r),t.loaded=!0,t.exports}var n,i}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Headroom=t()}(this,function(){"use strict";function e(){return"undefined"!=typeof window}function t(e,n,i){var t,r,o,a,s,u,l,c=function(){var e=!1;try{var t={get passive(){e=!0}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){e=!1}return e}(),d=!1,h=(r=e)&&r.document&&9===r.document.nodeType?(s=(a=r).document,u=s.body,l=s.documentElement,{scrollHeight:function(){return Math.max(u.scrollHeight,l.scrollHeight,u.offsetHeight,l.offsetHeight,u.clientHeight,l.clientHeight)},height:function(){return a.innerHeight||l.clientHeight||u.clientHeight},scrollY:function(){return void 0!==a.pageYOffset?a.pageYOffset:(l||u.parentNode||u).scrollTop}}):(o=r,{scrollHeight:function(){return Math.max(o.scrollHeight,o.offsetHeight,o.clientHeight)},height:function(){return Math.max(o.offsetHeight,o.clientHeight)},scrollY:function(){return o.scrollTop}}),f=h.scrollY(),p={};function g(){var e=Math.round(h.scrollY()),t=h.height(),r=h.scrollHeight();p.scrollY=e,p.lastScrollY=f,p.direction=f<e?"down":"up",p.distance=Math.abs(e-f),p.isOutOfBounds=e<0||r<e+t,p.top=e<=n.offset,p.bottom=r<=e+t,p.toleranceExceeded=p.distance>n.tolerance[p.direction],i(p),f=e,d=!1}function _(){d||(d=!0,t=requestAnimationFrame(g))}var y=!!c&&{passive:!0,capture:!1};return e.addEventListener("scroll",_,y),{destroy:function(){cancelAnimationFrame(t),e.removeEventListener("scroll",_,y)}}}function n(e,t){var r;t=t||{},Object.assign(this,n.options,t),this.classes=Object.assign({},n.options.classes,t.classes),this.elem=e,this.tolerance=(r=this.tolerance)===Object(r)?r:{down:r,up:r},this.initialised=!1,this.frozen=!1}return n.prototype={constructor:n,init:function(){return n.cutsTheMustard&&!this.initialised&&(this.addClass("initial"),this.initialised=!0,setTimeout(function(e){e.scrollTracker=t(e.scroller,{offset:e.offset,tolerance:e.tolerance},e.update.bind(e))},100,this)),this},destroy:function(){this.initialised=!1,Object.keys(this.classes).forEach(this.removeClass,this),this.scrollTracker.destroy()},unpin:function(){!this.hasClass("pinned")&&this.hasClass("unpinned")||(this.addClass("unpinned"),this.removeClass("pinned"),this.onUnpin&&this.onUnpin.call(this))},pin:function(){this.hasClass("unpinned")&&(this.addClass("pinned"),this.removeClass("unpinned"),this.onPin&&this.onPin.call(this))},freeze:function(){this.frozen=!0,this.addClass("frozen")},unfreeze:function(){this.frozen=!1,this.removeClass("frozen")},top:function(){this.hasClass("top")||(this.addClass("top"),this.removeClass("notTop"),this.onTop&&this.onTop.call(this))},notTop:function(){this.hasClass("notTop")||(this.addClass("notTop"),this.removeClass("top"),this.onNotTop&&this.onNotTop.call(this))},bottom:function(){this.hasClass("bottom")||(this.addClass("bottom"),this.removeClass("notBottom"),this.onBottom&&this.onBottom.call(this))},notBottom:function(){this.hasClass("notBottom")||(this.addClass("notBottom"),this.removeClass("bottom"),this.onNotBottom&&this.onNotBottom.call(this))},shouldUnpin:function(e){return"down"===e.direction&&!e.top&&e.toleranceExceeded},shouldPin:function(e){return"up"===e.direction&&e.toleranceExceeded||e.top},addClass:function(e){this.elem.classList.add(this.classes[e])},removeClass:function(e){this.elem.classList.remove(this.classes[e])},hasClass:function(e){return this.elem.classList.contains(this.classes[e])},update:function(e){e.isOutOfBounds||!0!==this.frozen&&(e.top?this.top():this.notTop(),e.bottom?this.bottom():this.notBottom(),this.shouldUnpin(e)?this.unpin():this.shouldPin(e)&&this.pin())}},n.options={tolerance:{up:0,down:0},offset:0,scroller:e()?window:null,classes:{frozen:"headroom--frozen",pinned:"headroom--pinned",unpinned:"headroom--unpinned",top:"headroom--top",notTop:"headroom--not-top",bottom:"headroom--bottom",notBottom:"headroom--not-bottom",initial:"headroom"}},n.cutsTheMustard=!!(e()&&function(){}.bind&&"classList"in document.documentElement&&Object.assign&&Object.keys&&requestAnimationFrame),n}),function(i){i&&(i.fn.headroom=function(n){return this.each(function(){var e=i(this),t=e.data("headroom"),r="object"==typeof n&&n,r=i.extend(!0,{},Headroom.options,r);t||((t=new Headroom(this,r)).init(),e.data("headroom",t)),"string"==typeof n&&(t[n](),"destroy"===n&&e.removeData("headroom"))})},i("[data-headroom]").each(function(){var e=i(this);e.headroom(e.data())}))}(window.Zepto||window.jQuery),function(t,r){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("jquery")):t.jQueryBridget=r(t,t.jQuery)}(window,function(e,t){"use strict";var d=Array.prototype.slice,r=e.console,h=void 0===r?function(){}:function(e){r.error(e)};function n(l,i,c){(c=c||t||e.jQuery)&&(i.prototype.option||(i.prototype.option=function(e){c.isPlainObject(e)&&(this.options=c.extend(!0,this.options,e))}),c.fn[l]=function(e){if("string"!=typeof e)return n=e,this.each(function(e,t){var r=c.data(t,l);r?(r.option(n),r._init()):(r=new i(t,n),c.data(t,l,r))}),this;var t,o,a,s,u,n,r=d.call(arguments,1);return a=r,u="$()."+l+'("'+(o=e)+'")',(t=this).each(function(e,t){var r,n,i=c.data(t,l);i?(r=i[o])&&"_"!=o.charAt(0)?(n=r.apply(i,a),s=void 0===s?n:s):h(u+" is not a valid method"):h(l+" not initialized. Cannot call methods, i.e. "+u)}),void 0!==s?s:t},o(c))}function o(e){!e||e&&e.bridget||(e.bridget=n)}return o(t||e.jQuery),n}),function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var r=this._events=this._events||{},n=r[e]=r[e]||[];return-1==n.indexOf(t)&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var r=this._onceEvents=this._onceEvents||{};return(r[e]=r[e]||{})[t]=!0,this}},t.off=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){var n=r.indexOf(t);return-1!=n&&r.splice(n,1),this}},t.emitEvent=function(e,t){var r=this._events&&this._events[e];if(r&&r.length){r=r.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],i=0;i<r.length;i++){var o=r[i];n&&n[o]&&(this.off(e,o),delete n[o]),o.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"function"==typeof define&&define.amd?define("get-size/get-size",t):"object"==typeof module&&module.exports?module.exports=t():e.getSize=t()}(window,function(){"use strict";function b(e){var t=parseFloat(e);return-1==e.indexOf("%")&&!isNaN(t)&&t}var r="undefined"==typeof console?function(){}:function(e){console.error(e)},E=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],w=E.length;function S(e){var t=getComputedStyle(e);return t||r("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See https://bit.ly/getsizebug1"),t}var P,x=!1;function A(e){var t,r,n;if(x||(x=!0,(t=document.createElement("div")).style.width="200px",t.style.padding="1px 2px 3px 4px",t.style.borderStyle="solid",t.style.borderWidth="1px 2px 3px 4px",t.style.boxSizing="border-box",(r=document.body||document.documentElement).appendChild(t),n=S(t),P=200==Math.round(b(n.width)),A.isBoxSizeOuter=P,r.removeChild(t)),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var i=S(e);if("none"==i.display)return function(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0;t<w;t++){e[E[t]]=0}return e}();var o={};o.width=e.offsetWidth,o.height=e.offsetHeight;for(var a=o.isBorderBox="border-box"==i.boxSizing,s=0;s<w;s++){var u=E[s],l=i[u],c=parseFloat(l);o[u]=isNaN(c)?0:c}var d=o.paddingLeft+o.paddingRight,h=o.paddingTop+o.paddingBottom,f=o.marginLeft+o.marginRight,p=o.marginTop+o.marginBottom,g=o.borderLeftWidth+o.borderRightWidth,_=o.borderTopWidth+o.borderBottomWidth,y=a&&P,v=b(i.width);!1!==v&&(o.width=v+(y?0:d+g));var m=b(i.height);return!1!==m&&(o.height=m+(y?0:h+_)),o.innerWidth=o.width-(d+g),o.innerHeight=o.height-(h+_),o.outerWidth=o.width+f,o.outerHeight=o.height+p,o}}return A}),function(e,t){"use strict";"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",t):"object"==typeof module&&module.exports?module.exports=t():e.matchesSelector=t()}(window,function(){"use strict";var r=function(){var e=window.Element.prototype;if(e.matches)return"matches";if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],r=0;r<t.length;r++){var n=t[r]+"MatchesSelector";if(e[n])return n}}();return function(e,t){return e[r](t)}}),function(t,r){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("desandro-matches-selector")):t.fizzyUIUtils=r(t,t.matchesSelector)}(window,function(l,o){var c={extend:function(e,t){for(var r in t)e[r]=t[r];return e},modulo:function(e,t){return(e%t+t)%t}},t=Array.prototype.slice;c.makeArray=function(e){return Array.isArray(e)?e:null==e?[]:"object"==typeof e&&"number"==typeof e.length?t.call(e):[e]},c.removeFrom=function(e,t){var r=e.indexOf(t);-1!=r&&e.splice(r,1)},c.getParent=function(e,t){for(;e.parentNode&&e!=document.body;)if(e=e.parentNode,o(e,t))return e},c.getQueryElement=function(e){return"string"==typeof e?document.querySelector(e):e},c.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},c.filterFindElements=function(e,n){e=c.makeArray(e);var i=[];return e.forEach(function(e){if(e instanceof HTMLElement)if(n){o(e,n)&&i.push(e);for(var t=e.querySelectorAll(n),r=0;r<t.length;r++)i.push(t[r])}else i.push(e)}),i},c.debounceMethod=function(e,t,n){n=n||100;var i=e.prototype[t],o=t+"Timeout";e.prototype[t]=function(){var e=this[o];clearTimeout(e);var t=arguments,r=this;this[o]=setTimeout(function(){i.apply(r,t),delete r[o]},n)}},c.docReady=function(e){var t=document.readyState;"complete"==t||"interactive"==t?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},c.toDashed=function(e){return e.replace(/(.)([A-Z])/g,function(e,t,r){return t+"-"+r}).toLowerCase()};var d=l.console;return c.htmlInit=function(s,u){c.docReady(function(){var e=c.toDashed(u),i="data-"+e,t=document.querySelectorAll("["+i+"]"),r=document.querySelectorAll(".js-"+e),n=c.makeArray(t).concat(c.makeArray(r)),o=i+"-options",a=l.jQuery;n.forEach(function(t){var e,r=t.getAttribute(i)||t.getAttribute(o);try{e=r&&JSON.parse(r)}catch(e){return void(d&&d.error("Error parsing "+i+" on "+t.className+": "+e))}var n=new s(t,e);a&&a.data(t,u,n)})})},c}),function(t,r){"function"==typeof define&&define.amd?define("flickity/js/cell",["get-size/get-size"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("get-size")):(t.Flickity=t.Flickity||{},t.Flickity.Cell=r(t,t.getSize))}(window,function(e,t){function r(e,t){this.element=e,this.parent=t,this.create()}var n=r.prototype;return n.create=function(){this.element.style.position="absolute",this.element.setAttribute("aria-hidden","true"),this.x=0,this.shift=0},n.destroy=function(){this.unselect(),this.element.style.position="";var e=this.parent.originSide;this.element.style[e]=""},n.getSize=function(){this.size=t(this.element)},n.setPosition=function(e){this.x=e,this.updateTarget(),this.renderPosition(e)},n.updateTarget=n.setDefaultTarget=function(){var e="left"==this.parent.originSide?"marginLeft":"marginRight";this.target=this.x+this.size[e]+this.size.width*this.parent.cellAlign},n.renderPosition=function(e){var t=this.parent.originSide;this.element.style[t]=this.parent.getPositionValue(e)},n.select=function(){this.element.classList.add("is-selected"),this.element.removeAttribute("aria-hidden")},n.unselect=function(){this.element.classList.remove("is-selected"),this.element.setAttribute("aria-hidden","true")},n.wrapShift=function(e){this.shift=e,this.renderPosition(this.x+this.parent.slideableWidth*e)},n.remove=function(){this.element.parentNode.removeChild(this.element)},r}),function(e,t){"function"==typeof define&&define.amd?define("flickity/js/slide",t):"object"==typeof module&&module.exports?module.exports=t():(e.Flickity=e.Flickity||{},e.Flickity.Slide=t())}(window,function(){"use strict";function e(e){this.parent=e,this.isOriginLeft="left"==e.originSide,this.cells=[],this.outerWidth=0,this.height=0}var t=e.prototype;return t.addCell=function(e){var t;this.cells.push(e),this.outerWidth+=e.size.outerWidth,this.height=Math.max(e.size.outerHeight,this.height),1==this.cells.length&&(this.x=e.x,t=this.isOriginLeft?"marginLeft":"marginRight",this.firstMargin=e.size[t])},t.updateTarget=function(){var e=this.isOriginLeft?"marginRight":"marginLeft",t=this.getLastCell(),r=t?t.size[e]:0,n=this.outerWidth-(this.firstMargin+r);this.target=this.x+this.firstMargin+n*this.parent.cellAlign},t.getLastCell=function(){return this.cells[this.cells.length-1]},t.select=function(){this.cells.forEach(function(e){e.select()})},t.unselect=function(){this.cells.forEach(function(e){e.unselect()})},t.getCellElements=function(){return this.cells.map(function(e){return e.element})},e}),function(t,r){"function"==typeof define&&define.amd?define("flickity/js/animate",["fizzy-ui-utils/utils"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("fizzy-ui-utils")):(t.Flickity=t.Flickity||{},t.Flickity.animatePrototype=r(t,t.fizzyUIUtils))}(window,function(e,t){var r={startAnimation:function(){this.isAnimating||(this.isAnimating=!0,this.restingFrames=0,this.animate())},animate:function(){this.applyDragForce(),this.applySelectedAttraction();var e,t=this.x;this.integratePhysics(),this.positionSlider(),this.settle(t),this.isAnimating&&(e=this,requestAnimationFrame(function(){e.animate()}))},positionSlider:function(){var e=this.x;this.options.wrapAround&&1<this.cells.length&&(e=t.modulo(e,this.slideableWidth),e-=this.slideableWidth,this.shiftWrapCells(e)),this.setTranslateX(e,this.isAnimating),this.dispatchScrollEvent()},setTranslateX:function(e,t){e+=this.cursorPosition,e=this.options.rightToLeft?-e:e;var r=this.getPositionValue(e);this.slider.style.transform=t?"translate3d("+r+",0,0)":"translateX("+r+")"},dispatchScrollEvent:function(){var e,t,r=this.slides[0];r&&(t=(e=-this.x-r.target)/this.slidesWidth,this.dispatchEvent("scroll",null,[t,e]))},positionSliderAtSelected:function(){this.cells.length&&(this.x=-this.selectedSlide.target,this.velocity=0,this.positionSlider())},getPositionValue:function(e){return this.options.percentPosition?.01*Math.round(e/this.size.innerWidth*1e4)+"%":Math.round(e)+"px"},settle:function(e){this.isPointerDown||Math.round(100*this.x)!=Math.round(100*e)||this.restingFrames++,2<this.restingFrames&&(this.isAnimating=!1,delete this.isFreeScrolling,this.positionSlider(),this.dispatchEvent("settle",null,[this.selectedIndex]))},shiftWrapCells:function(e){var t=this.cursorPosition+e;this._shiftCells(this.beforeShiftCells,t,-1);var r=this.size.innerWidth-(e+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,r,1)},_shiftCells:function(e,t,r){for(var n=0;n<e.length;n++){var i=e[n],o=0<t?r:0;i.wrapShift(o),t-=i.size.outerWidth}},_unshiftCells:function(e){if(e&&e.length)for(var t=0;t<e.length;t++)e[t].wrapShift(0)},integratePhysics:function(){this.x+=this.velocity,this.velocity*=this.getFrictionFactor()},applyForce:function(e){this.velocity+=e},getFrictionFactor:function(){return 1-this.options[this.isFreeScrolling?"freeScrollFriction":"friction"]},getRestingPosition:function(){return this.x+this.velocity/(1-this.getFrictionFactor())},applyDragForce:function(){var e;this.isDraggable&&this.isPointerDown&&(e=this.dragX-this.x-this.velocity,this.applyForce(e))},applySelectedAttraction:function(){var e;this.isDraggable&&this.isPointerDown||this.isFreeScrolling||!this.slides.length||(e=(-1*this.selectedSlide.target-this.x)*this.options.selectedAttraction,this.applyForce(e))}};return r}),function(a,s){var e;"function"==typeof define&&define.amd?define("flickity/js/flickity",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./cell","./slide","./animate"],function(e,t,r,n,i,o){return s(a,e,t,r,n,i,o)}):"object"==typeof module&&module.exports?module.exports=s(a,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./cell"),require("./slide"),require("./animate")):(e=a.Flickity,a.Flickity=s(a,a.EvEmitter,a.getSize,a.fizzyUIUtils,e.Cell,e.Slide,e.animatePrototype))}(window,function(n,e,t,s,r,a,i){var u=n.jQuery,o=n.getComputedStyle,l=n.console;function c(e,t){for(e=s.makeArray(e);e.length;)t.appendChild(e.shift())}var d=0,h={};function f(e,t){var r=s.getQueryElement(e);if(r){if(this.element=r,this.element.flickityGUID){var n=h[this.element.flickityGUID];return n.option(t),n}u&&(this.$element=u(this.element)),this.options=s.extend({},this.constructor.defaults),this.option(t),this._create()}else l&&l.error("Bad element for Flickity: "+(r||e))}f.defaults={accessibility:!0,cellAlign:"center",freeScrollFriction:.075,friction:.28,namespaceJQueryEvents:!0,percentPosition:!0,resize:!0,selectedAttraction:.025,setGallerySize:!0},f.createMethods=[];var p=f.prototype;s.extend(p,e.prototype),p._create=function(){var e=this.guid=++d;for(var t in this.element.flickityGUID=e,(h[e]=this).selectedIndex=0,this.restingFrames=0,this.x=0,this.velocity=0,this.originSide=this.options.rightToLeft?"right":"left",this.viewport=document.createElement("div"),this.viewport.className="flickity-viewport",this._createSlider(),(this.options.resize||this.options.watchCSS)&&n.addEventListener("resize",this),this.options.on){var r=this.options.on[t];this.on(t,r)}f.createMethods.forEach(function(e){this[e]()},this),this.options.watchCSS?this.watchCSS():this.activate()},p.option=function(e){s.extend(this.options,e)},p.activate=function(){this.isActive||(this.isActive=!0,this.element.classList.add("flickity-enabled"),this.options.rightToLeft&&this.element.classList.add("flickity-rtl"),this.getSize(),c(this._filterFindCellElements(this.element.children),this.slider),this.viewport.appendChild(this.slider),this.element.appendChild(this.viewport),this.reloadCells(),this.options.accessibility&&(this.element.tabIndex=0,this.element.addEventListener("keydown",this)),this.emitEvent("activate"),this.selectInitialIndex(),this.isInitActivated=!0,this.dispatchEvent("ready"))},p._createSlider=function(){var e=document.createElement("div");e.className="flickity-slider",e.style[this.originSide]=0,this.slider=e},p._filterFindCellElements=function(e){return s.filterFindElements(e,this.options.cellSelector)},p.reloadCells=function(){this.cells=this._makeCells(this.slider.children),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize()},p._makeCells=function(e){return this._filterFindCellElements(e).map(function(e){return new r(e,this)},this)},p.getLastCell=function(){return this.cells[this.cells.length-1]},p.getLastSlide=function(){return this.slides[this.slides.length-1]},p.positionCells=function(){this._sizeCells(this.cells),this._positionCells(0)},p._positionCells=function(e){e=e||0,this.maxCellHeight=e&&this.maxCellHeight||0;var t,r=0;0<e&&(r=(t=this.cells[e-1]).x+t.size.outerWidth);for(var n=this.cells.length,i=e;i<n;i++){var o=this.cells[i];o.setPosition(r),r+=o.size.outerWidth,this.maxCellHeight=Math.max(o.size.outerHeight,this.maxCellHeight)}this.slideableWidth=r,this.updateSlides(),this._containSlides(),this.slidesWidth=n?this.getLastSlide().target-this.slides[0].target:0},p._sizeCells=function(e){e.forEach(function(e){e.getSize()})},p.updateSlides=function(){var n,i,o;this.slides=[],this.cells.length&&(n=new a(this),this.slides.push(n),i="left"==this.originSide?"marginRight":"marginLeft",o=this._getCanCellFit(),this.cells.forEach(function(e,t){var r;n.cells.length&&(r=n.outerWidth-n.firstMargin+(e.size.outerWidth-e.size[i]),o.call(this,t,r)||(n.updateTarget(),n=new a(this),this.slides.push(n))),n.addCell(e)},this),n.updateTarget(),this.updateSelectedSlide())},p._getCanCellFit=function(){var e=this.options.groupCells;if(!e)return function(){return!1};if("number"==typeof e){var t=parseInt(e,10);return function(e){return e%t!=0}}var r="string"==typeof e&&e.match(/^(\d+)%$/),n=r?parseInt(r[1],10)/100:1;return function(e,t){return t<=(this.size.innerWidth+1)*n}},p._init=p.reposition=function(){this.positionCells(),this.positionSliderAtSelected()},p.getSize=function(){this.size=t(this.element),this.setCellAlign(),this.cursorPosition=this.size.innerWidth*this.cellAlign};var g={center:{left:.5,right:.5},left:{left:0,right:1},right:{right:0,left:1}};return p.setCellAlign=function(){var e=g[this.options.cellAlign];this.cellAlign=e?e[this.originSide]:this.options.cellAlign},p.setGallerySize=function(){var e;this.options.setGallerySize&&(e=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight,this.viewport.style.height=e+"px")},p._getWrapShiftCells=function(){var e,t;this.options.wrapAround&&(this._unshiftCells(this.beforeShiftCells),this._unshiftCells(this.afterShiftCells),e=this.cursorPosition,t=this.cells.length-1,this.beforeShiftCells=this._getGapCells(e,t,-1),e=this.size.innerWidth-this.cursorPosition,this.afterShiftCells=this._getGapCells(e,0,1))},p._getGapCells=function(e,t,r){for(var n=[];0<e;){var i=this.cells[t];if(!i)break;n.push(i),t+=r,e-=i.size.outerWidth}return n},p._containSlides=function(){var e,t,r,n,i,o,a;this.options.contain&&!this.options.wrapAround&&this.cells.length&&(t=(e=this.options.rightToLeft)?"marginRight":"marginLeft",r=e?"marginLeft":"marginRight",n=this.slideableWidth-this.getLastCell().size[r],i=n<this.size.innerWidth,o=this.cursorPosition+this.cells[0].size[t],a=n-this.size.innerWidth*(1-this.cellAlign),this.slides.forEach(function(e){i?e.target=n*this.cellAlign:(e.target=Math.max(e.target,o),e.target=Math.min(e.target,a))},this))},p.dispatchEvent=function(e,t,r){var n,i,o=t?[t].concat(r):r;this.emitEvent(e,o),u&&this.$element&&(n=e+=this.options.namespaceJQueryEvents?".flickity":"",t&&((i=u.Event(t)).type=e,n=i),this.$element.trigger(n,r))},p.select=function(e,t,r){var n;this.isActive&&(e=parseInt(e,10),this._wrapSelect(e),(this.options.wrapAround||t)&&(e=s.modulo(e,this.slides.length)),this.slides[e]&&(n=this.selectedIndex,this.selectedIndex=e,this.updateSelectedSlide(),r?this.positionSliderAtSelected():this.startAnimation(),this.options.adaptiveHeight&&this.setGallerySize(),this.dispatchEvent("select",null,[e]),e!=n&&this.dispatchEvent("change",null,[e]),this.dispatchEvent("cellSelect")))},p._wrapSelect=function(e){var t=this.slides.length;if(!(this.options.wrapAround&&1<t))return e;var r=s.modulo(e,t),n=Math.abs(r-this.selectedIndex),i=Math.abs(r+t-this.selectedIndex),o=Math.abs(r-t-this.selectedIndex);!this.isDragSelect&&i<n?e+=t:!this.isDragSelect&&o<n&&(e-=t),e<0?this.x-=this.slideableWidth:t<=e&&(this.x+=this.slideableWidth)},p.previous=function(e,t){this.select(this.selectedIndex-1,e,t)},p.next=function(e,t){this.select(this.selectedIndex+1,e,t)},p.updateSelectedSlide=function(){var e=this.slides[this.selectedIndex];e&&(this.unselectSelectedSlide(),(this.selectedSlide=e).select(),this.selectedCells=e.cells,this.selectedElements=e.getCellElements(),this.selectedCell=e.cells[0],this.selectedElement=this.selectedElements[0])},p.unselectSelectedSlide=function(){this.selectedSlide&&this.selectedSlide.unselect()},p.selectInitialIndex=function(){var e=this.options.initialIndex;if(this.isInitActivated)this.select(this.selectedIndex,!1,!0);else{if(e&&"string"==typeof e)if(this.queryCell(e))return void this.selectCell(e,!1,!0);var t=0;e&&this.slides[e]&&(t=e),this.select(t,!1,!0)}},p.selectCell=function(e,t,r){var n,i=this.queryCell(e);i&&(n=this.getCellSlideIndex(i),this.select(n,t,r))},p.getCellSlideIndex=function(e){for(var t=0;t<this.slides.length;t++){if(-1!=this.slides[t].cells.indexOf(e))return t}},p.getCell=function(e){for(var t=0;t<this.cells.length;t++){var r=this.cells[t];if(r.element==e)return r}},p.getCells=function(e){e=s.makeArray(e);var r=[];return e.forEach(function(e){var t=this.getCell(e);t&&r.push(t)},this),r},p.getCellElements=function(){return this.cells.map(function(e){return e.element})},p.getParentCell=function(e){var t=this.getCell(e);return t||(e=s.getParent(e,".flickity-slider > *"),this.getCell(e))},p.getAdjacentCellElements=function(e,t){if(!e)return this.selectedSlide.getCellElements();t=void 0===t?this.selectedIndex:t;var r=this.slides.length;if(r<=1+2*e)return this.getCellElements();for(var n=[],i=t-e;i<=t+e;i++){var o=this.options.wrapAround?s.modulo(i,r):i,a=this.slides[o];a&&(n=n.concat(a.getCellElements()))}return n},p.queryCell=function(e){if("number"==typeof e)return this.cells[e];if("string"==typeof e){if(e.match(/^[#\.]?[\d\/]/))return;e=this.element.querySelector(e)}return this.getCell(e)},p.uiChange=function(){this.emitEvent("uiChange")},p.childUIPointerDown=function(e){"touchstart"!=e.type&&e.preventDefault(),this.focus()},p.onresize=function(){this.watchCSS(),this.resize()},s.debounceMethod(f,"onresize",150),p.resize=function(){var e;this.isActive&&(this.getSize(),this.options.wrapAround&&(this.x=s.modulo(this.x,this.slideableWidth)),this.positionCells(),this._getWrapShiftCells(),this.setGallerySize(),this.emitEvent("resize"),e=this.selectedElements&&this.selectedElements[0],this.selectCell(e,!1,!0))},p.watchCSS=function(){this.options.watchCSS&&(-1!=o(this.element,":after").content.indexOf("flickity")?this.activate():this.deactivate())},p.onkeydown=function(e){var t,r=document.activeElement&&document.activeElement!=this.element;!this.options.accessibility||r||(t=f.keyboardHandlers[e.keyCode])&&t.call(this)},f.keyboardHandlers={37:function(){var e=this.options.rightToLeft?"next":"previous";this.uiChange(),this[e]()},39:function(){var e=this.options.rightToLeft?"previous":"next";this.uiChange(),this[e]()}},p.focus=function(){var e=n.pageYOffset;this.element.focus({preventScroll:!0}),n.pageYOffset!=e&&n.scrollTo(n.pageXOffset,e)},p.deactivate=function(){this.isActive&&(this.element.classList.remove("flickity-enabled"),this.element.classList.remove("flickity-rtl"),this.unselectSelectedSlide(),this.cells.forEach(function(e){e.destroy()}),this.element.removeChild(this.viewport),c(this.slider.children,this.element),this.options.accessibility&&(this.element.removeAttribute("tabIndex"),this.element.removeEventListener("keydown",this)),this.isActive=!1,this.emitEvent("deactivate"))},p.destroy=function(){this.deactivate(),n.removeEventListener("resize",this),this.allOff(),this.emitEvent("destroy"),u&&this.$element&&u.removeData(this.element,"flickity"),delete this.element.flickityGUID,delete h[this.guid]},s.extend(p,i),f.data=function(e){var t=(e=s.getQueryElement(e))&&e.flickityGUID;return t&&h[t]},s.htmlInit(f,"flickity"),u&&u.bridget&&u.bridget("flickity",f),f.setJQuery=function(e){u=e},f.Cell=r,f.Slide=a,f}),function(t,r){"function"==typeof define&&define.amd?define("unipointer/unipointer",["ev-emitter/ev-emitter"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("ev-emitter")):t.Unipointer=r(t,t.EvEmitter)}(window,function(i,e){function t(){}var r=t.prototype=Object.create(e.prototype);r.bindStartEvent=function(e){this._bindStartEvent(e,!0)},r.unbindStartEvent=function(e){this._bindStartEvent(e,!1)},r._bindStartEvent=function(e,t){var r=(t=void 0===t||t)?"addEventListener":"removeEventListener",n="mousedown";i.PointerEvent?n="pointerdown":"ontouchstart"in i&&(n="touchstart"),e[r](n,this)},r.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.getTouch=function(e){for(var t=0;t<e.length;t++){var r=e[t];if(r.identifier==this.pointerIdentifier)return r}},r.onmousedown=function(e){var t=e.button;t&&0!==t&&1!==t||this._pointerDown(e,e)},r.ontouchstart=function(e){this._pointerDown(e,e.changedTouches[0])},r.onpointerdown=function(e){this._pointerDown(e,e)},r._pointerDown=function(e,t){e.button||this.isPointerDown||(this.isPointerDown=!0,this.pointerIdentifier=void 0!==t.pointerId?t.pointerId:t.identifier,this.pointerDown(e,t))},r.pointerDown=function(e,t){this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t])};var n={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]};return r._bindPostStartEvents=function(e){var t;e&&((t=n[e.type]).forEach(function(e){i.addEventListener(e,this)},this),this._boundPointerEvents=t)},r._unbindPostStartEvents=function(){this._boundPointerEvents&&(this._boundPointerEvents.forEach(function(e){i.removeEventListener(e,this)},this),delete this._boundPointerEvents)},r.onmousemove=function(e){this._pointerMove(e,e)},r.onpointermove=function(e){e.pointerId==this.pointerIdentifier&&this._pointerMove(e,e)},r.ontouchmove=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerMove(e,t)},r._pointerMove=function(e,t){this.pointerMove(e,t)},r.pointerMove=function(e,t){this.emitEvent("pointerMove",[e,t])},r.onmouseup=function(e){this._pointerUp(e,e)},r.onpointerup=function(e){e.pointerId==this.pointerIdentifier&&this._pointerUp(e,e)},r.ontouchend=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerUp(e,t)},r._pointerUp=function(e,t){this._pointerDone(),this.pointerUp(e,t)},r.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t])},r._pointerDone=function(){this._pointerReset(),this._unbindPostStartEvents(),this.pointerDone()},r._pointerReset=function(){this.isPointerDown=!1,delete this.pointerIdentifier},r.pointerDone=function(){},r.onpointercancel=function(e){e.pointerId==this.pointerIdentifier&&this._pointerCancel(e,e)},r.ontouchcancel=function(e){var t=this.getTouch(e.changedTouches);t&&this._pointerCancel(e,t)},r._pointerCancel=function(e,t){this._pointerDone(),this.pointerCancel(e,t)},r.pointerCancel=function(e,t){this.emitEvent("pointerCancel",[e,t])},t.getPointerPoint=function(e){return{x:e.pageX,y:e.pageY}},t}),function(t,r){"function"==typeof define&&define.amd?define("unidragger/unidragger",["unipointer/unipointer"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("unipointer")):t.Unidragger=r(t,t.Unipointer)}(window,function(o,e){function t(){}var r=t.prototype=Object.create(e.prototype);r.bindHandles=function(){this._bindHandles(!0)},r.unbindHandles=function(){this._bindHandles(!1)},r._bindHandles=function(e){for(var t=(e=void 0===e||e)?"addEventListener":"removeEventListener",r=e?this._touchActionValue:"",n=0;n<this.handles.length;n++){var i=this.handles[n];this._bindStartEvent(i,e),i[t]("click",this),o.PointerEvent&&(i.style.touchAction=r)}},r._touchActionValue="none",r.pointerDown=function(e,t){this.okayPointerDown(e)&&(this.pointerDownPointer=t,e.preventDefault(),this.pointerDownBlur(),this._bindPostStartEvents(e),this.emitEvent("pointerDown",[e,t]))};var i={TEXTAREA:!0,INPUT:!0,SELECT:!0,OPTION:!0},a={radio:!0,checkbox:!0,button:!0,submit:!0,image:!0,file:!0};return r.okayPointerDown=function(e){var t=i[e.target.nodeName],r=a[e.target.type],n=!t||r;return n||this._pointerReset(),n},r.pointerDownBlur=function(){var e=document.activeElement;e&&e.blur&&e!=document.body&&e.blur()},r.pointerMove=function(e,t){var r=this._dragPointerMove(e,t);this.emitEvent("pointerMove",[e,t,r]),this._dragMove(e,t,r)},r._dragPointerMove=function(e,t){var r={x:t.pageX-this.pointerDownPointer.pageX,y:t.pageY-this.pointerDownPointer.pageY};return!this.isDragging&&this.hasDragStarted(r)&&this._dragStart(e,t),r},r.hasDragStarted=function(e){return 3<Math.abs(e.x)||3<Math.abs(e.y)},r.pointerUp=function(e,t){this.emitEvent("pointerUp",[e,t]),this._dragPointerUp(e,t)},r._dragPointerUp=function(e,t){this.isDragging?this._dragEnd(e,t):this._staticClick(e,t)},r._dragStart=function(e,t){this.isDragging=!0,this.isPreventingClicks=!0,this.dragStart(e,t)},r.dragStart=function(e,t){this.emitEvent("dragStart",[e,t])},r._dragMove=function(e,t,r){this.isDragging&&this.dragMove(e,t,r)},r.dragMove=function(e,t,r){e.preventDefault(),this.emitEvent("dragMove",[e,t,r])},r._dragEnd=function(e,t){this.isDragging=!1,setTimeout(function(){delete this.isPreventingClicks}.bind(this)),this.dragEnd(e,t)},r.dragEnd=function(e,t){this.emitEvent("dragEnd",[e,t])},r.onclick=function(e){this.isPreventingClicks&&e.preventDefault()},r._staticClick=function(e,t){this.isIgnoringMouseUp&&"mouseup"==e.type||(this.staticClick(e,t),"mouseup"!=e.type&&(this.isIgnoringMouseUp=!0,setTimeout(function(){delete this.isIgnoringMouseUp}.bind(this),400)))},r.staticClick=function(e,t){this.emitEvent("staticClick",[e,t])},t.getPointerPoint=e.getPointerPoint,t}),function(n,i){"function"==typeof define&&define.amd?define("flickity/js/drag",["./flickity","unidragger/unidragger","fizzy-ui-utils/utils"],function(e,t,r){return i(n,e,t,r)}):"object"==typeof module&&module.exports?module.exports=i(n,require("./flickity"),require("unidragger"),require("fizzy-ui-utils")):n.Flickity=i(n,n.Flickity,n.Unidragger,n.fizzyUIUtils)}(window,function(r,e,t,s){s.extend(e.defaults,{draggable:">1",dragThreshold:3}),e.createMethods.push("_createDrag");var n=e.prototype;s.extend(n,t.prototype),n._touchActionValue="pan-y";var i="createTouch"in document,o=!1;n._createDrag=function(){this.on("activate",this.onActivateDrag),this.on("uiChange",this._uiChangeDrag),this.on("deactivate",this.onDeactivateDrag),this.on("cellChange",this.updateDraggable),i&&!o&&(r.addEventListener("touchmove",function(){}),o=!0)},n.onActivateDrag=function(){this.handles=[this.viewport],this.bindHandles(),this.updateDraggable()},n.onDeactivateDrag=function(){this.unbindHandles(),this.element.classList.remove("is-draggable")},n.updateDraggable=function(){">1"==this.options.draggable?this.isDraggable=1<this.slides.length:this.isDraggable=this.options.draggable,this.isDraggable?this.element.classList.add("is-draggable"):this.element.classList.remove("is-draggable")},n.bindDrag=function(){this.options.draggable=!0,this.updateDraggable()},n.unbindDrag=function(){this.options.draggable=!1,this.updateDraggable()},n._uiChangeDrag=function(){delete this.isFreeScrolling},n.pointerDown=function(e,t){this.isDraggable?this.okayPointerDown(e)&&(this._pointerDownPreventDefault(e),this.pointerDownFocus(e),document.activeElement!=this.element&&this.pointerDownBlur(),this.dragX=this.x,this.viewport.classList.add("is-pointer-down"),this.pointerDownScroll=u(),r.addEventListener("scroll",this),this._pointerDownDefault(e,t)):this._pointerDownDefault(e,t)},n._pointerDownDefault=function(e,t){this.pointerDownPointer={pageX:t.pageX,pageY:t.pageY},this._bindPostStartEvents(e),this.dispatchEvent("pointerDown",e,[t])};var a={INPUT:!0,TEXTAREA:!0,SELECT:!0};function u(){return{x:r.pageXOffset,y:r.pageYOffset}}return n.pointerDownFocus=function(e){a[e.target.nodeName]||this.focus()},n._pointerDownPreventDefault=function(e){var t="touchstart"==e.type,r="touch"==e.pointerType,n=a[e.target.nodeName];t||r||n||e.preventDefault()},n.hasDragStarted=function(e){return Math.abs(e.x)>this.options.dragThreshold},n.pointerUp=function(e,t){delete this.isTouchScrolling,this.viewport.classList.remove("is-pointer-down"),this.dispatchEvent("pointerUp",e,[t]),this._dragPointerUp(e,t)},n.pointerDone=function(){r.removeEventListener("scroll",this),delete this.pointerDownScroll},n.dragStart=function(e,t){this.isDraggable&&(this.dragStartPosition=this.x,this.startAnimation(),r.removeEventListener("scroll",this),this.dispatchEvent("dragStart",e,[t]))},n.pointerMove=function(e,t){var r=this._dragPointerMove(e,t);this.dispatchEvent("pointerMove",e,[t,r]),this._dragMove(e,t,r)},n.dragMove=function(e,t,r){var n,i,o,a;this.isDraggable&&(e.preventDefault(),this.previousDragX=this.dragX,n=this.options.rightToLeft?-1:1,this.options.wrapAround&&(r.x=r.x%this.slideableWidth),o=this.dragStartPosition+r.x*n,!this.options.wrapAround&&this.slides.length&&(o=(o=(i=Math.max(-this.slides[0].target,this.dragStartPosition))<o?.5*(o+i):o)<(a=Math.min(-this.getLastSlide().target,this.dragStartPosition))?.5*(o+a):o),this.dragX=o,this.dragMoveTime=new Date,this.dispatchEvent("dragMove",e,[t,r]))},n.dragEnd=function(e,t){var r,n;this.isDraggable&&(this.options.freeScroll&&(this.isFreeScrolling=!0),r=this.dragEndRestingSelect(),this.options.freeScroll&&!this.options.wrapAround?(n=this.getRestingPosition(),this.isFreeScrolling=-n>this.slides[0].target&&-n<this.getLastSlide().target):this.options.freeScroll||r!=this.selectedIndex||(r+=this.dragEndBoostSelect()),delete this.previousDragX,this.isDragSelect=this.options.wrapAround,this.select(r),delete this.isDragSelect,this.dispatchEvent("dragEnd",e,[t]))},n.dragEndRestingSelect=function(){var e=this.getRestingPosition(),t=Math.abs(this.getSlideDistance(-e,this.selectedIndex)),r=this._getClosestResting(e,t,1),n=this._getClosestResting(e,t,-1);return r.distance<n.distance?r.index:n.index},n._getClosestResting=function(e,t,r){for(var n=this.selectedIndex,i=1/0,o=this.options.contain&&!this.options.wrapAround?function(e,t){return e<=t}:function(e,t){return e<t};o(t,i)&&(n+=r,i=t,null!==(t=this.getSlideDistance(-e,n)));)t=Math.abs(t);return{distance:i,index:n-r}},n.getSlideDistance=function(e,t){var r=this.slides.length,n=this.options.wrapAround&&1<r,i=n?s.modulo(t,r):t,o=this.slides[i];if(!o)return null;var a=n?this.slideableWidth*Math.floor(t/r):0;return e-(o.target+a)},n.dragEndBoostSelect=function(){if(void 0===this.previousDragX||!this.dragMoveTime||100<new Date-this.dragMoveTime)return 0;var e=this.getSlideDistance(-this.dragX,this.selectedIndex),t=this.previousDragX-this.dragX;return 0<e&&0<t?1:e<0&&t<0?-1:0},n.staticClick=function(e,t){var r=this.getParentCell(e.target),n=r&&r.element,i=r&&this.cells.indexOf(r);this.dispatchEvent("staticClick",e,[t,n,i])},n.onscroll=function(){var e=u(),t=this.pointerDownScroll.x-e.x,r=this.pointerDownScroll.y-e.y;(3<Math.abs(t)||3<Math.abs(r))&&this._pointerDone()},e}),function(n,i){"function"==typeof define&&define.amd?define("flickity/js/prev-next-button",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(e,t,r){return i(n,e,t,r)}):"object"==typeof module&&module.exports?module.exports=i(n,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):i(n,n.Flickity,n.Unipointer,n.fizzyUIUtils)}(window,function(e,t,r,n){"use strict";var i="http://www.w3.org/2000/svg";function o(e,t){this.direction=e,this.parent=t,this._create()}(o.prototype=Object.create(r.prototype))._create=function(){this.isEnabled=!0,this.isPrevious=-1==this.direction;var e=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==e;var t=this.element=document.createElement("button");t.className="flickity-button flickity-prev-next-button",t.className+=this.isPrevious?" previous":" next",t.setAttribute("type","button"),this.disable(),t.setAttribute("aria-label",this.isPrevious?"Previous":"Next");var r=this.createSVG();t.appendChild(r),this.parent.on("select",this.update.bind(this)),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},o.prototype.activate=function(){this.bindStartEvent(this.element),this.element.addEventListener("click",this),this.parent.element.appendChild(this.element)},o.prototype.deactivate=function(){this.parent.element.removeChild(this.element),this.unbindStartEvent(this.element),this.element.removeEventListener("click",this)},o.prototype.createSVG=function(){var e=document.createElementNS(i,"svg");e.setAttribute("class","flickity-button-icon"),e.setAttribute("viewBox","0 0 100 100");var t,r=document.createElementNS(i,"path"),n="string"!=typeof(t=this.parent.options.arrowShape)?"M "+t.x0+",50 L "+t.x1+","+(t.y1+50)+" L "+t.x2+","+(t.y2+50)+" L "+t.x3+",50  L "+t.x2+","+(50-t.y2)+" L "+t.x1+","+(50-t.y1)+" Z":t;return r.setAttribute("d",n),r.setAttribute("class","arrow"),this.isLeft||r.setAttribute("transform","translate(100, 100) rotate(180) "),e.appendChild(r),e},o.prototype.handleEvent=n.handleEvent,o.prototype.onclick=function(){var e;this.isEnabled&&(this.parent.uiChange(),e=this.isPrevious?"previous":"next",this.parent[e]())},o.prototype.enable=function(){this.isEnabled||(this.element.disabled=!1,this.isEnabled=!0)},o.prototype.disable=function(){this.isEnabled&&(this.element.disabled=!0,this.isEnabled=!1)},o.prototype.update=function(){var e,t,r=this.parent.slides;this.parent.options.wrapAround&&1<r.length?this.enable():(e=r.length?r.length-1:0,t=this.isPrevious?0:e,this[this.parent.selectedIndex==t?"disable":"enable"]())},o.prototype.destroy=function(){this.deactivate(),this.allOff()},n.extend(t.defaults,{prevNextButtons:!0,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}}),t.createMethods.push("_createPrevNextButtons");var a=t.prototype;return a._createPrevNextButtons=function(){this.options.prevNextButtons&&(this.prevButton=new o(-1,this),this.nextButton=new o(1,this),this.on("activate",this.activatePrevNextButtons))},a.activatePrevNextButtons=function(){this.prevButton.activate(),this.nextButton.activate(),this.on("deactivate",this.deactivatePrevNextButtons)},a.deactivatePrevNextButtons=function(){this.prevButton.deactivate(),this.nextButton.deactivate(),this.off("deactivate",this.deactivatePrevNextButtons)},t.PrevNextButton=o,t}),function(n,i){"function"==typeof define&&define.amd?define("flickity/js/page-dots",["./flickity","unipointer/unipointer","fizzy-ui-utils/utils"],function(e,t,r){return i(n,e,t,r)}):"object"==typeof module&&module.exports?module.exports=i(n,require("./flickity"),require("unipointer"),require("fizzy-ui-utils")):i(n,n.Flickity,n.Unipointer,n.fizzyUIUtils)}(window,function(e,t,r,n){function i(e){this.parent=e,this._create()}(i.prototype=Object.create(r.prototype))._create=function(){this.holder=document.createElement("ol"),this.holder.className="flickity-page-dots",this.dots=[],this.handleClick=this.onClick.bind(this),this.on("pointerDown",this.parent.childUIPointerDown.bind(this.parent))},i.prototype.activate=function(){this.setDots(),this.holder.addEventListener("click",this.handleClick),this.bindStartEvent(this.holder),this.parent.element.appendChild(this.holder)},i.prototype.deactivate=function(){this.holder.removeEventListener("click",this.handleClick),this.unbindStartEvent(this.holder),this.parent.element.removeChild(this.holder)},i.prototype.setDots=function(){var e=this.parent.slides.length-this.dots.length;0<e?this.addDots(e):e<0&&this.removeDots(-e)},i.prototype.addDots=function(e){for(var t=document.createDocumentFragment(),r=[],n=this.dots.length,i=n+e,o=n;o<i;o++){var a=document.createElement("li");a.className="dot",a.setAttribute("aria-label","Page dot "+(o+1)),t.appendChild(a),r.push(a)}this.holder.appendChild(t),this.dots=this.dots.concat(r)},i.prototype.removeDots=function(e){this.dots.splice(this.dots.length-e,e).forEach(function(e){this.holder.removeChild(e)},this)},i.prototype.updateSelected=function(){this.selectedDot&&(this.selectedDot.className="dot",this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[this.parent.selectedIndex],this.selectedDot.className="dot is-selected",this.selectedDot.setAttribute("aria-current","step"))},i.prototype.onTap=i.prototype.onClick=function(e){var t,r=e.target;"LI"==r.nodeName&&(this.parent.uiChange(),t=this.dots.indexOf(r),this.parent.select(t))},i.prototype.destroy=function(){this.deactivate(),this.allOff()},t.PageDots=i,n.extend(t.defaults,{pageDots:!0}),t.createMethods.push("_createPageDots");var o=t.prototype;return o._createPageDots=function(){this.options.pageDots&&(this.pageDots=new i(this),this.on("activate",this.activatePageDots),this.on("select",this.updateSelectedPageDots),this.on("cellChange",this.updatePageDots),this.on("resize",this.updatePageDots),this.on("deactivate",this.deactivatePageDots))},o.activatePageDots=function(){this.pageDots.activate()},o.updateSelectedPageDots=function(){this.pageDots.updateSelected()},o.updatePageDots=function(){this.pageDots.setDots()},o.deactivatePageDots=function(){this.pageDots.deactivate()},t.PageDots=i,t}),function(e,t){"function"==typeof define&&define.amd?define("flickity/js/player",["ev-emitter/ev-emitter","fizzy-ui-utils/utils","./flickity"],t):"object"==typeof module&&module.exports?module.exports=t(require("ev-emitter"),require("fizzy-ui-utils"),require("./flickity")):t(e.EvEmitter,e.fizzyUIUtils,e.Flickity)}(window,function(e,t,r){function n(e){this.parent=e,this.state="stopped",this.onVisibilityChange=this.visibilityChange.bind(this),this.onVisibilityPlay=this.visibilityPlay.bind(this)}(n.prototype=Object.create(e.prototype)).play=function(){"playing"!=this.state&&(document.hidden?document.addEventListener("visibilitychange",this.onVisibilityPlay):(this.state="playing",document.addEventListener("visibilitychange",this.onVisibilityChange),this.tick()))},n.prototype.tick=function(){var e,t;"playing"==this.state&&(e="number"==typeof(e=this.parent.options.autoPlay)?e:3e3,(t=this).clear(),this.timeout=setTimeout(function(){t.parent.next(!0),t.tick()},e))},n.prototype.stop=function(){this.state="stopped",this.clear(),document.removeEventListener("visibilitychange",this.onVisibilityChange)},n.prototype.clear=function(){clearTimeout(this.timeout)},n.prototype.pause=function(){"playing"==this.state&&(this.state="paused",this.clear())},n.prototype.unpause=function(){"paused"==this.state&&this.play()},n.prototype.visibilityChange=function(){this[document.hidden?"pause":"unpause"]()},n.prototype.visibilityPlay=function(){this.play(),document.removeEventListener("visibilitychange",this.onVisibilityPlay)},t.extend(r.defaults,{pauseAutoPlayOnHover:!0}),r.createMethods.push("_createPlayer");var i=r.prototype;return i._createPlayer=function(){this.player=new n(this),this.on("activate",this.activatePlayer),this.on("uiChange",this.stopPlayer),this.on("pointerDown",this.stopPlayer),this.on("deactivate",this.deactivatePlayer)},i.activatePlayer=function(){this.options.autoPlay&&(this.player.play(),this.element.addEventListener("mouseenter",this))},i.playPlayer=function(){this.player.play()},i.stopPlayer=function(){this.player.stop()},i.pausePlayer=function(){this.player.pause()},i.unpausePlayer=function(){this.player.unpause()},i.deactivatePlayer=function(){this.player.stop(),this.element.removeEventListener("mouseenter",this)},i.onmouseenter=function(){this.options.pauseAutoPlayOnHover&&(this.player.pause(),this.element.addEventListener("mouseleave",this))},i.onmouseleave=function(){this.player.unpause(),this.element.removeEventListener("mouseleave",this)},r.Player=n,r}),function(r,n){"function"==typeof define&&define.amd?define("flickity/js/add-remove-cell",["./flickity","fizzy-ui-utils/utils"],function(e,t){return n(r,e,t)}):"object"==typeof module&&module.exports?module.exports=n(r,require("./flickity"),require("fizzy-ui-utils")):n(r,r.Flickity,r.fizzyUIUtils)}(window,function(e,t,n){var r=t.prototype;return r.insert=function(e,t){var r,n,i,o,a,s,u,l=this._makeCells(e);l&&l.length&&(r=this.cells.length,t=void 0===t?r:t,i=l,o=document.createDocumentFragment(),i.forEach(function(e){o.appendChild(e.element)}),n=o,(a=t==r)?this.slider.appendChild(n):(s=this.cells[t].element,this.slider.insertBefore(n,s)),0===t?this.cells=l.concat(this.cells):a?this.cells=this.cells.concat(l):(u=this.cells.splice(t,r-t),this.cells=this.cells.concat(l).concat(u)),this._sizeCells(l),this.cellChange(t,!0))},r.append=function(e){this.insert(e,this.cells.length)},r.prepend=function(e){this.insert(e,0)},r.remove=function(e){var r,t=this.getCells(e);t&&t.length&&(r=this.cells.length-1,t.forEach(function(e){e.remove();var t=this.cells.indexOf(e);r=Math.min(t,r),n.removeFrom(this.cells,e)},this),this.cellChange(r,!0))},r.cellSizeChange=function(e){var t,r=this.getCell(e);r&&(r.getSize(),t=this.cells.indexOf(r),this.cellChange(t))},r.cellChange=function(e,t){var r=this.selectedElement;this._positionCells(e),this._getWrapShiftCells(),this.setGallerySize();var n=this.getCell(r);n&&(this.selectedIndex=this.getCellSlideIndex(n)),this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex),this.emitEvent("cellChange",[e]),this.select(this.selectedIndex),t&&this.positionSliderAtSelected()},t}),function(r,n){"function"==typeof define&&define.amd?define("flickity/js/lazyload",["./flickity","fizzy-ui-utils/utils"],function(e,t){return n(r,e,t)}):"object"==typeof module&&module.exports?module.exports=n(r,require("./flickity"),require("fizzy-ui-utils")):n(r,r.Flickity,r.fizzyUIUtils)}(window,function(e,t,o){"use strict";t.createMethods.push("_createLazyload");var r=t.prototype;function i(e,t){this.img=e,this.flickity=t,this.load()}return r._createLazyload=function(){this.on("select",this.lazyLoad)},r.lazyLoad=function(){var e,t,r,n=this.options.lazyLoad;n&&(e="number"==typeof n?n:0,t=this.getAdjacentCellElements(e),r=[],t.forEach(function(e){var t=function(e){if("IMG"==e.nodeName){var t=e.getAttribute("data-flickity-lazyload"),r=e.getAttribute("data-flickity-lazyload-src"),n=e.getAttribute("data-flickity-lazyload-srcset");if(t||r||n)return[e]}var i=e.querySelectorAll("img[data-flickity-lazyload], img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]");return o.makeArray(i)}(e);r=r.concat(t)}),r.forEach(function(e){new i(e,this)},this))},i.prototype.handleEvent=o.handleEvent,i.prototype.load=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this);var e=this.img.getAttribute("data-flickity-lazyload")||this.img.getAttribute("data-flickity-lazyload-src"),t=this.img.getAttribute("data-flickity-lazyload-srcset");this.img.src=e,t&&this.img.setAttribute("srcset",t),this.img.removeAttribute("data-flickity-lazyload"),this.img.removeAttribute("data-flickity-lazyload-src"),this.img.removeAttribute("data-flickity-lazyload-srcset")},i.prototype.onload=function(e){this.complete(e,"flickity-lazyloaded")},i.prototype.onerror=function(e){this.complete(e,"flickity-lazyerror")},i.prototype.complete=function(e,t){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this);var r=this.flickity.getParentCell(this.img),n=r&&r.element;this.flickity.cellSizeChange(n),this.img.classList.add(t),this.flickity.dispatchEvent("lazyLoad",e,n)},t.LazyLoader=i,t}),function(e){"function"==typeof define&&define.amd?define("flickity/js/index",["./flickity","./drag","./prev-next-button","./page-dots","./player","./add-remove-cell","./lazyload"],e):"object"==typeof module&&module.exports&&(module.exports=e(require("./flickity"),require("./drag"),require("./prev-next-button"),require("./page-dots"),require("./player"),require("./add-remove-cell"),require("./lazyload")))}((window,function(e){return e})),function(e,t){"function"==typeof define&&define.amd?define("flickity-as-nav-for/as-nav-for",["flickity/js/index","fizzy-ui-utils/utils"],t):"object"==typeof module&&module.exports?module.exports=t(require("flickity"),require("fizzy-ui-utils")):e.Flickity=t(e.Flickity,e.fizzyUIUtils)}(window,function(n,i){n.createMethods.push("_createAsNavFor");var e=n.prototype;return e._createAsNavFor=function(){this.on("activate",this.activateAsNavFor),this.on("deactivate",this.deactivateAsNavFor),this.on("destroy",this.destroyAsNavFor);var e,t=this.options.asNavFor;t&&(e=this,setTimeout(function(){e.setNavCompanion(t)}))},e.setNavCompanion=function(e){e=i.getQueryElement(e);var t,r=n.data(e);r&&r!=this&&(this.navCompanion=r,(t=this).onNavCompanionSelect=function(){t.navCompanionSelect()},r.on("select",this.onNavCompanionSelect),this.on("staticClick",this.onNavStaticClick),this.navCompanionSelect(!0))},e.navCompanionSelect=function(e){var t,r,n,i,o,a,s,u,l=this.navCompanion&&this.navCompanion.selectedCells;l&&(t=l[0],n=(r=this.navCompanion.cells.indexOf(t))+l.length-1,i=Math.floor((o=r,a=n,s=this.navCompanion.cellAlign,(a-o)*s+o)),this.selectCell(i,!1,e),this.removeNavSelectedElements(),i>=this.cells.length||(u=this.cells.slice(r,1+n),this.navSelectedElements=u.map(function(e){return e.element}),this.changeNavSelectedClass("add")))},e.changeNavSelectedClass=function(t){this.navSelectedElements.forEach(function(e){e.classList[t]("is-nav-selected")})},e.activateAsNavFor=function(){this.navCompanionSelect(!0)},e.removeNavSelectedElements=function(){this.navSelectedElements&&(this.changeNavSelectedClass("remove"),delete this.navSelectedElements)},e.onNavStaticClick=function(e,t,r,n){"number"==typeof n&&this.navCompanion.selectCell(n)},e.deactivateAsNavFor=function(){this.removeNavSelectedElements()},e.destroyAsNavFor=function(){this.navCompanion&&(this.navCompanion.off("select",this.onNavCompanionSelect),this.off("staticClick",this.onNavStaticClick),delete this.navCompanion)},n}),function(t,r){"use strict";"function"==typeof define&&define.amd?define("imagesloaded/imagesloaded",["ev-emitter/ev-emitter"],function(e){return r(t,e)}):"object"==typeof module&&module.exports?module.exports=r(t,require("ev-emitter")):t.imagesLoaded=r(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){var o=t.jQuery,a=t.console;function s(e,t){for(var r in t)e[r]=t[r];return e}var u=Array.prototype.slice;function l(e,t,r){if(!(this instanceof l))return new l(e,t,r);var n,i=e;"string"==typeof e&&(i=document.querySelectorAll(e)),i?(this.elements=(n=i,Array.isArray(n)?n:"object"==typeof n&&"number"==typeof n.length?u.call(n):[n]),this.options=s({},this.options),"function"==typeof t?r=t:s(this.options,t),r&&this.on("always",r),this.getImages(),o&&(this.jqDeferred=new o.Deferred),setTimeout(this.check.bind(this))):a.error("Bad element for imagesLoaded "+(i||e))}(l.prototype=Object.create(e.prototype)).options={},l.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},l.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&c[t]){for(var r=e.querySelectorAll("img"),n=0;n<r.length;n++){var i=r[n];this.addImage(i)}if("string"==typeof this.options.background)for(var o=e.querySelectorAll(this.options.background),n=0;n<o.length;n++){var a=o[n];this.addElementBackgroundImages(a)}}};var c={1:!0,9:!0,11:!0};function r(e){this.img=e}function n(e,t){this.url=e,this.element=t,this.img=new Image}return l.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var r=/url\((['"])?(.*?)\1\)/gi,n=r.exec(t.backgroundImage);null!==n;){var i=n&&n[2];i&&this.addBackground(i,e),n=r.exec(t.backgroundImage)}},l.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},l.prototype.addBackground=function(e,t){var r=new n(e,t);this.images.push(r)},l.prototype.check=function(){var n=this;function t(e,t,r){setTimeout(function(){n.progress(e,t,r)})}this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?this.images.forEach(function(e){e.once("progress",t),e.check()}):this.complete()},l.prototype.progress=function(e,t,r){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+r,e,t)},l.prototype.complete=function(){var e,t=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(e=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[e](this))},(r.prototype=Object.create(e.prototype)).check=function(){this.getIsImageComplete()?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.proxyImage.src=this.img.src)},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(r.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},(l.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((o=e).fn.imagesLoaded=function(e,t){return new l(this,e,t).jqDeferred.promise(o(this))})})(),l}),function(r,n){"function"==typeof define&&define.amd?define(["flickity/js/index","imagesloaded/imagesloaded"],function(e,t){return n(r,e,t)}):"object"==typeof module&&module.exports?module.exports=n(r,require("flickity"),require("imagesloaded")):r.Flickity=n(r,r.Flickity,r.imagesLoaded)}(window,function(e,t,r){"use strict";t.createMethods.push("_createImagesLoaded");var n=t.prototype;return n._createImagesLoaded=function(){this.on("activate",this.imagesLoaded)},n.imagesLoaded=function(){var n;this.options.imagesLoaded&&r((n=this).slider).on("progress",function(e,t){var r=n.getParentCell(t.img);n.cellSizeChange(r&&r.element),n.options.freeScroll||n.positionSliderAtSelected()})},t}),function(e,t){"function"==typeof define&&define.amd?define(["flickity/js/index","fizzy-ui-utils/utils"],t):"object"==typeof module&&module.exports?module.exports=t(require("flickity"),require("fizzy-ui-utils")):t(e.Flickity,e.fizzyUIUtils)}(this,function(e,s){var t=e.Slide,i=t.prototype.updateTarget;t.prototype.updateTarget=function(){var r,n;i.apply(this,arguments),this.parent.options.fade&&(r=this.target-this.x,n=this.cells[0].x,this.cells.forEach(function(e){var t=e.x-n-r;e.renderPosition(t)}))},t.prototype.setOpacity=function(t){this.cells.forEach(function(e){e.element.style.opacity=t})};var r=e.prototype;e.createMethods.push("_createFade"),r._createFade=function(){this.fadeIndex=this.selectedIndex,this.prevSelectedIndex=this.selectedIndex,this.on("select",this.onSelectFade),this.on("dragEnd",this.onDragEndFade),this.on("settle",this.onSettleFade),this.on("activate",this.onActivateFade),this.on("deactivate",this.onDeactivateFade)};var n=r.updateSlides;r.updateSlides=function(){n.apply(this,arguments),this.options.fade&&this.slides.forEach(function(e,t){var r=t==this.selectedIndex?1:0;e.setOpacity(r)},this)},r.onSelectFade=function(){this.fadeIndex=Math.min(this.prevSelectedIndex,this.slides.length-1),this.prevSelectedIndex=this.selectedIndex},r.onSettleFade=function(){delete this.didDragEnd,this.options.fade&&(this.selectedSlide.setOpacity(1),this.slides[this.fadeIndex]&&this.fadeIndex!=this.selectedIndex&&this.slides[this.fadeIndex].setOpacity(0))},r.onDragEndFade=function(){this.didDragEnd=!0},r.onActivateFade=function(){this.options.fade&&this.element.classList.add("is-fade")},r.onDeactivateFade=function(){this.options.fade&&(this.element.classList.remove("is-fade"),this.slides.forEach(function(e){e.setOpacity("")}))};var o=r.positionSlider;r.positionSlider=function(){this.options.fade?(this.fadeSlides(),this.dispatchScrollEvent()):o.apply(this,arguments)};var a=r.positionSliderAtSelected;r.positionSliderAtSelected=function(){this.options.fade&&this.setTranslateX(0),a.apply(this,arguments)},r.fadeSlides=function(){var e,t,r,n,i,o;this.slides.length<2||(e=this.getFadeIndexes(),t=this.slides[e.a],r=this.slides[e.b],n=this.wrapDifference(t.target,r.target),i=this.wrapDifference(t.target,-this.x),i/=n,t.setOpacity(1-i),r.setOpacity(i),o=e.a,this.isDragging&&(o=.5<i?e.a:e.b),null!=this.fadeHideIndex&&this.fadeHideIndex!=o&&this.fadeHideIndex!=e.a&&this.fadeHideIndex!=e.b&&this.slides[this.fadeHideIndex].setOpacity(0),this.fadeHideIndex=o)},r.getFadeIndexes=function(){return this.isDragging||this.didDragEnd?this.options.wrapAround?this.getFadeDragWrapIndexes():this.getFadeDragLimitIndexes():{a:this.fadeIndex,b:this.selectedIndex}},r.getFadeDragWrapIndexes=function(){var e=this.slides.map(function(e,t){return this.getSlideDistance(-this.x,t)},this),t=e.map(function(e){return Math.abs(e)}),r=Math.min.apply(Math,t),n=t.indexOf(r),i=e[n],o=this.slides.length,a=0<=i?1:-1;return{a:n,b:s.modulo(n+a,o)}},r.getFadeDragLimitIndexes=function(){for(var e=0,t=0;t<this.slides.length-1;t++){var r=this.slides[t];if(-this.x<r.target)break;e=t}return{a:e,b:e+1}},r.wrapDifference=function(e,t){var r=t-e;if(!this.options.wrapAround)return r;var n=r+this.slideableWidth,i=r-this.slideableWidth;return Math.abs(n)<Math.abs(r)&&(r=n),Math.abs(i)<Math.abs(r)&&(r=i),r};var u=r._getWrapShiftCells;r._getWrapShiftCells=function(){this.options.fade||u.apply(this,arguments)};var l=r.shiftWrapCells;return r.shiftWrapCells=function(){this.options.fade||l.apply(this,arguments)},e});